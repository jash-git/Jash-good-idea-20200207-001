/*!
 * LiTV embed player
 * author: Elson Yeh (elson.yeh@tgc-taiwan.com.tw)
 * version: 1.2.4
 * hash: fc40eaa56203e442af28
 * chunkhash: fbcda809d875ac2c6c48
 * file: all.91df4b90.js
 * update: 1/3/2020, 3:31:04 PM
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=123)}([function(e,t,n){var r=n(1),i=n(23),o=n(10),a=n(11),s=n(18),l=function(e,t,n){var u,c,d,f,p=e&l.F,h=e&l.G,g=e&l.S,m=e&l.P,v=e&l.B,y=h?r:g?r[t]||(r[t]={}):(r[t]||{}).prototype,_=h?i:i[t]||(i[t]={}),b=_.prototype||(_.prototype={});for(u in h&&(n=t),n)d=((c=!p&&y&&void 0!==y[u])?y:n)[u],f=v&&c?s(d,r):m&&"function"==typeof d?s(Function.call,d):d,y&&a(y,u,d,e&l.U),_[u]!=d&&o(_,u,f),m&&b[u]!=d&&(b[u]=d)};r.core=i,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(68)("wks"),i=n(24),o=n(1).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){e.exports=!n(3)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(7),i=n(90),o=n(28),a=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(20),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(26);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(5),i=n(29);e.exports=n(4)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(1),i=n(10),o=n(12),a=n(24)("src"),s=Function.toString,l=(""+s).split("toString");n(23).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(0);r(r.S+r.F*!n(4),"Object",{defineProperty:n(5).f})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){"use strict";(function(e){n(149),n(63),n(101),n(113),n(118),n(119),n(79),n(115),n(49),n(109),n(120),n(55),n(30),n(110),n(37),n(108),n(116),n(114),n(45),n(40),n(85),n(64),n(21),n(22),n(65),n(60),n(44),n(87),n(154),n(155),n(86),n(66),n(156),n(36),n(35),n(61),n(43),n(157),n(58),n(59),n(13);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * LiTVPlayer.js
 * version: 1.7.7
 * author: Elson Yeh (elson.yeh@tgc-taiwan.com.tw)
 * update: 1/3/2020, 3:20:40 PM
 */var i="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function a(e,t){return e(t={exports:{}},t.exports),t.exports}var s=a(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),l=a(function(e){var t=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=t)}),u=(l.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),c=function(e,t,n){if(u(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},d=function(e){return"object"==r(e)?null!==e:"function"==typeof e},f=function(e){if(!d(e))throw TypeError(e+" is not an object!");return e},p=function(e){try{return!!e()}catch(e){return!0}},h=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),g=s.document,m=d(g)&&d(g.createElement),v=function(e){return m?g.createElement(e):{}},y=!h&&!p(function(){return 7!=Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a}),_=function(e,t){if(!d(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!d(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!d(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!d(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},b=Object.defineProperty,E={f:h?Object.defineProperty:function(e,t,n){if(f(e),t=_(t,!0),f(n),y)try{return b(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},S=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},w=h?function(e,t,n){return E.f(e,t,S(1,n))}:function(e,t,n){return e[t]=n,e},T={}.hasOwnProperty,A=function(e,t){return T.call(e,t)},I="prototype",P=function e(t,n,r){var i,o,a,u=t&e.F,d=t&e.G,f=t&e.S,p=t&e.P,h=t&e.B,g=t&e.W,m=d?l:l[n]||(l[n]={}),v=m[I],y=d?s:f?s[n]:(s[n]||{})[I];for(i in d&&(r=n),r)(o=!u&&y&&void 0!==y[i])&&A(m,i)||(a=o?y[i]:r[i],m[i]=d&&"function"!=typeof y[i]?r[i]:h&&o?c(a,s):g&&y[i]==a?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[I]=e[I],t}(a):p&&"function"==typeof a?c(Function.call,a):a,p&&((m.virtual||(m.virtual={}))[i]=a,t&e.R&&v&&!v[i]&&w(v,i,a)))};P.F=1,P.G=2,P.S=4,P.P=8,P.B=16,P.W=32,P.U=64,P.R=128;var C=P;C(C.S+C.F*!h,"Object",{defineProperty:E.f});var k=l.Object,L=function(e,t,n){return k.defineProperty(e,t,n)},R=a(function(e){e.exports={default:L,__esModule:!0}}),D=o(R),O=Object.freeze({}),M=Math.ceil,x=Math.floor,N=function(e){return isNaN(e=+e)?0:(e>0?x:M)(e)},j=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},U=w,F={},B={}.toString,G=function(e){return B.call(e).slice(8,-1)},V=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==G(e)?e.split(""):Object(e)},Y=function(e){return V(j(e))},z=Math.min,W=function(e){return e>0?z(N(e),9007199254740991):0},H=Math.max,Z=Math.min,K=a(function(e){var t=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:l.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),q=0,J=Math.random(),X=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++q+J).toString(36))},Q=K("keys"),$=function(e){return Q[e]||(Q[e]=X(e))},ee=function(e){return function(t,n,r){var i,o=Y(t),a=W(o.length),s=function(e,t){return(e=N(e))<0?H(e+t,0):Z(e,t)}(r,a);if(e&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}}(!1),te=$("IE_PROTO"),ne=function(e,t){var n,r=Y(e),i=0,o=[];for(n in r)n!=te&&A(r,n)&&o.push(n);for(;t.length>i;)A(r,n=t[i++])&&(~ee(o,n)||o.push(n));return o},re="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ie=Object.keys||function(e){return ne(e,re)},oe=h?Object.defineProperties:function(e,t){f(e);for(var n,r=ie(t),i=r.length,o=0;i>o;)E.f(e,n=r[o++],t[n]);return e},ae=s.document,se=ae&&ae.documentElement,le=$("IE_PROTO"),ue=function(){},ce="prototype",de=function(){var e,t=v("iframe"),n=re.length;for(t.style.display="none",se.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),de=e.F;n--;)delete de[ce][re[n]];return de()},fe=Object.create||function(e,t){var n;return null!==e?(ue[ce]=f(e),n=new ue,ue[ce]=null,n[le]=e):n=de(),void 0===t?n:oe(n,t)},pe=a(function(e){var t=K("wks"),n=s.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:X)("Symbol."+e))}).store=t}),he=E.f,ge=pe("toStringTag"),me=function(e,t,n){e&&!A(e=n?e:e.prototype,ge)&&he(e,ge,{configurable:!0,value:t})},ve={};w(ve,pe("iterator"),function(){return this});var ye=function(e){return Object(j(e))},_e=$("IE_PROTO"),be=Object.prototype,Ee=Object.getPrototypeOf||function(e){return e=ye(e),A(e,_e)?e[_e]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?be:null},Se=pe("iterator"),we=!([].keys&&"next"in[].keys()),Te="values",Ae=function(){return this},Ie=function(e,t,n,r,i,o,a){!function(e,t,n){e.prototype=fe(ve,{next:S(1,n)}),me(e,t+" Iterator")}(n,t,r);var s,l,u,c=function(e){if(!we&&e in h)return h[e];switch(e){case"keys":case Te:return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",f=i==Te,p=!1,h=e.prototype,g=h[Se]||h["@@iterator"]||i&&h[i],m=g||c(i),v=i?f?c("entries"):m:void 0,y="Array"==t&&h.entries||g;if(y&&(u=Ee(y.call(new e)))!==Object.prototype&&u.next&&me(u,d,!0),f&&g&&g.name!==Te&&(p=!0,m=function(){return g.call(this)}),!a||!we&&!p&&h[Se]||w(h,Se,m),F[t]=m,F[d]=Ae,i)if(s={values:f?m:c(Te),keys:o?m:c("keys"),entries:v},a)for(l in s)l in h||U(h,l,s[l]);else C(C.P+C.F*(we||p),t,s);return s},Pe=function(e){return function(t,n){var r,i,o=String(j(t)),a=N(n),s=o.length;return a<0||a>=s?e?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?e?o.charAt(a):r:e?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}(!0);Ie(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Pe(t,n),this._i+=e.length,{value:e,done:!1})});var Ce=function(e,t){return{value:t,done:!!e}};Ie(Array,"Array",function(e,t){this._t=Y(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Ce(1)):Ce(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");F.Arguments=F.Array;for(var ke=pe("toStringTag"),Le="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Re=0;Re<Le.length;Re++){var De=Le[Re],Oe=s[De],Me=Oe&&Oe.prototype;Me&&!Me[ke]&&w(Me,ke,De),F[De]=F.Array}var xe=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:w(e,r,t[r]);return e},Ne=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e},je=function(e,t,n,r){try{return r?t(f(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&f(i.call(e)),t}},Ue=pe("iterator"),Fe=Array.prototype,Be=function(e){return void 0!==e&&(F.Array===e||Fe[Ue]===e)},Ge=pe("toStringTag"),Ve="Arguments"==G(function(){return arguments}()),Ye=function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Ge))?n:Ve?G(t):"Object"==(r=G(t))&&"function"==typeof t.callee?"Arguments":r},ze=pe("iterator"),We=l.getIteratorMethod=function(e){if(null!=e)return e[ze]||e["@@iterator"]||F[Ye(e)]},He=a(function(e){var t={},n={},r=e.exports=function(e,r,i,o,a){var s,l,u,d,p=a?function(){return e}:We(e),h=c(i,o,r?2:1),g=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(Be(p)){for(s=W(e.length);s>g;g++)if((d=r?h(f(l=e[g])[0],l[1]):h(e[g]))===t||d===n)return d}else for(u=p.call(e);!(l=u.next()).done;)if((d=je(u,h,l.value,r))===t||d===n)return d};r.BREAK=t,r.RETURN=n}),Ze=pe("species"),Ke=function(e){var t="function"==typeof l[e]?l[e]:s[e];h&&t&&!t[Ze]&&E.f(t,Ze,{configurable:!0,get:function(){return this}})},qe=a(function(e){var t=X("meta"),n=E.f,i=0,o=Object.isExtensible||function(){return!0},a=!p(function(){return o(Object.preventExtensions({}))}),s=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},l=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!d(e))return"symbol"==r(e)?e:("string"==typeof e?"S":"P")+e;if(!A(e,t)){if(!o(e))return"F";if(!n)return"E";s(e)}return e[t].i},getWeak:function(e,n){if(!A(e,t)){if(!o(e))return!0;if(!n)return!1;s(e)}return e[t].w},onFreeze:function(e){return a&&l.NEED&&o(e)&&!A(e,t)&&s(e),e}}}),Je=(qe.KEY,qe.NEED,qe.fastKey,qe.getWeak,qe.onFreeze,function(e,t){if(!d(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}),Xe=E.f,Qe=qe.fastKey,$e=h?"_s":"size",et=function(e,t){var n,r=Qe(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n},tt={getConstructor:function(e,t,n,r){var i=e(function(e,o){Ne(e,i,t,"_i"),e._t=t,e._i=fe(null),e._f=void 0,e._l=void 0,e[$e]=0,null!=o&&He(o,n,e[r],e)});return xe(i.prototype,{clear:function(){for(var e=Je(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[$e]=0},delete:function(e){var n=Je(this,t),r=et(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[$e]--}return!!r},forEach:function(e){Je(this,t);for(var n,r=c(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!et(Je(this,t),e)}}),h&&Xe(i.prototype,"size",{get:function(){return Je(this,t)[$e]}}),i},def:function(e,t,n){var r,i,o=et(e,t);return o?o.v=n:(e._l=o={i:i=Qe(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[$e]++,"F"!==i&&(e._i[i]=o)),e},getEntry:et,setStrong:function(e,t,n){Ie(e,t,function(e,n){this._t=Je(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?Ce(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,Ce(1))},n?"entries":"values",!n,!0),Ke(t)}},nt=Array.isArray||function(e){return"Array"==G(e)},rt=pe("species"),it=function(e,t){return new(function(e){var t;return nt(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!nt(t.prototype)||(t=void 0),d(t)&&null===(t=t[rt])&&(t=void 0)),void 0===t?Array:t}(e))(t)},ot=E.f,at=function(e,t){var n=1==e,r=2==e,i=3==e,o=4==e,a=6==e,s=5==e||a,l=t||it;return function(t,u,d){for(var f,p,h=ye(t),g=V(h),m=c(u,d,3),v=W(g.length),y=0,_=n?l(t,v):r?l(t,0):void 0;v>y;y++)if((s||y in g)&&(p=m(f=g[y],y,h),e))if(n)_[y]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return y;case 2:_.push(f)}else if(o)return!1;return a?-1:i||o?o:_}}(0);!function(e,t,n,r,i,o){var a=s[e],l=a,u=i?"set":"add",c=l&&l.prototype,f={};h&&"function"==typeof l&&(o||c.forEach&&!p(function(){(new l).entries().next()}))?(l=t(function(t,n){Ne(t,l,e,"_c"),t._c=new a,null!=n&&He(n,i,t[u],t)}),at("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in c&&(!o||"clear"!=e)&&w(l.prototype,e,function(n,r){if(Ne(this,l,e),!t&&o&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),o||ot(l.prototype,"size",{get:function(){return this._c.size}})):(l=r.getConstructor(t,e,i,u),xe(l.prototype,n),qe.NEED=!0),me(l,e),f[e]=l,C(C.G+C.W+C.F,f),o||r.setStrong(l,e,i)}("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=tt.getEntry(Je(this,"Map"),e);return t&&t.v},set:function(e,t){return tt.def(Je(this,"Map"),0===e?0:e,t)}},tt,!0);C(C.P+C.R,"Map",{toJSON:function(e){return function(){if(Ye(this)!=e)throw TypeError(e+"#toJSON isn't generic");return function(e,t){var n=[];return He(e,!1,n.push,n,t),n}(this)}}("Map")});!function(e){C(C.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}("Map");(function(e){C(C.S,e,{from:function(e){var t,n,r,i,o=arguments[1];return u(this),(t=void 0!==o)&&u(o),null==e?new this:(n=[],t?(r=0,i=c(o,arguments[2],2),He(e,!1,function(e){n.push(i(e,r++))})):He(e,!1,n.push,n),new this(n))}})})("Map"),function(e){e&&e.default}(O);var st=l.Map,lt=o(a(function(e){e.exports={default:st,__esModule:!0}})),ut=a(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}),ct=o(ut),dt=a(function(e,t){t.__esModule=!0;var n,r=(n=R)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,r.default)(e,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()}),ft=o(dt),pt=function(e,t,n){t in e?E.f(e,t,S(0,n)):e[t]=n},ht=pe("iterator"),gt=!1;try{[7][ht]().return=function(){gt=!0}}catch(i){}var mt=function(e,t){if(!t&&!gt)return!1;var n=!1;try{var r=[7],i=r[ht]();i.next=function(){return{done:n=!0}},r[ht]=function(){return i},e(r)}catch(e){}return n};C(C.S+C.F*!mt(function(e){}),"Array",{from:function(e){var t,n,r,i,o=ye(e),a="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,u=void 0!==l,d=0,f=We(o);if(u&&(l=c(l,s>2?arguments[2]:void 0,2)),null==f||a==Array&&Be(f))for(n=new a(t=W(o.length));t>d;d++)pt(n,d,u?l(o[d],d):o[d]);else for(i=f.call(o),n=new a;!(r=i.next()).done;d++)pt(n,d,u?je(i,l,[r.value,d],!0):r.value);return n.length=d,n}});var vt,yt,_t,bt=l.Array.from,Et=a(function(e){e.exports={default:bt,__esModule:!0}}),St=o(Et),wt=a(function(e,t){t.__esModule=!0;var n,r=(n=Et)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,r.default)(e)}}),Tt=o(wt),At=pe("species"),It=function(e,t){var n,r=f(e).constructor;return void 0===r||null==(n=f(r)[At])?t:u(n)},Pt=s.process,Ct=s.setImmediate,kt=s.clearImmediate,Lt=s.MessageChannel,Rt=s.Dispatch,Dt=0,Ot={},Mt="onreadystatechange",xt=function(){var e=+this;if(Ot.hasOwnProperty(e)){var t=Ot[e];delete Ot[e],t()}},Nt=function(e){xt.call(e.data)};Ct&&kt||(Ct=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return Ot[++Dt]=function(){!function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}e.apply(n,t)}("function"==typeof e?e:Function(e),t)},vt(Dt),Dt},kt=function(e){delete Ot[e]},"process"==G(Pt)?vt=function(e){Pt.nextTick(c(xt,e,1))}:Rt&&Rt.now?vt=function(e){Rt.now(c(xt,e,1))}:Lt?(_t=(yt=new Lt).port2,yt.port1.onmessage=Nt,vt=c(_t.postMessage,_t,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(vt=function(e){s.postMessage(e+"","*")},s.addEventListener("message",Nt,!1)):vt=Mt in v("script")?function(e){se.appendChild(v("script"))[Mt]=function(){se.removeChild(this),xt.call(e)}}:function(e){setTimeout(c(xt,e,1),0)});var jt={set:Ct,clear:kt},Ut=jt.set,Ft=s.MutationObserver||s.WebKitMutationObserver,Bt=s.process,Gt=s.Promise,Vt="process"==G(Bt);function Yt(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=u(t),this.reject=u(n)}var zt,Wt,Ht,Zt,Kt={f:function(e){return new Yt(e)}},qt=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Jt=s.navigator,Xt=Jt&&Jt.userAgent||"",Qt=function(e,t){if(f(e),d(t)&&t.constructor===e)return t;var n=Kt.f(e);return(0,n.resolve)(t),n.promise},$t=jt.set,en=function(){var e,t,n,r=function(){var r,i;for(Vt&&(r=Bt.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(Vt)n=function(){Bt.nextTick(r)};else if(!Ft||s.navigator&&s.navigator.standalone)if(Gt&&Gt.resolve){var i=Gt.resolve(void 0);n=function(){i.then(r)}}else n=function(){Ut.call(s,r)};else{var o=!0,a=document.createTextNode("");new Ft(r).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}(),tn="Promise",nn=s.TypeError,rn=s.process,on=rn&&rn.versions,an=on&&on.v8||"",sn=s[tn],ln="process"==Ye(rn),un=function(){},cn=Wt=Kt.f,dn=!!function(){try{var e=sn.resolve(1),t=(e.constructor={})[pe("species")]=function(e){e(un,un)};return(ln||"function"==typeof PromiseRejectionEvent)&&e.then(un)instanceof t&&0!==an.indexOf("6.6")&&-1===Xt.indexOf("Chrome/66")}catch(e){}}(),fn=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},pn=function(e,t){if(!e._n){e._n=!0;var n=e._c;en(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&mn(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?u(nn("Promise-chain cycle")):(o=fn(n))?o.call(n,l,u):l(n)):u(r)}catch(e){c&&!a&&c.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&hn(e)})}},hn=function(e){$t.call(s,function(){var t,n,r,i=e._v,o=gn(e);if(o&&(t=qt(function(){ln?rn.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=ln||gn(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},gn=function(e){return 1!==e._h&&0===(e._a||e._c).length},mn=function(e){$t.call(s,function(){var t;ln?rn.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},vn=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),pn(t,!0))},yn=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw nn("Promise can't be resolved itself");(n=fn(t))?en(function(){var i={_w:r,_d:!1};try{n.call(t,c(e,i,1),c(vn,i,1))}catch(e){vn.call(i,e)}}):(r._v=t,r._s=1,pn(r,!1))}catch(t){vn.call({_w:r,_d:!1},t)}}};dn||(sn=function(e){Ne(this,sn,tn,"_h"),u(e),zt.call(this);try{e(c(yn,this,1),c(vn,this,1))}catch(e){vn.call(this,e)}},(zt=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=xe(sn.prototype,{then:function(e,t){var n=cn(It(this,sn));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=ln?rn.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&pn(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),Ht=function(){var e=new zt;this.promise=e,this.resolve=c(yn,e,1),this.reject=c(vn,e,1)},Kt.f=cn=function(e){return e===sn||e===Zt?new Ht(e):Wt(e)}),C(C.G+C.W+C.F*!dn,{Promise:sn}),me(sn,tn),Ke(tn),Zt=l[tn],C(C.S+C.F*!dn,tn,{reject:function(e){var t=cn(this);return(0,t.reject)(e),t.promise}}),C(C.S+!0*C.F,tn,{resolve:function(e){return Qt(this===Zt?sn:this,e)}}),C(C.S+C.F*!(dn&&mt(function(e){sn.all(e).catch(un)})),tn,{all:function(e){var t=this,n=cn(t),r=n.resolve,i=n.reject,o=qt(function(){var n=[],o=0,a=1;He(e,!1,function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=cn(t),r=n.reject,i=qt(function(){He(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}}),C(C.P+C.R,"Promise",{finally:function(e){var t=It(this,l.Promise||s.Promise),n="function"==typeof e;return this.then(n?function(n){return Qt(t,e()).then(function(){return n})}:e,n?function(n){return Qt(t,e()).then(function(){throw n})}:e)}}),C(C.S,"Promise",{try:function(e){var t=Kt.f(this),n=qt(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}});var _n=l.Promise,bn=o(a(function(e){e.exports={default:_n,__esModule:!0}})),En={f:Object.getOwnPropertySymbols},Sn={f:{}.propertyIsEnumerable},wn=Object.assign,Tn=!wn||p(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=wn({},e)[n]||Object.keys(wn({},t)).join("")!=r})?function(e,t){for(var n=ye(e),r=arguments.length,i=1,o=En.f,a=Sn.f;r>i;)for(var s,l=V(arguments[i++]),u=o?ie(l).concat(o(l)):ie(l),c=u.length,d=0;c>d;)a.call(l,s=u[d++])&&(n[s]=l[s]);return n}:wn;C(C.S+C.F,"Object",{assign:Tn});var An=l.Object.assign,In=o(a(function(e){e.exports={default:An,__esModule:!0}})),Pn=function(e,t){var n=(l.Object||{})[e]||Object[e],r={};r[e]=t(n),C(C.S+C.F*p(function(){n(1)}),"Object",r)};Pn("getPrototypeOf",function(){return function(e){return Ee(ye(e))}});var Cn=l.Object.getPrototypeOf,kn=a(function(e){e.exports={default:Cn,__esModule:!0}}),Ln=o(kn),Rn={f:pe},Dn=Rn.f("iterator"),On=a(function(e){e.exports={default:Dn,__esModule:!0}});o(On);var Mn=E.f,xn=function(e){var t=l.Symbol||(l.Symbol={});"_"==e.charAt(0)||e in t||Mn(t,e,{value:Rn.f(e)})},Nn=re.concat("length","prototype"),jn={f:Object.getOwnPropertyNames||function(e){return ne(e,Nn)}},Un=jn.f,Fn={}.toString,Bn="object"==("undefined"==typeof window?"undefined":r(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gn={f:function(e){return Bn&&"[object Window]"==Fn.call(e)?function(e){try{return Un(e)}catch(e){return Bn.slice()}}(e):Un(Y(e))}},Vn=Object.getOwnPropertyDescriptor,Yn={f:h?Vn:function(e,t){if(e=Y(e),t=_(t,!0),y)try{return Vn(e,t)}catch(e){}if(A(e,t))return S(!Sn.f.call(e,t),e[t])}},zn=qe.KEY,Wn=Yn.f,Hn=E.f,Zn=Gn.f,Kn=s.Symbol,qn=s.JSON,Jn=qn&&qn.stringify,Xn="prototype",Qn=pe("_hidden"),$n=pe("toPrimitive"),er={}.propertyIsEnumerable,tr=K("symbol-registry"),nr=K("symbols"),rr=K("op-symbols"),ir=Object[Xn],or="function"==typeof Kn,ar=s.QObject,sr=!ar||!ar[Xn]||!ar[Xn].findChild,lr=h&&p(function(){return 7!=fe(Hn({},"a",{get:function(){return Hn(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=Wn(ir,t);r&&delete ir[t],Hn(e,t,n),r&&e!==ir&&Hn(ir,t,r)}:Hn,ur=function(e){var t=nr[e]=fe(Kn[Xn]);return t._k=e,t},cr=or&&"symbol"==r(Kn.iterator)?function(e){return"symbol"==r(e)}:function(e){return e instanceof Kn},dr=function e(t,n,r){return t===ir&&e(rr,n,r),f(t),n=_(n,!0),f(r),A(nr,n)?(r.enumerable?(A(t,Qn)&&t[Qn][n]&&(t[Qn][n]=!1),r=fe(r,{enumerable:S(0,!1)})):(A(t,Qn)||Hn(t,Qn,S(1,{})),t[Qn][n]=!0),lr(t,n,r)):Hn(t,n,r)},fr=function(e,t){f(e);for(var n,r=function(e){var t=ie(e),n=En.f;if(n)for(var r,i=n(e),o=Sn.f,a=0;i.length>a;)o.call(e,r=i[a++])&&t.push(r);return t}(t=Y(t)),i=0,o=r.length;o>i;)dr(e,n=r[i++],t[n]);return e},pr=function(e){var t=er.call(this,e=_(e,!0));return!(this===ir&&A(nr,e)&&!A(rr,e))&&(!(t||!A(this,e)||!A(nr,e)||A(this,Qn)&&this[Qn][e])||t)},hr=function(e,t){if(e=Y(e),t=_(t,!0),e!==ir||!A(nr,t)||A(rr,t)){var n=Wn(e,t);return!n||!A(nr,t)||A(e,Qn)&&e[Qn][t]||(n.enumerable=!0),n}},gr=function(e){for(var t,n=Zn(Y(e)),r=[],i=0;n.length>i;)A(nr,t=n[i++])||t==Qn||t==zn||r.push(t);return r},mr=function(e){for(var t,n=e===ir,r=Zn(n?rr:Y(e)),i=[],o=0;r.length>o;)!A(nr,t=r[o++])||n&&!A(ir,t)||i.push(nr[t]);return i};or||(U((Kn=function(){if(this instanceof Kn)throw TypeError("Symbol is not a constructor!");var e=X(arguments.length>0?arguments[0]:void 0);return h&&sr&&lr(ir,e,{configurable:!0,set:function t(n){this===ir&&t.call(rr,n),A(this,Qn)&&A(this[Qn],e)&&(this[Qn][e]=!1),lr(this,e,S(1,n))}}),ur(e)})[Xn],"toString",function(){return this._k}),Yn.f=hr,E.f=dr,jn.f=Gn.f=gr,Sn.f=pr,En.f=mr,Rn.f=function(e){return ur(pe(e))}),C(C.G+C.W+C.F*!or,{Symbol:Kn});for(var vr="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),yr=0;vr.length>yr;)pe(vr[yr++]);for(var _r=ie(pe.store),br=0;_r.length>br;)xn(_r[br++]);C(C.S+C.F*!or,"Symbol",{for:function(e){return A(tr,e+="")?tr[e]:tr[e]=Kn(e)},keyFor:function(e){if(!cr(e))throw TypeError(e+" is not a symbol!");for(var t in tr)if(tr[t]===e)return t},useSetter:function(){sr=!0},useSimple:function(){sr=!1}}),C(C.S+C.F*!or,"Object",{create:function(e,t){return void 0===t?fe(e):fr(fe(e),t)},defineProperty:dr,defineProperties:fr,getOwnPropertyDescriptor:hr,getOwnPropertyNames:gr,getOwnPropertySymbols:mr}),qn&&C(C.S+C.F*(!or||p(function(){var e=Kn();return"[null]"!=Jn([e])||"{}"!=Jn({a:e})||"{}"!=Jn(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(d(t)||void 0!==e)&&!cr(e))return nt(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!cr(t))return t}),r[1]=t,Jn.apply(qn,r)}}),Kn[Xn][$n]||w(Kn[Xn],$n,Kn[Xn].valueOf),me(Kn,"Symbol"),me(Math,"Math",!0),me(s.JSON,"JSON",!0),xn("asyncIterator"),xn("observable");var Er=l.Symbol,Sr=a(function(e){e.exports={default:Er,__esModule:!0}});o(Sr);var wr=a(function(e,t){t.__esModule=!0;var n=a(On),i=a(Sr),o="function"==typeof i.default&&"symbol"==r(n.default)?function(e){return r(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":r(e)};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(n.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}}),Tr=o(wr),Ar=a(function(e,t){t.__esModule=!0;var n,r=(n=wr)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,r.default)(t))&&"function"!=typeof t?e:t}}),Ir=o(Ar),Pr=function(e,t){if(f(e),!d(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},Cr={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=c(Function.call,Yn.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return Pr(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:Pr};C(C.S,"Object",{setPrototypeOf:Cr.set});var kr=l.Object.setPrototypeOf,Lr=a(function(e){e.exports={default:kr,__esModule:!0}});o(Lr),C(C.S,"Object",{create:fe});var Rr=l.Object,Dr=function(e,t){return Rr.create(e,t)},Or=a(function(e){e.exports={default:Dr,__esModule:!0}}),Mr=o(Or),xr=a(function(e,t){t.__esModule=!0;var n=o(Lr),r=o(Or),i=o(wr);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,r.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}}),Nr=o(xr),jr=Yn.f;Pn("getOwnPropertyDescriptor",function(){return function(e,t){return jr(Y(e),t)}});var Ur=l.Object,Fr=function(e,t){return Ur.getOwnPropertyDescriptor(e,t)},Br=a(function(e){e.exports={default:Fr,__esModule:!0}});o(Br);var Gr=a(function(e,t){t.__esModule=!0;var n=i(kn),r=i(Br);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,i,o){null===t&&(t=Function.prototype);var a=(0,r.default)(t,i);if(void 0===a){var s=(0,n.default)(t);return null===s?void 0:e(s,i,o)}if("value"in a)return a.value;var l=a.get;return void 0!==l?l.call(o):void 0}}),Vr=o(Gr);!function(e,t){function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var n,r,i,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout(function(){n(),i=null},r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function i(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function a(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(e,t){for(var n=t;n;){if(n==e)return!0;n=l(n)}return!1}function l(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype?"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}):(r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]})},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(e,"resize",this._checkForIntersections,!0),i(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(e,"resize",this._checkForIntersections,!0),o(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),r=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(i){var o=i.element,s=a(o),l=this._rootContainsTarget(o),u=i.entry,c=t&&l&&this._computeTargetAndRootIntersection(o,r),d=i.entry=new n({time:e.performance&&performance.now&&performance.now(),target:o,boundingClientRect:s,rootBounds:r,intersectionRect:c});u?t&&l?this._hasCrossedThreshold(u,d)&&this._queuedEntries.push(d):u&&u.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(n,r){if("none"!=e.getComputedStyle(n).display){for(var i,o,s,u,c,d,f,p,h=a(n),g=l(n),m=!1;!m;){var v=null,y=1==g.nodeType?e.getComputedStyle(g):{};if("none"==y.display)return;if(g==this.root||g==t?(m=!0,v=r):g!=t.body&&g!=t.documentElement&&"visible"!=y.overflow&&(v=a(g)),v&&(i=v,o=h,s=Math.max(i.top,o.top),u=Math.min(i.bottom,o.bottom),c=Math.max(i.left,o.left),p=u-s,!(h=(f=(d=Math.min(i.right,o.right))-c)>=0&&p>=0&&{top:s,bottom:u,left:c,right:d,width:f,height:p})))break;g=l(g)}return h}},r.prototype._getRootRect=function(){var e;if(this.root)e=a(this.root);else{var n=t.documentElement,r=t.body;e={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100}),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||s(t,this.root)},r.prototype._rootContainsTarget=function(e){return s(this.root||t,e)},r.prototype._registerInstance=function(){},r.prototype._unregisterInstance=function(){},e.IntersectionObserver=r,e.IntersectionObserverEntry=n)}(window,document);var Yr={AD_ERROR:"ad_error",AD_PROGRESS:"ad_progress",AD_REPORT:"ad_report",AD_REQUEST:"ad_request",AD_STREAM_COMPLETE:"ad_stream_complete",BEFORE_RESUME:"beforeresume",BEFORE_SEEK:"beforeseek",BUFFER:"buffer",CLICK:"click",CLICK_BRAND:"click_brand",CLICK_CAPTION:"click_caption",CLICK_LOGO:"click_logo",CLICK_PAUSE_BANNER:"click_pause_banner",CLICK_SKIP:"click_skip",COLLAPSE_COMPANION_AD:"collapse_companion_ad",DISABLE:"disable",ENDED:"ended",ERROR:"error",FILM_FINISH:"film_finish",FLASH_DISABLED:"flashdisabled",FULLSCREEN:"fullscreen",FULLSCREEN_EXIT:"fullscreen-exit",IMPRESSION:"impression",IN_VIEWPORT:"in_viewport",LINEAR_AD_MEDIA_COMPLETE:"linear_ad_media_complete",LINEAR_AD_MEDIA_START:"linear_ad_media_start",LOAD:"load",MULTIPLE_ACCOUNT_USING:"multiple_account_using",MUTE:"mute",NONLINEAR_AD_MEDIA_COMPLETE:"nonlinear_ad_media_complete",NONLINEAR_AD_MEDIA_START:"nonlinear_ad_media_start",OUT_VIEWPORT:"out_viewport",PAUSE:"pause",PAUSE_BANNER_IMPRESSION:"pause_banner_impression",PAUSE_FOR_AD:"pause_for_ad",PROGRESS:"progress",PUBLISH_COMPANION_AD:"publish_companion_ad",QUALITY:"quality",QUALITY_MEUN_OPEN:"quality_meun_open",READY:"ready",RESUM_FOR_AD:"resum_for_ad",RESUME:"resume",SEEK:"seek",SHUTDOWN:"shutdown",SPEED:"speed",STOP:"stop",UNLOAD:"unload",VOLUME:"volume",WILL_SHUTDOWN:"will_shutdown"},zr=a(function(e,t){
/*!
   * UAParser.js v0.7.19
   * Lightweight JavaScript-based User-Agent string parser
   * https://github.com/faisalman/ua-parser-js
   *
   * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
   * Dual licensed under GPLv2 or MIT
   */
!function(n,i){var o="model",a="name",s="type",l="vendor",u="version",c="mobile",d="tablet",f={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(e,t){for(var n,i,o,a,s,l,u=0;u<t.length&&!s;){var c=t[u],d=t[u+1];for(n=i=0;n<c.length&&!s;)if(s=c[n++].exec(e))for(o=0;o<d.length;o++)l=s[++i],"object"==r(a=d[o])&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,l):this[a[0]]=a[1]:3==a.length?"function"!=typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=l?l.replace(a[1],a[2]):void 0:this[a[0]]=l?a[1].call(this,l,a[2]):void 0:4==a.length&&(this[a[0]]=l?a[3].call(this,l.replace(a[1],a[2])):void 0):this[a]=l||void 0;u+=2}},str:function(e,t){for(var n in t)if("object"==r(t[n])&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,u],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[a,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],u],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[a,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[a,"Puffin"],u],[/(focus)\/([\w\.]+)/i],[[a,"Firefox Focus"],u],[/(opt)\/([\w\.]+)/i],[[a,"Opera Touch"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],u],[/(brave)\/([\w\.]+)/i],[[a,"Brave"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[a,u],[/(QQ)\/([\d\.]+)/i],[a,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[a,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[a,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[a,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[a],[/(LBBROWSER)/i],[a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[a,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[a,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[a,u],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[a,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[a,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[a,u],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[a,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,a],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[a,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[u,p.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",f.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",f.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",f.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,l,[s,d]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[l,"Apple"],[s,d]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,o,[s,d]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[o,[l,"Amazon"],[s,d]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[o,p.str,h.device.amazon.model],[l,"Amazon"],[s,c]],[/android.+aft([bms])\sbuild/i],[o,[l,"Amazon"],[s,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,l,[s,c]],[/\((ip[honed|\s\w*]+);/i],[o,[l,"Apple"],[s,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,o,[s,c]],[/\(bb10;\s(\w+)/i],[o,[l,"BlackBerry"],[s,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[l,"Asus"],[s,d]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[o,"Xperia Tablet"],[s,d]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[o,[l,"Sony"],[s,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,o,[s,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[l,"Nvidia"],[s,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[l,"Sony"],[s,"console"]],[/(sprint\s(\w+))/i],[[l,p.str,h.device.sprint.vendor],[o,p.str,h.device.sprint.model],[s,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,o,[s,d]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[o,/_/g," "],[s,c]],[/(nexus\s9)/i],[o,[l,"HTC"],[s,d]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[o,[l,"Huawei"],[s,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,o,[s,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[l,"Microsoft"],[s,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,"Microsoft"],[s,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[l,"Motorola"],[s,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[l,"Motorola"],[s,d]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,f.trim],[o,f.trim],[s,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,"Samsung"],[s,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[s,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],o,[s,d]],[/smart-tv.+(samsung)/i],[l,[s,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],o,[s,c]],[/sie-(\w*)/i],[o,[l,"Siemens"],[s,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],o,[s,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[l,"Acer"],[s,d]],[/android.+([vl]k\-?\d{3})\s+build/i],[o,[l,"LG"],[s,d]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],o,[s,d]],[/(lg) netcast\.tv/i],[l,o,[s,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[o,[l,"LG"],[s,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[l,"Lenovo"],[s,d]],[/linux;.+((jolla));/i],[l,o,[s,c]],[/((pebble))app\/[\d\.]+\s/i],[l,o,[s,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,o,[s,c]],[/crkey/i],[[o,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[l,"Google"],[s,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[o,[l,"Google"],[s,d]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[o,[l,"Google"],[s,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[s,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[s,d]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[o,[l,"Meizu"],[s,d]],[/(mz)-([\w-]{2,})/i],[[l,"Meizu"],o,[s,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[o,[l,"OnePlus"],[s,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[o,[l,"RCA"],[s,d]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[o,[l,"Dell"],[s,d]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[o,[l,"Verizon"],[s,d]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],o,[s,d]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[o,[l,"NuVision"],[s,d]],[/android.+;\s(k88)\sbuild/i],[o,[l,"ZTE"],[s,d]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[o,[l,"Swiss"],[s,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[o,[l,"Swiss"],[s,d]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[o,[l,"Zeki"],[s,d]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],o,[s,d]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[o,[l,"Insignia"],[s,d]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[o,[l,"NextBook"],[s,d]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],o,[s,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],o,[s,c]],[/android.+;\s(PH-1)\s/i],[o,[l,"Essential"],[s,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[o,[l,"Envizen"],[s,d]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,o,[s,d]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[o,[l,"MachSpeed"],[s,d]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,o,[s,d]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[o,[l,"Rotor"],[s,d]],[/android.+(KS(.+))\s+build/i],[o,[l,"Amazon"],[s,d]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,o,[s,d]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[s,f.lowerize],l,o],[/(android[\w\.\s\-]{0,9});.+build/i],[o,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[u,p.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[u,p.str,h.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[a,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[a,"Symbian"],u],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[a,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[a,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[a,u],[/(haiku)\s(\w+)/i],[a,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[a,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[a,u]]},m=function e(t,i){if("object"==r(t)&&(i=t,t=void 0),!(this instanceof e))return new e(t,i).getResult();var o=t||(n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),a=i?f.extend(g,i):g;return this.getBrowser=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,o,a.browser),e.major=f.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return p.rgx.call(e,o,a.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(e,o,a.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,o,a.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return p.rgx.call(e,o,a.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this};m.VERSION="0.7.19",m.BROWSER={NAME:a,MAJOR:"major",VERSION:u},m.CPU={ARCHITECTURE:"architecture"},m.DEVICE={MODEL:o,VENDOR:l,TYPE:s,CONSOLE:"console",MOBILE:c,SMARTTV:"smarttv",TABLET:d,WEARABLE:"wearable",EMBEDDED:"embedded"},m.ENGINE={NAME:a,VERSION:u},m.OS={NAME:a,VERSION:u},e.exports&&(t=e.exports=m),t.UAParser=m;var v=n&&(n.jQuery||n.Zepto);if(void 0!==v&&!v.ua){var y=new m;v.ua=y.getResult(),v.ua.get=function(){return y.getUA()},v.ua.set=function(e){y.setUA(e);var t=y.getResult();for(var n in t)v.ua[n]=t[n]}}}("object"==("undefined"==typeof window?"undefined":r(window))?window:i)}),Wr=(zr.UAParser,"function"==typeof fetch?fetch.bind():function(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest;for(var o in i.open(t.method||"get",e,!0),t.headers)i.setRequestHeader(o,t.headers[o]);function a(){var e,t=[],n=[],r={};return i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(i,o,a){t.push(o=o.toLowerCase()),n.push([o,a]),e=r[o],r[o]=e?e+","+a:a}),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:a,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return n},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}i.withCredentials="include"==t.credentials,i.onload=function(){n(a())},i.onerror=r,i.send(t.body||null)})}),Hr=function(){function e(){ct(this,e),this.events={}}return ft(e,[{key:"on",value:function(e,t,n,r){void 0===this.events[e]&&(this.events[e]=[]),1==n?this.events[e].unshift(t):this.events[e].push({fn:t,once:r||!1})}},{key:"one",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"off",value:function(e,t){if(this.events.hasOwnProperty(e)){for(var n=this.events[e],r=n.length;r--;)n[r].fn===t&&n.splice(r,1);0===this.events[e].length&&(this.events[e]=null,delete this.events[e])}}},{key:"trigger",value:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this,a=this.events[e],s={};return a instanceof Array&&a.length>0&&(s=this.createEvent(e,t),a.concat().reduce(function(t,n){if(!1===t)return!1;try{var i,a=(i=n.fn).call.apply(i,[null,s].concat(r));return 1==n.once&&o.off(e,n.fn),a}catch(e){return console.error(e),!0}},!0)),s}},{key:"createEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n instanceof Event)return this.setUpGatter(n,"type",e),"function"!=typeof n.getCarryInfo&&(n.getCarryInfo=function(){return null}),n;var r=document.createEvent("Event");for(var i in r.initEvent(e,!1,!0),r.preventDefault=function(){t.setUpGatter(r,"defaultPrevented",!0)},r.getCarryInfo=function(){return n},n)if(n.hasOwnProperty(i)){if("type"===i)throw'Cannot be converted to "Event" because the "type" field cannot be replaced.';r[i]=n[i]}return r}},{key:"setUpGatter",value:function(e,t,n){D?D(e,t,{get:function(){return n},configurable:!0}):e.__defineGetter__(t,function(){return n})}}]),e}();var Zr=function(){return function(e){return function(){return new bn(function(t,n){!function e(t,n,r){var i,o=void 0===t?"undefined":Tr(t);"string"==o?n(t):!(i=t)||"object"!==(void 0===i?"undefined":Tr(i))&&"function"!=typeof i||"function"!=typeof i.then?"function"==o?e(t(),n,r):r("type error"):t.then(n).catch(r)}(e,t,n)})}}}(),Kr=function(){for(var e=window.requestAnimationFrame&&window.requestAnimationFrame.bind(window),t=["webkit","moz"],n=0;n<t.length&&!e;++n)e=window[t[n]+"RequestAnimationFrame"].bind(window);if(!e){var r=0;e=function(e){var t=Date.now||(new Date).getTime(),n=Math.max(r+16,t);return setTimeout(function(){e(r=n)},n-t)}}return function(){return new bn(function(t){return e(t)})}}(),qr=function(e){var t=!1,n=!1;function r(){t||n||(e.conf.keyboard=!1,n=!0)}return{stop:r,resume:function(){!t&&n&&(e.conf.keyboard=!0,n=!1)},setMode:function(e){"live"==e||"simulation_live"==e?(r(),t=!0):t=!1}}};function Jr(){var e=navigator.userAgent,t=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,n=/(msie) ([\w.]+)|Trident/gi.test(e),r=/WINDOWS NT 5\.[\d]+/gi.test(e),i=/WINDOWS NT 6\.0+/gi.test(e),o=/WINDOWS NT 6\.[2,3]+/gi.test(e),a=/Firefox/.test(e),s=function(){try{return window.self!==window.top}catch(e){return!0}}();return{isIOS:t,isIE:n,isXP:r,isVista:i,isWin8:o,isFirefox:a,inIframe:s,isIOSAndInIFrame:t&&s,supportLocalStorage:function(){try{return"object"===Tr(window.localStorage)&&(window.localStorage.LitvPlayerTestStorage="test",window.localStorage.removeItem("LitvPlayerTestStorage"),!0)}catch(e){return!1}}()}}var Xr=void 0,Qr=void 0;function $r(e){var t=[];return/\.m3u8/.test(e)?t=["application/x-mpegurl","application/vnd.apple.mpegurl"]:/\.mp4/.test(e)&&(t=["video/mp4"]),t.map(function(t){return{type:t,src:e}})}function ei(){return Math.random().toString(32).substring(2)}function ti(e,t,n){1==n?e.classList.contains(t)||e.classList.add(t):e.classList.contains(t)&&e.classList.remove(t)}function ni(e){return/\.svg/.test(e)?function(e){return Wr(e).then(function(e){return e.text()}).then(function(t){var n=(new window.DOMParser).parseFromString(t,"text/xml");(n=n.documentElement).style.width=0,n.style.height=0,document.body.appendChild(n);var r=n.getBBox();return document.body.removeChild(n),{url:e,width:Math.round(r.x+r.width),height:Math.round(r.y+r.height)}})}(e):function(e){return new bn(function(t,n){var r=new Image;function i(){t({url:e,width:r.width,height:r.height}),r.removeEventListener("load",i),r.removeEventListener("error",o),r=null}function o(e){n(e),r.removeEventListener("load",i),r.removeEventListener("error",o),r=null}r.addEventListener("load",i),r.addEventListener("error",o),r.src=e})}(e)}void 0!==document.hidden?(Xr="hidden",Qr="visibilitychange"):void 0!==document.msHidden?(Xr="msHidden",Qr="msvisibilitychange"):void 0!==document.webkitHidden&&(Xr="webkitHidden",Qr="webkitvisibilitychange");var ri=function(){try{var e=(new zr).getResult(),t=e.browser.name.toLowerCase(),n=e.browser.major,r=e.os.name.toLowerCase().slice(0,3),i=e.os.version;if(/^mobile\ /i.test(t)&&(t=t.replace(/^mobile\ /i,"")),t.length>3){var o=t.split("");t=o[0]+o[1]+o[o.length-1]}if(i.indexOf(".")>-1){var a=i.split(".");i=a[0]+a[1]}return t+n+r+i}catch(e){return console.error(e),""}}(),ii=function(){var e=-1;return{get:function(){return 1+(e=++e%99999)}}}(),oi=function(){function e(t){ct(this,e);var n=t.split(",")[1];n=decodeURIComponent(escape(window.atob(n))),this.oriSvg=n;var r=this.SVGStringToElement(n);this.linearGradientIdList=St(r.querySelectorAll("linearGradient")).map(function(e){return e.id})}return ft(e,[{key:"SVGStringToElement",value:function(e){return(new window.DOMParser).parseFromString(e,"text/xml").documentElement}},{key:"getSVGElement",value:function(){var e=this.linearGradientIdList.map(function(e){return{ori:e,new:ei()}}).reduce(function(e,t){return e.replace(new RegExp(t.ori,"g"),t.new)},this.oriSvg);return this.SVGStringToElement(e)}}]),e}(),ai=function(){var e=window.location.href;return{current:""!=window.location.port||/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/.test(e)?"development":/\/staging-/.test(e)?"staging":"production",DEVELOPMENT:"development",STAGING:"staging",PRODUCTION:"production"}}();function si(e,t){return void 0===e?t:e}var li=function(e){function t(){ct(this,t);var e=Ir(this,(t.__proto__||Ln(t)).call(this));return e._isIn=!1,e}return Nr(t,Hr),ft(t,[{key:"inViewport",value:function(){this._isIn=!0,this.trigger(Yr.IN_VIEWPORT)}},{key:"outViewport",value:function(){this._isIn=!1,this.trigger(Yr.OUT_VIEWPORT)}},{key:"isIn",get:function(){return this._isIn}}]),t}();function ui(e){return e?e.isIn:!document[Xr]}var ci={data:"",uid:null,position:"MC",is_logo:!1,is_linear:!0,click_through:"",duration:0,enable_countdown:!1},di=function(e){function t(e){ct(this,t);var n=Ir(this,(t.__proto__||Ln(t)).call(this));return n.imageAd=e,n.uids=[],n.removeAll=n.removeAll.bind(n),n}return Nr(t,Hr),ft(t,[{key:"assign",value:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"string"==typeof e&&(e={data:e}),"boolen"!=typeof e.disableControl&&(e.disableControl=r);var i=e.uid||ei();e.uid=i,this.uids.push(i);var o=In({},ci,e),a=this.imageAd.adsRequest(o);return a.onPauseRequested(function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,"PauseRequested",o)}).onAdMediaComplete(function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,"AdMediaComplete",o)}),a.close=function(){this.imageAd.remove(i),this.uids=this.uids.filter(function(e){return i!==e}),a.destroy(),a=null}.bind(this),a}},{key:"removeAll",value:function(){var e=this;this.uids.forEach(function(t){e.imageAd.remove(t)}),this.uids=[]}},{key:"on",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"on",this).apply(this,arguments),this}},{key:"one",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"one",this).apply(this,arguments),this}},{key:"off",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"off",this).apply(this,arguments),this}}]),t}(),fi=function(e){function t(e){ct(this,t);var n=Ir(this,(t.__proto__||Ln(t)).call(this));n.time=-1,n.clickFn=function(){};var r=document.createElement("A");return r.classList.add("countdown"),r.classList.add("hide"),r.innerHTML="<div class='ltp_countdown_text'><span class='ltp_countdown_count'></span><span class='ltp_purchase_tip'></span></div><div class='ltp_thumbnail'></div>",r.addEventListener("click",function(e){e.preventDefault(),n.clickFn(),n.trigger("click",{href:r.href})}),r.addEventListener("dblclick",function(e){return e.stopPropagation()},!0),n.view=r,n.$thumbnail=r.querySelector(".ltp_thumbnail"),n.$countView=r.querySelector(".ltp_countdown_count"),n.$purchaseTip=r.querySelector(".ltp_purchase_tip"),e.appendChild(r),n}return Nr(t,Hr),ft(t,[{key:"setThumbnail",value:function(e){this.thumbnail=e||""}},{key:"start",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.thumbnail?(this.view.classList.add("has_thumbnail"),this.$thumbnail.style.cssText="background-image:url("+this.thumbnail+")"):(this.view.classList.remove("has_thumbnail"),this.$thumbnail.style.cssText="display:none;"),e?(this.view.classList.remove("not_href"),this.view.href=e,this.$purchaseTip.innerText="免看廣告"):(this.view.classList.add("not_href"),this.view.href="javascript:void(0);",this.$purchaseTip.innerText=""),this.view.classList.remove("hide"),this.clickFn=t,-1!=n&&this.progress(n)}},{key:"progress",value:function(e){e!=this.time&&(-1==this.time&&this.view.classList.add("countdown_start"),this.time=e,0!=this.time&&(this.$countView.textContent=e))}},{key:"end",value:function(){this.view.classList.add("hide"),this.view.classList.remove("countdown_start"),this.view.removeAttribute("href"),this.time=-1,this.clickFn=function(){}}}]),t}();Pn("keys",function(){return function(e){return ie(ye(e))}});var pi=l.Object.keys,hi=o(a(function(e){e.exports={default:pi,__esModule:!0}})),gi=function(e){function t(){ct(this,t);var e=Ir(this,(t.__proto__||Ln(t)).call(this)),n=e;return e.channel=new(function(){function e(){ct(this,e)}return ft(e,[{key:"onRequest",value:function(e){return n.one("Request",e),this}},{key:"onPauseRequested",value:function(e){return n.one("PauseRequested",e),this}},{key:"onAdMediaStart",value:function(e){return n.on("AdMediaStart",e),this}},{key:"onAdMediaComplete",value:function(e){return n.on("AdMediaComplete",e),this}},{key:"onImpression",value:function(e){return n.one("Impression",e),this}},{key:"onCompleted",value:function(e){return n.one("Completed",e),this}},{key:"onError",value:function(e){return n.on("Error",e),this}},{key:"onAbort",value:function(e){return n.on("Abort",e),this}},{key:"onClick",value:function(e){return n.on("Click",e),this}},{key:"onCompanionAd",value:function(e){return n.on("CompanionAd",e),this}},{key:"onCompanionAdEnd",value:function(e){return n.on("CompanionAdEnd",e),this}},{key:"onCountdownStart",value:function(e){return n.one("CountdownStart",e),this}},{key:"onCountdownProgress",value:function(e){return n.on("CountdownProgress",e),this}},{key:"onCountdownEnd",value:function(e){return n.one("CountdownEnd",e),this}},{key:"onClickSkip",value:function(e){return n.on("ClickSkip",e),this}},{key:"onLoaded",value:function(e){return n.one("Loaded",e),this}},{key:"onRequestResume",value:function(e){return n.on("RequestResume",e),this}},{key:"onPause",value:function(e){return n.on("Pause",e),this}},{key:"onResume",value:function(e){return n.on("Resume",e),this}},{key:"onMuted",value:function(e){return n.on("Muted",e),this}}]),e}()),e}return Nr(t,Hr),ft(t,[{key:"getChannel",value:function(){return this.channel}},{key:"destroy",value:function(){this.events={}}}]),t}(),mi=Sn.f,vi=function(e){return function(t){for(var n,r=Y(t),i=ie(r),o=i.length,a=0,s=[];o>a;)mi.call(r,n=i[a++])&&s.push(e?[n,r[n]]:r[n]);return s}}(!1);C(C.S,"Object",{values:function(e){return vi(e)}});var yi=l.Object.values,_i=o(a(function(e){e.exports={default:yi,__esModule:!0}}));function bi(e){if(this.name=this.constructor.name,e instanceof Error)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);else this.message=String(e);"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}bi.prototype=Mr(Error.prototype);var Ei=function(e){function t(e){ct(this,t);var n=void 0,r=void 0,i=void 0;if("function"==typeof e.getErrorCode){var o=t.convert(e);n=o.code,r=o.message,i=o.reportType}else n=e.code,r=e.message,i=e.reportType;var a=Ir(this,(t.__proto__||Ln(t)).call(this,r));return a.code=n,a.reportType=i,a}return Nr(t,bi),ft(t,null,[{key:"convert",value:function(e){var t=e.getErrorCode(),n=_i(Si.codes).find(function(e){return e.code==t})||{message:e.getMessage(),reportType:"error"},r=n.message,i=n.reportType;return{code:t,message:r||e.getMessage(),reportType:i}}}]),t}(),Si=function(){function e(){ct(this,e)}return ft(e,null,[{key:"codes",get:function(){return{ADS_REQUEST_NETWORK_ERROR:{code:1012,reportType:"error"},VAST_ASSET_NOT_FOUND:{code:1007,reportType:"noAd"},VAST_EMPTY_RESPONSE:{code:1009,reportType:"noAd"},UNKNOWN_AD_RESPONSE:{code:1010,reportType:"noAd"},VAST_NO_ADS_AFTER_WRAPPER:{code:303,reportType:"noAd"},SCHEMA_MISMATCH:{code:9404,message:"Schema not recognized.",reportType:"schemaError"},MEDIA_TYPE_MISMATCH:{code:9406,message:"Media type not acceptable.",reportType:"schemaError"},DUPLICATE_AD:{code:9901,message:"Ad id duplicate.",reportType:"duplicateAd"},IMA_SDK_LOST:{code:9903,message:"ima sdk lost.",reportType:"blocked"},HOUSE_AD_IMAGE_ASSET_NOT_FOUND:{code:9905,message:"house ad image asset not found.",reportType:"error"},HOUSE_AD_VIDEO_ERROR:{code:9907,message:"house ad video error.",reportType:"error"},GET_HOUSE_AD_URL_ERROR:{code:9908,message:"get house ad url error.",reportType:"error"},OS_TOO_OLD:{code:9910,message:"operating system is too old.",reportType:"error"},CUSTOM_TIMEOUT:{code:9912,message:"It took too long time to load ad.",reportType:"error"},GPT_IS_EMPTY:{code:9801,message:"gtp ad is empty.",reportType:"noAd"},GPT_RENDER_TIMEOUT:{code:9803,message:"gtp ad render timeout.",reportType:"warning"},GPT_BLOCK:{code:9805,message:"gtp ad blocked",reportType:"warning"},GPT_UNABLE_TO_ACCOMMODATE:{code:9807,message:"gpt ad unable to accommodate.",reportType:"warning"}}}}]),e}(),wi="ImageAd",Ti=630,Ai={width:300,height:250},Ii=function(e){function t(e,n,r,i,o,a){ct(this,t);var s=Ir(this,(t.__proto__||Ln(t)).call(this)),l=[],u=new lt,c=r.offsetWidth/r.offsetHeight,d=function(e){var t=this;if(e){var n=new RegExp("^"+e+"\\.");hi(this.adsRequestCancelOperator).filter(function(e){return n.test(e)}).forEach(function(e){t.adsRequestCancelOperator[e](),delete t.adsRequestCancelOperator[e]})}else{for(var r in this.adsRequestCancelOperator){if(!this.adsRequestCancelOperator.hasOwnProperty(r))return;this.adsRequestCancelOperator[r]()}this.adsRequestCancelOperator={}}}.bind(s),f=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!=t.timerId&&(clearInterval(t.timerId),t.timerId=null);var r=t.el.querySelector(".banner_close_btn");if(r&&(r.onclick=null),t.isGpt&&t.slot){var i=t.slot;if(e.has(i)){var o=e.get(i).tId;o&&clearTimeout(o),e.delete(i)}Ci(i),i=null,t.slot=null}t.el.querySelector(".image_content").removeEventListener("click",t.onClickImage),t.el.parentNode==t.container&&t.container.removeChild(t.el),t.el=null,t.container=null,t.onClickImage=null,n&&t.adsChannel.trigger("Abort"),t.adsChannel.trigger("AdMediaComplete",{},wi),t.adsChannel.trigger("Completed",{},wi),t.adsChannel=null,t=null}}(u),p=function(e){return function(t){var n=this.pool.find(function(e){return e.uid===t});if(n){var r=this.pool.indexOf(n);this.pool.splice(r,1);var i=this.pool.filter(function(e){return e.position===n.position&&e.isLinear===n.isLinear&&e.isLogo===n.isLogo&&e.isGpt===n.isGpt});i.length>0?i[i.length-1].el.classList.remove("hide"):(n.container.classList.remove("is_gpt"),n.container.classList.remove("ad_impression")),e(n)}}}(f).bind(s),h=function(e,t,n,r,i,o,a){return function(s,l,u,c){var d={paused:c};e.push(d);var f=s.uid,p=function(e,t,n){return function(r){if(1==n.paused)return e.trigger("RequestResume",{},wi),r.preventDefault(),r.stopImmediatePropagation(),void r.stopPropagation();e.trigger("Click",In(t,{file_name:t.data.replace(/^.*[\\\/]/,"")}),wi)}}(u,s,d),h=function(){return a(f)},g=function(e){var t=e.uid,n=e.elementId,r=e.url,i=e.position,o=e.width,a=e.height,s=e.nonlinearContainerRatio,l=e.clickThrough,u=e.clickListener,c=e.remove;return function(e){var d=e.isGpt,f=e.isLogo,p=e.isLinear;return f?function(e,t,n,r,i,o){return ki(Ri(t),Di(["trademark"].concat(Li(e))),function(e){return function(t){var n=e/1920*100+"%";return t.style.width=n,t.style.height=n,t}}(r),Mi(function(){return'<img src="'+n+'" class="image_content" />'},i),xi(o))}(i,n,r,o,l,u)():d?function(e,t,n,r,i,o){return ki(Ri(t),Di(["internal_banner","nonlinear_ad"].concat(Li(e))),Oi(n,r),function(e){return e+="%",function(t){return t.style.width=e,t.style.height=e,t}}(100),Mi(function(){return'<div id="'+o+'" class="image_content gpt_container"></div>'}),Ni(i))}(i,n,o,a,c,t)():p?function(e,t,n,r,i){return ki(Ri(t),Di(["internal_banner"].concat(Li(e))),Mi(function(){return'<div class="image_div image_content" style="background-image:url(\''+n+"')\"></div>"},r),xi(i))}(i,n,r,l,u)():function(e,t,n,r,i,o,a,s,l,u){return ki(Ri(t),Di(["internal_banner","nonlinear_ad"].concat(Li(e))),Oi(r,i),function(e,t,n){return function(r){var i=e/t;return r.style.width="calc("+e/(t*n)*100+"% - "+7*i+"em)",r}}(r,i,u),Mi(function(){return'<img src="'+n+'" class="image_content" />'},s),xi(l),Ni(o))}(i,n,r,o,a,c,0,l,u,s)()}}({uid:f,elementId:s.id,url:l.url,position:s.position,width:l.width,height:l.height,nonlinearContainerRatio:t,clickThrough:s.click_through,clickListener:p,remove:h})({isGpt:s.isGpt,isLogo:s.is_logo,isLinear:s.is_linear}),m=s.is_logo?n:s.is_linear?r:i;m.appendChild(g),d.uid=f,d.el=g,d.container=m,d.position=s.position,d.adsChannel=u,d.onClickImage=p,d.isLinear=s.is_linear,d.isLogo=s.is_logo,d.isGpt=s.isGpt;var v=void 0;return s.isGpt?(Pi(function(e){return function(t){e.get(t.slot).renderEnded(t.isEmpty)}}(o),function(e){return function(t){e.get(t.slot).requested()}}(o)),v=function(e,t){return new bn(function(n){googletag.cmd.push(function(){n(googletag.defineSlot(e,[Ai.width,Ai.height],t))})})}(l.url,f).then(function(e){return d.slot=e,function(e,t,n){return new bn(function(r,i){e.addService(googletag.pubads()),n(e).then(r).catch(function(t){Ci(e),i(t)}),googletag.display(t)})}(e,f,function(e){return function(t){return new bn(function(n,r){e.set(t,{renderEnded:function(i){clearTimeout(this.tId),e.delete(t),i?r({error:new Ei(Si.codes.GPT_IS_EMPTY)}):n(t)},requested:function(){this.tId=setTimeout(function(){e.delete(t),r({error:new Ei(Si.codes.GPT_RENDER_TIMEOUT)})},2e3)},tId:null})})}}(o))}).then(function(t){if(!e.find(function(e){return e.uid===f}))throw Ci(t),"abort";m.classList.add("is_gpt")}).catch(function(t){for(var n=0,r=e.length;n<r;n++)e[n].uid===f&&e.splice(n,1);var i=g.querySelector(".banner_close_btn");throw i&&(i.onclick=null),g.querySelector(".image_content").removeEventListener("click",p),g.parentNode==m&&m.removeChild(g),t})):v=bn.resolve(),v.then(function(){u.trigger("Loaded",{meta:l},wi),m.classList.add("ad_impression");var t=s.duration||Math.ceil(Math.max((s.end_time||0)-+new Date,0)/1e3);u.trigger("AdMediaStart",{duration:t},wi),1==s.is_linear&&u.trigger("PauseRequested",{},wi),u.trigger("Impression",In(s,{file_name:s.data.replace(/^.*[\\\/]/,"")}),wi);var n=function(){},r=function(){},i=null;if(t>0){var o=t;1==s.enable_countdown?(u.trigger("CountdownStart",{time:o,clickFunction:function(){return u.trigger("ClickSkip",{},wi)}}),r=function(){i=setInterval(function(){d.paused=!1,0==--o?(clearInterval(i),u.trigger("CountdownEnd"),h()):u.trigger("CountdownProgress",{time:o})},1e3),u.trigger("Resume",{},wi)}):r=function(){i=setInterval(function(){d.paused=!1,0==--o&&(clearInterval(i),h())},1e3)},0==d.paused&&r(),n=function(){d.paused=!0,clearInterval(i),i=null,u.trigger("Pause",{},wi)}}var a=e.filter(function(e){return e.uid!==f&&e.position===s.position&&e.isLinear===s.is_linear&&e.isLogo===s.is_logo});a.length>0&&a[a.length-1].el.classList.add("hide"),d.resume=r,d.pause=n,d.timerId=i}).catch(function(e){if(u=null,"abort"!==e)throw e})}}(l,c,n,i,r,u,p);return s.pool=l,s.adsRequestCancelOperator={},s.isPaused=!1,s.adsRequest=function(e,t,n,r){return function(i){var o=this,a=new gi,s=function(){a.destroy(),a=null};if(i.isGpt&&e)return bn.resolve().then(function(){a.trigger("Error",{error:new Ei(Si.codes.GPT_BLOCK)},wi),s()}),a.getChannel();a.on("Impression",function(e){o.trigger("impression",e)}),a.on("Click",function(e){o.trigger("click",e)}),a.on("Completed",s),a.on("Error",s);var l=i.uid||ei();0==i.is_linear&&0==i.is_logo?l="NB."+l:1==i.is_linear&&(l="LA."+l),i.uid=i.uid||l;var u=void 0,c=void 0,d=!1;return this.adsRequestCancelOperator[l]=function(){d=!0,s()},i.isGpt?t.offsetWidth<Ti?u=bn.reject({error:new Ei(Si.codes.GPT_UNABLE_TO_ACCOMMODATE)}):(c=i.data,u=bn.resolve({url:c,width:Ai.width,height:Ai.height})):u=ni(c=/\:\/\/|^\//.test(i.data)?i.data:n.cdnStatic+"/"+i.data).catch(function(e){throw{error:new Ei(In({innerError:e},Si.codes.HOUSE_AD_IMAGE_ASSET_NOT_FOUND))}}),c&&a.trigger("Request",{requestInfo:{url:c}},wi),u.then(function(e){if(!d)return delete o.adsRequestCancelOperator[l],r(i,e,a,o.isPaused)}).catch(function(e){a&&a.trigger("Error",e,wi),delete o.adsRequestCancelOperator[l]}),a.getChannel()}}(e,o,a,h).bind(s),s.closeNonLinearBanner=function(e,t,n){return function(){t("NB");var r=e.filter(function(e){return 0==e.isLinear&&0==e.isLogo});if(!(r.length<1)){var i=r[r.length-1];n(i.uid)}}}(l,d,p),s.stopLinearAd=function(e,t,n){return function(){t("LA"),e.forEach(function(e){1==e.isLinear&&n(e.uid)})}}(l,d,p),s.stop=function(e,t){return function(){e(),this.pool.forEach(function(e){e.container.classList.remove("ad_impression"),e.container.classList.remove("is_gpt"),t(e,!0)}),this.pool.splice(0,this.pool.length)}}(d,f).bind(s),s.remove=p,s}return Nr(t,Hr),ft(t,[{key:"pause",value:function(){this.isPaused=!0,this.pool.forEach(function(e){return e.pause()})}},{key:"resume",value:function(){this.isPaused=!1,this.pool.forEach(function(e){return e.resume()})}}]),t}();var Pi=function(){var e=!1;return function(t,n){if(1!=e){e=!0;var r=document.querySelector("script[data-gptjs]");window.googletag||r||((r=document.createElement("script")).dataset.gptjs=1,r.async=!0,r.src="https://www.googletagservices.com/tag/js/gpt.js",document.head.appendChild(r)),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push(function(){googletag.pubads().setForceSafeFrame(!0),googletag.pubads().addEventListener("slotRequested",function(e){n(e)}),googletag.pubads().addEventListener("slotRenderEnded",function(e){t(e)}),googletag.pubads().addEventListener("impressionViewable",function(e){}),googletag.pubads().addEventListener("slotOnload",function(e){}),googletag.enableServices()})}}}();function Ci(e){googletag.pubads().clear([e]),googletag.destroySlots([e])}function ki(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){return t.reduce(function(e,t){return t(e)},arguments[0])}}function Li(e){return e?e.toLowerCase().split(""):["m","c"]}function Ri(e){return function(){var t=document.createElement("DIV");return t.classList.add("c_image"),t.dataset.elementId=e,t}}function Di(e){return function(t){return e.forEach(function(e){return t.classList.add(e)}),t}}function Oi(e,t){return function(n){return n.style.maxWidth=e+"px",n.style.maxHeight=t+"px",n}}function Mi(e,t){return function(n){var r=e();return t&&(r='<a href="'+t+'" target="_blank">'+r+"</a>"),n.innerHTML=r,n}}function xi(e){return function(t){return t.querySelector(".image_content").addEventListener("click",e),t}}function Ni(e){return function(t){var n=function(e){var t=document.createElement("A");return t.classList.add("banner_close_btn"),t.href="javascript:void(0);",t.onclick=e,t}(e);return t.appendChild(n),t}}var ji=l.JSON||(l.JSON={stringify:JSON.stringify}),Ui=function(e){return ji.stringify.apply(ji,arguments)},Fi=o(a(function(e){e.exports={default:Ui,__esModule:!0}})),Bi=2147483647,Gi=36,Vi=1,Yi=26,zi=38,Wi=700,Hi=72,Zi=128,Ki="-",qi=/^xn--/,Ji=/[^\x20-\x7E]/,Xi=/[\x2E\u3002\uFF0E\uFF61]/g,Qi={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},$i=Gi-Vi,eo=Math.floor,to=String.fromCharCode;function no(e){throw new RangeError(Qi[e])}function ro(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function io(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+ro((e=e.replace(Xi,".")).split("."),t).join(".")}function oo(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function ao(e){return ro(e,function(e){var t="";return e>65535&&(t+=to((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+to(e)}).join("")}function so(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:Gi}function lo(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function uo(e,t,n){var r=0;for(e=n?eo(e/Wi):e>>1,e+=eo(e/t);e>$i*Yi>>1;r+=Gi)e=eo(e/$i);return eo(r+($i+1)*e/(e+zi))}function co(e){var t,n,r,i,o,a,s,l,u,c,d=[],f=e.length,p=0,h=Zi,g=Hi;for((n=e.lastIndexOf(Ki))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&no("not-basic"),d.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<f;){for(o=p,a=1,s=Gi;i>=f&&no("invalid-input"),((l=so(e.charCodeAt(i++)))>=Gi||l>eo((Bi-p)/a))&&no("overflow"),p+=l*a,!(l<(u=s<=g?Vi:s>=g+Yi?Yi:s-g));s+=Gi)a>eo(Bi/(c=Gi-u))&&no("overflow"),a*=c;g=uo(p-o,t=d.length+1,0==o),eo(p/t)>Bi-h&&no("overflow"),h+=eo(p/t),p%=t,d.splice(p++,0,h)}return ao(d)}function fo(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,g,m=[];for(f=(e=oo(e)).length,t=Zi,n=0,o=Hi,a=0;a<f;++a)(d=e[a])<128&&m.push(to(d));for(r=i=m.length,i&&m.push(Ki);r<f;){for(s=Bi,a=0;a<f;++a)(d=e[a])>=t&&d<s&&(s=d);for(s-t>eo((Bi-n)/(p=r+1))&&no("overflow"),n+=(s-t)*p,t=s,a=0;a<f;++a)if((d=e[a])<t&&++n>Bi&&no("overflow"),d==t){for(l=n,u=Gi;!(l<(c=u<=o?Vi:u>=o+Yi?Yi:u-o));u+=Gi)g=l-c,h=Gi-c,m.push(to(lo(c+g%h,0))),l=eo(g/h);m.push(to(lo(l,0))),o=uo(n,p,r==i),n=0,++r}++n,++t}return m.join("")}var po={version:"1.4.1",ucs2:{decode:oo,encode:ao},toASCII:function(e){return io(e,function(e){return Ji.test(e)?"xn--"+fo(e):e})},toUnicode:function(e){return io(e,function(e){return qi.test(e)?co(e.slice(4).toLowerCase()):e})},encode:fo,decode:co},ho=function(e){function t(e){ct(this,t);var n=Ir(this,(t.__proto__||Ln(t)).call(this));return n.container=e,n.callbackId="fpCallback"+(""+Math.random()).slice(3,15),n.api=null,n.pollInterval=null,n.currentTime=0,n._volumeLevel=1,n._volumeLevel_2=1,n._muted=!1,n._paused=!0,n._dataset={},n}return Nr(t,Hr),ft(t,[{key:"createFlashPlayer",value:function(e){var t=this;e=this.escapeURL(e);var n={hostname:po.toUnicode(window.location.hostname),url:e,callback:this.callbackId,autoplay:!0,initialVolume:this._volumeLevel,rtmp:"rtmp://cdn.flowplayer.org"},r=this.embed(this.swfHls,n,this.container);this.api=r,window[this.callbackId]=function(e,n){switch(e){case"ready":r.__volume(t._volumeLevel),t.trigger("ready");break;case"pause":t._paused=!0,t.trigger("pause");break;case"play":t._paused=!1,t.trigger("play");break;case"resume":t._paused=!1,t.trigger("resume");break;case"finish":clearInterval(t.pollInterval),t.trigger("finish");break;case"error":t.trigger("error",{target:{error:n}});break;case"click":t.trigger("click")}}}},{key:"load",value:function(e){var t=this;null==this.api?this.createFlashPlayer(e):this.api.__play(e,!0),clearInterval(this.pollInterval),this.pollInterval=setInterval(function(){if(t.api){var e=t.api.__status?t.api.__status():null;e&&t.currentTime!=e.time&&(t.currentTime=e.time,t.trigger("timeupdate"))}},250)}},{key:"stop",value:function(){clearInterval(this.pollInterval),this.pause()}},{key:"escapeURL",value:function(e){return e.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}},{key:"embed",value:function(e,t,n){var r="obj"+(""+Math.random()).slice(2,15),i='<object class="fp-engine" id="'+r+'" name="'+r+'" ',o=navigator.userAgent.indexOf("MSIE")>-1;i+=o?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">':' data="'+e+'" type="application/x-shockwave-flash">';var a={width:"100%",height:"100%",allowscriptaccess:"always",wmode:"opaque",quality:"high",flashvars:"",movie:e+(o?"?"+r:""),name:r,bgcolor:"#333333"};hi(t).forEach(function(e){a.flashvars+=e+"="+t[e]+"&"}),hi(a).forEach(function(e){i+='<param name="'+e+'" value="'+a[e]+'"/>'}),i+="</object>";var s=document.createElement("DIV");s.innerHTML=i;var l=s.firstChild;return n.appendChild(l),l}},{key:"play",value:function(){this.resume()}},{key:"pause",value:function(){this.api&&this.api.__pause()}},{key:"resume",value:function(){this.api&&this.api.__resume()}},{key:"destroy",value:function(){}},{key:"volume",get:function(){return this._volumeLevel},set:function(e){this._volumeLevel=this._volumeLevel_2=e,this._muted=!1,this.api&&this.api.__volume(e)}},{key:"muted",get:function(){return this._muted},set:function(e){this.api&&(1==e&&0==this._muted?(this._volumeLevel=0,this.api.__volume(0),this._muted=!0):0==e&&1==this._muted&&(this._volumeLevel=this._volumeLevel_2,this.api.__volume(this._volumeLevel),this._muted=!1))}},{key:"duration",get:function(){return this.api.__status().duration}},{key:"paused",get:function(){return this._paused}},{key:"dataset",get:function(){return this._dataset}}]),t}(),go="HouseVideoAd",mo=function(){function e(t,n,r,i){ct(this,e),this.container=t,this.contentPlayerProxy=n,this.adsSessionChannel=null,this.adsRequestAbort=function(){},this.hls=null,this.player=null,this.source=null,this.volume=-1,this.muted=!1,this.isPaused=!1,this.isStarted=!1,this.triggerUserAction=this.triggerUserAction.bind(this),this.triggerPlay=this.triggerPlay.bind(this),this.onCanplay=this.onCanplay.bind(this),this.onEnded=this.onEnded.bind(this),this.onError=this.onError.bind(this),this.onTimeupdate=this.onTimeupdate.bind(this),this.onClickVideo=this.onClickVideo.bind(this),this.onPause=this.onPause.bind(this),this.onResume=this.onResume.bind(this),this.triggerPauseTimerId=null,this.enableCountdown=null,this.playerEngines=null,this.urlConfig=i;var o=navigator.userAgent.toLowerCase();this.needHlsJs=!(/iP(hone|od|ad)/i.test(o)||/Safari/.exec(o)&&!/Chrome/.exec(o)),this.useFlash=!1,1!=this.needHlsJs||window.Hls.isSupported()&&!r.isXP&&!r.isVista||(this.useFlash=!0),this.triggerUserAction=this.triggerUserAction(),this.createPlayer(t)}return ft(e,[{key:"createPlayer",value:function(e){var t=this;if(0==this.useFlash){this.hls=new Hls;var n=document.createElement("video");n.classList.add("house_video"),n.setAttribute("webkit-playsinline","true"),n.setAttribute("playsinline","true");var r=document.createElement("source");n.appendChild(r),n.addEventListener("canplay",this.onCanplay),n.addEventListener("ended",this.onEnded),n.addEventListener("error",this.onError),n.addEventListener("timeupdate",this.onTimeupdate),n.addEventListener("click",this.onClickVideo),n.addEventListener("pause",this.onPause),n.addEventListener("play",this.onResume),e.appendChild(n),this.player=n,this.source=r,this.hls.on(Hls.Events.ERROR,function(e,n){t.onError({target:{error:n}})}),this.hls.on(Hls.Events.MANIFEST_PARSED,function(e,n){t.hls.attachMedia(t.player),t.triggerPlay()})}else this.player=new ho(e),this.player.on("ready",this.triggerPlay),this.player.on("finish",this.onEnded),this.player.on("timeupdate",this.onTimeupdate),this.player.on("click",this.onClickVideo),this.player.on("error",this.onError),this.player.on("pause",this.onPause),this.player.on("resume",this.onResume)}},{key:"setUpVolume",value:function(){this.muted=this.contentPlayerProxy.muted,this.volume=this.muted?1:this.contentPlayerProxy.volume;var e=this.muted?0:this.volume;this.player.volume=e,this.player.muted=this.muted}},{key:"onCanplay",value:function(){"hls.js"!==this.playerEngines&&this.triggerPlay()}},{key:"triggerPlay",value:function(){0==this.isPaused&&this.play()}},{key:"play",value:function(){var e=this;this.isStarted=!0;var t=this.player.play();void 0!==t&&"function"==typeof t.then?t.then(function(){return e.onPlaySuccess()}).catch(function(t){console.warn("played fail",t),e.adsSessionChannel.trigger("Error",{error:In({innerError:t},Si.codes.HOUSE_AD_VIDEO_ERROR)},go)}):this.onPlaySuccess()}},{key:"onPlaySuccess",value:function(){var e=this;this.container.classList.add("ad_impression");var t=this.player.duration>>0;this.adsSessionChannel.trigger("PauseRequested",{},go),this.adsSessionChannel.trigger("AdMediaStart",{duration:t},go),this.adsSessionChannel.trigger("Impression",{},go),1==this.enableCountdown&&this.adsSessionChannel.trigger("CountdownStart",{time:t,clickFunction:function(){return e.adsSessionChannel.trigger("ClickSkip",{},go)}})}},{key:"onEnded",value:function(){clearInterval(this.triggerPauseTimerId),1==this.enableCountdown&&this.adsSessionChannel.trigger("CountdownEnd"),this.adsSessionChannel.trigger("Completed",{},go),this.adsSessionChannel.trigger("AdMediaComplete",{},go),this.stopPlayer(),this.adsSessionChannel.destroy(),this.adsSessionChannel=null}},{key:"onError",value:function(e){var t={error:In({innerError:e.target.error},Si.codes.HOUSE_AD_VIDEO_ERROR)},n=(((e||{}).target||{}).error||{}).fatal;t.fatal=n,!1===n?(console.warn("onError",e),null!==this.adsSessionChannel&&this.adsSessionChannel.trigger("Error",t,go)):(console.error("onError",e),this.stopPlayer(),null!==this.adsSessionChannel&&(this.adsSessionChannel.trigger("Error",t,go),this.adsSessionChannel.trigger("AdMediaComplete",{},go),this.adsSessionChannel.destroy(),this.adsSessionChannel=null))}},{key:"stopPlayer",value:function(e){return null!=this.player&&(this.player.pause(),"hls.js"==this.playerEngines?(this.hls.stopLoad(),this.hls.detachMedia(),1==e&&this.hls.destroy()):"native"==this.playerEngines?(this.source.src="",this.source.removeAttribute("type"),this.player.load()):"flash"==this.playerEngines&&this.player.stop(),this.container.classList.remove("ad_impression"),!0)}},{key:"onTimeupdate",value:function(){this.enableCountdown&&this.adsSessionChannel&&this.adsSessionChannel.trigger("CountdownProgress",{time:this.player.duration-this.player.currentTime>>0})}},{key:"onClickVideo",value:function(e){if(this.player.paused)this.adsSessionChannel.trigger("RequestResume",{},go);else{var t=this.player.dataset.clickThrough;void 0!==t&&""!==t&&window.open(t,"_blank").focus(),this.adsSessionChannel.trigger("Click",e,go)}}},{key:"onPause",value:function(e){var t=this;this.triggerPauseTimerId=setTimeout(function(){t.adsSessionChannel&&t.adsSessionChannel.trigger("Pause",{innerEvent:e},go)},12)}},{key:"onResume",value:function(e){this.adsSessionChannel&&this.adsSessionChannel.trigger("Resume",{innerEvent:e},go)}},{key:"getAdURLs",value:function(e){return Wr(this.urlConfig.cdiProxy,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:Fi({id:ii.get(),jsonrpc:"2.0",method:"LoadService.GetAdURLs",params:{AssetId:e,DeviceType:"pc"}})}).then(function(e){if(!e.ok)throw new Error(e.statusText);return e.json()}).then(function(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t}return{url:e.result.AssetURLs[0],more:e.result}})}},{key:"adsRequest",value:function(e){var t=this;this.adsRequestAbort(),this.setUpVolume(),this.player.dataset.clickThrough=e.click_through||"",this.enableCountdown=e.enable_countdown;var n=e.data;this.adsSessionChannel&&this.adsSessionChannel.destroy(),this.adsSessionChannel=new gi;var r=!1;return this.adsRequestAbort=function(){r=!0},bn.resolve().then(function(){t.getAdURLs(n).then(function(e){r||(t.adsSessionChannel.trigger("Loaded",{meta:e.more},go),t.load(e.url))}).catch(function(e){console.log(e),t.adsSessionChannel.trigger("Error",{error:In({innerError:e},Si.codes.GET_HOUSE_AD_URL_ERROR)})}),t.adsSessionChannel.trigger("Request",{requestInfo:{assetId:n}},go)}),this.adsSessionChannel.getChannel()}},{key:"load",value:function(e){1==this.useFlash?(this.player.load(e),this.playerEngines="flash"):/\.m3u8/.test(e)?this.needHlsJs?(this.playerEngines="hls.js",this.hls.loadSource(e)):(this.playerEngines="native",this.source.src=e,this.source.type="application/x-mpegurl",this.player.load()):/\.mp4/.test(e)&&(this.playerEngines="native",this.source.src=e,this.source.type="video/mp4",this.player.load())}},{key:"pause",value:function(){this.isPaused=!0,1==this.isStarted&&this.player.pause()}},{key:"resume",value:function(){this.isPaused=!1,0==this.isStarted?this.play():this.player.play()}},{key:"stop",value:function(e){this.adsRequestAbort(),this.stopPlayer(e)&&null!=this.adsSessionChannel&&this.adsSessionChannel.trigger("Abort")}},{key:"mute",value:function(e){e!==this.muted&&(this.muted=e,null!=this.player&&(1==e?(this.volume=this.player.volume,this.player.volume=0):this.player.volume=this.volume,this.player.muted=e))}},{key:"setVolume",value:function(e){this.volume=e,null!=this.player&&(this.player.volume=e)}},{key:"getVolume",value:function(){return null==this.player?this.volume:this.player.volume}},{key:"triggerUserAction",value:function(){var e=!1;return function(){if(1!=e){e=!0;var t=this.player.play();t&&"function"==typeof t.catch&&t.catch(function(e){return console.warn(e)})}}}}]),e}(),vo="IMA",yo="ENABLE",_o="INSECURE",bo="lp_vpaidMode",Eo=function(e){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8e3,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:yo;ct(this,t);var s=Ir(this,(t.__proto__||Ln(t)).call(this));return s.isOldWindows=i.isXP||i.isVista,s.isOnMobile=/ANDROID|IPHONE|IPAD|IPOD/i.test(navigator.userAgent),s.adsRequestSessions=[],s.volumeSetted=!1,s.muted=!1,s.volume=-1,s.isPaused=!1,s.extraReplacement=[],s.autoPlayState={autoplayAllowed:!0,autoplayRequiresMuted:!1},s.requestTimeoutMS=o,s.companionAdSize=null,s.vpaidModePreset=a,s.vpaidMode=a,1==Jr.supportLocalStorage&&localStorage.getItem(bo)&&(s.vpaidMode=localStorage.getItem(bo)),1==e?(s.adsRequest=s.adsRequestWhenAdBlock,Ir(s)):(s.vpaidMode==_o?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE):s.vpaidMode==yo&&google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLE),google.ima.settings.setLocale("zh-TW"),s.adContainer=n,s.contentPlayerProxy=r,s.adDisplayContainer=new google.ima.AdDisplayContainer(n),s.adDisplayContainer.initialize(),s.onAdsManagerLoaded=s.onAdsManagerLoaded(r).bind(s),s.adsLoader=new google.ima.AdsLoader(s.adDisplayContainer),s.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,s.onAdsManagerLoaded,!1),s.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,s.onAdsLoaderError.bind(s),!1),s.triggerUserAction=s.triggerUserAction(),s)}return Nr(t,Hr),ft(t,[{key:"onAdsManagerLoaded",value:function(e){return function(t){var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.bitrate=-1,n.enablePreloading=!0,n.loadVideoTimeout=8e3,1==this.isOnMobile&&(n.mimeTypes=["video/mp4","application/x-mpegURL"]);var r=t.getAdsManager(e,n),i=this.adContainer.offsetWidth,o=this.adContainer.offsetHeight,a=e.isFullscreen?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,s=this.adsRequestSessions.find(function(e){return!e.hasAdsManager});void 0!==s&&s.setAdsManager(r,i,o,a)}}},{key:"onAdsLoaderError",value:function(e){var t=new Ei(e.getError());this.adsRequestSessions[0]&&this.adsRequestSessions[0].triggerChannel("Error",{error:t},vo),this.sessionComplete(e)}},{key:"sessionComplete",value:function(e){var t=this.adsRequestSessions.shift();this.adsRequestSessions.length>0&&this.adsRequestSessions[0].request(),t&&t.destroy()}},{key:"onPauseRequested",value:function(e){this.adContainer.classList.add("ad_impression"),1==this.adsRequestSessions.length&&this.adsRequestSessions[0].triggerChannel("PauseRequested",e,vo)}},{key:"onImpression",value:function(e){this.adsRequestSessions[0].triggerChannel("Impression",e,vo)}},{key:"onAllAdsCompleted",value:function(e){1==this.adsRequestSessions.length&&(this.adContainer.classList.remove("ad_impression"),this.adsRequestSessions[0].triggerChannel("Completed",e,vo)),this.sessionComplete(e)}},{key:"onAdsManagerError",value:function(e){1==this.adsRequestSessions.length&&this.adContainer.classList.remove("ad_impression"),this.sessionComplete(e)}},{key:"adsRequestWhenAdBlock",value:function(){var e=new gi;return bn.resolve().then(function(){var t=new Ei(Si.codes.IMA_SDK_LOST);e.trigger("Error",{error:t},vo),e.destroy()}),e.getChannel()}},{key:"buildUpAdTagUrl",value:function(e){var t=String(+new Date),n=encodeURIComponent(window.self!==window.top?document.referrer:document.URL),r=encodeURIComponent(navigator.userAgent),i=e.replace(/\[timestamp\]/,t).replace(/\[CACHEBUSTING\]/,t).replace(/\[CACHE_BREAKER\]/,t).replace(/\[pageurl\]/,n).replace(/\[referrer_url\]/,n).replace(/\[description_url\]/,n).replace(/\[urlencodedpageURL\]/,n).replace(/\[EMBEDDING_PAGE_URL\]/,n).replace(/\[urlencodedvideoURL\]/,n).replace(/\[playerwidth\]/,this.adContainer.offsetWidth).replace(/\[playerheight\]/,this.adContainer.offsetHeight).replace(/\[osversion\]/,encodeURIComponent(navigator.appVersion)).replace(/\[ua\]/,r).replace(/\[useragent\]/,r).replace(/\[networkconnectiontype\]/,"u").replace(/\[cellcarrier\]/,"litv");return this.extraReplacement.forEach(function(e){i=i.replace(e.target,e.newValue)}),i}},{key:"notifyContentComplete",value:function(){return this.adsLoader&&this.adsLoader.contentComplete(),this}},{key:"adsRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.notifyContentComplete();var n=new google.ima.AdsRequest;e.isAdsResponse?n.adsResponse=e.data:e.doNotReplace?n.adTagUrl=e.data:n.adTagUrl=this.buildUpAdTagUrl(e.data),this.volumeSetted||(this.muted=this.contentPlayerProxy.muted,this.volume=.5*(this.muted?1:this.contentPlayerProxy.volume),this.volumeSetted=!0);var r=this.muted?0:this.volume,i=new So(this.adsLoader,n,this.adContainer,e.enable_countdown,r,this.isPaused,t,e.adSource,this.autoPlayState,this.requestTimeoutMS,this.companionAdSize);return i.one("PauseRequested",this.onPauseRequested.bind(this)),i.one("Impression",this.onImpression.bind(this)),i.one("AllAdsCompleted",this.onAllAdsCompleted.bind(this)),i.one("Error",this.onAdsManagerError.bind(this)),this.adsRequestSessions.push(i),1==this.adsRequestSessions.length&&bn.resolve().then(i.request),i.getChannel()}},{key:"resize",value:function(){var e=this.adsRequestSessions[0];if(void 0!==e){var t=this.adContainer.offsetWidth,n=this.adContainer.offsetHeight,r=this.contentPlayerProxy.isFullscreen;e.resize(t,n,r?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}return this}},{key:"pause",value:function(){this.isPaused=!0,0!=this.adsRequestSessions.length&&this.adsRequestSessions[0].pause()}},{key:"resume",value:function(){this.isPaused=!1,0!=this.adsRequestSessions.length&&this.adsRequestSessions[0].resume()}},{key:"stop",value:function(){0!=this.adsRequestSessions.length&&(this.adsRequestSessions[0].stop(),this.adsRequestSessions.forEach(function(e){e.destroy()}),this.adsRequestSessions=[],this.adContainer.classList.remove("ad_impression"))}},{key:"mute",value:function(e){var t=this;e!==this.muted&&(this.muted=e,0!=this.adsRequestSessions.length&&(1==e?this.adsRequestSessions.forEach(function(e){e.setVolume(0)}):(0==this.volume&&(this.volume=.001),this.adsRequestSessions.forEach(function(e){e.setVolume(t.volume)}))))}},{key:"setVolume",value:function(e){if(0==e){if(1==this.muted)return;e=.001}this.volume=e,0!=this.adsRequestSessions.length&&this.adsRequestSessions.forEach(function(t){t.setVolume(e)})}},{key:"getVolume",value:function(){return 0==this.adsRequestSessions.length?this.volume:this.adsRequestSessions[0].getVolume()}},{key:"triggerUserAction",value:function(){var e=!1;return function(){1!=e&&(e=!0,this.autoPlayState.autoplayAllowed=!0,this.autoPlayState.autoplayRequiresMuted=!1,St(this.adContainer.querySelectorAll("video")).map(function(e){return e.play()}).filter(function(e){return Boolean(e)}).forEach(function(e){return e.catch(function(e){return console.warn(e)})}))}}},{key:"setExcludeAdIds",value:function(e){var t=this;return{adsRequest:function(n){return t.adsRequest(n,e)},pause:this.pause.bind(this),resume:this.resume.bind(this)}}},{key:"setReplacement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(e)?this.extraReplacement=e:this.extraReplacement=[]}},{key:"setAutoPlayState",value:function(e){this.autoPlayState=e}},{key:"getCurrentAdInfo",value:function(){return this.adsRequestSessions.length>0?this.adsRequestSessions[0].getAdInfo():null}},{key:"setCompanionAdSize",value:function(e){this.companionAdSize=e}},{key:"setVpaidModeToInsecure",value:function(){this.vpaidMode=_o,Jr.supportLocalStorage&&localStorage.setItem(bo,_o),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE)}},{key:"setVpaidModeToEnable",value:function(){this.vpaidMode=yo,Jr.supportLocalStorage&&localStorage.setItem(bo,yo),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLE)}},{key:"setVpaidModeToPreset",value:function(){this.vpaidMode=this.vpaidModePreset,Jr.supportLocalStorage&&localStorage.removeItem(bo),this.vpaidMode==yo?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLE):this.vpaidMode==_o&&google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE)}},{key:"getVpaidMode",value:function(){return this.vpaidMode}}]),t}(),So=function(e){function t(e,n,r,i,o,a,s,l,u,c,d){ct(this,t);var f=Ir(this,(t.__proto__||Ln(t)).call(this));f.adsLoader=e,f.adsRequest=n,f.adContainer=r,f.enableCountdown=i,f.adsManager=null,f.request=f.request.bind(f),f.adInfo=null,f.onClickSkip=f.onClickSkip.bind(f),f.requestResume=f.requestResume.bind(f),f.adsSessionChannel=new gi,f.volume=o,f.isPaused=a,f.excludeAdIds=s,f.isStarted=!1,f.width=0,f.height=0,f.viewMode=google.ima.ViewMode.NORMAL,f.adSource=(l||"").toUpperCase(),f.autoPlayState=u,f.companionAdSize=d,f.requestTimeoutMS=c,f.timeoutId=null;var p={};return p[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]=f.onPauseRequested.bind(f),p[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]=f.onResumeRequested.bind(f),p[google.ima.AdEvent.Type.IMPRESSION]=f.onImpression.bind(f),p[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]=f.onAllAdsCompleted.bind(f),p[google.ima.AdErrorEvent.Type.AD_ERROR]=f.onAdsManagerError.bind(f),p[google.ima.AdEvent.Type.STARTED]=f.onStarted.bind(f),p[google.ima.AdEvent.Type.LOADED]=f.onLoaded.bind(f),p[google.ima.AdEvent.Type.CLICK]=f.onClick.bind(f),p[google.ima.AdEvent.Type.AD_BREAK_READY]=null,p[google.ima.AdEvent.Type.AD_METADATA]=null,p[google.ima.AdEvent.Type.COMPLETE]=null,p[google.ima.AdEvent.Type.DURATION_CHANGE]=null,p[google.ima.AdEvent.Type.FIRST_QUARTILE]=null,p[google.ima.AdEvent.Type.INTERACTION]=null,p[google.ima.AdEvent.Type.LINEAR_CHANGED]=null,p[google.ima.AdEvent.Type.LOG]=null,p[google.ima.AdEvent.Type.MIDPOINT]=null,p[google.ima.AdEvent.Type.PAUSED]=f.onPuase.bind(f),p[google.ima.AdEvent.Type.RESUMED]=f.onResume.bind(f),p[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]=null,p[google.ima.AdEvent.Type.SKIPPED]=null,p[google.ima.AdEvent.Type.THIRD_QUARTILE]=null,p[google.ima.AdEvent.Type.USER_CLOSE]=null,p[google.ima.AdEvent.Type.VOLUME_CHANGED]=f.onVolumeChanged.bind(f),p[google.ima.AdEvent.Type.VOLUME_MUTED]=null,f.managerEvents=f.setUpManagerEvents(p,f.decorationEventListener),f.checkRemainingTimeId=null,f}return Nr(t,Hr),ft(t,[{key:"onPauseRequested",value:function(){var e=!1;return function(t){if(!e){this.terminationTimeout();var n=["getAd","getDuration"].reduce(function(e,t){return-1!==e&&e&&e[t]?e[t]():-1},t);this.trigger("PauseRequested",{innerEvent:t}),this.triggerChannel("AdMediaStart",{duration:n},vo),e=!0}}.bind(this)}},{key:"onResumeRequested",value:function(){return function(e){this.triggerChannel("AdMediaComplete",{},vo)}.bind(this)}},{key:"onImpression",value:function(){return function(e){this.trigger("Impression",{innerEvent:e})}.bind(this)}},{key:"onAllAdsCompleted",value:function(){return function(e){this.terminationTimeout(),this.stopCheckRemaining(),this.trigger("AllAdsCompleted",{innerEvent:e})}.bind(this)}},{key:"onAdsManagerError",value:function(){return function(e){console.log(e),this.terminationTimeout(),this.stopCheckRemaining();var t=new Ei(e.getError());this.triggerError(t)}.bind(this)}},{key:"onStarted",value:function(){var e=!1;return function(t){var n=this;if(!e&&this.enableCountdown){var r=t.getAd(),i=this.companionAdSize;if(i){var o=new google.ima.CompanionAdSelectionSettings,a=parseInt(i.width),s=parseInt(i.height);o.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,o.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE,o.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;var l=r.getCompanionAds(a,s,o)[0];l?this.triggerChannel("CompanionAd",{meta:l.getContent()},vo):this.triggerChannel("CompanionAdEnd",vo)}if(r.isLinear()){var u=function(){var e=this.adsManager.getRemainingTime()>>0;e>-1&&this.triggerChannel("CountdownProgress",{time:e})};this.triggerChannel("CountdownStart",{clickFunction:this.onClickSkip}),u.apply(this),this.checkRemainingTimeId=setInterval(function(){return u.apply(n)},500)}e=!0}}.bind(this)}},{key:"onLoaded",value:function(){return function(e){var t=e.getAd().getAdId()+"##"+e.getAd().getCreativeId();if("AOL"!=this.adSource&&"APPNEXUS"!=this.adSource&&this.excludeAdIds.includes(t)){var n=new Ei(Si.codes.DUPLICATE_AD);this.triggerError(n)}else this.adsManager.resize(this.width,this.height,this.viewMode),this.adsManager.setVolume(this.volume),0==this.isPaused?(this.isStarted=!0,"AOL"!==this.adSource&&"APPNEXUS"!==this.adSource&&this.adsManager.start()):this.adsManager.pause(),this.adInfo=this.exportAdInfo(e.getAd()),this.triggerChannel("Loaded",{adId:t,meta:this.adInfo,innerEvent:e},vo)}.bind(this)}},{key:"onClick",value:function(){return function(e){this.triggerChannel("Click",{innerEvent:e},vo)}.bind(this)}},{key:"onPuase",value:function(){return function(e){var t=this;this.adContainer.addEventListener("click",this.requestResume,!0);var n=0;Jr().isIOS&&(n=1e3),setTimeout(function(){t.triggerChannel("Pause",{innerEvent:e},vo)},n)}.bind(this)}},{key:"onResume",value:function(){return function(e){this.adContainer.removeEventListener("click",this.requestResume,!0),this.triggerChannel("Resume",{innerEvent:e},vo)}.bind(this)}},{key:"onVolumeChanged",value:function(){return function(e){var t=this.volume,n=this.getVolume();this.volume=n,0==t&&0!=n?this.triggerChannel("Muted",{muted:!1,innerEvent:e},vo):0==n&&0!=t&&this.triggerChannel("Muted",{muted:!0,innerEvent:e},vo)}.bind(this)}},{key:"onClickSkip",value:function(){this.triggerChannel("ClickSkip",{},vo)}},{key:"requestResume",value:function(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.triggerChannel("RequestResume",{},vo)}},{key:"exportAdInfo",value:function(e){for(var t in e)if(e.hasOwnProperty(t)&&"object"===Tr(e[t])&&"adId"in e[t])return In({},e[t])}},{key:"decorationEventListener",value:function(e){return"function"==typeof e&&(e=e()),function(t){"function"==typeof e&&e.apply(this,arguments)}}},{key:"setUpManagerEvents",value:function(e,t){var n=this,r={};return hi(e).forEach(function(i){r[i]=t(e[i]).bind(n)}),r}},{key:"triggerChannel",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.adsSessionChannel).trigger.apply(t,[e].concat(r))}},{key:"triggerError",value:function(e){this.triggerChannel("Error",{error:e},vo),this.trigger("Error",{error:e})}},{key:"getChannel",value:function(){return this.adsSessionChannel.getChannel()}},{key:"setTerminationTime",value:function(){var e=this;this.requestTimeoutMS<0||(this.timeoutId=setTimeout(function(){null!=e.adsManager&&e.adsManager.stop();var t=new Ei(Si.codes.CUSTOM_TIMEOUT);e.triggerError(t)},this.requestTimeoutMS))}},{key:"terminationTimeout",value:function(){null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"stopCheckRemaining",value:function(){null!=this.checkRemainingTimeId&&(clearTimeout(this.checkRemainingTimeId),this.checkRemainingTimeId=null,this.triggerChannel("CountdownEnd"))}},{key:"request",value:function(){if(1==this.isOldWindows&&("AOL"==this.adSource||"APPNEXUS"==this.adSource)){var e=new Ei(Si.codes.OS_TOO_OLD);return this.triggerError(e),this}var t=this.adContainer.offsetWidth,n=this.adContainer.offsetHeight;return this.adsRequest.linearAdSlotWidth=t,this.adsRequest.linearAdSlotHeight=n,this.adsRequest.nonLinearAdSlotWidth=t,this.adsRequest.nonLinearAdSlotHeight=n,this.adsRequest.setAdWillAutoPlay(this.autoPlayState.autoplayAllowed),this.adsRequest.setAdWillPlayMuted(this.autoPlayState.autoplayRequiresMuted),this.adsLoader.requestAds(this.adsRequest),this.setTerminationTime(),this.triggerChannel("Request",{requestInfo:this.adsRequest},vo),this}},{key:"setAdsManager",value:function(e,t,n,r){if(null!=this.adsManager)throw"Repeat execution";for(var i in this.managerEvents)this.managerEvents.hasOwnProperty&&e.addEventListener(i,this.managerEvents[i],!1);return e.init(t,n,r),"AOL"!=this.adSource&&"APPNEXUS"!=this.adSource||e.start(),this.width=t,this.height=n,this.viewMode=r,this.adsManager=e,this}},{key:"resize",value:function(e,t,n){return this.width=e,this.height=t,this.viewMode=n,null!=this.adsManager&&this.adsManager.resize(e,t,n),this}},{key:"pause",value:function(){this.isPaused=!0,1==this.isStarted&&this.adsManager.pause()}},{key:"resume",value:function(){this.isPaused=!1,0==this.isStarted?(this.isStarted=!0,this.adsManager.start()):(this.adsManager.resume(),this.triggerChannel("Resume",{},vo))}},{key:"stop",value:function(){return null!=this.adsManager&&(this.adsManager.stop(),this.triggerChannel("Abort")),this}},{key:"setVolume",value:function(e){return this.volume==e?this:(this.volume=e,null!=this.adsManager&&this.adsManager.setVolume(e),this)}},{key:"getVolume",value:function(){return null!=this.adsManager?this.adsManager.getVolume():this.volume}},{key:"getAdInfo",value:function(){return this.adInfo}},{key:"destroy",value:function(){if(this.terminationTimeout(),this.stopCheckRemaining(),this.events={},null!=this.adsManager){for(var e in this.managerEvents)this.managerEvents.hasOwnProperty&&this.adsManager.removeEventListener(e,this.managerEvents[e],!1);this.adsManager.discardAdBreak(),this.adsManager.destroy(),this.adsManager=null}null!=this.adsSessionChannel&&(this.adsSessionChannel.destroy(),this.adsSessionChannel=null),this.managerEvents=null,this.adsLoader=null,this.adsRequest=null,this.adContainer=null,this.adInfo=null}},{key:"hasAdsManager",get:function(){return null!=this.adsManager}}]),t}(),wo="PinAdController",To=function(e){function t(e){ct(this,t);var n=Ir(this,(t.__proto__||Ln(t)).call(this));return n.urlConfig=e,n.unit=null,n}return Nr(t,Hr),ft(t,[{key:"adsRequest",value:function(e){var t=this;null!=this.unit&&this.close();var n=new gi;return this.unit=function(e,t,n){var r=!1;return In(e,{adType:"pinAd",getContent:function(){return t.trigger("Request",{requestInfo:{url:e.data}},wo),ni(/\:\/\/|^\//.test(e.data)?e.data:n.cdnStatic+"/"+e.data).then(function(n){var r=document.createElement("IMG");r.src=n.url,r.alt=e.title;var i=document.createElement("A");return i.href=e.click_through,i.target="_blank",i.onclick=function(){return t.trigger("Click",In({},e),wo)},i.appendChild(r),t.trigger("Loaded",{meta:e.data},wo),t.trigger("AdMediaStart",{duration:e.duration},wo),t.trigger("Impression",{},wo),i}).catch(function(e){throw t.trigger("Error",{error:new Ei(In({reportType:"error"},e))},wo),e})},complete:function(){1!=r&&(r=!0,t.trigger("AdMediaComplete",{},wo),t.trigger("Completed",{},wo))},isResolved:r})}(e,n,this.urlConfig),bn.resolve().then(function(){t.trigger("publish",t.unit)}),n.getChannel()}},{key:"close",value:function(){null!=this.unit&&1!=this.unit.isResolved&&(this.unit.complete(),this.trigger("requestHide",this.unit))}}]),t}();var Ao=pe("iterator"),Io=l.isIterable=function(e){var t=Object(e);return void 0!==t[Ao]||"@@iterator"in t||F.hasOwnProperty(Ye(t))},Po=a(function(e){e.exports={default:Io,__esModule:!0}});o(Po);var Co=l.getIterator=function(e){var t=We(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return f(t.call(e))},ko=a(function(e){e.exports={default:Co,__esModule:!0}}),Lo=o(ko),Ro=a(function(e,t){t.__esModule=!0;var n=i(Po),r=i(ko);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],i=!0,o=!1,a=void 0;try{for(var s,l=(0,r.default)(e);!(i=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}),Do=o(Ro);Pn("getOwnPropertyNames",function(){return Gn.f});var Oo=l.Object,Mo=function(e){return Oo.getOwnPropertyNames(e)},xo=o(a(function(e){e.exports={default:Mo,__esModule:!0}})),No=function(){function e(t){ct(this,e),this.list=(t||[]).concat(),this.breaked=null,this.aborted=null,this.stoped=!1,this.qu=[],this.unsubscribeList=[]}return ft(e,[{key:"add",value:function(e){return this.list.push(e),this}},{key:"do",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(e){return function(t){return new bn(function(n){e(t),n(t)})}}(e),r=this.qu[this.qu.length-1];return r&&"multiple"==r.type&&t?(r.do=r.do||[],r.do.push(n)):this.qu.push({fn:n,type:"general"}),this}},{key:"transform",value:function(e){return this.qu.push({fn:function(e){return function(t){return bn.resolve(e(t))}}(e),type:"general"}),this}},{key:"map",value:function(e){return this.qu.push({fn:function(e){return function(t){return bn.resolve(t.map(e))}}(e),type:"general"}),this}},{key:"filter",value:function(e){return this.qu.push({fn:function(e){return function(t){return bn.resolve(t.filter(e))}}(e),type:"general"}),this}},{key:"takeUntilFromFilter",value:function(e,t){return this.filter(e).takeWhile(function(e){return e.length>0},t)}},{key:"inCase",value:function(e,t,n){return this.qu.push({fn:function(e,t,n){return function(r){return bn.resolve(e(r)?t(r):n(r))}}(e,t,n),type:"general"}),this}},{key:"count",value:function(e){return this.qu.push({fn:function(e){return function(t){return bn.resolve([t.filter(e).length,t])}}(e),type:"general"}),this}},{key:"takeWhile",value:function(e,t){var n=this.qu[this.qu.length-1];return n&&"multiple"==n.type?(n.takeWhile=n.takeWhile||[],n.takeWhile.push(function(t,n){return!!e(t)})):this.qu.push({fn:function(e,n){return function(r,i){return new bn(function(o){e(r)?o(r):n._stop(void 0!==i?i:r,t)})}}(e,this),type:"general"}),this}},{key:"takeUntilFromEventPattern",value:function(e,t){var n=this,r=function e(){n._stop(null,null,!0),t(e)};return this.qu.push({fn:function(i){return e(r),n.unsubscribeList.push(function(){return t(r)}),bn.resolve(i)},type:"general"}),this}},{key:"concat",value:function(){var e;return this.qu.push({fn:(e=this,function(t){var n=this;return new bn(function(r,i){var o=n,a=[],s=t.concat();if(0!=s.length){s.push(function(){return bn.resolve()});var l=s.shift(),u=!1;s.reduce(function(t,n){return t.then(function(t){return e.stoped||u?bn.resolve():(a.push(t),o.takeWhile.every(function(e){return e(t,a)})?(o.do.forEach(function(e){return e(t)}),n(t)):(u=!0,bn.resolve()))})},l()).then(function(e){r(a)},function(e){return i(e)})}else r(a)})}),type:"multiple",do:[],takeWhile:[]}),this}},{key:"merge",value:function(){var e;return this.qu.push({fn:(e=this,function(t){var n=this;return new bn(function(r,i){var o=n,a=[],s=t,l=s.length;if(0!=l){var u=!1;s.forEach(function(t,n){t().then(function(t){e.stoped||u||(a[n]=t,o.takeWhile.every(function(e){return e(t,a)})?(o.do.forEach(function(e){return e(t)}),a.filter(function(e){return!0}).length===l&&r(a)):(u=!0,r(a)))},function(e){return i(e)})})}else r(a)})}),type:"multiple",do:[],takeWhile:[]}),this}},{key:"_stop",value:function(e,t,n){this.stoped=!0,1==n?this.aborted&&this.aborted():this.breaked&&this.breaked(e,t)}},{key:"subscribe",value:function(e,t){var n=this;this.stoped=!1;var r=this,i=this.qu;return new bn(function(e,t){r.breaked=function(t,n){return e([t,n])},r.aborted=function(){return t("abort")},i.map(function(e){return e.fn.bind(e)}).reduce(function(e,t){return e.then(function(e){return r.stoped?bn.resolve():t(e)})},bn.resolve(n.list)).then(function(n){r.stoped?t("abort"):e([n])},function(e){"abort"!==e&&t(e)})}).then(function(t){var r=Do(t,2),i=r[0],o=r[1];n.qu=[],n.unsubscribeList.forEach(function(e){return e()}),n.unsubscribeList=[],e&&e(i,o)}).catch(function(e){n.qu=[],n.unsubscribeList.forEach(function(e){return e()}),n.unsubscribeList=[],t&&t(e)}),function(){n._stop(null,null,!0)}}}],[{key:"of",value:function(t){return new e(t)}}]),e}(),jo=function(e){function t(e){ct(this,t);var n=Ir(this,(t.__proto__||Ln(t)).call(this));n.urlConfig=e;var r,i=(r=navigator.userAgent,/ANDROID|IPHONE|IPAD|IPOD/i.test(r)?"m-web":"web");return n.postData=n.postData({platform:i+"|"+ri}).bind(n),n}return Nr(t,Hr),ft(t,[{key:"createLogger",value:function(e,t,n,r,i){return new Uo(e,t,n,r,i,this.postData)}},{key:"postData",value:function(e){return function(t,n){t=In({},e,t),this.trigger("Report",{reportData:t,partTypeInfo:n||{}});var r=this.urlConfig.cdiApi;if(r)return Wr(r,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:Fi({id:ii.get(),jsonrpc:"2.0",method:"YahooService.InsertYahooAdLog",params:t})})}}},{key:"postDebug",value:function(e,t,n,r){var i=this;return new bn(function(o,a){if(null==e)return console.log("LiTVPlayer postDebug reject: adInfo is null"),void a("adInfo is null");try{void 0!==r&&1==r.isTrusted||(n+="*")}catch(e){}var s={swver:n,unit_id:(t=t||{}).unit_id||"",ad_system:e.adSystem||"",duration:e.duration||0,click_url:e.clickThroughUrl||"",media_url:e.mediaUrl||""};console.log("LiTVPlayer postDebug",s,e,t,n);var l=i.urlConfig.adDebug;l?Wr(l,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:Fi({id:ii.get(),jsonrpc:"2.0",method:"report_debug",params:s})}).then(function(e){1==e.ok?o():a(e.statusText)}).catch(a):o()})}}]),t}(),Uo=function(){function e(t,n,r,i,o,a){ct(this,e),this.spaceId=n,this.assetId=t,this.unitId=r,this.title=i,this.partTypeInfo=o,this.postData=a}return ft(e,[{key:"reportToLitv",value:function(e,t){var n={cdata:e,ad_id:this.unitId,ad_clip:this.spaceId+(t?"|"+t:""),asset_id:this.assetId,title:this.title};this.postData(n,this.partTypeInfo)}},{key:"request",value:function(){return this.reportToLitv("request"),this}},{key:"serve",value:function(){return this.reportToLitv("serve"),this}},{key:"impression",value:function(){return this.reportToLitv("impression"),this}},{key:"complete",value:function(){return this.reportToLitv("complete"),this}},{key:"click",value:function(){return this.reportToLitv("click"),this}},{key:"error",value:function(e){var t=e.reportType;if("warning"==t)return this;var n=["noAd","duplicateAd"].includes(t)?null:e.code;return this.reportToLitv(t,n),this}},{key:"break",value:function(){return this.reportToLitv("break"),this}},{key:"imgClick",value:function(){return this.reportToLitv("imgClick"),this}},{key:"imgImpression",value:function(){return this.reportToLitv("imgImpression"),this}},{key:"vipSkip",value:function(){return this.reportToLitv("vipSkip"),this}},{key:"videoClick",value:function(){return this.reportToLitv("videoClick"),this}},{key:"videoImpression",value:function(){return this.reportToLitv("videoImpression"),this}},{key:"adLoaded",value:function(e){return this.reportToLitv("adload",e),this}},{key:"adDurationFetched",value:function(e){return this.reportToLitv("adDurationFetched",e),this}},{key:"destroy",value:function(){this.postData=null}}]),e}(),Fo=function(e){function t(){ct(this,t);var e=Ir(this,(t.__proto__||Ln(t)).call(this));return e.count=0,e.subs=[],e}return Nr(t,Hr),ft(t,[{key:"requestPause",value:function(e,t){0==this.count&&this.trigger("RequestPause",{partType:e,rewind:t}),this.count+=1}},{key:"requestResum",value:function(e,t){0!=this.count&&(this.count-=1,0==this.count&&(this.trigger("RequestResum",{partType:e,rewind:t}),this.clearSub()))}},{key:"getSub",value:function(e){var t=new Bo(this,e);return this.subs.push(t),t}},{key:"on",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"on",this).apply(this,arguments),this}},{key:"clearSub",value:function(){this.subs.forEach(function(e){return e.destroy()}),this.subs=[]}},{key:"reset",value:function(){0!=this.count&&(this.trigger("Reset"),this.count=0,this.clearSub())}},{key:"forceResum",value:function(){this.subs.forEach(function(e){return e.requestResum()}),this.clearSub()}}]),t}(),Bo=function(){function e(t,n){ct(this,e),this.parentCxt=t,this.isPauseRequested=!1,this.type=n,this.rewind=0}return ft(e,[{key:"requestPause",value:function(){0==this.isPauseRequested&&(this.isPauseRequested=!0,this.parentCxt&&this.parentCxt.requestPause(this.type,this.rewind))}},{key:"requestResum",value:function(){1==this.isPauseRequested&&this.parentCxt&&this.parentCxt.requestResum(this.type,this.rewind),this.parentCxt=null}},{key:"setRewind",value:function(e){void 0!==e&&(this.rewind=e)}},{key:"destroy",value:function(){this.parentCxt=null}}]),e}(),Go="prerolls",Vo="midrolls",Yo="postrolls",zo="jingle",Wo="block_ad",Ho="exit_ad",Zo="end_ad",Ko="comm_ad",qo="house_ad",Jo="content_pool",Xo=[Go,Vo,Yo,"logo",zo,"pause_ad",Wo,Ho,Zo,"pin_ad"],Qo=[Go,Vo,Yo,Wo,Ho,zo,Ko,qo,Zo,Jo],$o=[Go,Vo,Yo,Wo,Ho,Ko,qo,Zo],ea=[Go,Yo,zo],ta="Can Not Find This Part",na="Excluded By Interval",ra="Excluded By Ratio",ia=function(e){function t(e,n,r,i,o,a,s,l){ct(this,t);var u=Ir(this,(t.__proto__||Ln(t)).call(this));return u.lock=!0,u.queue=[],u.oriLiadMeta=null,u.isPaused=!1,u.imaPack=e,u.houseVideoAd=n,u.imageAd=r,u.pinAdController=i,u.countdownComponent=o,u.intervalTransit=a,u.interObsProxy=l,u.elements=null,u.parts=null,u.midrollTimeCodes=[],u.role=null,u.assetId=null,u.linearAdMediaProxy=null,u.linearAdMediaData=null,u.samplingElement=u.samplingElement(),u.pauseAndResumController=new Fo,u.report=new jo(s),u.report.on("Report",function(e){return u.trigger("Report",{reportData:e.reportData,partType:e.partTypeInfo.partType,trunkType:e.partTypeInfo.trunkType,sourcePartType:e.partTypeInfo.sourcePartType})}),u.ignoreDocumentHiddenCheck=!1,u.inLinearAdStream=!1,u.autoBind(u),Xo.forEach(function(e){var t=e.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()});u[t]=u.partFactory(e)}),u.pauseAndResumController.on("RequestPause",function(e){var t=u.trigger("LinearAdStart",{partType:e.partType});e.partType!=Vo||t.defaultPrevented||u.trigger("RequestPause",{partType:e.partType,rewind:e.rewind})}).on("RequestResum",function(e){var t=u.trigger("LinearAdComplete",{partType:e.partType});e.partType!=Vo||t.defaultPrevented||u.trigger("RequestResum",{partType:e.partType,rewind:e.rewind})}).on("Reset",function(){u.trigger("ResetPauseAndResum")}),u}return Nr(t,Hr),ft(t,[{key:"autoBind",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Lo(xo(e.constructor.prototype));!(t=(i=o.next()).done);t=!0){var a=i.value,s=e[a];"constructor"!==a&&"function"==typeof s&&(e[a]=s.bind(e))}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"partFactory",value:function(e){var t=this;return function(n){var r=!1,i=function(){r=!0},o=function(){t.off("Stop",i)};t.one("Stop",i);var a={partType:e,condition:n},s={start:function(){return new bn(function(n,i){if(1==t.lock){t.queue=[s];var l=new Error(e+" is interrupted because not unlocked yet.");return l.isWarning=!0,void i(l)}t.next(a.partType,a.condition).then(function(e){r||e.requestResum(),o(),n()}).catch(function(e){var t=e.error,n=e.pauseAndResumController;!r&&n&&n.requestResum(),o(),t.isWarning?console.warn(t.message):console.error(t),i(t)})})},info:a};return s}}},{key:"reconstruct",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=arguments[3],i=[],o=void 0,a=[],s=n.concat();(o=e.elements||{})["*empty"]={id:"*empty",space_id:"*empty",users:"All",media_type:"video",schema:"empty"};var l=function(n){var l=e[n];if(null==l||"elements"==n||null==l.element_id)return"continue";if(0==l.element_id.length){if(n!=Ko)return"continue";l.element_id.push(["*empty"])}var u=In({},l);n==Go||n==Vo||n==Yo||n==Ho||n==Zo?u.no_ad=Ko:n==Ko&&(u.no_ad=qo),u.enable_countdown=1!=t&&$o.includes(n),u.is_linear=Qo.includes(n),u.inherit_interval=ea.includes(n),n==Vo&&(s=s.map(function(e,t){return{time:e+u.req_timeshift,duration:r[t]}}));var c=/^logo_/.test(n);u.type=c?"logo":n,u.position=c?n.match(/_(.+)/i)[1].toUpperCase():"MC",hi(u).filter(function(e){return/_sampling$/i.test(e)}).forEach(function(e){Array.isArray(u[e])?u[e]=u[e].map(function(e){return 0===e?-1:e}):0===u[e]&&(u[e]=-1)}),n==Jo&&(u.element_sampling=-2),i.push(u),u.element_id=l.element_id.map(function(e,t,n){return e.map(function(e){o[e]||(a.push(e),e="*empty");var t=o[e],n=t.media_type.match(/(.+)_(.+)/i);return null!=n&&(t.media_type=n[1],t.media_type_extend=n[2]),"image"!==t.media_type?e:(t.is_logo=c,e)})})};for(var u in e)l(u);return a.length>0&&(a=a.filter(function(e,t,n){return n.indexOf(e)===t}),console.error("lose elements",a)),{parts:i,elements:o,midroll_time_codes:s}}},{key:"next",value:function(e,t){var n=this;return new bn(function(r,i){var o=Qo.includes(e);if(1==o){if(1==n.inLinearAdStream){var a=new Error(e+" is interrupted because the previous linear ad stream has not ended yet.");return a.isWarning=!0,void i({error:a})}n.inLinearAdStream=!0}var s=null,l=null;"boolean"==typeof t?s=t:"number"==typeof t?l=t>31536e6?t:+new Date+1e3*t:void 0!==t&&(s=t.ignoreInterval,t.endTime?l=t.endTime:t.duration&&(l=+new Date+1e3*t.duration)),n.trigger("Progress",{partType:e,condition:t,endTime:l,state:"AdStreamStart"});var u=n.pauseAndResumController.getSub(e);n.adPart$(n.parts,e,n.elements,n.role,l,null,u,null,e,s,o).then(function(t){if(null==t)return bn.resolve([t,null]);var r=e,i=null;if(t.length>0){var o=t[t.length-1];r=o.part.type,i=o.exclude}return n.fillRemainingTime$(n.parts,n.elements,n.role,l,i,u,r,e,[],t,s)}).then(function(t){var i=Do(t,2),a=i[0],l=i[1];n.trigger("Progress",{partType:e,result:a,contentPoolResult:l,state:"AdStreamComplete"}),n.trigger("AdStreamComplete",{partType:e,result:a,contentPoolResult:l}),1==o&&(n.inLinearAdStream=!1),1==s&&n.intervalTransit(e,null,null,!0),r(u)}).catch(function(t){if(1==o&&(n.inLinearAdStream=!1),1==s&&n.intervalTransit(e,null,null,!0),"abort"==t)return n.trigger("AdStreamCancel",{partType:e,isLinear:o}),void r(u);i({error:t,pauseAndResumController:u})})})}},{key:"adPart$",value:function(e,t,n,r,i,o,a,s,l,u,c){var d=this;return new bn(function(f,p){No.of(e).takeUntilFromEventPattern(function(e){d.on("Stop",e)},function(e){d.off("Stop",e)}).do(function(e){d.trigger("Progress",{partType:t,trunkType:l,sourcePartType:s,partsInfo:e,isLinear:c,state:"AdPartStart"})}).takeUntilFromFilter(function(e){return e.type==t},ta).takeUntilFromFilter(function(e){return 1==u||l!==t||!0!==e.is_linear||d.intervalTransit(t,e.min_interval,e.inherit_interval)},na).takeUntilFromFilter(function(e){return void 0===e.partobj_ratio||e.partobj_ratio>10*Math.random()},ra).map(function(e){var t=JSON.parse(Fi(e.element_id)).map(function(e){return e.filter(function(e){return"Free"==r?"Pay"!=n[e].users:"Free"!=n[e].users})});return t=d.samplingElement(t,e.element_sampling,e.adobj_sampling),e.dc_element_id=t,a.setRewind(e.rewind),e}).map(function(c){return d.adWaterflow$(c,e,t,n,r,i,o,a,s,l,u)}).merge().subscribe(function(e,n){var r=e&&e.reduce(function(e,t){return e.push(t.part),e},[]);d.trigger("Progress",{endReason:n,partType:t,trunkType:l,sourcePartType:s,partsInfo:r,isLinear:c,state:"AdPartComplete"}),n===na&&(e=null),f(e)},function(e){p(e)})})}},{key:"adWaterflow$",value:function(e,t,n,r,i,o,a,s,l,u,c){var d=this,f=function(){return null==o||o>+new Date};return function(){return new bn(function(p,h){No.of(e.dc_element_id).takeUntilFromEventPattern(function(e){d.on("Stop",e)},function(e){d.off("Stop",e)}).do(function(e){d.trigger("Progress",{partType:n,trunkType:u,sourcePartType:l,elementIds:e,state:"AdWaterflowStart"})}).takeWhile(f).map(function(t){return d.adSlot$(e,t,r,n,o,a,s,l,u)}).concat().takeWhile(function(){return f()&&d.documentHiddenCheck()}).count(function(e){return 1==e.needPlayNoAd}).subscribe(function(f){var g=Do(f,2),m=g[0],v=g[1],y=null;if(l!=n){var _=v[v.length-1];y=_?{elementIds:_.excludeElementIds,adIds:_.excludeAdIds}:a}else y=a;var b=v.some(function(e){return!0===e.needPlayBlockAd});d.trigger("Progress",{partType:n,trunkType:u,sourcePartType:l,noAdCount:m,needPlayBlockAd:b,exclude:y,state:"AdWaterflowComplete"});var E="";if(1==b)d.trigger("Progress",{trunkType:u,currentType:n,state:"GotoBlockAd"}),E=Wo;else if("number"==typeof m&&m>0&&e.no_ad){d.trigger("Progress",{trunkType:u,currentType:n,noAdType:e.no_ad,count:m,state:"GotoNoAd"});var S;S=-1==e.filling?m:Math.min(m,e.filling),t.filter(function(t){return t.type===e.no_ad}).forEach(function(e){return e.element_sampling=S}),E=e.no_ad}return""!==E?d.adPart$(t,E,r,i,o,y,s,n,u,c,Qo.includes(E)).then(function(t){var n=t.reduce(function(e,t){return e.parts=e.parts.concat(t.parts),e.exclude.adIds=e.exclude.adIds.concat(t.exclude.adIds),e.exclude.elementIds=e.exclude.elementIds.concat(t.exclude.elementIds),e},{parts:[],exclude:{adIds:[],elementIds:[]}});return n.parts=n.parts.concat([e]),n.part=e,p(n)}).catch(function(e){h(e)}):p({parts:[e],exclude:y,part:e})},function(e){"abort"!=e&&(console.error(e),h(e))})})}}},{key:"adSlot$",value:function(e,t,n,r,i,o,a,s,l){var u=this;return function(c){var d=[],f=[];return s!=r&&(c?(d=d.concat(c.excludeElementIds),f=f.concat(c.excludeAdIds)):o&&(o.elementIds&&(d=d.concat(o.elementIds)),o.adIds&&(f=f.concat(o.adIds)))),new bn(function(o,c){No.of(t).takeUntilFromEventPattern(function(e){u.on("Stop",e)},function(e){u.off("Stop",e)}).filter(function(e){return!d.includes(e)}).map(function(t){return u.adElement$(n[t],e,r,i,f,a,s,l)}).concat().takeWhile(function(e){return e.entity instanceof Error||e.entity instanceof sa}).subscribe(function(e){var t={needPlayNoAd:!1,needPlayBlockAd:!1,excludeElementIds:d,excludeAdIds:f},n=e.find(function(e){return"complete"===e.type});n&&(null!==n.adId?t.excludeAdIds.push(n.adId):t.excludeElementIds.push(n.elementId));var r=!1,i=e.some(function(e){return e.entity instanceof oa?(r=r||"blocked"===e.entity.reportType,!1):!(e.entity instanceof sa)});t.needPlayNoAd=!i&&!r,t.needPlayBlockAd=r,o(t)},function(e){"abort"!=e&&(console.error(e),c(e))})})}}},{key:"adElement$",value:function(e,t,n,r,i,o,a,s){var l=this,u=this.report.createLogger(this.assetId,e.space_id,e.unit_id,e.title,{partType:n,trunkType:s,sourcePartType:a});return function(){return new bn(function(c,d){var f={type:null,entity:null,elementId:e.space_id,adId:null};if("empty"==e.schema)return f.type="emptyContent",f.entity=new sa(e.media_type),c(f);if("video"==e.media_type||"image"==e.media_type){var p=!1,h=function(e){"requestPauseAd"==e.reason&&u.break(),p=!0};return l.one("Stop",h),l.adMedia$(e,t,n,r,i,u,o,a,s).then(function(e){l.off("Stop",h),p||c(e)}).catch(function(e){l.off("Stop",h),p||d(e)})}console.warn("not support media type: "+e.media_type+" ["+e.space_id+"]");var g=new Ei(Si.codes.MEDIA_TYPE_MISMATCH);return u.error(g),f.type="error",f.entity=g,c(f)})}}},{key:"adMedia$",value:function(e,t,n,r,i,o,a,s,l){var u=this,c=In({},e,{position:t.position,is_linear:t.is_linear,enable_countdown:t.enable_countdown,end_time:r});return new bn(function(r,d){var f={type:null,entity:null,elementId:c.space_id,adId:null},p=null,h=!1,g=function(){h=!0};u.one("Stop",g);var m=c.schema.split("_");if(c.adSource=m[1],"pin_ad"==n)p=u.pinAdController;else switch(m[0]){case"yahoo":case"vast":case"ima":p=u.imaPack.setExcludeAdIds(i);break;case"litv":p="image"==c.media_type?u.imageAd:u.houseVideoAd;break;case"gam":if(c.media_type="image"){c.isGpt=!0,p=u.imageAd;break}default:var v=new Ei(Si.codes.SCHEMA_MISMATCH);return o.error(v),f.type="error",f.entity=v,r(f)}var y=t.is_linear;y&&(u.linearAdMediaProxy=p,u.linearAdMediaData=e,u.isPaused&&p.pause());var _={partType:n,trunkType:l,sourcePartType:s,isLinear:y},b=-1,E=function(e){if("IMA"==e&&-1!=b&&1==LiTVPlayer.conf.traceAdRequestTime){var t=+new Date-b;o.adLoaded(t),b=-1}};p.adsRequest(c).onRequest(function(e,t){"IMA"==t&&(b=+new Date,o.request());var n=In({},_,{requestInfo:e.requestInfo,processor:t});u.trigger("AdRequest",n),u.trigger("Progress",In(n,{state:"AdRequest"}))}).onLoaded(function(e,t){"IMA"==t&&(o.serve(),LiTVPlayer.conf.traceAdDuration&&o.adDurationFetched(e.meta.duration||-1),f.adId=e.adId||null),u.trigger("Progress",In(_,{processor:t,meta:e.meta},{state:"AdLoaded"}))}).onImpression(function(e,t){switch(u.trigger("Impression",In({},_,{processor:t})),t){case"IMA":o.impression();break;case"HouseVideoAd":o.videoImpression();break;case"ImageAd":case"PinAdController":o.imgImpression()}}).onPauseRequested(function(e,t){a&&a.requestPause()}).onCompanionAd(function(e,t){u.trigger("CompanionAd",In({},{adType:"companionAd",element:e.meta}))}).onCompanionAdEnd(function(e,t){u.trigger("CompanionAdEnd")}).onAdMediaStart(function(e,t){E(t);var n=In({},_,{processor:t,duration:e.duration});u.trigger("AdMediaStart",n),u.trigger("Progress",In(n,{state:"AdMediaStart"}))}).onAdMediaComplete(function(e,t){var n=In({},_,{processor:t});u.trigger("AdMediaComplete",n),u.trigger("Progress",In(n,{state:"AdMediaComplete"}))}).onCompleted(function(e,t){u.off("Stop",g),y&&(u.linearAdMediaProxy=null,u.linearAdMediaData=null),"IMA"==t&&o.complete(),h||(f.type="complete",f.entity=c,r(f))}).onError(function(e,t){var n=e.error;if(o.error(n),u.trigger("Error",In({},_,{processor:t,error:e})),!1!==e.fatal){E(t),u.off("Stop",g),y&&(u.linearAdMediaProxy=null,u.linearAdMediaData=null);var i="image"==c.media_type?new aa(n):new oa(n);h||(f.type="error",f.entity=i,r(f))}}).onCountdownStart(function(e){u.countdownComponent.start(c.purchase_url,e.clickFunction,e.time)}).onCountdownProgress(function(e){u.countdownComponent.progress(e.time)}).onCountdownEnd(function(){u.countdownComponent.end()}).onClick(function(e,t){switch(t){case"IMA":o.click();break;case"HouseVideoAd":o.videoClick();break;case"ImageAd":case"PinAdController":o.imgClick()}u.trigger("AdClick",e)}).onClickSkip(function(e,t){o.vipSkip()}).onRequestResume(function(e,t){u.resume()}).onPause(function(e,t){u.trigger("AdPause",e)}).onResume(function(e,t){u.trigger("AdResume",e)}).onMuted(function(e,t){u.trigger("AdMuted",e)})})}},{key:"fillRemainingTime$",value:function(e,t,n,r,i,o,a,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=this,c=arguments[9],d=arguments[10],f=+new Date;if(this.trigger("Progress",{trunkType:s,nowTime:f,endTime:r,state:"CheckRemainingTime"}),null==r||f>=r)return bn.resolve([c,l]);this.trigger("Progress",{trunkType:s,currentType:a,state:"GotoContentPool"});var p=Qo.includes(Jo);return this.adPart$(e,Jo,t,n,r,i,o,a,s,d,p).then(function(i){var a=((i||[])[0]||{}).exclude||null;return u.fillRemainingTime$(e,t,n,r,a,o,Jo,s,l.concat(i),c,d)})}},{key:"samplingElement",value:function(){function e(e){for(var t,n,r=e.slice(),i=r.length;i--;)t=r[n=Math.random()*(i+1)<<0],r[n]=r[i],r[i]=t;return r}function t(t,n,r){return r&&(t=t.filter(function(e){return 0!=e.length})),-1==n?t:-2==n?e(t):e(t).slice(0,n)}return function(e,n,r){return e.length<n&&(e=e.concat(Array(n-e.length).fill(["*empty"]))),t(e.map(function(e,n){return t(e,r[n]||-1)}),n,!0)}}},{key:"documentHiddenCheck",value:function(){return 1==this.ignoreDocumentHiddenCheck||ui(this.interObsProxy)}},{key:"stopLinearAd",value:function(e){var t=this;bn.resolve().then(function(){0!=t.inLinearAdStream&&(t.trigger("Stop",{reason:e}),t.imaPack.stop(),t.houseVideoAd.stop(),t.imageAd.stopLinearAd(),t.countdownComponent.end(),t.pauseAndResumController.forceResum())})}},{key:"reset",value:function(e){this.trigger("Stop"),this.queue=[],this.imaPack.stop(),this.houseVideoAd.stop(e),this.imageAd.stop(),this.countdownComponent.end(),this.pauseAndResumController.reset()}},{key:"setMeta",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],s=arguments.length>8&&void 0!==arguments[8]&&arguments[8];if(this.lock=!0,this.reset(),this.oriLiadMeta=void 0===e?void 0:JSON.parse(Fi(e)),e&&e.length>0&&!e.elements)this.trigger("MetaError",e);else{var l=this.reconstruct(e,r,i,o),u=l.elements,c=l.parts,d=l.midroll_time_codes;this.elements=u,this.parts=c,this.role=0==t?"Pay":"Free",this.assetId=n,this.midrollTimeCodes=d,this.imaPack.setReplacement(a),this.ignoreDocumentHiddenCheck=s}}},{key:"getQueue",value:function(){return this.queue}},{key:"unlock",value:function(){this.lock=!1}},{key:"getMidrollTimeCodes",value:function(){return this.midrollTimeCodes}},{key:"pause",value:function(){this.isPaused=!0,null!=this.linearAdMediaProxy&&this.linearAdMediaProxy.pause()}},{key:"resume",value:function(){this.isPaused=!1,null!=this.linearAdMediaProxy&&this.linearAdMediaProxy.resume()}},{key:"combined",value:function(e){var t=this,n=[],r=!1,i=function(){r=!0},o=this.next,a=function(e){e&&n.push(e)},s=function(){n.forEach(function(e){e.requestResum()}),n=[]},l=function(){t.off("Stop",i)};return this.one("Stop",i),{start:function(){return new bn(function(n,i){if(1==t.lock){t.queue=[],e.forEach(function(e){t.queue.push(e)});var u=new Error("combined ads is interrupted because not unlocked yet.");return u.isWarning=!0,void i(u)}e.reduce(function(e,t){return e.then(function(e){if(1!=r){a(e);var n=t.info,i=n.partType,s=n.condition;return o(i,s)}})},bn.resolve()).then(function(e){0==r&&(a(e),s()),l(),n()}).catch(function(e){var t=e.error,n=e.pauseAndResumController;0==r&&(n&&a(n),s()),l(),t.isWarning?console.warn(t.message):console.error(t),i(t)})})}}}},{key:"getSupportive",value:function(){return Xo}},{key:"getCurrentExternalAdInfo",value:function(){return this.imaPack.getCurrentAdInfo()}},{key:"getCurrentLinearAdElement",value:function(){return this.linearAdMediaData}},{key:"sendCurrentExternalAdInfo",value:function(e,t){return this.report.postDebug(this.imaPack.getCurrentAdInfo(),this.linearAdMediaData,e,t)}},{key:"on",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"on",this).apply(this,arguments),this}},{key:"one",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"one",this).apply(this,arguments),this}},{key:"off",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"off",this).apply(this,arguments),this}},{key:"vastTest",value:function(e,t){var n=this,r=t.doNotReplace,i=void 0===r||r,o=t.adSource,a=void 0===o?"debug":o;1==this.inLinearAdStream&&this.stopLinearAd(),setTimeout(function(){n.inLinearAdStream=!0;var t=n.pauseAndResumController.getSub(Vo);n.linearAdMediaProxy=n.imaPack,n.imaPack.adsRequest({data:e,isAdsResponse:/^\<[\s\S]+\>$/m.test(e),enable_countdown:!1,doNotReplace:i,adSource:a}).onRequest(function(e,t){console.log("onRequest",e),n.trigger("AdRequest",{isLinear:!0})}).onLoaded(function(e,t){console.log("onLoaded",e)}).onImpression(function(e,t){console.log("onImpression",e),n.trigger("Impression",{isLinear:!0})}).onPauseRequested(function(e,n){console.log("onPauseRequested",e),t.requestPause()}).onAdMediaStart(function(e,t){console.log("onAdMediaStart",e)}).onAdMediaComplete(function(e,t){console.log("onAdMediaComplete",e)}).onCompleted(function(e){console.log("onCompleted",e),n.inLinearAdStream=!1,n.linearAdMediaProxy=null,t.requestResum()}).onError(function(e,r){console.log("onError|"+e.error.code+"|"+e.error.message,e),e.isLinear=!0,n.inLinearAdStream=!1,t.requestResum(),n.trigger("Error",e)}).onRequestResume(function(e,t){console.log("onRequestResume",e),n.resume()}).onPause(function(e,t){console.log("onPause",e),n.trigger("AdPause",e)}).onResume(function(e,t){console.log("onResume",e),n.trigger("AdResume",e)}).onClick(function(e,t){console.log("onClick",e),n.trigger("AdClick",e)}).onMuted(function(e,t){console.log("AdMuted",e),n.trigger("AdMuted",e)})})}},{key:"paused",get:function(){return this.isPaused}}]),t}(),oa=function(e){function t(){return ct(this,t),Ir(this,(t.__proto__||Ln(t)).apply(this,arguments))}return Nr(t,bi),t}(),aa=function(e){function t(){return ct(this,t),Ir(this,(t.__proto__||Ln(t)).apply(this,arguments))}return Nr(t,bi),t}(),sa=function e(t){ct(this,e),this.mediaType=t},la=function(){function e(){ct(this,e),this.transitMap={main:{countTime:0,inherit:!1}},this.transit=this.transit.bind(this),this.reset()}return ft(e,[{key:"_updateCountTime",value:function(e){for(var t in this.transitMap)this.transitMap.hasOwnProperty(t)&&(this.transitMap[t].countTime+=e)}},{key:"timeChange",value:function(e,t){if(1!=this.lock&&(t>>=0,!(null!==this.preTimeStamp&&t-this.preTimeStamp<1e3)))if(this.preTimeStamp=t,e>>=0,null!=this.preTime){var n=e-this.preTime;n>0&&n<=2&&this._updateCountTime(n),this.preTime=e}else this.preTime=e}},{key:"getMainCount",value:function(){return this.transitMap.main.countTime}},{key:"reset",value:function(){for(var e in this.transitMap)this.transitMap.hasOwnProperty(e)&&("main"!==e?!1===this.transitMap[e].inherit&&delete this.transitMap[e]:this.transitMap[e].countTime=0);this.lock=!0,this.preTimeStamp=null,this.preTime=null}},{key:"start",value:function(){this.lock=!1}},{key:"transit",value:function(e,t,n,r){if(!0===r)return e in this.transitMap&&(this.transitMap[e].countTime=0),!1;if(e in this.transitMap){var i=this.transitMap[e];return null===i.inherit&&(i.inherit=n),i.countTime>=t&&(i.countTime=0,!0)}return this.transitMap[e]={countTime:0,inherit:n},this.lock||this.getMainCount()>t}},{key:"addCount",value:function(e,t){return e in this.transitMap?this.transitMap[e].countTime+=t:this.transitMap[e]={countTime:t,inherit:null},this.transitMap[e].countTime}},{key:"getAllCount",value:function(){var e={};for(var t in this.transitMap)this.transitMap.hasOwnProperty(t)&&(e[t]=this.transitMap[t].countTime);return e}}]),e}(),ua=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ct(this,t);var r=Ir(this,(t.__proto__||Ln(t)).call(this));if("function"!=typeof e)return r.start=r.stop=r.pause=function(){},Ir(r);var i=!1;return r._pContinueSm=function(t){return new bn(function(n,o){if(1==i)e(t).then(n).catch(o);else{var a=e(t);try{"function"==typeof a.then?(a.then(n).catch(o),i=!0):r.trigger("typeError")}catch(e){r.trigger("typeError")}}})},null==n&&(r._pStopSm=function(){return bn.resolve()}),r._skip=!1,r._nowSessionId="",r._checkTimerId=null,r._checkPointTime=0,r._maxRecheck=0,r._errorCheckTime=6e4,r._abortCheckContinue=function(){},r._abortStopContinue=function(){},r}return Nr(t,Hr),ft(t,[{key:"_stopTimer",value:function(){null!=this._checkTimerId&&(clearTimeout(this._checkTimerId),this._checkTimerId=null)}},{key:"_publishError",value:function(e){this.trigger("error",{reason:e,sessionId:this._nowSessionId})}},{key:"_checkContinue",value:function(){var e=this,t=!1;this._abortCheckContinue=function(){t=!0},this._checkPointTime=+new Date,this._pContinueSm(this._nowSessionId).then(function(n){1!=t&&(e._stopTimer(),1==n.continueFlag?e._prepareNextCheck(!1,n).then(function(){e._checkContinue()}):e._publishError(n.reason))}).catch(function(n){1!=t&&(e._stopTimer(),e._prepareNextCheck(!0).then(function(){e._checkContinue()}))})}},{key:"_prepareNextCheck",value:function(e,t){var n=this;return new bn(function(r){var i=1;if(e)i=n._errorCheckTime,n._errorCheckTime=6e4;else{var o=+new Date;n._errorCheckTime=n._checkPointTime+n._maxRecheck-o,n._errorCheckTime<100&&(n._errorCheckTime=100),n._maxRecheck=1e3*t.maxRecheck,(i=n._checkPointTime+1e3*t.minRecheck-o)<1&&(i=1)}setTimeout(r,i)})}},{key:"_stopContinue",value:function(){var e=this,t=!1;return this._abortStopContinue=function(){t=!0},new bn(function(n){""!=e._nowSessionId?e._pStopSm(e._nowSessionId).then(function(){1!=t&&n()}).catch(function(e){1!=t&&(console.warn(e),n())}):n()})}},{key:"_checkSessionIdAndRun",value:function(e){var t=this;return new bn(function(n,r){t._stopTimer(),""!=t._nowSessionId&&t._nowSessionId!=e?t._stopContinue().then(n):n()})}},{key:"start",value:function(e){var t=this;1!=this._skip&&(this._errorCheckTime=6e4,this._abortCheckContinue(),this._checkSessionIdAndRun(e).then(function(){e&&(t._nowSessionId=e,t._checkContinue())}))}},{key:"stop",value:function(){var e=this;1!=this._skip&&this._checkSessionIdAndRun("").then(function(){e._stopContinue()})}},{key:"pause",value:function(){this._stopTimer(),this._abortCheckContinue()}},{key:"skip",value:function(e){1==e&&0==this._skip?(this.pause(),this._stopContinue(),this._nowSessionId="",this._skip=!0):0==e&&(this._skip=!1)}}]),t}(),ca="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNjBweCIgaGVpZ2h0PSI2MHB4IiB2aWV3Qm94PSIwIDAgNjAgNjAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+cGxheV9pY29uPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxsaW5lYXJHcmFkaWVudCB4MT0iNTAlIiB5MT0iMCUiIHgyPSI1MCUiIHkyPSI5OC45OTk3MjklIiBpZD0ibGluZWFyR3JhZGllbnQtMSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNDRkJBRTUiIHN0b3Atb3BhY2l0eT0iMC44NSIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjOEM0NTkzIiBzdG9wLW9wYWNpdHk9IjAuODUiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZW1iZWRkZWRwbGF5ZXJfaG92ZXIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMjAuMDAwMDAwLCAtODUuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJwbGF5X2ljb24iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyMC4wMDAwMDAsIDg1LjAwMDAwMCkiPgogICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0iT3ZhbCIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9InVybCgjbGluZWFyR3JhZGllbnQtMSkiIGN4PSIzMCIgY3k9IjMwIiByPSIyOSI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzIuOTg2ODYwMSwyMS4wMjgxNTMgTDQzLjYxMzQ1NzcsMzcuNDUxMDc2NyBDNDQuMDMzNDk4OSwzOC4xMDAyMzEyIDQzLjg0Nzc2NTgsMzguOTY2OTg1NSA0My4xOTg2MTEzLDM5LjM4NzAyNjcgQzQyLjk3MjA0LDM5LjUzMzYzMTYgNDIuNzA3OTI1MywzOS42MTE2Mjg1IDQyLjQzODA1OTUsMzkuNjExNjI4NSBMMjEuMTg0ODY0MiwzOS42MTE2Mjg1IEMyMC40MTE2NjU1LDM5LjYxMTYyODUgMTkuNzg0ODY0MiwzOC45ODQ4MjcxIDE5Ljc4NDg2NDIsMzguMjExNjI4NSBDMTkuNzg0ODY0MiwzNy45NDE3NjI2IDE5Ljg2Mjg2MSwzNy42Nzc2NDggMjAuMDA5NDY1OSwzNy40NTEwNzY3IEwzMC42MzYwNjM2LDIxLjAyODE1MyBDMzEuMDU2MTA0OCwyMC4zNzg5OTg1IDMxLjkyMjg1OTEsMjAuMTkzMjY1NCAzMi41NzIwMTM2LDIwLjYxMzMwNjYgQzMyLjczODA0MzEsMjAuNzIwNzM3NCAzMi44Nzk0MjkyLDIwLjg2MjEyMzUgMzIuOTg2ODYwMSwyMS4wMjgxNTMgWiIgaWQ9IlRyaWFuZ2xlIiBmaWxsPSIjRkZGRkZGIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMS44MTE1NDUsIDMwLjAwMDA4Mykgcm90YXRlKC0yNzAuMDAwMDAwKSB0cmFuc2xhdGUoLTMxLjgxMTU0NSwgLTMwLjAwMDA4MykgIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==";function da(e,t,n,r,i,o,a,s){t.on("ready",function(){var t=e.querySelector(".fp-qsel");t&&(t.innerText="",t.classList.add("fp-icon"))}),e.classList.add("litv-player"),e.classList.add("no-buffer"),e.classList.add("fp-mute"),1==a&&e.classList.add("no-volume"),1==o.isIE&&e.classList.add("is-ie"),1==o.isWin8?(e.classList.add("is-win8"),e.classList.add("fp-full")):e.classList.contains("is-touch")||e.classList.add("fp-full");var l=e.querySelector(".fp-controls"),u=e.querySelector(".fp-fullscreen");if(u&&l.appendChild(u),s){var c=document.createElement("A");c.target="_blank",c.classList.add("fp-icon"),c.classList.add("litv-brand"),c.href="string"==typeof s?s:"https://www.litv.tv",l.appendChild(c),c.addEventListener("click",function(){return r(Yr.CLICK_BRAND)})}var d=e.querySelector(".fp-player"),f=d.querySelector(".fp-waiting");f.innerHTML="<em></em><em></em><em></em>",d.appendChild(f);var p=d.querySelector(".fp-play");p.removeChild(p.querySelector(".fp-play-rounded-fill"));var h=new oi(ca),g=h.getSVGElement();g.setAttribute("class","fp-play-rounded-fill"),p.appendChild(g);var m=d.querySelector(".fp-ui");m.classList.add("nonlinear_image_container");var v=document.createElement("DIV");v.classList.add("logo_container"),v.classList.add("fp-ui"),d.appendChild(v);var y=document.createElement("DIV");y.classList.add("linear_image_container"),y.classList.add("linear_ad"),d.appendChild(y);var _=document.createElement("DIV");_.classList.add("house_video_ad_container"),_.classList.add("linear_ad"),d.appendChild(_);var b=document.createElement("DIV");b.classList.add("ima_container"),b.style.cssText="position:absolute; top:0; left: 0; width:100%; height:100%;",d.appendChild(b);var E=document.createElement("DIV");E.classList.add("ad_common_ui"),d.appendChild(E);var S=document.createElement("DIV");S.classList.add("ad_controls");var w=e.querySelector(".fp-volumebtn").cloneNode();S.appendChild(w),E.appendChild(S);var T=document.createElement("DIV");T.classList.add("ad_play_icon");var A=h.getSVGElement();A.setAttribute("class","fp-play-rounded-fill"),T.appendChild(A),E.appendChild(T);var I=null;function P(t){e.removeEventListener("mouseleave",P),I.removeEventListener("mouseleave",P),l.click()}l.addEventListener("click",function(t){t.target.classList.contains("fp-qsel")&&((I=d.querySelector(".fp-qsel-menu")).classList.contains("fp-active")?(e.removeEventListener("mouseleave",P),I.removeEventListener("mouseleave",P)):(I.style.left="calc("+(t.target.offsetLeft-(I.offsetWidth>>1))+"px + 0.8em)",e.removeEventListener("mouseleave",P),I.removeEventListener("mouseleave",P),e.addEventListener("mouseleave",P),I.addEventListener("mouseleave",P),r(Yr.QUALITY_MEUN_OPEN)))},!0),e.addEventListener("mouseenter",function(e){t.disabled||l.click()}),e.addEventListener("dblclick",function(e){n.fullscreen()}),[l,E].forEach(function(e){return e.addEventListener("dblclick",function(e){return e.stopPropagation()},!0)}),e.addEventListener("click",function(t){if(i.focus=n,0!=t.isTrusted)if(r(Yr.CLICK,t).defaultPrevented)t.stopImmediatePropagation();else{null==n._src&&t.stopImmediatePropagation();var o=t.target;o.classList.contains("fp-duration")||o.classList.contains("fp-remaining")?t.stopImmediatePropagation():(e.classList.contains("is-live")||e.classList.contains("is-dvr"))&&(o.classList.contains("fp-ui")||o.classList.contains("fp-engine"))&&t.stopImmediatePropagation()}},!0),i.focus||l.click();var C=function(){var e="viewport-fit=cover",t=null,n=!1;function r(){var e=document.body.scrollTop;document.body.scrollTop+=1,setTimeout(function(){document.body.scrollTop=e},1)}return{addCover:function(){if(!n){t=null;var i=document.querySelector("meta[name=viewport]");if(i){var o=i.getAttribute("content");o?(t=o,o.split(",").map(function(e){return e.trim()}).filter(function(e){return 0==e.indexOf("viewport-fit")})[0]?o.replace(/viewport-fit=.+?\b/,e):(o.length>0&&(o+=", "),o+=e)):(t="",o=e),i.setAttribute("content",o)}else(i=document.createElement("META")).name="viewport",i.content=e,document.querySelector("head").appendChild(i);n=!0,r()}},reset:function(){if(n){var e=document.querySelector("meta[name=viewport]");e&&(null==t?document.querySelector("head").removeChild(e):e.setAttribute("content",t),n=!1,r())}}}}(),k=0,L=0,R=null;function D(){var t=d.offsetWidth,n=d.offsetHeight;L!=t||k!=n?(L=t,k=n,t/n>=16/9?(e.classList.remove("straight"),e.classList.add("horizontal"),v.style.width=n*(16/9)+"px",v.style.height=n+"px",v.style.top="0",v.style.transform="translate(-50%, 0)"):(e.classList.remove("horizontal"),e.classList.add("straight"),v.style.width=t+"px",v.style.height=t*(9/16)+"px",v.style.top="50%",v.style.transform="translate(-50%, -50%)"),R=window.requestAnimationFrame(D)):R=window.requestAnimationFrame(D)}var O=null,M=function(){null==O&&(O=document.createElement("DIV")),e.parentNode.insertBefore(O,e),document.body.appendChild(e),document.body.classList.add("litvplayer-fullwindow")};1==t.isFullscreen&&(flowplayer.support.fullscreen||M(),D()),t.on("fullscreen",function(e){flowplayer.support.fullscreen||M(),C.addCover(),D()}).on("fullscreen-exit",function(t){flowplayer.support.fullscreen||(O.parentNode.insertBefore(e,O),O.parentNode.removeChild(O),document.body.classList.remove("litvplayer-fullwindow")),e.classList.remove("straight"),e.classList.remove("horizontal"),v.removeAttribute("style"),C.reset(),window.cancelAnimationFrame(R),k=L=0});var x=null;function N(){e.classList.add("is-mouseover"),clearTimeout(x),x=setTimeout(function(){e.classList.remove("is-mouseover")},t.conf.mouseoutTimeout)}function j(){clearTimeout(x),e.classList.remove("is-mouseover")}function U(e){e.stopImmediatePropagation()}var F=document.createElement("A");F.target="_blank",F.classList.add("fp-icon"),F.classList.add("caption"),m.appendChild(F),F.addEventListener("click",function(){return r(Yr.CLICK_CAPTION)});var B=null;function G(){null!=B&&(B.parentNode.removeChild(B),B=null),F.href="javascript:void(0);"}return function(e,t,n){if("function"==typeof window.requestAnimationFrame){var r=void 0,i=t||e,o=0;r=window.requestAnimationFrame(function t(){r=window.requestAnimationFrame(t);var n=i.clientWidth;o!=n&&(o=n,ti(e,"less-630",n<630),ti(e,"less-300",n<300),ti(e,"less-200",n<200))}),n.on("shutdown",function(){window.cancelAnimationFrame(r)})}}(e,d,t),{fpPlayerContainer:d,logoContainer:v,nonlinearImageContainer:m,linearImageContainer:y,houseVideoAdContainer:_,imaAdContainer:b,adPlayIcon:T,MainViewOperator:{linearAdStart:function(){e.addEventListener("mouseover",U,!0),e.addEventListener("mousemove",N),e.addEventListener("mouseleave",j)},linearAdEnd:function(){e.removeEventListener("mouseover",U,!0),e.removeEventListener("mousemove",N),e.removeEventListener("mouseleave",j)},setCaption:function(e){var t=e.text,n=void 0===t?"":t,r=e.link,i=void 0===r?"javascript:void(0);":r;""!=n?(null==B&&(B=document.createElement("SPAN"),F.appendChild(B)),B.innerText=n,F.href=i):G()},removeCaption:G,appendChild:function(e){return d.appendChild(e)}}}}var fa=function(e){console.log("%c"+e.state,"color: #4B8A08",e.getCarryInfo())},pa=function(e){console.log("%cAdReport","color: #FF8000",e.getCarryInfo())},ha=function(e){var t=e.getCarryInfo(),n=ga(t,"code"),r=["%c"+e.type.replace(/(?:^|\_)(\w)/g,function(e,t){return t.toUpperCase()}),"color: #FE2E2E",t];n&&r.splice(2,0,n),console.log.apply(null,r)},ga=function e(t,n){if(null===t||"object"!==(void 0===t?"undefined":Tr(t)))return null;for(var r in t)if(t.hasOwnProperty(r)){if(r==n)return t[r];var i=e(t[r],n);if(null!==i)return i}return null};var ma={cdiProxy:{development:["https://s-proxy01.svc.litv.tv/cdi/v2/rpc"],staging:["https://s-proxy01.svc.litv.tv/cdi/v2/rpc"],production:["https://twproxy01.svc.litv.tv/cdi/v2/rpc","https://twproxy02.svc.litv.tv/cdi/v2/rpc","https://twproxy03.svc.litv.tv/cdi/v2/rpc"]},cdiApi:{development:[],staging:["https://s-api01.svc.litv.tv/cdi/v2/rpc","https://s-api02.svc.litv.tv/cdi/v2/rpc","https://s-api03.svc.litv.tv/cdi/v2/rpc"],production:["https://p-api01.svc.litv.tv/cdi/v2/rpc","https://p-api02.svc.litv.tv/cdi/v2/rpc","https://p-api03.svc.litv.tv/cdi/v2/rpc"]},adDebug:{development:[],staging:["https://mc062tqbwa.execute-api.ap-northeast-1.amazonaws.com/staging/debug"],production:["https://mc062tqbwa.execute-api.ap-northeast-1.amazonaws.com/production/debug"]},cdnStatic:{development:["https://cdnstatic-staging.svc.litv.tv/"],staging:["https://cdnstatic-staging.svc.litv.tv/"],production:["https://cdnstatic.svc.litv.tv/"]}},va=hi(ma),ya=[ai.DEVELOPMENT,ai.STAGING,ai.PRODUCTION];function _a(e,t){var n=In({},e);return va.forEach(function(e){var r=t[e];r&&ya.forEach(function(t){r[t]&&(n[e][t]=r[t])})}),n}function ba(e,t,n){var r=t[e][n];return r[Math.random()*r.length>>0]}var Ea=function(){function e(){ct(this,e),this.urlConfig=_a(ma,{})}return ft(e,[{key:"setConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e&&(this.urlConfig=_a(this.urlConfig,e))}},{key:"getAll",value:function(){return this.urlConfig}},{key:"cdiProxy",get:function(){return ba("cdiProxy",this.urlConfig,ai.current)}},{key:"cdiApi",get:function(){return ba("cdiApi",this.urlConfig,ai.current)}},{key:"adDebug",get:function(){return ba("adDebug",this.urlConfig,ai.current)}},{key:"cdnStatic",get:function(){return ba("cdnStatic",this.urlConfig,ai.current)}}]),e}(),Sa="播放失敗, 請重新載入頁面",wa=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];ct(this,t);var i=Ir(this,(t.__proto__||Ln(t)).call(this));i.isFirst=!0,i.platformInfo=Jr(),i.noVolume=0==flowplayer.support.volume||!1!==flowplayer.support.android,i.defOpt=In({},{decideVisible:!1,visibleThreshold:.3,checkContinueStream:null,stopContinueStream:null,displayClickToUnMute:!1,allowAdPasue:!1,appInfo:"",cover:null,adRequestTimeout:8e3,brand:!1,customApiUrlConfig:void 0,interObsHosting:!1,vpaidMode:"ENABLE"},n),""!==i.defOpt.appInfo&&(i.defOpt.appInfo+="|"),i.defOpt.appInfo+="pv."+r+"|"+ri,i._container=e,i._src=null,i._config={autoplay:!1,fullscreen:!i.platformInfo.isIOSAndInIFrame,chromecast:!1,share:!1,key:"$384286923161798",hlsQualities:[{level:-1,label:"Auto"},{level:0,label:"360p"},{level:1,label:"480p"},{level:2,label:"720p"},{level:3,label:"1080p"}],hlsjs:{capLevelToPlayerSize:!0,maxBufferLength:3,maxMaxBufferLength:10,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:3,listeners:["hlsLevelSwitch","hlsFpsDrop","hlsFpsDropLevelCapping"],livePositionOffset:0},safari:!0,errors:["",Sa+" (Video loading aborted)",Sa+" (Network error)",Sa+" (Video not properly encoded)",Sa+" (Video file not found)",Sa+" (Unsupported video)",Sa+" (Skin not found)",Sa+" (SWF file not found)",Sa+" (Subtitles not found)",Sa+" (Invalid RTMP URL)",Sa+" (Unsupported video format. Try installing Adobe Flash.)"]},(i.platformInfo.isXP||i.platformInfo.isVista)&&(i._config.engine="flash"),i.urlConfig=new Ea,i.defOpt.customApiUrlConfig&&i.urlConfig.setConfig(i.defOpt.customApiUrlConfig),1==i.defOpt.interObsHosting?i.interObsProxy=new li:i.interObsProxy=null,i.abortPreSrc=function(){},i.abortPreReqSrc=function(){},i.playedCount=new la,i.programEndTime=null,i.inlinearAd=!1,i.inSetSrcThrottle=!1,i.temporarySrcInfo={},i.temporarySrcInfoUsed=!0,i.currentMuted=null,i.isStopped=!0,i.inExecution=!1,i.inViewport=!0,i.onViewportChange=i.onViewportChange(),i.waitInViewport=i.waitInViewport(),i.waitClick=i.waitClick(),i.queue=[],i.pauseAdDelayTimer=null,i.isSeekingActionTimer=null,i.handleContentPlayerEvents=i.handleContentPlayerEvents(),i.ignoreDocumentHiddenCheck=!1,i.clip={};var o=i.defOpt.cover||!0;i.fplayer=flowplayer(e,In({},i._config,{splash:o,clip:{sources:[{type:"video/mp4",src:""}]}})),ho.prototype.swfHls=i.fplayer.conf.swfHls,i.uiDisableControl=function(e){var t=!1,n=e.disabled,r=function(r){n=r,1!=t&&e.disable(r)};return{lock:function(){t=!0},unlock:function(){t=!1,r(n)},uiDisable:r}}(i.fplayer),i.uiDisable=i.uiDisableControl.uiDisable,i.keyboradHandle=qr(i.fplayer);var a=Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).bind(i),s=da(e,i.fplayer,i,a,t.prototype,i.platformInfo,i.noVolume,i.defOpt.brand),l=s.fpPlayerContainer,u=s.logoContainer,c=s.linearImageContainer,d=s.houseVideoAdContainer,f=s.nonlinearImageContainer,p=s.imaAdContainer,h=s.adPlayIcon,g=s.MainViewOperator;i.MainViewOperator=g,i.defOpt.decideVisible&&function(e,t,n,r,i){if(i instanceof li)return i.on(Yr.IN_VIEWPORT,function(e){n.inViewport=!0,r(Yr.IN_VIEWPORT)}),void i.on(Yr.OUT_VIEWPORT,function(e){n.inViewport=!1,r(Yr.OUT_VIEWPORT)});var o=void 0;new IntersectionObserver(function(t,i){var a=t[0].intersectionRatio;o=a>e;var s=!1;!document[Xr]&&o?0==n.inViewport&&(n.inViewport=!0,s=!0):1==n.inViewport&&(n.inViewport=!1,s=!0),1==s&&(1==n.inViewport?r(Yr.IN_VIEWPORT):r(Yr.OUT_VIEWPORT))},{threshold:e}).observe(t),document.addEventListener(Qr,function(){n.isStopped||0!=o&&(document[Xr]?(n.inViewport=!1,r(Yr.OUT_VIEWPORT)):(n.inViewport=!0,r(Yr.IN_VIEWPORT)))})}(i.defOpt.visibleThreshold,e.querySelector(".fp-player"),i,a,i.interObsProxy),i.unmeuntMask=function(e){var t=e,n=null;function r(e){t._container.classList.add("is-mouseover"),null!=n&&n.removeEventListener("touchend",r,!0)}function i(e){s(),t.fplayer.mute(!1),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),a()}function o(e){1!=e.muted&&(s(),a())}function a(){null!=n&&(n.parentNode.removeChild(n),n=null)}function s(){t.off(Yr.MUTE,o),null!=n&&(n.removeEventListener("click",i,!0),n.removeEventListener("touchend",r,!0))}return{create:function(){(n=document.createElement("DIV")).classList.add("unumute"),n.innerText="取消靜音",t._container.appendChild(n),n.addEventListener("touchend",r,!0),n.addEventListener("click",i,!0),t.on(Yr.MUTE,o)},remove:function(){s(),a()}}}(i),i.queueNext=i.queueNext.bind(i),["play","pause","seek"].forEach(function(e){i[e]=i.decorateAction(i[e],e)});var m=i,v={get currentTime(){return m.fplayer.ready?m.fplayer.video.time:0},get isFullscreen(){return m.fplayer.isFullscreen},get muted(){return m.fplayer.muted||!1},get volume(){return m.fplayer.volumeLevel}},y=function(){try{return google.ima,!1}catch(e){return console.error('May have "ad block"'),!0}}();i.ssControl=new ua(i.defOpt.checkContinueStream,i.defOpt.stopContinueStream),i.imaPack=new Eo(y,p,v,i.platformInfo,i.defOpt.adRequestTimeout,i.defOpt.vpaidMode),i.houseVideoAd=new mo(d,v,i.platformInfo,i.urlConfig),i.imageAd=new Ii(y,u,f,c,l,i.urlConfig),i.pinAdController=new To(i.urlConfig),i.countdownComponent=i.initCountdownComponent(l),i.liAd=i.initLiAd(i.imaPack,i.houseVideoAd,i.imageAd,i.pinAdController,i.countdownComponent,i.playedCount.transit,i.urlConfig,i.interObsProxy),h.addEventListener("click",function(e){return i.linearAd$play()}),function(e,t){t.getSupportive().forEach(function(n){var r=n.replace(/\_(\w)/g,function(e,t){return t.toUpperCase()}),i="display"+r.replace(/^(.)/g,function(e,t){return t.toUpperCase()});e[i]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t[r](e).start()}})}(i,i.liAd),i.fplayer.on("mute",function(e,n){var r=n.muted||!1;i.currentMuted!==r&&(i.currentMuted=r,i.imaPack.mute(r),i.houseVideoAd.mute(r),e.muted=r,e.getCarryInfo=function(){return{muted:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.MUTE,e,r))}),i.fplayer.on("volume",function(e,n,r){var o=.5*r;i.imaPack.setVolume(o),i.houseVideoAd.setVolume(r),e.volumeLevel=r,e.getCarryInfo=function(){return{volumeLevel:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.VOLUME,e,r)}),i.fplayer.on("shutdown stop unload flashdisabled",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,e.type,e)}),i.fplayer.on("fullscreen fullscreen-exit",function(e){i.imaPack.resize(),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,e.type,e)}),i.fplayer.on("speed",function(e,n,r){e.level=r,e.getCarryInfo=function(){return{level:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.SPEED,e,r)}),i.fplayer.on("quality",function(e,n,r){e.index=r,e.getCarryInfo=function(){return{index:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.QUALITY,e,r)}),i.fplayer.on("load ready",function(e,n,r){e.video=r,e.getCarryInfo=function(){return{video:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,e.type,e,r)}),i.fplayer.on("beforeseek buffer",function(e,n,r){e.position=r,e.getCarryInfo=function(){return{position:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,e.type,e,r)}),i.fplayer.on("progress",function(e,n,r){i.playedCount.timeChange(r,e.timeStamp||+new Date),r*=1e3,e.time=r,e.getCarryInfo=function(){return{time:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.PROGRESS,e,r)}),i.fplayer.on("error",function(e,n,r){n.error=n.loading=!1,e.error=r,e.getCarryInfo=function(){return{error:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.ERROR,e,r)}),i.imageAd.on("click",function(e){1==e.is_logo?Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.CLICK_LOGO,e):0==e.is_linear&&Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.CLICK_PAUSE_BANNER,e)}),i.imageAd.on("impression",function(e){0==e.is_logo&&0==e.is_linear&&Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.PAUSE_BANNER_IMPRESSION,e)}),i.pinAdController.on("publish",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.PUBLISH_COMPANION_AD,e)}),i.pinAdController.on("requestHide",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.COLLAPSE_COMPANION_AD,e)}),i.ssControl.on("error",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.MULTIPLE_ACCOUNT_USING,e)}),i.ssControl.on("typeError",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",i).call(i,Yr.ERROR,{message:"checkContinueStream type error",error:e})});var _=new di(i.imageAd);return _.on("PauseRequested",function(e){1==e.disableControl?(i.keyboradHandle.stop(),i.inlinearAd=!0,i.uiDisable(!0),i._container.classList.add("linear_ad_impression"),i.handleContentPlayerEvents(!1),i.fplayer.pause()):(i.fplayer.pause(),i.fplayer.one("resume",_.removeAll),setTimeout(i.abortPauseAd,100))}).on("AdMediaComplete",function(e){0!=e.is_linear&&(i.keyboradHandle.resume(),i.inlinearAd=!1,i.uiDisable(!1),i._container.classList.remove("linear_ad_impression"),i._container.classList.remove("ad_paused"),i.fplayer.resume(),i.handleContentPlayerEvents(!0))}),i.assignImage=function(e,t){return _.assign(e,t)},window.addEventListener("resize",function(){i.imaPack.resize()}),i}return Nr(t,Hr),ft(t,[{key:"initCountdownComponent",value:function(e){var n=this,r=new fi(e);return r.on("click",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,Yr.CLICK_SKIP,e)}),r}},{key:"initLiAd",value:function(e,n,r,i,o,a,s,l){var u=this,c=new ia(e,n,r,i,o,a,s,l);return c.on("LinearAdStart",function(e){u.inlinearAd=!0,u.MainViewOperator.linearAdStart(),u.uiDisable(!0),u._container.classList.add("linear_ad_impression"),u.fplayer.on("progress.inLinearAd",function(e,t,n){u.fplayer.pause()}),"midrolls"!==e.partType&&u.fplayer.on("beforeseek.inLinearAd",function(e){e.preventDefault()})}).on("LinearAdComplete",function(e){u.fplayer.off(".inLinearAd"),u.inlinearAd=!1,u.MainViewOperator.linearAdEnd(),u.uiDisable(!1),u._container.classList.remove("linear_ad_impression"),u._container.classList.remove("ad_paused"),1==u.lookAfterTemporarySrc(e.partType)&&e.preventDefault()}).on("RequestPause",function(e){if(u.keyboradHandle.stop(),u.handleContentPlayerEvents(!1),u.fplayer.pause(),u.imageAd.closeNonLinearBanner(),!u.clip.live&&e.rewind){var n=u.fplayer.video.time+e.rewind;n=Math.max(n,0),u.fplayer.seek(n)}u.fplayer.on("beforeseek.inLinearAd",function(e){e.preventDefault()}),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.PAUSE_FOR_AD,e)}).on("RequestResum",function(e){u.fplayer.off(".inLinearAd"),u._container.classList.remove("ad_paused"),u.keyboradHandle.resume(),1==u.ignoreDocumentHiddenCheck||ui(u.interObsProxy)?u.fplayer.resume():u.requestPauseAd(),u.handleContentPlayerEvents(!0),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.RESUM_FOR_AD,e)}).on("ResetPauseAndResum",function(e){u.MainViewOperator.linearAdEnd(),u._container.classList.remove("linear_ad_impression"),u._container.classList.remove("ad_paused")}).on("AdRequest",function(e){1!=e.isLinear||u.fplayer.playing||u._container.classList.add("is-loading"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.AD_REQUEST,e)}).on("Impression",function(e){1==e.isLinear&&Aa.apply(u)}).on("AdMediaStart",function(e){e.duration=1e3*e.duration,e.isLinear?(u._container.classList.remove("is-loading"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.LINEAR_AD_MEDIA_START,e,e.duration)):Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.NONLINEAR_AD_MEDIA_START,e,e.duration)}).on("CompanionAd",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.PUBLISH_COMPANION_AD,e)}).on("CompanionAdEnd",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.COLLAPSE_COMPANION_AD,e)}).on("AdMediaComplete",function(e){e.isLinear?Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.LINEAR_AD_MEDIA_COMPLETE,e):Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.NONLINEAR_AD_MEDIA_COMPLETE,e)}).on("Error",function(e){1==e.isLinear&&!1!==e.error.fatal&&u._container.classList.remove("is-loading"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.AD_ERROR,e)}).on("MetaError",function(e){console.error("MetaError"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.AD_ERROR,{message:"LiAd Meta Error",liad:e})}).on("Report",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.AD_REPORT,e)}).on("Progress",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.AD_PROGRESS,e)}).on("AdStreamComplete",function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",u).call(u,Yr.AD_STREAM_COMPLETE,e)}).on("AdStreamCancel",function(e){1==e.isLinear&&u._container.classList.remove("is-loading")}).on("AdClick",function(e){1==u.inlinearAd&&0==u.paused&&setTimeout(function(){ui(u.interObsProxy)||u.linearAd$pause()},300)}).on("AdPause",function(e){var t=!ui(u.interObsProxy);1==u.defOpt.allowAdPasue||!0===t?(u._container.classList.add("ad_paused"),1==t&&document.addEventListener(Qr,function e(){ui(u.interObsProxy)&&u.linearAd$play(),document.removeEventListener(Qr,e)})):u.linearAd$play()}).on("AdResume",function(e){u._container.classList.remove("ad_paused")}).on("AdMuted",function(e){u.fplayer.mute(e.muted)}),c}},{key:"prepareVideo",value:function(e,t,n,r,i,o){this.abortPreReqSrc();var a=this;return new bn(function(s,l){a.keyboradHandle.stop(),a.handleContentPlayerEvents(!1);var u=function(e,t,n,r,i,o,a,s,l,u){e="number"!=typeof e?.2:Math.max(e/1e3>>0,.2);var c=null,d=!1,f=function e(n){s.removeEventListener("click",e,!0),s.removeEventListener("touchstart",e,!0),u.triggerUserAction(),l.triggerUserAction(),s.classList.remove("wait-click"),setTimeout(function(){return t(!0)})},p=function(e,t){if(i){var n=void 0,r=void 0;0==e?(n=!1,r=!1):t?(n=!0,r=!0):(n=!0,r=!1),u.setAutoPlayState({autoplayAllowed:n,autoplayRequiresMuted:r})}},h=function(){d=!0,null!=c&&(c.off(".setSrc"),c.off(".beforeReady")),s.removeEventListener("click",f,!0),s.removeEventListener("touchstart",f,!0)},g=function(){h(),p(!1),s.addEventListener("click",f,!0),s.addEventListener("touchstart",f,!0),s.classList.add("wait-click")};return{cancel:h,listener:function(s,l){d=!1,c=l,l.off(".setSrc"),a&&o.supportLocalStorage&&(window.localStorage.volume=1),r&&l.mute(!0,!0),"stop"!=s.type?(l.one("stop.beforeReady",g),bn.resolve().then(function(){return n?bn.resolve():(t=l.video,e>t.duration&&(e=t.duration),new bn(function(e){"html5"==l.engine.engineName||o.isIE?setTimeout(e,500):e()}).then(function(){if(!d)return new bn(function(t){l.seek(e,t)})}));var t}).then(function(){if(!d)return new bn(function(e){setTimeout(e)})}).then(function(){return 1==o.isXP||1==o.isVista||n||0==i?bn.resolve(!0):function(){if(!d)return new bn(function(e){var t=!1,n=null,r=l.video.time,i=function(){null!=n&&clearInterval(n),l.off(".checkPausedOnLoaded"),t=!0},a=function(){if(d)i();else if(1!=t){var n=l.video.time;r==n?(i(),e()):(r=n,l.pause())}};if(1==o.isFirefox&&1!=o.isXP&&1!=o.isVista)l.pause(a);else{var s=0;l.on("progress.checkPausedOnLoaded",function(){s++>0&&a()}),l.pause(),n=setInterval(function(){a()},10)}})}()}).then(function(e){d||(h(),p(!0,l.muted),t(!0===e))})):g()}}}(n,s,t,i,o,a.platformInfo,a.noVolume,a._container,a.houseVideoAd,a.imaPack),c=u.listener,d=u.cancel,f=In({},a.clip,{sources:$r(e),cuepoints:r});a.abortPreReqSrc=d,a.fplayer.one("error.setSrc",function(){d(),a.fplayer.error=!1,a.fplayer.loading=!1}),a.fplayer.one("ready.setSrc stop.setSrc",c).load(f)})}},{key:"handleContentPlayerEvents",value:function(){var e=!1;return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t!=e&&(e=t,t?this.enableContentPlayerEvents():this.disableContentPlayerEvents())}}},{key:"enableContentPlayerEvents",value:function(){var e=this;this.fplayer.on("cuepoint.fp",function(t,n,r){if("midroll_time_code"==r.type){var i=r.duration;e.requestMidroll({duration:i})}}).on("seek.fp",function(t,n,r){return e.onSeek(t,n,r)}).on("finish.fp",function(t){return e.onFinish(t)}).on("pause.fp",function(t){return e.onPause(t)}).on("resume.fp",function(t){return e.onResume(t)}).on("beforeresume.fp",function(n){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",e).call(e,Yr.BEFORE_RESUME,n)}).on("disable.fp",function(n){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",e).call(e,Yr.DISABLE,n)})}},{key:"disableContentPlayerEvents",value:function(){this.fplayer.off(".fp")}},{key:"onSeek",value:function(e,n,r){var i=this;null!=this.isSeekingActionTimer&&(clearTimeout(this.isSeekingActionTimer),this.isSeekingActionTimer=null),this._container.classList.add("is-seeking-action"),this.isSeekingActionTimer=setTimeout(function(){i._container.classList.remove("is-seeking-action")},1e3),1==this.inlinearAd?0==n.paused&&n.pause():this.clip.live||this.requestMidroll(),e.position=r,e.getCarryInfo=function(){return{position:r}},Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",this).call(this,Yr.SEEK,e,r)}},{key:"onFinish",value:function(e){var n=this;Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",this).call(this,Yr.FILM_FINISH,e),this.abortPauseAd(),this.pinAdController.close(),this.liAd.postrolls({endTime:this.programEndTime}).start().then(function(){n._container.classList.add("is-ended"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,Yr.ENDED,{currentInfo:n.currentInfo})}).catch(function(e){!e.isWarning&&console.error(e),n._container.classList.add("is-ended"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,Yr.ENDED,{currentInfo:n.currentInfo})})}},{key:"onPause",value:function(e){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",this).call(this,Yr.PAUSE,e).defaultPrevented||(this.pauseAdDelayTimer=setTimeout(this.requestPauseAd.bind(this),300))}},{key:"onResume",value:function(e){this._container.classList.remove("is-ended"),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",this).call(this,Yr.RESUME,e),this.abortPauseAd(),this.imageAd.closeNonLinearBanner()}},{key:"abortPauseAd",value:function(){null!=this.pauseAdDelayTimer&&(clearTimeout(this.pauseAdDelayTimer),this.pauseAdDelayTimer=null)}},{key:"decorateAction",value:function(e,t){return function(){if(1==this.inlinearAd){var n="linearAd$"+t;return n in this&&this[n].apply(this,arguments),this}return this.inExecution?this.queue.push({fn:e,arg:arguments}):(this.inExecution=!0,e.apply(this,arguments)),this}}},{key:"linearAd$play",value:function(){this.liAd.resume()}},{key:"linearAd$pause",value:function(){this.liAd.pause()}},{key:"queueNext",value:function(){if(this.inExecution=!1,0!=this.queue.length){var e=this.queue.shift(),t=e.fn,n=e.arg;t.apply(this,n)}}},{key:"cleanQueue",value:function(){this.inExecution=!1,this.queue=[]}},{key:"requestMidroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.liAd.midrolls(e).start().catch(function(e){return!e.isWarning&&console.error(e)})}},{key:"requestPauseAd",value:function(){return this.liAd.stopLinearAd("requestPauseAd"),this.liAd.pauseAd().start().catch(function(e){return!e.isWarning&&console.error(e)})}},{key:"setSrcThrottle",value:function(){var e=this;this.inSetSrcThrottle=!0,Kr().then(function(){e.inSetSrcThrottle=!1,1!=e.temporarySrcInfoUsed&&e.resetSrcByTemporary()})}},{key:"lookAfterTemporarySrc",value:function(e){var t=this;return 1!=this.temporarySrcInfoUsed&&(this.abortPreSrc(),this.temporarySrcInfo.isWakeFromKeepPlayingAd=!0,bn.resolve().then(function(){return t.resetSrcByTemporary()}),!0)}},{key:"resetSrcByTemporary",value:function(){this.setSrcCore(this.temporarySrcInfo),this.temporarySrcInfoUsed=!0}},{key:"setSrcCore",value:function(e){var n=this,r=e.autoPlay,i=e.src,o=e.sessionId,a=e.startTime,s=e.liadMeta,l=e.playAds,u=e.assetId,c=e.midrollTimeCodes,d=e.midrollTimecodeDuration,f=e.mediaMode,p=void 0===f?"vod":f,h=e.keepPlayingAd,g=void 0!==h&&h,m=e.programEndTime,v=void 0===m?null:m,y=e.midrollBeforeStart,_=void 0!==y&&y,b=e.midrollBeforeStartDuration,E=void 0===b?0:b,S=e.isWakeFromKeepPlayingAd,w=void 0!==S&&S,T=e.adUrlReplacement,A=void 0===T?[]:T,I=e.muted,P=void 0!==I&&I,C=e.cover,k=void 0===C?null:C,L=e.caption,R=e.enableCountdown,D=e.hiddenCheck,O=e.companionAdSize;if(this.temporarySrcInfo={autoPlay:r,assetId:u,liadMeta:s,playAds:l,programEndTime:v,src:i,sessionId:o,startTime:a,keepPlayingAd:g,mediaMode:p,midrollTimeCodes:c,midrollTimecodeDuration:d,midrollBeforeStart:_,midrollBeforeStartDuration:E,adUrlReplacement:A,muted:P,cover:k,caption:L,enableCountdown:R,hiddenCheck:D,companionAdSize:O},1==this.inSetSrcThrottle||1==this.inlinearAd&&1==g)this.temporarySrcInfoUsed=!1;else{this.keyboradHandle.setMode(p),this.keyboradHandle.stop(),this.imaPack.setCompanionAdSize(O),this.programEndTime=v,this.handleContentPlayerEvents(!1),this.fplayer.off(".backup"),this.fplayer.off(".setSrc"),this.fplayer.off(".inLinearAd"),this.fplayer.pause(),this.abortPreSrc(),this.cleanQueue(),this.inExecution=!0,this.playedCount.reset(),this.uiDisable(!0),this.isStopped=!1,this._container.classList.remove("is-ended"),this._container.classList.remove("is-ready"),this._container.classList.remove("is-stopped"),this._container.classList.remove("is-start"),this._container.classList.remove("is-poster"),this._container.classList.add("is-preparing"),this._container.classList.contains("is-error")&&(this._container.classList.remove("is-error"),[].concat(Tt(this._container.querySelectorAll(".fp-message"))).forEach(function(e){return e.parentNode.removeChild(e)})),"string"==typeof k?(this._container.classList.add("is-poster"),this._container.style.setProperty("background-image","url('"+k+"')","important"),this.countdownComponent.setThumbnail(k)):this.countdownComponent.setThumbnail(""),this.removeListenViewportStatus(),this.MainViewOperator.setCaption(L);var M=this.isFirst;this.isFirst=!1;var x=!1,N=!1;"live"==p?(x=!0,N=!0,this.ignoreDocumentHiddenCheck=!si(D,!1),this.clip.live=!0,this.clip.dvr=!1):"simulation_live"==p?(N=!0,this.ignoreDocumentHiddenCheck=!si(D,!1),this.clip.live=!1,this.clip.dvr=!0):(this.clip.live=!1,this.clip.dvr=!1,this.ignoreDocumentHiddenCheck=!si(D,!0)),"boolean"==typeof R&&(N=!R),this.ssControl.pause(),this.ssControl.skip(l),this.ssControl.start(o),this._src=Zr(i),this.liAd.setMeta(s,l,u,N,c,d,a,A,this.ignoreDocumentHiddenCheck);var j=this.liAd.getMidrollTimeCodes();j=j.map(function(e){return{time:e.time,duration:e.duration,type:"midroll_time_code"}}),this.abortPreReqSrc(),this.waitInViewport.cancel(),this.waitClick.cancel();var U=!1;this.abortPreSrc=function(){U=!0,n.abortPreReqSrc(),n.waitInViewport.cancel(),n.waitClick.cancel()};var F=function(e,t,r,i,o){return bn.resolve().then(function(){if(!U)return n._src()}).then(function(a){if(!U){if(void 0===a)throw new Error("InvalidSrc: failed to get source or no set source");if(!a)throw new Error("InvalidSrc: "+a);return n.prepareVideo(a,e,t,r,i,o)}}).then(function(e){n._container.classList.remove("is-preparing"),!0===e&&n._container.classList.add("is-start"),1==o&&1==n.defOpt.displayClickToUnMute&&1==n.fplayer.muted&&n.unmeuntMask.create()})};bn.resolve().then(function(){return n.waitInViewport.promise()}).then(function(){if(!U)return 0==r?n.waitClick.promise().then(function(){0==M&&n.fplayer.mute(!1,!0),P=!1}):void 0}).then(function(){n.addListenViewportStatus()}).then(function(){if(1==M)return n.fplayer.conf.splash=!1,n.fplayer.conf.autoplay=!0,F(x,a,j,P,M)}).then(function(){if(!U){var e=[];if(1==_)return e.push(n.liAd.midrolls({duration:E})),e.push(n.liAd.jingle()),e;if(!w){var t=n.liAd.getQueue();t.length>0?t.forEach(function(t){e.push(t)}):(e.push(n.liAd.prerolls()),e.push(n.liAd.jingle()))}return e}}).then(function(e){if(!U)return n._container.classList.add("is-loading"),n.liAd.unlock(),n.liAd.combined(e).start()}).then(function(){if(0==M)return bn.resolve().then(function(){if(0==n.ignoreDocumentHiddenCheck&&!n.inViewport)return"vod"==p?(n.requestPauseAd(),n.waitClick.promise().then(function(){n.fplayer.mute(!1,!0),n.imageAd.closeNonLinearBanner()})):n.waitInViewport.promise()}).then(function(){return P=n.fplayer.muted,F(x,a,j,P,M)})}).then(function(){if(!U){n.keyboradHandle.resume(),n.uiDisable(!1),n._container.classList.add("is-start"),n._container.classList.remove("is-loading");var e=function(){n._container.classList.remove("wait-click"),n.fplayer.off(".backup")};if(1==M){var r=function(e){n._container.classList.contains("is-mouseover")||(n._container.classList.add("is-mouseover"),setTimeout(function(){n._container.classList.remove("is-mouseover")}))};n._container.addEventListener("touchend",r,!0),n._container.classList.add("fp-ui-shown"),setTimeout(function(){n._container.classList.remove("fp-ui-shown"),n._container.removeEventListener("touchend",r,!0)},5e3),n.fplayer.on("stop.backup",function(e){n._container.classList.add("wait-click")}),n.fplayer.on("resume.backup",function(t){return e()})}0!=n.ignoreDocumentHiddenCheck||n.inViewport?0==n.fplayer.playing&&n.fplayer.resume():(e(),n.requestPauseAd()),n.playedCount.start(),n.handleContentPlayerEvents(!0),Aa.apply(n),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,Yr.IMPRESSION),n.liAd.logo().start().catch(function(e){return!e.isWarning&&console.error(e)}),n.liAd.pinAd().start().catch(function(e){return!e.isWarning&&console.error(e)}),n.queueNext()}}).catch(function(e){var r=!1,i=!1,o="unknown";"string"==typeof e?(r="abort"==e.toLowerCase(),o=e):e instanceof Error&&(o=e.message,i=!0===e.isWarning),r||i?console.warn(e.message):(n.fplayer.message(o),n._container.classList.add("is-error"),console.error(e)),i||(n.keyboradHandle.resume(),n._container.classList.remove("is-loading"),n._container.classList.remove("is-preparing"),n.handleContentPlayerEvents(!0),n.isFirst=M,Aa.apply(n),Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",n).call(n,Yr.ERROR,{error:e}),n.queueNext())}),this.setSrcThrottle()}}},{key:"addListenViewportStatus",value:function(){this.defOpt.decideVisible&&(Vr(t.prototype.__proto__||Ln(t.prototype),"on",this).call(this,"in_viewport",this.onViewportChange.onInViewport),Vr(t.prototype.__proto__||Ln(t.prototype),"on",this).call(this,"out_viewport",this.onViewportChange.onOutViewport))}},{key:"removeListenViewportStatus",value:function(){this.defOpt.decideVisible&&(Vr(t.prototype.__proto__||Ln(t.prototype),"off",this).call(this,"in_viewport",this.onViewportChange.onInViewport),Vr(t.prototype.__proto__||Ln(t.prototype),"off",this).call(this,"out_viewport",this.onViewportChange.onOutViewport))}},{key:"onViewportChange",value:function(){var e=!1,t=this;return{onInViewport:function(){t._container.classList.remove("waiting-enter-viewport"),0!=e&&(e=!1,0==t.inlinearAd?Kr().then(function(){return t.play()}):t.liAd.resume())},onOutViewport:function(){if(t._container.classList.add("waiting-enter-viewport"),0==t.inlinearAd){if(1==t.fplayer.paused)return;t.keyboradHandle.stop(),t.handleContentPlayerEvents(!1),t.pause(),t.fplayer.on("resume.ino",function(){t.keyboradHandle.resume(),t.fplayer.off(".ino"),t.handleContentPlayerEvents(!0),t.imageAd.closeNonLinearBanner()})}else{if(1==t.liAd.paused)return;1==t.defOpt.allowAdPasue&&t.liAd.pause()}e=!0}}}},{key:"waitInViewport",value:function(){var e=this,t=null,n=null;return{promise:function(){return new bn(function(r){if(!e.defOpt.decideVisible||e.platformInfo.isIOSAndInIFrame&&0==e.defOpt.interObsHosting)r();else{if(e._container.classList.add("waiting-enter-viewport"),e.interObsProxy)return n=function(){n=null,r()},void e.interObsProxy.one(Yr.IN_VIEWPORT,n);(t=new IntersectionObserver(function(t,n){1==t[0].intersectionRatio>e.defOpt.visibleThreshold&&(n.disconnect(),n=null,e._container.classList.remove("waiting-enter-viewport"),r())},{threshold:e.defOpt.visibleThreshold})).observe(e._container)}})},cancel:function(){null!=t&&(t.disconnect(),t=null),null!=n&&(e.interObsProxy.off(Yr.IN_VIEWPORT,n),n=null)}}}},{key:"waitClick",value:function(){var e=this,t=function(){},n=this._container,r=function(){n.classList.remove("wait-click"),e.off(Yr.CLICK,i)},i=function(n){e.imaPack.triggerUserAction(),e.houseVideoAd.triggerUserAction(),r(),t()};return{promise:function(){return new bn(function(r,o){t=r,n.classList.add("wait-click"),e.on(Yr.CLICK,i)})},cancel:function(){t=function(){},r()}}}},{key:"trigger",value:function(){return this}},{key:"setSrc",value:function(e){var t=e.autoPlay,n=void 0===t||t,r=e.src,i=e.sessionId,o=e.startTime,a=e.liadMeta,s=e.playAds,l=e.assetId,u=e.midrollTimeCodes,c=void 0===u?[]:u,d=e.midrollTimecodeDuration,f=void 0===d?[]:d,p=e.mediaMode,h=void 0===p?"vod":p,g=e.keepPlayingAd,m=void 0!==g&&g,v=e.programEndTime,y=void 0===v?null:v,_=e.midrollBeforeStart,b=void 0!==_&&_,E=e.midrollBeforeStartDuration,S=void 0===E?0:E,w=e.adUrlReplacement,T=void 0===w?[]:w,A=e.muted,I=void 0!==A&&A,P=e.cover,C=void 0===P?null:P,k=e.caption,L=void 0===k?{}:k,R=e.enableCountdown,D=e.hiddenCheck,O=e.companionAdSize;this.defOpt.decideVisible&&1==this.platformInfo.isIOSAndInIFrame&&0==this.defOpt.interObsHosting&&1==this.isFirst&&(n=!1),null==c&&(c=[]),null==f&&(f=[]),null==T&&(T=[]),"string"==typeof o?o=parseInt(o):"number"!=typeof o&&(o=0),"string"==typeof L&&(L={text:L});var M=function(e){return e/1e3>>0};return c=c.map(M),f=f.map(M),S=M(S),this.setSrcCore({autoPlay:n,assetId:l,liadMeta:a,playAds:s,programEndTime:y,src:r,sessionId:i,startTime:o,keepPlayingAd:m,mediaMode:h,midrollTimeCodes:c,midrollTimecodeDuration:f,midrollBeforeStart:b,midrollBeforeStartDuration:S,adUrlReplacement:T,muted:I,cover:C,caption:L,enableCountdown:R,hiddenCheck:D,companionAdSize:O}),this}},{key:"play",value:function(){1!=this.isStopped&&(this.fplayer.resume(),this.queueNext())}},{key:"pause",value:function(){1!=this.isStopped&&(this.fplayer.paused?this.queueNext():this.fplayer.pause(this.queueNext))}},{key:"seek",value:function(e){1!=this.isStopped&&this.fplayer.seek(e/1e3>>0,this.queueNext)}},{key:"fastForward",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;if(1!=this.isStopped){var t=Math.min((this.currentTime+e)/1e3>>0,this.fplayer.video.duration-1);this.fplayer.seek(t)}}},{key:"rewind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;if(1!=this.isStopped){var t=Math.max((this.currentTime-e)/1e3>>0,0);this.fplayer.seek(t)}}},{key:"stop",value:function(){if(1!=this.isStopped){this.uiDisable(!0),this.inlinearAd=!1,this.keyboradHandle.stop(),this.unmeuntMask.remove(),this.cleanQueue(),this.inExecution=!0,this.isStopped=!0,this._container.classList.add("is-stopped"),this.abortPreSrc(),this.handleContentPlayerEvents(!1);var e=Ta(this);void 0!==e&&e.indexOf("hlsjs")>-1&&this.fplayer.engine.hls.stopLoad(),this.fplayer.stop(),this.pinAdController.close(),this.liAd.reset(),this.ssControl.stop(),this.queueNext()}}},{key:"destroy",value:function(){Vr(t.prototype.__proto__||Ln(t.prototype),"trigger",this).call(this,Yr.WILL_SHUTDOWN),0==this.isStopped&&this.stop();var e=Ta(this);void 0!==e&&e.indexOf("hlsjs")>-1&&this.fplayer.engine.hls.destroy(),this.fplayer.unload(),this.fplayer.shutdown(),this.liAd.reset(!0)}},{key:"mute",value:function(e){return this.fplayer.mute(e),this}},{key:"volume",value:function(e){return this.fplayer.volume(e),this}},{key:"fullscreen",value:function(e){if(!0===e){if(1==this.fplayer.isFullscreen)return this}else if(!1===e&&0==this.fplayer.isFullscreen)return this;var t=this.fplayer.disabled;return t&&this.uiDisable(!1),this.fplayer.fullscreen(),t&&this.uiDisable(!0),this}},{key:"stopLinearAd",value:function(){this.liAd.stopLinearAd()}},{key:"on",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"on",this).apply(this,arguments),this}},{key:"one",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"one",this).apply(this,arguments),this}},{key:"off",value:function(){return Vr(t.prototype.__proto__||Ln(t.prototype),"off",this).apply(this,arguments),this}},{key:"addCount",value:function(e,t){return this.playedCount.addCount(e,t)}},{key:"getAllCount",value:function(){return this.playedCount.getAllCount()}},{key:"getEngineName",value:function(){return this.fplayer.engine.engineName}},{key:"getLiAdMeta",value:function(e){if(!e)return this.liAd.oriLiadMeta;var t=this.liAd;return{oriLiadMeta:t.oriLiadMeta,elements:t.elements,parts:t.parts,midrollTimeCodes:t.midrollTimeCodes,role:t.role}}},{key:"displayTimeline",value:function(){this._container.classList.toggle("fix_controls")}},{key:"setVpaidModeToInsecure",value:function(){this.imaPack.setVpaidModeToInsecure()}},{key:"setVpaidModeToEnable",value:function(){this.imaPack.setVpaidModeToEnable()}},{key:"setVpaidModeToPreset",value:function(){this.imaPack.setVpaidModeToPreset()}},{key:"getVpaidMode",value:function(){return this.imaPack.getVpaidMode()}},{key:"getAllPlayerVolumeLevel",value:function(){return{content:this.fplayer.volumeLevel,ima:this.imaPack.getVolume(),houseAd:this.houseVideoAd.getVolume()}}},{key:"getCurrentExternalAdInfo",value:function(){return this.liAd.getCurrentExternalAdInfo()}},{key:"sendCurrentExternalAdInfo",value:function(e){return this.liAd.sendCurrentExternalAdInfo(this.defOpt.appInfo,e)}},{key:"vastTest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.liAd.vastTest(e,t)}},{key:"setCustomApiUrlConfig",value:function(e){this.urlConfig.setConfig(e)}},{key:"appendChild",value:function(e){return this.MainViewOperator.appendChild(e)}},{key:"viewportIn",value:function(){this.interObsProxy&&this.interObsProxy.inViewport()}},{key:"viewportOut",value:function(){this.interObsProxy&&this.interObsProxy.outViewport()}},{key:"currentTime",get:function(){return this.fplayer.ready?1e3*this.fplayer.video.time:0}},{key:"volumeLevel",get:function(){return this.fplayer.volumeLevel}},{key:"currentInfo",get:function(){return{percentage:(this.currentTime/(1e3*this.fplayer.video.duration)*1e3>>0)/1e3,played:this.playedCount.getMainCount()}}},{key:"duration",get:function(){return 1e3*this.fplayer.video.duration}},{key:"container",get:function(){return this._container}},{key:"paused",get:function(){return this.inlinearAd?this.liAd.paused:this.fplayer.paused}}]),t}();function Ta(e){return["fplayer","engine","engineName"].reduce(function(e,t){if(void 0!==e)return e[t]},e)}function Aa(){this._container.classList.contains("is-poster")&&(this._container.style.removeProperty("background-image"),this._container.classList.remove("is-poster"))}wa.prototype.EVENT=wa.EVENT=Yr,function(e){e.prototype.traced={adProgress:!1,adReport:!1,error:!1},Object.defineProperty(e.prototype,"trace",{get:function(){var e=this;return{all:function(){return this.adProgress().adReport().error()},adProgress:function(){return 1==e.traced.adProgress?this:(e.traced.adProgress=!0,e.on(Yr.AD_PROGRESS,fa),this)},adReport:function(){return 1==e.traced.adReport?this:(e.traced.adReport=!0,e.on(Yr.AD_REPORT,pa),this)},error:function(){return 1==e.traced.error?this:(e.traced.error=!0,e.on(Yr.AD_ERROR,ha),e.on(Yr.ERROR,ha),this)}}}}),Object.defineProperty(e.prototype,"untrace",{get:function(){var e=this;return{all:function(){return this.adProgress().adReport().error()},adProgress:function(){return 0==e.traced.adProgress?this:(e.traced.adProgress=!1,e.off(Yr.AD_PROGRESS,fa),this)},adReport:function(){return 0==e.traced.adReport?this:(e.traced.adReport=!1,e.off(Yr.AD_REPORT,pa),this)},error:function(){return 0==e.traced.error?this:(e.traced.error=!1,e.off(Yr.AD_ERROR,ha),e.off(Yr.ERROR,ha),this)}}}})}(wa);var Ia=function(){return{addPlayer:function(e,t){var n=e.querySelector(".ad_controls .fp-volumebtn"),r=function(e){var t=null,n=0;return function(r){clearTimeout(t),++n>=7?(n=0,function(e,t){e.sendCurrentExternalAdInfo(t).then(function(){var e=t.target;e.style.color="#ff00a0",setTimeout(function(){e.style.removeProperty("color")},1e3);try{navigator.vibrate([100,50,50,50,50])}catch(e){}}).catch(function(e){console.warn(e)})}(e,r)):t=setTimeout(function(){return n=0},400)}}(t);n.addEventListener("click",r),t.factorListener=r},removePlayer:function(e,t){if("function"==typeof t.factorListener){var n=e.querySelector(".ad_controls .fp-volumebtn");n&&n.removeEventListener("click",t.factorListener)}}}}();function Pa(e){function t(){try{e.liAd.report.postData({cdata:"leaveBeforeStarting",ad_id:"1000002",ad_clip:"leaveBeforeStarting|"+(performance.now()>>0),asset_id:""})}catch(e){}}!0===LiTVPlayer.conf.traceLeaveTime&&(window.addEventListener("beforeunload",t),e.on(Yr.AD_PROGRESS,function n(r){("prerolls"==r.trunkType&&"AdMediaStart"==r.state||"prerolls"==r.partType&&"AdStreamComplete"==r.state)&&(window.removeEventListener("beforeunload",t),e.off(Yr.AD_PROGRESS,n))}))}var Ca=function(){function e(){throw ct(this,e),"This is a factory, you must create a new LiTVPlayer instance using the 'create' method."}return ft(e,null,[{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0;if(this.instanceMap=this.instanceMap||new lt,this.instanceMap.has(e))r=this.instanceMap.get(e);else{this.count="number"==typeof this.count?++this.count:0;var i="$"+this.count;r=new wa(e,n,"1.7.7"),this[i]=r,this.instanceMap.set(e,r),Ia.addPlayer(e,r),Pa(r),r.on(Yr.WILL_SHUTDOWN,function(){Ia.removePlayer(e,r),t[i]=null,delete t[i]})}return r}}]),e}();Ca.prototype.EVENT=Ca.EVENT=Yr,Ca.prototype.version=Ca.version="1.7.7",Ca.conf={};var ka=["traceAdRequestTime","traceLeaveTime","traceAdDuration"];if(D?ka.forEach(function(e){D(Ca,e,{set:function(t){return Ca.conf[e]=t},get:function(){return Ca.conf[e]}})}):ka.forEach(function(e){Ca.__defineGetter__(e,function(){return Ca.conf[e]}),Ca.__defineSetter__(e,function(t){Ca.conf[e]=t})}),window.LiTVPlayer)if("function"==typeof window.LiTVPlayer&&"function"==typeof window.LiTVPlayer.create)window.LiTVPlayer=window.LiTVPlayer;else{var La=window.LiTVPlayer;if(window.LiTVPlayer=Ca,void 0===La.prototype)for(var Ra in La)ka.includes(Ra)&&(Ca.conf[Ra]=La[Ra])}else window.LiTVPlayer=Ca;document.addEventListener("keydown",function(e){var t=wa.prototype.focus;if(t&&0!=t.fplayer.conf.keyboard){var n=e.ctrlKey||e.metaKey||e.altKey,r=e.which;!n&&e.shiftKey||function(){switch(r){case 39:case 76:return t.fastForward(),!0;case 37:case 72:return t.rewind(),!0}}()&&e.stopImmediatePropagation()}},!0),t.a=Ca}).call(this,n(96))},function(e){e.exports={content_page:"/vod/${content_type}/content.do?sponsorName=${ref_sponsor_name}",diversion_page:"/diversion/${ref_parten_name}.do?sponsorName=${ref_sponsor_name}",cdi_urls:["https://p-yonder.svc.litv.tv/cdi/v2/rpc"],staging_cdi_urls:["https://s-yonder.svc.litv.tv/cdi/v2/rpc"],cdn_urls:["https://cdnstatic.svc.litv.tv"],staging_cdn_urls:["https://cdnstatic-staging.svc.litv.tv"],cdi_api_urls:["https://p-api01.svc.litv.tv/cdi/v2/rpc","https://p-api02.svc.litv.tv/cdi/v2/rpc","https://p-api03.svc.litv.tv/cdi/v2/rpc"],staging_cdi_api_urls:["https://s-api01.svc.litv.tv/cdi/v2/rpc","https://s-api02.svc.litv.tv/cdi/v2/rpc","https://s-api03.svc.litv.tv/cdi/v2/rpc"]}},function(e,t,n){var r=n(14);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=!1},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){n(102)("asyncIterator")},function(e,t,n){"use strict";var r=n(1),i=n(12),o=n(4),a=n(0),s=n(11),l=n(81).KEY,u=n(3),c=n(68),d=n(39),f=n(24),p=n(2),h=n(103),g=n(102),m=n(136),v=n(83),y=n(7),_=n(6),b=n(27),E=n(28),S=n(29),w=n(42),T=n(137),A=n(41),I=n(5),P=n(33),C=A.f,k=I.f,L=T.f,R=r.Symbol,D=r.JSON,O=D&&D.stringify,M=p("_hidden"),x=p("toPrimitive"),N={}.propertyIsEnumerable,j=c("symbol-registry"),U=c("symbols"),F=c("op-symbols"),B=Object.prototype,G="function"==typeof R,V=r.QObject,Y=!V||!V.prototype||!V.prototype.findChild,z=o&&u(function(){return 7!=w(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=C(B,t);r&&delete B[t],k(e,t,n),r&&e!==B&&k(B,t,r)}:k,W=function(e){var t=U[e]=w(R.prototype);return t._k=e,t},H=G&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},Z=function(e,t,n){return e===B&&Z(F,t,n),y(e),t=E(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=w(n,{enumerable:S(0,!1)})):(i(e,M)||k(e,M,S(1,{})),e[M][t]=!0),z(e,t,n)):k(e,t,n)},K=function(e,t){y(e);for(var n,r=m(t=b(t)),i=0,o=r.length;o>i;)Z(e,n=r[i++],t[n]);return e},q=function(e){var t=N.call(this,e=E(e,!0));return!(this===B&&i(U,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,M)&&this[M][e])||t)},J=function(e,t){if(e=b(e),t=E(t,!0),e!==B||!i(U,t)||i(F,t)){var n=C(e,t);return!n||!i(U,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=L(b(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==M||t==l||r.push(t);return r},Q=function(e){for(var t,n=e===B,r=L(n?F:b(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(B,t)||o.push(U[t]);return o};G||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(F,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),z(this,e,S(1,n))};return o&&Y&&z(B,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",function(){return this._k}),A.f=J,I.f=Z,n(32).f=T.f=X,n(50).f=q,n(82).f=Q,o&&!n(19)&&s(B,"propertyIsEnumerable",q,!0),h.f=function(e){return W(p(e))}),a(a.G+a.W+a.F*!G,{Symbol:R});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)p($[ee++]);for(var te=P(p.store),ne=0;te.length>ne;)g(te[ne++]);a(a.S+a.F*!G,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=R(e)},keyFor:function(e){if(!H(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!G,"Object",{create:function(e,t){return void 0===t?w(e):K(w(e),t)},defineProperty:Z,defineProperties:K,getOwnPropertyDescriptor:J,getOwnPropertyNames:X,getOwnPropertySymbols:Q}),D&&a(a.S+a.F*(!G||u(function(){var e=R();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!H(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!H(t))return t}),r[1]=t,O.apply(D,r)}}),R.prototype[x]||n(10)(R.prototype,x,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t){var n=e.exports={version:"2.6.0"};"number"==typeof __e&&(__e=n)},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(48),i=n(26);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";var r,i,o,a,s=n(19),l=n(1),u=n(18),c=n(47),d=n(0),f=n(6),p=n(14),h=n(69),g=n(124),m=n(72),v=n(92).set,y=n(125)(),_=n(95),b=n(126),E=n(127),S=n(128),w=l.TypeError,T=l.process,A=T&&T.versions,I=A&&A.v8||"",P=l.Promise,C="process"==c(T),k=function(){},L=i=_.f,R=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(2)("species")]=function(e){e(k,k)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof t&&0!==I.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(e){}}(),D=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},O=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,l=t.resolve,u=t.reject,c=t.domain;try{s?(i||(2==e._h&&N(e),e._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),a=!0)),n===t.promise?u(w("Promise-chain cycle")):(o=D(n))?o.call(n,l,u):l(n)):u(r)}catch(e){c&&!a&&c.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&M(e)})}},M=function(e){v.call(l,function(){var t,n,r,i=e._v,o=x(e);if(o&&(t=b(function(){C?T.emit("unhandledRejection",i,e):(n=l.onunhandledrejection)?n({promise:e,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||x(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},x=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){v.call(l,function(){var t;C?T.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw w("Promise can't be resolved itself");(t=D(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(j,r,1))}catch(e){j.call(r,e)}}):(n._v=e,n._s=1,O(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};R||(P=function(e){h(this,P,"Promise","_h"),p(e),r.call(this);try{e(u(U,this,1),u(j,this,1))}catch(e){j.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(73)(P.prototype,{then:function(e,t){var n=L(m(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(j,e,1)},_.f=L=function(e){return e===P||e===a?new o(e):i(e)}),d(d.G+d.W+d.F*!R,{Promise:P}),n(39)(P,"Promise"),n(74)("Promise"),a=n(23).Promise,d(d.S+d.F*!R,"Promise",{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!R),"Promise",{resolve:function(e){return S(s&&this===a?P:this,e)}}),d(d.S+d.F*!(R&&n(75)(function(e){P.all(e).catch(k)})),"Promise",{all:function(e){var t=this,n=L(t),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;g(e,!1,function(e){var s=o++,l=!1;n.push(void 0),a++,t.resolve(e).then(function(e){l||(l=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=L(t),r=n.reject,i=b(function(){g(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports={}},function(e,t,n){var r=n(100),i=n(77).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(100),i=n(77);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(18),i=n(48),o=n(9),a=n(8),s=n(141);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var g,m,v=o(t),y=i(v),_=r(s,h,3),b=a(y.length),E=0,S=n?p(t,b):l?p(t,0):void 0;b>E;E++)if((f||E in y)&&(m=_(g=y[E],E,v),e))if(n)S[E]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return E;case 2:S.push(g)}else if(c)return!1;return d?-1:u||c?c:S}}},function(e,t,n){"use strict";var r=n(54),i=n(143),o=n(31),a=n(27);e.exports=n(107)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){for(var r=n(35),i=n(33),o=n(11),a=n(1),s=n(10),l=n(31),u=n(2),c=u("iterator"),d=u("toStringTag"),f=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(p),g=0;g<h.length;g++){var m,v=h[g],y=p[v],_=a[v],b=_&&_.prototype;if(b&&(b[c]||s(b,c,f),b[d]||s(b,d,v),l[v]=f,y))for(m in r)b[m]||o(b,m,r[m],!0)}},function(e,t,n){"use strict";var r=n(7),i=n(9),o=n(8),a=n(20),s=n(88),l=n(56),u=Math.max,c=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(57)("replace",2,function(e,t,n,h){return[function(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=h(n,e,this,t);if(i.done)return i.value;var d=r(e),f=String(this),p="function"==typeof t;p||(t=String(t));var m=d.global;if(m){var v=d.unicode;d.lastIndex=0}for(var y=[];;){var _=l(d,f);if(null===_)break;if(y.push(_),!m)break;""===String(_[0])&&(d.lastIndex=s(f,o(d.lastIndex),v))}for(var b,E="",S=0,w=0;w<y.length;w++){_=y[w];for(var T=String(_[0]),A=u(c(a(_.index),f.length),0),I=[],P=1;P<_.length;P++)I.push(void 0===(b=_[P])?b:String(b));var C=_.groups;if(p){var k=[T].concat(I,A,f);void 0!==C&&k.push(C);var L=String(t.apply(void 0,k))}else L=g(T,f,A,I,C,t);A>=S&&(E+=f.slice(S,A)+L,S=A+T.length)}return E+f.slice(S)}];function g(e,t,r,o,a,s){var l=r+e.length,u=o.length,c=p;return void 0!==a&&(a=i(a),c=f),n.call(s,c,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(l);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return i;if(c>u){var f=d(c/10);return 0===f?i:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):i}s=o[c-1]}return void 0===s?"":s})}})},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",u="object"==typeof e,c=t.regeneratorRuntime;if(c)u&&(e.exports=c);else{(c=t.regeneratorRuntime=u?e.exports:{}).wrap=b;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={},m={};m[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(R([])));y&&y!==r&&i.call(y,a)&&(m=y);var _=T.prototype=S.prototype=Object.create(m);w.prototype=_.constructor=T,T.constructor=w,T[l]=w.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(_),e},c.awrap=function(e){return{__await:e}},A(I.prototype),I.prototype[s]=function(){return this},c.AsyncIterator=I,c.async=function(e,t,n,r){var i=new I(b(e,t,n,r));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},A(_),_[l]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=R,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:R(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function b(e,t,n,r){var i=t&&t.prototype instanceof S?t:S,o=Object.create(i.prototype),a=new L(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return D()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=P(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var l=E(e,t,n);if("normal"===l.type){if(r=n.done?h:f,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=h,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function S(){}function w(){}function T(){}function A(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=E(e[n],e,r);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(u).then(function(e){l.value=e,o(l)},a)}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function P(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=E(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:D}}function D(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){var r=n(5).f,i=n(12),o=n(2)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(129)})},function(e,t,n){var r=n(50),i=n(29),o=n(27),a=n(28),s=n(12),l=n(90),u=Object.getOwnPropertyDescriptor;t.f=n(4)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(7),i=n(104),o=n(77),a=n(76)("IE_PROTO"),s=function(){},l=function(){var e,t=n(67)("iframe"),r=o.length;for(t.style.display="none",n(94).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){"use strict";var r=n(78),i=n(7),o=n(72),a=n(88),s=n(8),l=n(56),u=n(89),c=Math.min,d=[].push,f=!!function(){try{return new RegExp("x","y")}catch(e){}}();n(57)("split",2,function(e,t,n,p){var h=n;return"c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?h=function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,p=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,c+"g");(o=u.call(h,i))&&!((a=h.lastIndex)>f&&(l.push(i.slice(f,o.index)),o.length>1&&o.index<i.length&&d.apply(l,o.slice(1)),s=o[0].length,f=a,l.length>=p));)h.lastIndex===o.index&&h.lastIndex++;return f===i.length?!s&&h.test("")||l.push(""):l.push(i.slice(f)),l.length>p?l.slice(0,p):l}:"0".split(void 0,0).length&&(h=function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}),[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):h.call(String(i),n,r)},function(e,t){var r=p(h,e,this,t,h!==n);if(r.done)return r.value;var u=i(e),d=String(this),g=o(u,RegExp),m=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),y=new g(f?u:"^(?:"+u.source+")",v),_=void 0===t?4294967295:t>>>0;if(0===_)return[];if(0===d.length)return null===l(y,d)?[d]:[];for(var b=0,E=0,S=[];E<d.length;){y.lastIndex=f?E:0;var w,T=l(y,f?d:d.slice(E));if(null===T||(w=c(s(y.lastIndex+(f?0:E)),d.length))===b)E=a(d,E,m);else{if(S.push(d.slice(b,E)),S.length===_)return S;for(var A=1;A<=T.length-1;A++)if(S.push(T[A]),S.length===_)return S;E=b=w}}return S.push(d.slice(b)),S}]})},function(e,t,n){"use strict";var r=n(0),i=n(34)(0),o=n(15)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(34)(1);r(r.P+r.F*!n(15)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r,i;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(21),n(22),n(37),n(43),n(49),n(79),n(60),n(58),n(59),n(36),n(44),n(85),i=this,void 0===(r=function(){return i.ns_=function(e){(e=e||{}).ns_=e;var t,n,r,i,a,s={uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var n={};for(var r in t)t.hasOwnProperty(r)&&e(t[r])&&(n[r]=t[r]);return n},extend:function(e){var t,n=arguments.length;e=e||{};for(var r=1;n>r;r++)if(t=arguments[r])for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},getString:function(e,t){var n=String(e);return null==e?t||"na":n},getLong:function(e,t){var n=Number(e);return null==e||isNaN(n)?t||0:n},getInteger:function(e,t){var n=Number(parseInt(e));return null==e||isNaN(n)?t||0:n},getBoolean:function(e,t){var n="true"==String(e).toLowerCase();return null==e?t||!1:n},isNotEmpty:function(e){return!this.isEmpty(e)},isEmpty:function(e){return null==e||""===e||e instanceof Array&&0===e.length},indexOf:function(e,t){var n=-1;return this.forEach(t,function(t,r){t==e&&(n=r)}),n},forEach:function(e,t,n){try{if("function"==typeof t)if(n=void 0!==n?n:null,"number"!=typeof e.length||void 0===e[0]){var r=void 0!==e.__proto__;for(var i in e)e.hasOwnProperty(i)&&(!r||r&&void 0===e.__proto__[i])&&"function"!=typeof e[i]&&t.call(n,e[i],i)}else for(var o=0,a=e.length;a>o;o++)t.call(n,e[o],o)}catch(e){}},regionMatches:function(e,t,n,r,i){if(0>t||0>r||t+i>e.length||r+i>n.length)return!1;for(;--i>=0;){var o=e.charAt(t++),a=n.charAt(r++);if(o!=a)return!1}return!0},size:function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},log:function(e,t){if(void 0!==t&&t&&"undefined"!=typeof console&&console){var n=new Date,r=n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();console.log(r,e)}},isTrue:function(e){return void 0!==e&&("string"==typeof e?"true"===(e=e.toLowerCase())||"1"===e||"on"===e:!!e)},toString:function(e){if(void 0===e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(this.size(e)>0){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}return e.toString()},exists:function(e){return void 0!==e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;t>e;e++){var n=arguments[e];if(n>0)return n}return 0},cloneObject:function(e){if(null==e||"object"!=o(e))return e;var t=function(){function e(){}function t(t){return"object"==o(t)?(e.prototype=t,new e):t}function n(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function r(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)},this.depth=0}function i(e,t){var n=new r;return t&&(n.maxDepth=t),n.deepCopy(e)}var a=[];return n.prototype={constructor:n,canCopy:function(){return!1},create:function(e){},populate:function(e,t,n){}},r.prototype={constructor:r,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,n=t.length,r=0;n>r;r++)if(t[r][0]===e)return t[r][1]},deepCopy:function(e){if(null===e)return null;if("object"!=o(e))return e;var t=this.getCachedResult(e);if(t)return t;for(var n=0;n<a.length;n++){var r=a[n];if(r.canCopy(e))return this.applyDeepCopier(r,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var n=e.create(t);if(this.cacheResult(t,n),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,n),this.depth--,n}},i.DeepCopier=n,i.deepCopiers=a,i.register=function(e){e instanceof n||(e=new n(e)),a.unshift(e)},i.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?t(e.constructor.prototype):{}},populate:function(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}}),i.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,n){for(var r=0;r<t.length;r++)n.push(e(t[r]));return n}}),i.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),i.register({canCopy:function(e){return function(e){return"undefined"!=typeof window&&window&&window.Node?e instanceof Node:"undefined"!=typeof document&&e===document||"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode}(e)},create:function(e){return"undefined"!=typeof document&&e===document?document:e.cloneNode(!1)},populate:function(e,t,n){if("undefined"!=typeof document&&t===document)return document;if(t.childNodes&&t.childNodes.length)for(var r=0;r<t.childNodes.length;r++){var i=e(t.childNodes[r]);n.appendChild(i)}}}),{deepCopy:i}}();return t.deepCopy(e)},safeGet:function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},getBrowserName:function(){if(!navigator)return"";var e,t,n=navigator.userAgent||"",r=navigator.appName||"";return-1!=(t=n.indexOf("Opera"))||-1!=(t=n.indexOf("OPR/"))?r="Opera":-1!=(t=n.indexOf("Android"))?r="Android":-1!=(t=n.indexOf("Chrome"))?r="Chrome":-1!=(t=n.indexOf("Safari"))?r="Safari":-1!=(t=n.indexOf("Firefox"))?r="Firefox":-1!=(t=n.indexOf("IEMobile"))?r="Internet Explorer Mobile":"Microsoft Internet Explorer"==r||"Netscape"==r?r="Internet Explorer":(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))?(r=n.substring(e,t)).toLowerCase()==r.toUpperCase()&&(r=navigator.appName):r="unknown",r},getBrowserFullVersion:function(){if(!navigator)return"";var e,t,n,r=navigator.userAgent||"",i=navigator.appName||"",o=navigator.appVersion?""+parseFloat(navigator.appVersion):"";return-1!=(t=r.indexOf("Opera"))?(o=r.substring(t+6),-1!=(t=r.indexOf("Version"))&&(o=r.substring(t+8))):-1!=(t=r.indexOf("OPR/"))?o=r.substring(t+4):-1!=(t=r.indexOf("Android"))?o=r.substring(t+11):-1!=(t=r.indexOf("Chrome"))?o=r.substring(t+7):-1!=(t=r.indexOf("Safari"))?(o=r.substring(t+7),-1!=(t=r.indexOf("Version"))&&(o=r.substring(t+8))):-1!=(t=r.indexOf("Firefox"))?o=r.substring(t+8):"Microsoft Internet Explorer"==i?null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(r)&&(o=parseFloat(RegExp.$1)):"Netscape"==i?null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(r)&&(o=parseFloat(RegExp.$1)):o=r.lastIndexOf(" ")+1<(t=r.lastIndexOf("/"))?r.substring(t+1):"unknown",o=o.toString(),-1!=(n=o.indexOf(";"))&&(o=o.substring(0,n)),-1!=(n=o.indexOf(" "))&&(o=o.substring(0,n)),-1!=(n=o.indexOf(")"))&&(o=o.substring(0,n)),e=parseInt(""+o,10),isNaN(e)&&(o=""+parseFloat(navigator.appVersion)),o},browserAcceptsLargeURLs:function(){return"undefined"==typeof window||(window.ActiveXObject,!0)},getNamespace:function(){return e.ns_||e}};return e.StreamSense=e.StreamSense||function(){var t=function(){var e="cs_";return function(){var t="undefined"!=typeof localStorage?localStorage:null;s.extend(this,{get:function(n){return t&&t.getItem(e+n)},set:function(n,r){t&&t.setItem(e+n,r)},has:function(n){return t&&t.getItem(e+n)},remove:function(n){t&&t.removeItem(e+n)},clear:function(){for(var n=0;t&&n<t.length;++n){var r=t.key(n);r.substr(0,e.length)===e&&t.removeItem(r)}}})}}(),n=function(e,t){if("undefined"!=typeof Image){var n=new Image;n.onload=function(){t&&t(200),n=null},n.onerror=function(){t&&t(),n=null},n.src=e}},r=function(e,t,n){n&&"undefined"!=typeof setTimeout&&setTimeout(n,0)},i={dir:function(){return null},append:function(e,t,n){},write:function(e,t,n){},deleteFile:function(){return!1},read:function(){return null}},a={PLATFORM:"generic",httpGet:n,httpPost:r,Storage:t,IO:i,getCrossPublisherId:function(){return null},getAppName:function(){return l.UNKNOWN_VALUE},getAppVersion:function(){return l.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return l.UNKNOWN_VALUE},getPlatformVersion:function(){return l.UNKNOWN_VALUE},getPlatformName:function(){return"js"},getRuntimeName:function(){return l.UNKNOWN_VALUE},getRuntimeVersion:function(){return l.UNKNOWN_VALUE},getResolution:function(){return l.UNKNOWN_VALUE},getLanguage:function(){return l.UNKNOWN_VALUE},getPackageName:function(){return null},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return setTimeout(e,t)}),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return clearTimeout(e)}),getDeviceArchitecture:function(){return l.UNKNOWN_VALUE},getConnectionType:function(){return l.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return l.UNKNOWN_VALUE},isConnSecure:function(){return"s"===document.location.href.charAt(4)},processMeasurementLabels:function(){}},l={UNKNOWN_VALUE:"unknown"};s.filterMap=function(e,t){for(var n in e)e.hasOwnProperty(n)&&-1==s.indexOf(n,t)&&delete e[n]},s.getKeys=function(e,t){var n,r=[];for(n in e)t&&!t.test(n)||!e.hasOwnProperty(n)||(r[r.length]=n);return r},s.getEventTime=function(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=parseInt(e.ns_ts)),t},s.fixEventTime=function(e){var t=s.getEventTime(e);0>t&&(e.ns_ts=String(+new Date))},s.isBrowser=function(){return"undefined"!=typeof window&&"undefined"!=typeof document},s.addNewPlaybackInterval=function(e,t,n,r){var i,o={};if(!(n>=t))return s.cloneObject(e);if(o.start=t,o.end=n,0==e.length)return e.push(o),s.cloneObject(e);for(i=0;i<e.length;i++)if(o.start>=e[i].start&&o.end<=e[i].end)return s.cloneObject(e);var a,l=!1;for(a=0;a<e.length;a++)if(a+1===e.length&&o.start>=e[a].start||o.start>=e[a].start&&o.start<e[a+1].start){e.splice(a+1,0,o),l=!0;break}l||e.splice(0,0,o);var u=[e[0]];for(i=1;i<e.length;i++)u[u.length-1].end+r<e[i].start?u.push(e[i]):u[u.length-1].end<e[i].end&&(u[u.length-1].end=e[i].end);return s.cloneObject(u)};var u=function(){var e=["play","pause","pause-on-buffering","end","buffer","buffer-stop","keep-alive","hb","custom","load","start","skstart","adskip","cta","error","trans","drmfa","drmap","drmde","bitrt","playrt","volume","window","audio","video","subs","cdn"];return{PLAY:0,PAUSE:1,PAUSE_ON_BUFFERING:2,END:3,BUFFER:4,BUFFER_STOP:5,KEEPALIVE:6,HEARTBEAT:7,CUSTOM:8,LOAD:9,START:10,SEEK_START:11,AD_SKIP:12,CTA:13,ERROR:14,TRANSFER:15,DRM_FAILED:16,DRM_APPROVED:17,DRM_DENIED:18,BIT_RATE:19,PLAYBACK_RATE:20,VOLUME:21,WINDOW_STATE:22,AUDIO:23,VIDEO:24,SUBS:25,CDN:26,toString:function(t){return e[t]}}}(),c={IDLE:0,PLAYBACK_NOT_STARTED:1,PLAYING:2,PAUSED:3,BUFFERING_BEFORE_PLAYBACK:4,BUFFERING_DURING_PLAYBACK:5,BUFFERING_DURING_SEEKING:6,BUFFERING_DURING_PAUSE:7,SEEKING_BEFORE_PLAYBACK:8,SEEKING_DURING_PLAYBACK:9,SEEKING_DURING_BUFFERING:10,SEEKING_DURING_PAUSE:11,PAUSED_DURING_BUFFERING:12},d=function(){var e=["c","s","r"];return{SINGLE_CLIP:0,SEGMENTED:1,REDUCED:2,toString:function(t){return e[t]}}}(),f={STREAMSENSE_VERSION:"5.0.2.160107",DEFAULT_PLAYERNAME:"js_api",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,THROTTLING_DELAY:500,INTERVAL_MERGE_TOLERANCE:500,STANDARD_METADATA_LABELS:["ns_st_ci","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_li","ns_st_ad","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pu","c3","c4","c6"],LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_alias","ca_ns_alias","cb_ns_alias","cc_ns_alias","cd_ns_alias","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_smv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sc","ns_st_sq","ns_st_ppc","ns_st_apc","ns_st_spc","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_sl","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_ad","ns_st_li","ns_st_ci","ns_st_si","ns_st_pt","ns_st_dpt","ns_st_ipt","ns_st_et","ns_st_det","ns_st_upc","ns_st_dupc","ns_st_iupc","ns_st_upa","ns_st_dupa","ns_st_iupa","ns_st_lpc","ns_st_dlpc","ns_st_lpa","ns_st_dlpa","ns_st_pa","ns_ap_jb","ns_ap_et","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ca_cs_c12u","cb_cs_c12u","cc_cs_c12u","cd_cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_dbc","ns_st_bt","ns_st_dbt","ns_st_bp","ns_st_lt","ns_st_skc","ns_st_dskc","ns_st_ska","ns_st_dska","ns_st_skd","ns_st_skt","ns_st_dskt","ns_st_pc","ns_st_dpc","ns_st_pp","ns_st_br","ns_st_pbr","ns_st_rt","ns_st_prt","ns_st_ub","ns_st_vo","ns_st_pvo","ns_st_ws","ns_st_pws","ns_st_ki","ns_st_rp","ns_st_bn","ns_st_tb","ns_st_an","ns_st_ta","ns_st_pl","ns_st_pr","ns_st_sn","ns_st_en","ns_st_ep","ns_st_sr","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_ddt","ns_st_tdt","ns_st_tm","ns_st_dtm","ns_st_ttm","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_st_at","ns_st_pat","ns_st_vt","ns_st_pvt","ns_st_tt","ns_st_ptt","ns_st_cdn","ns_st_pcdn","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","ns_ecommerce","ns_ev_sv","ns_client_id","ns_order_id","ns_ec_cur","ns_orderline_id","ns_orderlines","ns_prod_id","ns_qty","ns_prod_price","ns_prod_grp","ns_brand","ns_shop","ns_category","category","ns_c","ns_search_term","ns_search_result","ns_m_exp","ns_m_chs","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},p=function(){var e,t,n,r,i,o,a,l,u,c,d,p,h,g,m,v,y,_,b,E,S,w,T,A,I,P,C,k,L,R,D,O,M=this,x=f.INTERVAL_MERGE_TOLERANCE;s.extend(this,{reset:function(s){(L={}).ns_st_pt="0",L.ns_st_bt="0",L.ns_st_bc="0",L.ns_st_pc="0",L.ns_st_sq="0",L.ns_st_cl="0",L.ns_st_pn="1",L.ns_st_tp="1",L.ns_st_skc="0",L.ns_st_et="0",L.ns_st_cn="1",L.ns_st_spc="0",L.ns_st_sc="0",L.ns_st_apc="0",L.ns_st_ska="0",L.ns_st_skd="0",L.ns_st_skt="0",L.ns_st_upc="0",L.ns_st_lpc="0",L.ns_st_upa="0",L.ns_st_lpa="0",L.ns_st_ub="0",L.ns_st_br="0",E=-1,S=0,l=-1,u=0,r=-1,i=0,o=0,R=0,D=0,A=0,T=-1,P=!1,a=0,C=0,k=0,O=0,h=-1,n=!1,e=null,c=0,w=!1,I=0,d=[],p=[],g=0,m=0,_=0,v=0,y=0,b=0,t=!1,null!=s&&s.length>0&&M.setLabels(s)},getHash:function(){return e},setHash:function(t){e=t},setPlaybackIntervalMergeTolerance:function(e){x=e},getPlaybackIntervalMergeTolerance:function(){return x},setLabels:function(e){null!=e&&s.extend(L,e)},getLabels:function(){return L},setLabel:function(e,t){var n={};n[e]=t,M.setLabels(n)},getLabel:function(e){return L[e]},getClipNumber:function(){return parseInt(M.getLabel("ns_st_cn"))},setClipNumber:function(e){M.setLabel("ns_st_cn",String(e))},getPartNumber:function(){return parseInt(M.getLabel("ns_st_pn"))},createLabels:function(e){var t,r,a,l=e||{};return l.ns_st_dbt=String(M.getBufferingTime()-S),S=M.getBufferingTime(),l.ns_st_det=String(M.getElapsedTime()-u),u=M.getElapsedTime(),l.ns_st_dupc=String(M.getUniquePlaybackInterval()-g),g=M.getUniquePlaybackInterval(),parseInt(l.ns_st_dupc)<0&&(l.ns_st_dupc="0"),t=s.exists(l.ns_st_upc)?parseInt(l.ns_st_upc):M.getUniquePlaybackInterval(),l.ns_st_iupc=String(t-m),m=t,parseInt(l.ns_st_iupc)<0&&(l.ns_st_iupc="0"),l.ns_st_dupa=String(M.getAssetUniquePlaybackInterval()-v),v=M.getAssetUniquePlaybackInterval(),parseInt(l.ns_st_dupa)<0&&(l.ns_st_dupa="0"),r=s.exists(l.ns_st_upa)?parseInt(l.ns_st_upa):M.getAssetUniquePlaybackInterval(),l.ns_st_iupa=String(r-y),y=r,parseInt(l.ns_st_iupa)<0&&(l.ns_st_iupa="0"),l.ns_st_dlpc=String(M.getLongestPlaybackInterval()-_),_=M.getLongestPlaybackInterval(),parseInt(l.ns_st_dlpc)<0&&(l.ns_st_dlpc="0"),l.ns_st_dlpa=String(M.getAssetLongestPlaybackInterval()-b),b=M.getAssetLongestPlaybackInterval(),parseInt(l.ns_st_dlpa)<0&&(l.ns_st_dlpa="0"),a=s.exists(l.ns_st_pt)?parseInt(l.ns_st_pt):M.getPlaybackTime(),l.ns_st_ipt=String(a-o),o=a,l.ns_st_dpt=String(M.getPlaybackTime()-i),i=M.getPlaybackTime(),l.ns_st_dpc=String(M.getPauses()-R),R=M.getPauses(),l.ns_st_dskc=String(M.getSeeks()-D),D=M.getSeeks(),l.ns_st_dbc=String(M.getBuffers()-O),O=M.getBuffers(),l.ns_st_dskt=String(M.getSeekingTime()-A),A=M.getSeekingTime(),l.ns_st_dska=String(M.getSeekingAmount()-C),C=M.getSeekingAmount(),s.extend(l,M.getLabels()),M.setSeekingDirection(0),n||(delete l.ns_st_spc,delete l.ns_st_apc,0===parseInt(l.ns_st_sc)&&(l.ns_st_sc="1")),l},getVideoTrack:function(){return M.getLabel("ns_st_vt")},setVideoTrack:function(e){M.setLabel("ns_st_vt",String(e))},getAudioTrack:function(){return M.getLabel("ns_st_at")},setAudioTrack:function(e){M.setLabel("ns_st_at",String(e))},getSubtitleTrack:function(){return M.getLabel("ns_st_tt")},setSubtitleTrack:function(e){M.setLabel("ns_st_tt",String(e))},getCDN:function(){return M.getLabel("ns_st_cdn")},setCDN:function(e){M.setLabel("ns_st_cdn",String(e))},getClipPlaybackIntervals:function(){return d},setClipPlaybackIntervals:function(e){d=e},getAssetPlaybackIntervals:function(){return p},getUniquePlaybackInterval:function(){return parseInt(M.getLabel("ns_st_upc"))},getAssetUniquePlaybackInterval:function(){return parseInt(M.getLabel("ns_st_upa"))},setAssetUniquePlaybackInterval:function(e){M.setLabel("ns_st_upa",String(e))},setUniquePlaybackInterval:function(e){M.setLabel("ns_st_upc",String(e))},getLongestPlaybackInterval:function(){return parseInt(M.getLabel("ns_st_lpc"))},setLongestPlaybackInterval:function(e){M.setLabel("ns_st_lpc",String(e))},getAssetLongestPlaybackInterval:function(){return parseInt(M.getLabel("ns_st_lpa"))},setAssetLongestPlaybackInterval:function(e){M.setLabel("ns_st_lpa",String(e))},incrementPauses:function(){M.setLabel("ns_st_pc",String(M.getPauses()+1))},incrementSeeks:function(){M.setLabel("ns_st_skc",String(M.getSeeks()+1))},incrementPlayCounter:function(){M.setLabel("ns_st_sq",String(parseInt(M.getLabel("ns_st_sq"))+1))},getBufferingTime:function(){return parseInt(M.getLabel("ns_st_bt"))},setBufferingTime:function(e){M.setLabel("ns_st_bt",String(e))},addBufferingTime:function(e){if(E>=0){var t=M.getBufferingTime();t+=e-E,M.setBufferingTime(t),E=-1}},setPlaybackStartPosition:function(e){h=parseInt(e)},getPlaybackStartPosition:function(){return h},addInterval:function(e){h>=0&&parseInt(e)>=0&&(d=s.addNewPlaybackInterval(d,h,e,x),p=s.addNewPlaybackInterval(p,h,e,x),function(){var e,t,n=0;for(e=0;e<d.length;e++)n+=Math.abs(d[e].end-d[e].start);M.setUniquePlaybackInterval(n);var r=0;for(e=0;e<d.length;e++)(t=Math.abs(d[e].end-d[e].start))>r&&(r=t);M.setLongestPlaybackInterval(r);var i=0;for(e=0;e<p.length;e++)i+=Math.abs(p[e].end-p[e].start);M.setAssetUniquePlaybackInterval(i);var o=0;for(e=0;e<p.length;e++)(t=Math.abs(p[e].end-p[e].start))>o&&(o=t);M.setAssetLongestPlaybackInterval(o)}(),h=-1)},getElapsedTime:function(){return parseInt(M.getLabel("ns_st_et"))},setElapsedTime:function(e){M.setLabel("ns_st_et",String(e))},addElapsedTime:function(e){if(l>=0){var t=M.getElapsedTime();t+=e-l,M.setElapsedTime(t),l=-1}},getElapsedTimestamp:function(){return l},setElapsedTimestamp:function(e){l=e},addPlaybackTime:function(e){if(r>0){var t=M.getPlaybackTime();t+=e-r,M.setPlaybackTime(t),r=-1}},getPlaybackTime:function(){return parseInt(M.getLabel("ns_st_pt"))},getExpectedPlaybackPosition:function(e){return r>0&&(a+=e-r),a},setPlaybackTimeOffset:function(e){a=e},getPlaybackTimeOffset:function(){return a},setPlaybackTime:function(e){M.setLabel("ns_st_pt",String(e))},getPlaybackTimestamp:function(){return r},setPlaybackTimestamp:function(e){r=e},setPreviousPlaybackTime:function(e){i=e},setPreviousPlaybackTimestamp:function(e){},getBufferingTimestamp:function(){return E},setBufferingTimestamp:function(e){E=e},getPauses:function(){return parseInt(M.getLabel("ns_st_pc"))},setPauses:function(e){M.setLabel("ns_st_pc",String(e))},getSeeks:function(){return parseInt(M.getLabel("ns_st_skc"))},setSeeks:function(e){M.setLabel("ns_st_skc",String(e))},setSeeking:function(e){w=e},isSeeking:function(){return w},setCollectingSeekingTime:function(e){P=e},isCollectingSeekingTime:function(){return P},setClipStarted:function(e){t=e},isClipStarted:function(){return t},setPlaybackStarted:function(e){n=e},isPlaybackStarted:function(){return n},setSeekingTimestamp:function(e){T=e},getSeekingTimestamp:function(){return T},addSeekingTime:function(e){if(T>0){var t=M.getSeekingTime();t+=e-T,M.setSeekingTime(t),T=-1}},getSeekingTime:function(){return parseInt(M.getLabel("ns_st_skt"))},setSeekingTime:function(e){M.setLabel("ns_st_skt",String(e))},setSeekingTimeBeforeEnd:function(e){k=e},getSeekingTimeBeforeEnd:function(){return k},setSeekStartPosition:function(e){I=e},getSeekStartPosition:function(){return I},setSeekingAmount:function(e){M.setLabel("ns_st_ska",String(e))},getSeekingAmount:function(){return parseInt(M.getLabel("ns_st_ska"))},addSeekingAmount:function(e){var t,n=M.getSeekingAmount();n+=Math.abs(e-I),M.setSeekingAmount(n),I==e?t=0:I>e?t=-1:e>I&&(t=1),M.setSeekingDirection(t),I=0},getSeekingDirection:function(){return parseInt(M.getLabel("ns_st_skd"))},setSeekingDirection:function(e){M.setLabel("ns_st_skd",String(e))},resetClipLifecycleLabels:function(){L.ns_st_pt="0",i=0,o=0,L.ns_st_bt="0",S=0,L.ns_st_bc="0",O=0,L.ns_st_pc="0",R=0,L.ns_st_sq="0",L.ns_st_upa="0",v=0,y=0,L.ns_st_et="0",u=0,L.ns_st_lpa="0",b=0,L.ns_st_skt="0",A=0,L.ns_st_ska="0",C=0,L.ns_st_skc="0",D=0},incrementSegmentPlaybackCounter:function(){M.setLabel("ns_st_spc",String(M.getSegmentPlaybackCounter()+1))},incrementClipLoadCounter:function(){M.setLabel("ns_st_sc",String(M.getClipLoadCounter()+1))},incrementAssetPlaybackCounter:function(){M.setLabel("ns_st_apc",String(M.getAssetPlaybackCounter()+1))},setPreviousUniquePlaybackInterval:function(e){g=e},setPreviousEventIndependentUniquePlaybackInterval:function(e){m=e},setPreviousLongestPlaybackInterval:function(e){_=e},resetAssetPlaybackCounters:function(){p=[],M.setAssetUniquePlaybackInterval(0),v=0,y=0,M.setAssetLongestPlaybackInterval(0),b=0},setSegmentPlaybackCounter:function(e){M.setLabel("ns_st_spc",String(e))},setClipLoadCounter:function(e){M.setLabel("ns_st_sc",String(e))},setAssetPlaybackCounter:function(e){M.setLabel("ns_st_apc",String(e))},setLowestPartNumberPlayed:function(e){c=e},getSegmentPlaybackCounter:function(){return parseInt(M.getLabel("ns_st_spc"))},getClipLoadCounter:function(){return parseInt(M.getLabel("ns_st_sc"))},getAssetPlaybackCounter:function(){return parseInt(M.getLabel("ns_st_apc"))},getLowestPartNumberPlayed:function(){return c},getBuffers:function(){return parseInt(M.getLabel("ns_st_bc"))},incrementBufferCount:function(){M.setLabel("ns_st_bc",String(M.getBuffers()+1))},getPreviousBufferingTime:function(){return S}}),M.reset()},h=function(){var e,t,n,r,i,o,a,l,u=this;s.extend(this,{reset:function(u){(r={}).ns_st_bp="0",r.ns_st_pa="0",r.ns_st_pp="0",r.ns_st_sp="1",r.ns_st_id=String(+new Date),r.ns_st_ppc="0",t=-1,n=-1,o=[],a=0,i=!1,l=!1,null!=u&&u.length>0&&s.extend(r,u),e.reset(u)},hashExists:function(e){return null!=o[e]},storeHash:function(e){o[e]={}},removeHash:function(e){delete o[e]},storeClipPlaybackCounters:function(){for(var t in o)if(o.hasOwnProperty(t)&&o[t].clipNumber===e.getClipNumber()){s.extend(o[t],{segmentPlaybackCounter:e.getSegmentPlaybackCounter(),clipLoadCounter:e.getClipLoadCounter(),assetPlaybackCounter:e.getAssetPlaybackCounter(),lowestPartNumberPlayed:e.getLowestPartNumberPlayed(),seeking:e.isSeeking(),seekingTimeBeforeEnd:e.getSeekingTimeBeforeEnd(),seekingStartPosition:e.getSeekStartPosition(),clipPlaybackIntervals:e.getClipPlaybackIntervals(),uniquePlaybackInterval:e.getUniquePlaybackInterval(),longestPlaybackInterval:e.getLongestPlaybackInterval(),videoTrack:e.getVideoTrack(),audioTrack:e.getAudioTrack(),subtitleTrack:e.getSubtitleTrack(),cdn:e.getCDN()});break}},getStoredClipRegisters:function(e){return o[e]},getClipNumber:function(e){return o[e].clipNumber},getMaxClipNumber:function(){return a},storeClipNumber:function(e,t){o[e].clipNumber=t,t>a&&(a=t)},setLabels:function(e){null!=e&&s.extend(r,e)},getLabels:function(){return r},setLabel:function(e,t){var n={};n[e]=t,u.setLabels(n)},getLabel:function(e){return r[e]},getClip:function(){return e},createLabels:function(t){var n=t||{};return l||(n.ns_st_pb=null!=n.ns_st_pb?n.ns_st_pb:"1",l=!0),s.extend(n,u.getLabels()),e.isPlaybackStarted()||delete n.ns_st_ppc,n},incrementPlayCounter:function(){u.setLabel("ns_st_sp",String(parseInt(u.getLabel("ns_st_sp"))+1))},incrementPauses:function(){u.setLabel("ns_st_pp",String(u.getPauses()+1))},addPlaybackTime:function(e){if(n>=0){var t=u.getPlaybackTime();t+=e-n,u.setPlaybackTime(t),n=-1}},addBufferingTime:function(e){if(t>=0){var n=u.getBufferingTime();n+=e-t,u.setBufferingTime(n),t=-1}},getBufferingTime:function(){return parseInt(u.getLabel("ns_st_bp"))},setBufferingTime:function(e){u.setLabel("ns_st_bp",String(e))},getPlaybackTime:function(){return parseInt(u.getLabel("ns_st_pa"))},setBufferingTimestamp:function(e){t=e},getBufferingTimestamp:function(){return t},setPlaybackTime:function(e){u.setLabel("ns_st_pa",String(e))},setPlaybackTimestamp:function(e){n=e},getPlaybackTimestamp:function(){return n},getPauses:function(){return parseInt(u.getLabel("ns_st_pp"))},setPauses:function(e){u.setLabel("ns_st_pp",String(e))},isPlaylistStarted:function(){return i},setPlaylistStarted:function(e){i=e},getPlaybackCounter:function(){return parseInt(u.getLabel("ns_st_ppc"))},incrementPlaybackCounter:function(){u.setLabel("ns_st_ppc",String(u.getPlaybackCounter()+1))}}),e=new p,u.reset()},g=function(e){function t(t){i=s.extend({},t);var n=e.getPixelURL();if(e.getAppCore()){if(!e.isNotProperlyInitialized()){var r=e.getExports().am,o=e.getExports().et,a=r.newApplicationMeasurement(e.getAppCore(),o.HIDDEN,t,n);e.getAppCore().getQueue().offer(a)}}else n&&e.getPlatformAPI().httpGet(e.prepareUrl(n,t))}function n(){var t,n;1==arguments.length?(t=null,n=arguments[0]):(t=arguments[0],n=arguments[1]);var i={};if("undefined"!=typeof document){var o=document;i.c7=o.URL,i.c8=o.title,i.c9=o.referrer}return null!=n&&s.extend(i,n),i.ns_ts=null!=i.ns_ts?i.ns_ts:String(+new Date),i.ns_st_ev=null!=i.ns_st_ev?i.ns_st_ev:u.toString(t),i.ns_st_mp=null!=i.ns_st_mp?i.ns_st_mp:e.getMediaPlayerName(),i.ns_st_mv=null!=i.ns_st_mv?i.ns_st_mv:e.getMediaPlayerVersion(),i.ns_st_ub=null!=i.ns_st_ub?i.ns_st_ub:"0",i.ns_st_br=null!=i.ns_st_br?i.ns_st_br:"0",i.ns_st_pn=null!=i.ns_st_pn?i.ns_st_pn:"1",i.ns_st_tp=null!=i.ns_st_tp?i.ns_st_tp:"1",i.ns_st_it=null!=i.ns_st_it?i.ns_st_it:d.toString(d.SINGLE_CLIP),i.ns_st_sv=null!=i.ns_st_sv?i.ns_st_sv:f.STREAMSENSE_VERSION,i.ns_type=null!=i.ns_type?i.ns_type:"hidden",i.ns_st_ec=null!=i.ns_st_ec?i.ns_st_ec:String(r),i.ns_st_po=null!=i.ns_st_po?i.ns_st_po:String(e.getPlaylist().getClip().getExpectedPlaybackPosition(s.getEventTime(i))),i.ns_st_ki=null!=i.ns_st_ki?i.ns_st_ki:String(e.getKeepAlive().getInterval()),e.getPlaylist().createLabels(i),e.getPlaylist().getClip().createLabels(i),s.extend(i,e.getLabels()),i}var r,i,o=this;s.extend(this,{newEvent:function(e,r){var i=n(e,r);s.extend(i,r),t(i),e!=u.HEARTBEAT&&o.incrementEventCounter()},getEventCounter:function(){return r},incrementEventCounter:function(){r++},setEventCounter:function(e){r=e},getMeasurementSnapshot:function(){return i},reset:function(){r=1,i=null}}),o.reset()},m=function(e){function t(){o++;var t={};s.fixEventTime(t);var n=s.getEventTime(t);t.ns_st_po=String(e.getPlaylist().getClip().getPlaybackTimeOffset()+(n-e.getPlaylist().getClip().getPlaybackTimestamp())),t.ns_st_pa=String(e.getPlaylist().getPlaybackTime()+(n-e.getPlaylist().getPlaybackTimestamp())),t.ns_st_pt=String(e.getPlaylist().getClip().getPlaybackTime()+(n-e.getPlaylist().getClip().getPlaybackTimestamp())),t.ns_st_dpt=String(n-e.getPlaylist().getClip().getPlaybackTimestamp()),e.getStateMachine().getCurrentState()==c.BUFFERING_DURING_PLAYBACK?(t.ns_st_bp=String(e.getPlaylist().getBufferingTime()+(n-e.getPlaylist().getBufferingTimestamp())),t.ns_st_bt=String(e.getPlaylist().getClip().getBufferingTime()+(n-e.getPlaylist().getClip().getBufferingTimestamp())),t.ns_st_dbt=String(n-e.getPlaylist().getClip().getBufferingTimestamp())):t.ns_st_dbt=String(e.getPlaylist().getClip().getBufferingTime()-e.getPlaylist().getClip().getPreviousBufferingTime()),t.ns_st_et=String(e.getPlaylist().getClip().getElapsedTime()+(n-e.getPlaylist().getClip().getElapsedTimestamp())),t.ns_st_det=String(n-e.getPlaylist().getClip().getElapsedTimestamp());var r=s.cloneObject(e.getPlaylist().getClip().getClipPlaybackIntervals()),l=s.cloneObject(e.getPlaylist().getClip().getAssetPlaybackIntervals());r=s.addNewPlaybackInterval(r,e.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(t.ns_st_po),e.getPlaylist().getClip().getPlaybackIntervalMergeTolerance()),l=s.addNewPlaybackInterval(l,e.getPlaylist().getClip().getPlaybackStartPosition(),parseInt(t.ns_st_po),e.getPlaylist().getClip().getPlaybackIntervalMergeTolerance());var d,f,p=0;for(d=0;d<r.length;d++)p+=Math.abs(r[d].end-r[d].start);t.ns_st_upc=String(p),t.ns_st_dupc=String(p-e.getPlaylist().getClip().getUniquePlaybackInterval());var h=0;for(d=0;d<r.length;d++)(f=Math.abs(r[d].end-r[d].start))>h&&(h=f);t.ns_st_lpc=String(h),t.ns_st_dlpc=String(h-e.getPlaylist().getClip().getLongestPlaybackInterval());var g=0;for(d=0;d<l.length;d++)g+=Math.abs(l[d].end-l[d].start);t.ns_st_upa=String(g),t.ns_st_dupa=String(g-e.getPlaylist().getClip().getAssetUniquePlaybackInterval());var m=0;for(d=0;d<l.length;d++)(f=Math.abs(l[d].end-l[d].start))>m&&(m=f);t.ns_st_lpa=String(m),t.ns_st_dlpa=String(m-e.getPlaylist().getClip().getAssetLongestPlaybackInterval()),t.ns_st_hc=String(e.getHeartbeat().getCount()),e.getEventManager().newEvent(u.HEARTBEAT,t),i=0,a.resume()}function n(){null!=r&&(e.getPlatformAPI().clearTimeout(r),r=null)}var r,i,o,a=this,l=f.DEFAULT_HEARTBEAT_INTERVAL;s.extend(this,{getCount:function(){return o},setIntervals:function(e){l=e},getInterval:function(e){var t=0;if(null!=l)for(var n=0;n<l.length;n++){var r=l[n],i=r.playingtime;if(!i||i>e){t=r.interval;break}}return t},resume:function(){n();var o=a.getInterval(e.getPlaylist().getClip().getPlaybackTime()+(+new Date-e.getPlaylist().getClip().getPlaybackTimestamp()));if(o>0){var s=i>0?i:o;r=e.getPlatformAPI().setTimeout(t,s)}i=0},pause:function(){n();var t=a.getInterval(e.getPlaylist().getClip().getPlaybackTime()+(+new Date-e.getPlaylist().getClip().getPlaybackTimestamp()));i=t-(e.getPlaylist().getClip().getPlaybackTime()+(+new Date-e.getPlaylist().getClip().getPlaybackTimestamp()))%t},reset:function(){n(),i=0,o=0}}),a.reset()},v=function(e){function t(){var t={};s.fixEventTime(t);var n=s.getEventTime(t);t.ns_st_po=String(e.getPlaylist().getClip().getExpectedPlaybackPosition(n)),e.getPlaylist().addPlaybackTime(n),e.getPlaylist().setPlaybackTimestamp(n),e.getPlaylist().getClip().addPlaybackTime(n),e.getPlaylist().getClip().setPlaybackTimestamp(n),e.getStateMachine().getCurrentState()==c.BUFFERING_DURING_PLAYBACK&&(e.getPlaylist().addBufferingTime(n),e.getPlaylist().setBufferingTimestamp(n),e.getPlaylist().getClip().addBufferingTime(n),e.getPlaylist().getClip().setBufferingTimestamp(n)),e.getPlaylist().getClip().addElapsedTime(n),e.getPlaylist().getClip().setElapsedTimestamp(n),e.getPlaylist().getClip().addInterval(parseInt(t.ns_st_po)),e.getPlaylist().getClip().setPlaybackStartPosition(parseInt(t.ns_st_po)),e.getEventManager().newEvent(u.KEEPALIVE,t),i.resume()}function n(){null!=r&&(e.getPlatformAPI().clearTimeout(r),r=null)}var r,i=this,o=f.DEFAULT_KEEP_ALIVE_INTERVAL;s.extend(this,{resume:function(){n(),r=e.getPlatformAPI().setTimeout(t,o)},setInterval:function(e){o=e},getInterval:function(){return o},reset:function(){n()}})},y=function(e){function t(e){return e==c.PLAYING||e==c.PAUSED}function n(){null!=h&&(e.getPlatformAPI().clearTimeout(h),h=null)}function r(){l&&(e.getPlatformAPI().clearTimeout(l),l=null)}function i(t,r,i,a){var l=s.getEventTime(i);t==u.AD_SKIP&&!i.hasOwnProperty("ns_st_ui")&&o(t)?i.ns_st_ui="skip":t==u.SEEK_START&&!i.hasOwnProperty("ns_st_ui")&&o(t)&&(i.ns_st_ui="seek"),(E.getCurrentState()==c.PLAYBACK_NOT_STARTED||E.getCurrentState()==c.PAUSED||E.getCurrentState()==c.SEEKING_BEFORE_PLAYBACK||E.getCurrentState()==c.SEEKING_DURING_PLAYBACK||E.getCurrentState()==c.SEEKING_DURING_BUFFERING||E.getCurrentState()==c.SEEKING_DURING_PAUSE)&&t==u.BUFFER&&(e.getPlaylist().setBufferingTimestamp(l),e.getPlaylist().getClip().setBufferingTimestamp(l)),(E.getCurrentState()==c.PAUSED||E.getCurrentState()==c.BUFFERING_DURING_PAUSE)&&t==u.SEEK_START&&(e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().isCollectingSeekingTime()||(e.getPlaylist().getClip().setSeekingTimestamp(l),e.getPlaylist().getClip().setCollectingSeekingTime(!0)):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l))),(E.getCurrentState()==c.SEEKING_DURING_BUFFERING||E.getCurrentState()==c.SEEKING_DURING_PAUSE)&&t==u.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)),(E.getCurrentState()==c.BUFFERING_DURING_SEEKING||E.getCurrentState()==c.BUFFERING_DURING_PAUSE)&&t==u.BUFFER_STOP&&(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l)),(E.getCurrentState()==c.SEEKING_DURING_PLAYBACK||E.getCurrentState()==c.SEEKING_DURING_PAUSE)&&t==u.PAUSE&&e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),(E.getCurrentState()==c.SEEKING_DURING_BUFFERING||E.getCurrentState()==c.SEEKING_DURING_PAUSE)&&(t==u.END||t==u.AD_SKIP)&&(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().getClip().addElapsedTime(l),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()),(E.getCurrentState()==c.SEEKING_DURING_BUFFERING||E.getCurrentState()==c.SEEKING_DURING_PAUSE)&&t==u.BUFFER_STOP&&e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),E.getCurrentState()==c.IDLE?t==u.BUFFER?(e.getPlaylist().getClip().setSeekingTime(e.getPlaylist().getClip().getSeekingTimeBeforeEnd()),e.getPlaylist().setBufferingTimestamp(l),e.getPlaylist().getClip().setBufferingTimestamp(l)):t==u.SEEK_START?(e.getPlaylist().getClip().setSeekingTime(e.getPlaylist().getClip().getSeekingTimeBeforeEnd()),e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l)):t==u.PLAY&&(e.getPlaylist().getClip().setSeekingTime(e.getPlaylist().getClip().getSeekingTimeBeforeEnd()),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),_||(i.ns_st_lt=String(y+(+new Date-v)),_=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.PLAYBACK_NOT_STARTED?t==u.END||t==u.AD_SKIP?(e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.SEEK_START?(e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().setSeekingTimestamp(l):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l))):t==u.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),_||(i.ns_st_lt=String(y+(+new Date-v)),_=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.PLAYING?t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().addInterval(r),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.BUFFER?(g&&(n(),h=e.getPlatformAPI().setTimeout(function(){var e={};s.fixEventTime(e),E.transitionTo(u.PAUSE_ON_BUFFERING,E.eventTypeToState(u.PAUSE_ON_BUFFERING),e)},S)),e.getPlaylist().getClip().incrementBufferCount(),e.getPlaylist().setBufferingTimestamp(l),e.getPlaylist().getClip().setBufferingTimestamp(l)):t==u.SEEK_START?(e.getHeartbeat().pause(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().addInterval(r),e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(u.PAUSE,i)):t==u.PAUSE&&(e.getHeartbeat().pause(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().addInterval(r),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(u.PAUSE,i)):E.getCurrentState()==c.PAUSED?t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().getClip().addElapsedTime(l),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.BUFFERING_BEFORE_PLAYBACK?t==u.END||t==u.AD_SKIP?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.BUFFER_STOP?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):t==u.SEEK_START?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().isCollectingSeekingTime()||(e.getPlaylist().getClip().setSeekingTimestamp(l),e.getPlaylist().getClip().setCollectingSeekingTime(!0)):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l))):t==u.PAUSE?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):t==u.PLAY&&(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),_||(i.ns_st_lt=String(y+(+new Date-v)),_=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.BUFFERING_DURING_PLAYBACK?t==u.PAUSE_ON_BUFFERING?(n(),e.getHeartbeat().pause(),e.getKeepAlive().reset(),e.getPlaylist().addPlaybackTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().addInterval(r),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(u.PAUSE,i),e.getPlaylist().setBufferingTimestamp(l),e.getPlaylist().getClip().setBufferingTimestamp(l)):t==u.BUFFER_STOP?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l)):t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),n(),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().addInterval(r),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.SEEK_START?(n(),e.getPlaylist().addPlaybackTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().addInterval(r),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(u.PAUSE,i)):t==u.PAUSE?(n(),e.getPlaylist().addPlaybackTime(l),e.getPlaylist().getClip().addPlaybackTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().addInterval(r),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getEventManager().newEvent(u.PAUSE,i)):t==u.PLAY&&(n(),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l)):E.getCurrentState()==c.BUFFERING_DURING_SEEKING?t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),n(),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.PAUSE?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):t==u.PLAY&&(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.BUFFERING_DURING_PAUSE?t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.PAUSE?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l)):t==u.PLAY&&(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.SEEKING_BEFORE_PLAYBACK?t==u.END||t==u.AD_SKIP?(e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.PAUSE?e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)):t==u.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().isPlaylistStarted()||(e.getPlaylist().setPlaylistStarted(!0),e.getPlaylist().incrementPlaybackCounter()),e.getPlaylist().getClip().setClipStarted(!0),e.getPlaylist().getClip().setPlaybackStarted(!0),e.getPlaylist().getClip().incrementSegmentPlaybackCounter(),(0==e.getPlaylist().getClip().getLowestPartNumberPlayed()||parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)<=e.getPlaylist().getClip().getLowestPartNumberPlayed())&&(e.getPlaylist().getClip().setLowestPartNumberPlayed(parseInt(e.getPlaylist().getClip().getLabels().ns_st_pn)),e.getPlaylist().getClip().incrementAssetPlaybackCounter(),e.getPlaylist().getClip().resetAssetPlaybackCounters()),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),_||(i.ns_st_lt=String(y+(+new Date-v)),_=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.SEEKING_DURING_PLAYBACK?t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().getClip().addElapsedTime(l),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.PLAY&&(e.getPlaylist().getClip().isSeeking()&&(e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().getClip().addSeekingAmount(r),e.getPlaylist().getClip().setSeeking(!1)),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),_||(i.ns_st_lt=String(y+(+new Date-v)),_=!0),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):E.getCurrentState()==c.SEEKING_DURING_BUFFERING?t==u.PAUSE&&(e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses(),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().addSeekingTime(l),e.getPlaylist().getClip().setCollectingSeekingTime(!1))):E.getCurrentState()==c.PAUSED_DURING_BUFFERING&&(t==u.END||t==u.AD_SKIP?(e.getHeartbeat().reset(),e.getKeepAlive().reset(),e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().addElapsedTime(l),e.getEventManager().newEvent(u.END,i),e.getPlaylist().getClip().isSeeking()&&e.getPlaylist().getClip().isCollectingSeekingTime()&&(e.getPlaylist().getClip().setSeekingTimeBeforeEnd(l-e.getPlaylist().getClip().getSeekingTimestamp()),e.getPlaylist().getClip().setCollectingSeekingTime(!1)),e.getPlaylist().storeClipPlaybackCounters(),e.getPlaylist().getClip().resetClipLifecycleLabels(),e.getPlaylist().getClip().setPlaybackStarted(!1),i.hasOwnProperty("ns_st_pe")&&"0"!==String(i.hasOwnProperty("ns_st_pe"))&&e.getPlaylist().reset()):t==u.BUFFER_STOP?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i)):t==u.SEEK_START?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().isSeeking()?e.getPlaylist().getClip().isCollectingSeekingTime()||(e.getPlaylist().getClip().setSeekingTimestamp(l),e.getPlaylist().getClip().setCollectingSeekingTime(!0)):e.getPlaylist().getClip().incrementSeeks(),e.getPlaylist().getClip().isSeeking()||(e.getPlaylist().getClip().setSeeking(!0),e.getPlaylist().getClip().setCollectingSeekingTime(!0),e.getPlaylist().getClip().setSeekStartPosition(r),e.getPlaylist().getClip().setSeekingTimestamp(l))):t==u.PAUSE?(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().incrementPauses(),e.getPlaylist().getClip().incrementPauses()):t==u.PLAY&&(e.getPlaylist().addBufferingTime(l),e.getPlaylist().getClip().addBufferingTime(l),e.getPlaylist().getClip().incrementPlayCounter(),e.getPlaylist().setPlaybackTimestamp(l),e.getPlaylist().getClip().setPlaybackTimestamp(l),e.getPlaylist().getClip().addElapsedTime(l),e.getPlaylist().getClip().setElapsedTimestamp(l),e.getPlaylist().getClip().setPlaybackStartPosition(r),e.getHeartbeat().resume(),e.getKeepAlive().resume(),e.getEventManager().newEvent(u.PLAY,i))),E.setCurrentState(E.eventTypeToState(t));for(var d=0,f=b.length;f>d;d++)b[d](E.getPreviousState(),E.getCurrentState(),i,a)}function o(e){if(p==c.IDLE||p==c.PLAYBACK_NOT_STARTED||p==c.BUFFERING_BEFORE_PLAYBACK||p==c.SEEKING_BEFORE_PLAYBACK){if(e==u.PLAY)return!0}else if(p==c.PLAYING){if(e==u.END||e==u.AD_SKIP||e==u.SEEK_START||e==u.PAUSE)return!0}else if(p==c.PAUSED||p==c.BUFFERING_DURING_PAUSE||p==c.SEEKING_DURING_PLAYBACK||p==c.SEEKING_DURING_BUFFERING||p==c.SEEKING_DURING_PAUSE){if(e==u.END||e==u.AD_SKIP||e==u.PLAY)return!0}else if(p==c.BUFFERING_DURING_PLAYBACK){if(e==u.PAUSE_ON_BUFFERING||e==u.END||e==u.AD_SKIP||e==u.SEEK_START||e==u.PAUSE||e==u.PLAY)return!0}else if(p==c.BUFFERING_DURING_SEEKING){if(e==u.END||e==u.AD_SKIP||e==u.PAUSE||e==u.PLAY)return!0}else if(p==c.PAUSED_DURING_BUFFERING&&(e==u.END||e==u.AD_SKIP||e==u.BUFFER_STOP||e==u.PLAY))return!0;return!1}var a,l,d,p,h,g,m,v,y,_,b,E=this,S=f.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,w=f.THROTTLING_DELAY;s.extend(this,{eventTypeToState:function(e){if(E.getCurrentState()==c.IDLE){if(e==u.PLAY)return c.PLAYING;if(e==u.SEEK_START)return c.SEEKING_BEFORE_PLAYBACK;if(e==u.BUFFER)return c.BUFFERING_BEFORE_PLAYBACK}else if(E.getCurrentState()==c.PLAYBACK_NOT_STARTED){if(e==u.PLAY)return c.PLAYING;if(e==u.SEEK_START)return c.SEEKING_BEFORE_PLAYBACK;if(e==u.BUFFER)return c.BUFFERING_BEFORE_PLAYBACK;if(e==u.END||e==u.AD_SKIP)return c.IDLE}else if(E.getCurrentState()==c.PLAYING){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.BUFFER)return c.BUFFERING_DURING_PLAYBACK;if(e==u.PAUSE)return c.PAUSED;if(e==u.SEEK_START)return c.SEEKING_DURING_PLAYBACK}else if(E.getCurrentState()==c.PAUSED){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.BUFFER)return c.BUFFERING_DURING_PAUSE;if(e==u.PLAY)return c.PLAYING;if(e==u.SEEK_START)return c.SEEKING_DURING_PAUSE}else if(E.getCurrentState()==c.BUFFERING_BEFORE_PLAYBACK){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PAUSE||e==u.BUFFER_STOP)return c.PLAYBACK_NOT_STARTED;if(e==u.PLAY)return c.PLAYING;if(e==u.SEEK_START)return c.SEEKING_BEFORE_PLAYBACK}else if(E.getCurrentState()==c.BUFFERING_DURING_PLAYBACK){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PLAY||e==u.BUFFER_STOP)return c.PLAYING;if(e==u.PAUSE_ON_BUFFERING)return c.PAUSED_DURING_BUFFERING;if(e==u.SEEK_START)return c.SEEKING_DURING_BUFFERING;if(e==u.PAUSE)return c.PAUSED}else if(E.getCurrentState()==c.BUFFERING_DURING_SEEKING){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PLAY)return c.PLAYING;if(e==u.BUFFER_STOP)return c.SEEKING_DURING_PLAYBACK;if(e==u.PAUSE)return c.PAUSED}else if(E.getCurrentState()==c.BUFFERING_DURING_PAUSE){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PLAY)return c.PLAYING;if(e==u.SEEK_START)return c.SEEKING_DURING_PAUSE;if(e==u.BUFFER_STOP||e==u.PAUSE)return c.PAUSED}else if(E.getCurrentState()==c.SEEKING_BEFORE_PLAYBACK){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PAUSE)return c.PLAYBACK_NOT_STARTED;if(e==u.PLAY)return c.PLAYING;if(e==u.BUFFER)return c.BUFFERING_BEFORE_PLAYBACK}else if(E.getCurrentState()==c.SEEKING_DURING_PLAYBACK){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PLAY)return c.PLAYING;if(e==u.PAUSE)return c.PAUSED;if(e==u.BUFFER)return c.BUFFERING_DURING_SEEKING}else if(E.getCurrentState()==c.SEEKING_DURING_BUFFERING){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PLAY)return c.PLAYING;if(e==u.PAUSE||e==u.BUFFER_STOP)return c.PAUSED}else if(E.getCurrentState()==c.SEEKING_DURING_PAUSE){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.PLAY)return c.PLAYING;if(e==u.PAUSE||e==u.BUFFER_STOP)return c.PAUSED;if(e==u.BUFFER)return c.BUFFERING_DURING_PAUSE}else if(E.getCurrentState()==c.PAUSED_DURING_BUFFERING){if(e==u.END||e==u.AD_SKIP)return c.IDLE;if(e==u.SEEK_START)return c.SEEKING_DURING_BUFFERING;if(e==u.PAUSE)return c.PAUSED;if(e==u.PLAY||e==u.BUFFER_STOP)return c.PLAYING}return null},reset:function(){p=c.IDLE,d=null,a=-1,m=!0,y=0,g=!0,n(),r()},getCurrentState:function(){return p},setCurrentState:function(e){p!=e&&(d=p,p=e,a=+new Date)},getPreviousState:function(){return d},transitionTo:function(n,o,d,f){if(r(),function(e){return null!=e&&p!=e}(o))if(E.isThrottlingEnabled()&&t(p)&&t(o)&&!f)l=e.getPlatformAPI().setTimeout(function(e,t,n){return function(){E.transitionTo(e,t,n,!0)}}(n,o,d),w);else{var h=s.getEventTime(d),g=a>=0?h-a:0;d.ns_st_po||(e.getStateMachine().getCurrentState()==c.PLAYING&&n==u.BUFFER||e.getStateMachine().getCurrentState()==c.BUFFERING_DURING_PLAYBACK&&n==u.BUFFER_STOP?d.ns_st_po=String(e.getPlaylist().getClip().getPlaybackTimeOffset()+(h-e.getPlaylist().getClip().getPlaybackTimestamp())):d.ns_st_po=String(e.getPlaylist().getClip().getExpectedPlaybackPosition(h))),i(n,parseInt(d.ns_st_po),d,g)}},setPauseOnBufferingInterval:function(e){S=e},getPauseOnBufferingInterval:function(){return S},isPauseOnBufferingEnabled:function(){return g},setPauseOnBufferingEnabled:function(e){g=e},setThrottlingDelay:function(e){w=e},getThrottlingDelay:function(){return w},isThrottlingEnabled:function(){return m},setThrottlingEnabled:function(e){m=e},getLoadTimeOffset:function(){return y},setLoadTimeOffset:function(e){y=e},addListener:function(e){b.push(e)},removeListener:function(e){b.splice(s.indexOf(e,b),1)}}),_=!1,v=+new Date,b=[],E.reset()},_=function(e,t){function n(e,t){var n=e||"",r="undefined",i=I.comScore||I.sitestat||function(e){var t,n,i,a,l,u="comScore=",c=P.cookie,d="",p="indexOf",h="length",g=s.browserAcceptsLargeURLs()?f.URL_LENGTH_LIMIT:f.RESTRICTED_URL_LENGTH_LIMIT,m="&ns_",v=I.encodeURIComponent||escape;if(c[p](u)+1)for(a=0,i=c.split(";"),l=i[h];l>a;a++)(n=i[a][p](u))+1&&(d="&"+unescape(i[a].substring(n+u[h])));(e+=m+"_t="+ +new Date+m+"c="+(P.characterSet||P.defaultCharset||"")+d).length>g&&e.indexOf("&")>0&&(t=e.substr(0,g-8).lastIndexOf("&"),e=(e.substring(0,t)+m+"cut="+v(e.substring(t+1))).substr(0,g)),C.getPlatformAPI().httpGet(e),("undefined"==typeof ns_p?"undefined":o(ns_p))===r&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(o(t)!==r){var a=[],l=I.encodeURIComponent||escape;for(var u in t)t.hasOwnProperty(u)&&a.push(l(u)+"="+l(t[u]));/[\?\&]$/.test(n)||(n+="&"),n+=a.join("&")}return i(n)}function r(){A&&w.getCurrentState()!=c.IDLE&&C.end()}var i,p,_,b,E,S,w,T,A,I,P,C=this,k=f.DEFAULT_PLAYERNAME,L=f.STREAMSENSE_VERSION,R=f.STANDARD_METADATA_LABELS,D={};s.extend(this,{isNotProperlyInitialized:function(){var e=T.getAppContext(),t=T.getSalt(),n=T.getPixelURL();return null==e||null==t||0==t.length||null==n||0==n.length},reset:function(e){_=_||new h,b=b||new m(C),E=E||new g(C),S=S||new v(C),w=w||new y(C),_.reset(e),null==e||e.isEmpty()?i={}:s.filterMap(i,e),E.reset(),b.reset(),S.reset(),w.reset(),k=f.DEFAULT_PLAYERNAME,L=f.STREAMSENSE_VERSION,A=!0},getAppCore:function(){return T},getPlatformAPI:function(){return T?T.getPlatformAPI():a},getExports:function(){return D},getHeartbeat:function(){return b},getKeepAlive:function(){return S},getEventManager:function(){return E},getStateMachine:function(){return w},getMediaPlayerName:function(){return k},getMediaPlayerVersion:function(){return L},setPauseOnBufferingInterval:function(e){w.setPauseOnBufferingInterval(e)},getPauseOnBufferingInterval:function(){return w.getPauseOnBufferingInterval()},setKeepAliveInterval:function(e){S.setInterval(e)},getKeepAliveInterval:function(){return S.getInterval()},setHeartbeatIntervals:function(e){b.setIntervals(e)},play:function(e,t){C.notify(u.PLAY,e,t)},pause:function(e,t){C.notify(u.PAUSE,e,t)},end:function(e,t){C.notify(u.END,e,t)},bufferStart:function(e,t){C.notify(u.BUFFER,e,t)},bufferStop:function(e,t){C.notify(u.BUFFER_STOP,e,t)},load:function(e,t){C.notify(u.LOAD,e,t)},start:function(e,t){C.notify(u.START,e,t)},seekStart:function(e,t){C.notify(u.SEEK_START,e,t)},skipAd:function(e,t){C.notify(u.AD_SKIP,e,t)},callToAction:function(e,t){C.notify(u.CTA,e,t)},error:function(e,t){C.notify(u.ERROR,e,t)},transferPlayback:function(e,t){C.notify(u.TRANSFER,e,t)},drmFail:function(e,t){C.notify(u.DRM_FAILED,e,t)},drmApprove:function(e,t){C.notify(u.DRM_APPROVED,e,t)},drmDeny:function(e,t){C.notify(u.DRM_DENIED,e,t)},changeBitrate:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_br=String(e),C.notify(u.BIT_RATE,r,t)}},changePlaybackRate:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_rt=String(e),C.notify(u.PLAYBACK_RATE,r,t)}},changeVolume:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_vo=String(e),C.notify(u.VOLUME,r,t)}},changeWindowState:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_ws=String(e),C.notify(u.WINDOW_STATE,r,t)}},changeAudio:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_at=String(e),C.notify(u.AUDIO,r,t)}},changeVideo:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_vt=String(e),C.notify(u.VIDEO,r,t)}},changeSubtitle:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_tt=String(e),C.notify(u.SUBS,r,t)}},changeCDN:function(e,t,n){if(null!=e){var r=n||{};r.ns_st_cdn=String(e),C.notify(u.CDN,r,t)}},notify:function(){var e,t,n,r;if(t=arguments[0],3==arguments.length?("object"==o(arguments[1])?n=arguments[1]:("string"==typeof arguments[1]||"number"==typeof arguments[1])&&(r=arguments[1]),"object"==o(arguments[2])?n=arguments[2]:("string"==typeof arguments[2]||"number"==typeof arguments[2])&&(r=arguments[2]),n||(n={})):2==arguments.length?"object"==o(arguments[1])?n=arguments[1]:(n={},r=arguments[1]):arguments.length,u.toString(t)){e=w.eventTypeToState(t),s.fixEventTime(n);var i=s.getEventTime(n);if(!n.ns_st_po&&r&&(n.ns_st_po=s.getInteger(r,0).toString()),n.ns_st_po&&_.getClip().setPlaybackTimeOffset(parseInt(n.ns_st_po)),t==u.PLAY||t==u.PAUSE||t==u.BUFFER||t==u.END||t==u.SEEK_START||t==u.AD_SKIP||t==u.BUFFER_STOP)w.transitionTo(t,e,n);else{if((t==u.LOAD||t==u.START)&&w.getCurrentState()!=c.IDLE)return;t!=u.ERROR||n.ns_st_er||(n.ns_st_er=l.UNKNOWN_VALUE),w.getCurrentState()!=c.IDLE&&w.getCurrentState()!=c.PLAYBACK_NOT_STARTED&&w.getCurrentState()!=c.SEEKING_BEFORE_PLAYBACK&&w.getCurrentState()!=c.BUFFERING_BEFORE_PLAYBACK&&(_.getClip().addElapsedTime(i),_.getClip().setElapsedTimestamp(i));var a,d,f,p=!0,h=!1;switch(t){case u.BIT_RATE:a="ns_st_br",d="ns_st_pbr",h=!0;break;case u.PLAYBACK_RATE:a="ns_st_rt",d="ns_st_prt",h=!0;break;case u.VOLUME:a="ns_st_vo",d="ns_st_pvo",h=!0;break;case u.WINDOW_STATE:a="ns_st_ws",d="ns_st_pws",h=!0;break;case u.AUDIO:a="ns_st_at",d="ns_st_pat",h=!1;break;case u.VIDEO:a="ns_st_vt",d="ns_st_pvt",h=!1;break;case u.SUBS:a="ns_st_tt",d="ns_st_ptt",h=!1;break;case u.CDN:a="ns_st_cdn",d="ns_st_pcdn",h=!1;break;default:p=!1}if(p&&n.hasOwnProperty(a)&&(h?(C.getLabels().hasOwnProperty(a)&&(f=C.getLabels()[a],n[d]=f),C.setLabel(a,n[a])):(_.getClip().getLabels().hasOwnProperty(a)&&(f=_.getClip().getLabels()[a],n[d]=f),_.getClip().setLabel(a,n[a]))),p&&w.getCurrentState()!=c.PLAYING&&w.getCurrentState()!=c.BUFFERING_DURING_PLAYBACK)return;n.ns_st_po||(n.ns_st_po=String(_.getClip().getExpectedPlaybackPosition(i))),(w.getCurrentState()==c.PLAYING||w.getCurrentState()==c.BUFFERING_DURING_PLAYBACK)&&(_.addPlaybackTime(i),_.setPlaybackTimestamp(i),_.getClip().addPlaybackTime(i),_.getClip().setPlaybackTimestamp(i),_.getClip().addInterval(parseInt(n.ns_st_po)),_.getClip().setPlaybackStartPosition(parseInt(n.ns_st_po))),(w.getCurrentState()==c.BUFFERING_BEFORE_PLAYBACK||w.getCurrentState()==c.BUFFERING_DURING_PAUSE||w.getCurrentState()==c.BUFFERING_DURING_PLAYBACK||w.getCurrentState()==c.BUFFERING_DURING_SEEKING)&&(_.addBufferingTime(i),_.setBufferingTimestamp(i),_.getClip().addBufferingTime(i),_.getClip().setBufferingTimestamp(i)),E.newEvent(t,n)}}},getLabels:function(){return i},getState:function(){return w.getCurrentState()},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&C.setLabel(t,e[t])},getLabel:function(e){return i[e]},setLabel:function(e,t){null==t?delete i[e]:i[e]=t},getLoadTimeOffset:function(){return w.getLoadTimeOffset()},setLoadTimeOffset:function(e){w.setLoadTimeOffset(e)},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,n=e.indexOf("?");if(n>=0){if(n<e.length-1){for(var r=e.substring(n+1).split("&"),i=0,o=r.length;o>i;i++){var a=r[i],s=a.split("=");2==s.length?C.setLabel(s[0],t(s[1])):1==s.length&&C.setLabel(f.PAGE_NAME_LABEL,t(s[0]))}e=e.substring(0,n+1)}}else e+="?";return p=e},getPixelURL:function(){return p||("undefined"!=typeof ns_p&&"string"==typeof ns_p.src?p=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?p=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null)},setImplementationType:function(e){w.getCurrentState()!=c.IDLE||e!=d.SINGLE_CLIP&&e!=d.SEGMENTED&&e!=d.REDUCED||_.setLabel("ns_st_it",d.toString(e))},isPauseOnBufferingEnabled:function(){return w.isPauseOnBufferingEnabled()},setPauseOnBufferingEnabled:function(e){w.setPauseOnBufferingEnabled(e)},isThrottlingEnabled:function(){return w.isThrottlingEnabled()},setThrottlingEnabled:function(e){w.setThrottlingEnabled(e)},setThrottlingDelay:function(e){w.setThrottlingDelay(e)},getThrottlingDelay:function(){return w.getThrottlingDelay()},setPlaybackIntervalMergeTolerance:function(e){_.getClip().setPlaybackIntervalMergeTolerance(e)},getPlaybackIntervalMergeTolerance:function(){return _.getClip().getPlaybackIntervalMergeTolerance()},setClip:function(e,t,n){if(void 0===n&&(n=!0),n&&w.getCurrentState()!==c.IDLE&&C.end(),w.getCurrentState()==c.IDLE){var r="",i=0;if(null!=e.ns_st_cn)r=String(e.ns_st_cn);else for(var o=0;o<R.length;o++)e[R[o]]&&(r+=R[o]+":"+e[R[o]]+";");_.getClip().isClipStarted()?(_.hashExists(_.getClip().getHash())||(_.storeHash(_.getClip().getHash()),_.storeClipNumber(_.getClip().getHash(),_.getClip().getClipNumber())),_.storeClipPlaybackCounters(),i=_.hashExists(r)?_.getClipNumber(r):s.exists(e.ns_st_cn)?parseInt(e.ns_st_cn):_.getMaxClipNumber()+1):i=_.hashExists(r)?_.getClipNumber(r):_.getClip().getClipNumber(),_.getClip().reset(),_.getClip().setHash(r),_.getClip().setClipNumber(i),_.getClip().setLabels(e,null);var a=_.getStoredClipRegisters(r);return a&&(_.getClip().setClipStarted(!0),_.getClip().setSegmentPlaybackCounter(a.segmentPlaybackCounter),_.getClip().setClipLoadCounter(a.clipLoadCounter),_.getClip().setAssetPlaybackCounter(a.assetPlaybackCounter),_.getClip().setLowestPartNumberPlayed(a.lowestPartNumberPlayed),_.getClip().setSeeking(a.seeking),_.getClip().setSeekingTimeBeforeEnd(a.seekingTimeBeforeEnd),_.getClip().setSeekStartPosition(a.seekingStartPosition),_.getClip().setClipPlaybackIntervals(a.clipPlaybackIntervals),_.getClip().setUniquePlaybackInterval(a.uniquePlaybackInterval),_.getClip().setLongestPlaybackInterval(a.longestPlaybackInterval),_.getClip().setVideoTrack(a.videoTrack),_.getClip().setAudioTrack(a.audioTrack),_.getClip().setSubtitleTrack(a.subtitleTrack),_.getClip().setCDN(a.cdn),_.getClip().setPreviousUniquePlaybackInterval(a.uniquePlaybackInterval),_.getClip().setPreviousEventIndependentUniquePlaybackInterval(a.uniquePlaybackInterval),_.getClip().setPreviousLongestPlaybackInterval(a.longestPlaybackInterval)),_.getClip().incrementClipLoadCounter(),_.getClip().isClipStarted()&&t&&(_.incrementPlayCounter(),_.incrementPlaybackCounter()),!0}return!1},setPlaylist:function(e,t){return void 0===t&&(t=!0),t&&w.getCurrentState()!==c.IDLE&&C.end(),w.getCurrentState()==c.IDLE&&(_.isPlaylistStarted()&&_.reset(),_.setLabels(e,null),!0)},importState:function(){},exportState:function(){return{}},getVersion:function(){return f.STREAMSENSE_VERSION},addListener:function(e){w.addListener(e)},removeListener:function(e){w.removeListener(e)},getClip:function(){return _.getClip()},getPlaylist:function(){return _},setHttpGet:function(e){"function"==typeof e&&(C.getPlatformAPI().httpGet=e)},setHttpPost:function(e){"function"==typeof e&&(C.getPlatformAPI().httpPost=e)},setExitEndEvent:function(e){A=e},isExitEndEventEnabled:function(){return A}}),s.isBrowser()?(I=window,P=document):(I={},P={location:{href:""},title:"",URL:"",referrer:"",cookie:""}),s.extend(this,{prepareUrl:function(e,t){for(var n,r=I.encodeURIComponent||escape,i=[],o=f.LABELS_ORDER,a=e.split("?"),l=a[0],u=a[1].split("&"),c=0,d=u.length;d>c;c++){var p=u[c].split("="),h=unescape(p[0]),g=unescape(p[1]);h&&(t[h]=g)}for(var m={},v=0,y=o.length;y>v;v++){var _=o[v];if(t.hasOwnProperty(_)){var b=t[_];void 0!==b&&null!=b&&(m[_]=!0,i.push(r(_)+"="+r(t[_])))}}for(var E in t)if(t.hasOwnProperty(E)){if(m[E])continue;var S=t[E];void 0!==S&&null!=S&&i.push(r(E)+"="+r(t[E]))}n=(n=l+"?"+i.join("&"))+(n.indexOf("&c8=")<0?"&c8="+r(P.title):"")+(n.indexOf("&c7=")<0?"&c7="+r(P.URL):"")+(n.indexOf("&c9=")<0?"&c9="+r(P.referrer):"");var w=s.browserAcceptsLargeURLs()?f.URL_LENGTH_LIMIT:f.RESTRICTED_URL_LENGTH_LIMIT;if(n.length>w&&n.indexOf("&")>0){var T=n.substr(0,w-8).lastIndexOf("&");n=(n.substring(0,T)+"&ns_cut="+r(n.substring(T+1))).substr(0,w)}return n}}),s.extend(this,{customNotify:function(e,t){C.notify(u.CUSTOM,e,t)},viewNotify:function(e,t){(e=e||C.getPixelURL())&&n(e,t)}}),s.isBrowser()&&(window.addEventListener?(window.addEventListener("beforeunload",r),window.addEventListener("unload",r)):window.attachEvent&&(window.attachEvent("onbeforeunload",r),window.attachEvent("onunload",r))),s.getNamespace().comScore&&(D=s.getNamespace().comScore.exports,T=D.c()),C.reset(),e&&C.setLabels(e),t&&C.setPixelURL(t)};return function(t){function n(e,t){return l[c]||i(e,t)}function r(){c=-1;for(var t=0;u>=t;t++)if(l.hasOwnProperty(String(t))){c=t;break}return e.StreamSense.activeIndex=c,c}function i(t,n){return n=n||null,(t=t||null)&&"object"==o(t)&&(n=t,t=null),l[++u]=new e.StreamSense(n,t),r(),l[u]}function a(){var t=!1,n=c;if("number"==typeof arguments[0]&&isFinite(arguments[0]))n=arguments[0];else if(arguments[0]instanceof e.StreamSense)for(var i in l)if(l.hasOwnProperty(i)&&l[i]===arguments[0]){n=i;break}return l.hasOwnProperty(String(n))&&(t=l[n],delete l[n],t.reset(),r()),t}var l={},u=-1,c=-1;s.extend(t,{activeIndex:c,newInstance:i,new:i,destroyInstance:a,destroy:a,newPlaylist:function(e){return e=e||{},n().setPlaylist(e),n().getPlaylist()},newClip:function(e,t,r){return e=e||{},"number"==typeof t&&(e.ns_st_cn=String(t)),n().setClip(e,r),n().getClip()},notify:function(e,t,r){return void 0!==e&&(r=r||null,t=t||{},n().notify(e,t,r))},setLabels:function(e){void 0!==e&&n().setLabels(e)},getLabels:function(){return n().getLabels()},setPlaylistLabels:function(e){void 0!==e&&n().getPlaylist().setLabels(e)},getPlaylistLabels:function(){return n().getPlaylist().getLabels()},setClipLabels:function(e){void 0!==e&&n().getClip().setLabels(e)},getClipLabels:function(){return n().getClip().getLabels()},resetInstance:function(e){return n().reset(e||{})},resetPlaylist:function(e){return n().getPlaylist().reset(e||{})},resetClip:function(e){return n().getClip().reset(e||{})},viewEvent:function(e){return e=e||{},n().viewNotify(null,e)},customEvent:function(e,t){return arguments.length>2&&(e=arguments[1],t=arguments[2]),e=e||{},"number"==typeof t&&(e.ns_st_po=String(t)),n().customNotify(e,t)},exportState:function(){return n().exportState()},importState:function(e){n().importState(e)}})}(_),_.PlayerEvents=u,_.InternalStates=c,_.ImplementationType=d,_}(),e.StreamingTag=e.StreamingTag||(n=e.StreamSense,e.StreamSense.PlayerEvents,r=e.StreamSense.InternalStates||null,i=e.StreamSense.ImplementationType||null,a=null!=e.StreamSense.InternalStates&&null!=e.StreamSense.ImplementationType,(t=function(e){function t(e){for(var t in s.exists(e)||(e={}),v)v.hasOwnProperty(t)&&!s.exists(e[v[t]])&&("ns_st_ci"==v[t]?e.ns_st_ci="0":e[v[t]]="*null");return e}function o(e,t,n){if(s.exists(e)&&s.exists(t)&&s.exists(n)){var r=t[e],i=n[e];return s.exists(r)&&s.exists(i)&&r===i}return!1}function l(e){d++;var t={ns_st_cn:String(d),ns_st_pn:"1",ns_st_tp:"0"};s.extend(t,e),h.setClip(t),f=e,h.play()}function u(e){d++,e=t(e);var n={ns_st_cn:String(d),ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};s.extend(n,e),h.setClip(n),h.play(),p=!1}function c(e,n){e=t(e),y==m.None&&(y=n),p&&y==n&&function(e){for(var t in v)if(v.hasOwnProperty(t)&&!o(v[t],f,e))return!1;return!0}(e)?(h.getClip().setLabels(e),h.getState()!=r.PLAYING&&h.play()):l(e),p=!0,y=n}var d=0,f=null,p=!1,h=null,g=!1,m={None:0,AudioContent:1,VideoContent:2},v=["ns_st_ci","c3","c4","c6","ns_st_st","ns_st_pu","ns_st_pr","ns_st_ep","ns_st_sn","ns_st_en","ns_st_ct"],y=m.None;s.extend(this,{playAdvertisement:function(){h&&(g&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead."),u({ns_st_ct:"va"}))},playVideoAdvertisement:function(e,t){if(h){var n={ns_st_ct:"va"};t?n.ns_st_ct="va"+t:g&&console&&console.warn("Calling 'playVideoAdvertisement' without specifying the media type as a second parameter."),e&&s.extend(n,e),u(n)}},playAudioAdvertisement:function(e,t){if(h){var n={ns_st_ct:"aa"};t?n.ns_st_ct="aa"+t:g&&console&&console.warn("Calling 'playAudioAdvertisement' without specifying the media type as a second parameter."),e&&s.extend(n,e),u(n)}},playContentPart:function(e){if(h){g&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var t={ns_st_ct:"vc"};e&&s.extend(t,e),c(t,m.VideoContent)}},playVideoContentPart:function(e,t){if(h){var n={ns_st_ct:"vc"};t?n.ns_st_ct="vc"+t:g&&console&&console.warn("Calling 'playVideoContentPart' without specifying the media type as a second parameter."),e&&s.extend(n,e),c(n,m.VideoContent)}},playAudioContentPart:function(e,t){if(h){var n={ns_st_ct:"ac"};t?n.ns_st_ct="ac"+t:g&&console&&console.warn("Calling 'playAudioContentPart' without specifying the media type as a second parameter."),e&&s.extend(n,e),c(n,m.AudioContent)}},stop:function(){h&&h.pause()}}),function(){if(a)if(s.getNamespace().comScore)(h=new n).setImplementationType(i.REDUCED);else if(s.exists(e))if(g=s.isTrue(e.debug),s.exists(e.customerC2)&&e.customerC2.length>0){var t=e.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");(h=new n).setPixelURL(t+".scorecardresearch.com/p?c1=2"),h.setLabel("c2",e.customerC2),h.setImplementationType(i.REDUCED)}else g&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}()}).ContentType={LongFormOnDemand:"11",ShortFormOnDemand:"12",Live:"13",UserGeneratedLongFormOnDemand:"21",UserGeneratedShortFormOnDemand:"22",UserGeneratedLive:"23",Bumper:"99",Other:"00"},t.AdType={LinearOnDemandPreRoll:"11",LinearOnDemandMidRoll:"12",LinearOnDemandPostRoll:"13",LinearLive:"21",Other:"00"},t),e}(i.ns_)}.apply(t,[]))||(e.exports=r)},function(e,t,n){var r=n(25),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(25);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(1),i=n(98),o=n(5).f,a=n(32).f,s=n(78),l=n(53),u=r.RegExp,c=u,d=u.prototype,f=/a/g,p=/a/g,h=new u(f)!==f;if(n(4)&&(!h||n(3)(function(){return p[n(2)("match")]=!1,u(f)!=f||u(p)==p||"/a/i"!=u(f,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(h?new c(r&&!o?e.source:e,t):c((r=e instanceof u)?e.source:e,r&&o?l.call(e):t),n?this:d,u)};for(var g=function(e){e in u||o(u,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})},m=a(c),v=0;m.length>v;)g(m[v++]);d.constructor=u,u.prototype=d,n(11)(r,"RegExp",u)}n(74)("RegExp")},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(27),i=n(8),o=n(52);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(20),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(7);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(2)("unscopables"),i=Array.prototype;null==i[r]&&n(10)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t,n){"use strict";var r=n(0),i=n(97);r(r.P+r.F*!n(15)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(47),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(147);var r=n(11),i=n(10),o=n(3),a=n(26),s=n(2),l=n(89),u=s("species"),c=!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),p=!o(function(){var t={};return t[f]=function(){return 7},7!=""[e](t)}),h=p?!o(function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[f](""),!t}):void 0;if(!p||!h||"replace"===e&&!c||"split"===e&&!d){var g=/./[f],m=n(a,f,""[e],function(e,t,n,r,i){return t.exec===l?p&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),v=m[0],y=m[1];r(String.prototype,e,v),i(RegExp.prototype,f,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,n){"use strict";n(148);var r=n(7),i=n(53),o=n(4),a=/./.toString,s=function(e){n(11)(RegExp.prototype,"toString",e,!0)};n(3)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(11)(r,"toString",function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"})},function(e,t,n){"use strict";var r=n(0),i=n(51)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(15)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){var r=n(9),i=n(33);n(62)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(0),i=n(23),o=n(3);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){"use strict";n(150)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(99).set})},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(153)})},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(42)})},function(e,t,n){var r=n(6),i=n(1).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(23),i=n(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(19)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(31),i=n(2)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(47),i=n(2)("iterator"),o=n(31);e.exports=n(23).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(7),i=n(14),o=n(2)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(11);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(1),i=n(5),o=n(4),a=n(2)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(2)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){var r=n(68)("keys"),i=n(24);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6),i=n(25),o=n(2)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r=n(0),i=n(27),o=n(20),a=n(8),s=[].lastIndexOf,l=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(l||!n(15)(s)),"Array",{lastIndexOf:function(e){if(l)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){"use strict";var r=n(9),i=n(52),o=n(8);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,u=void 0===l?n:i(l,n);u>s;)t[s++]=e;return t}},function(e,t,n){var r=n(24)("meta"),i=n(6),o=n(12),a=n(5).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(3)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return u&&d.NEED&&l(e)&&!o(e,r)&&c(e),e}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(25);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(12),i=n(9),o=n(76)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(1),i=n(12),o=n(25),a=n(98),s=n(28),l=n(3),u=n(32).f,c=n(41).f,d=n(5).f,f=n(111).trim,p=r.Number,h=p,g=p.prototype,m="Number"==o(n(42)(g)),v="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=v?t.trim():f(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,l=t.slice(2),u=0,c=l.length;u<c;u++)if((a=l.charCodeAt(u))<48||a>i)return NaN;return parseInt(l,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(m?l(function(){g.valueOf.call(n)}):"Number"!=o(n))?a(new h(y(t)),n,p):y(t)};for(var _,b=n(4)?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;b.length>E;E++)i(h,_=b[E])&&!i(p,_)&&d(p,_,c(h,_));p.prototype=g,g.constructor=p,n(11)(r,"Number",p)}},function(e,t,n){var r=n(5).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(4)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(83)})},function(e,t,n){"use strict";var r=n(112)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){"use strict";var r,i,o=n(53),a=RegExp.prototype.exec,s=String.prototype.replace,l=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(u||c)&&(l=function(e){var t,n,r,i,l=this;return c&&(n=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),u&&(t=l.lastIndex),r=a.call(l,e),u&&r&&(l.lastIndex=l.global?r.index+r[0].length:t),c&&r&&r.length>1&&s.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r}),e.exports=l},function(e,t,n){e.exports=!n(4)&&!n(3)(function(){return 7!=Object.defineProperty(n(67)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(7);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r,i,o,a=n(18),s=n(93),l=n(94),u=n(67),c=n(1),d=c.process,f=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,g=c.Dispatch,m=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},_=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete v[e]},"process"==n(25)(d)?r=function(e){d.nextTick(a(y,e,1))}:g&&g.now?r=function(e){g.now(a(y,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(e){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:f,clear:p}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(1).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(14);function i(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(14),i=n(9),o=n(48),a=n(8);e.exports=function(e,t,n,s,l){r(t);var u=i(e),c=o(u),d=a(u.length),f=l?d-1:0,p=l?-1:1;if(n<2)for(;;){if(f in c){s=c[f],f+=p;break}if(f+=p,l?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;l?f>=0:d>f;f+=p)f in c&&(s=t(s,c[f],f,u));return s}},function(e,t,n){var r=n(6),i=n(99).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){var r=n(6),i=n(7),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(18)(Function.call,n(41).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){var r=n(12),i=n(27),o=n(51)(!1),a=n(76)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(80)}),n(54)("fill")},function(e,t,n){var r=n(1),i=n(23),o=n(19),a=n(103),s=n(5).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(2)},function(e,t,n){var r=n(5),i=n(7),o=n(33);e.exports=n(4)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){for(var r,i=n(1),o=n(10),a=n(24),s=a("typed_array"),l=a("view"),u=!(!i.ArrayBuffer||!i.DataView),c=u,d=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=i[f[d++]])?(o(r.prototype,s,!0),o(r.prototype,l,!0)):c=!1;e.exports={ABV:u,CONSTR:c,TYPED:s,VIEW:l}},function(e,t,n){var r=n(20),i=n(8);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){"use strict";var r=n(19),i=n(0),o=n(11),a=n(10),s=n(31),l=n(144),u=n(39),c=n(84),d=n(2)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,g,m,v){l(n,t,h);var y,_,b,E=function(e){if(!f&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",w="values"==g,T=!1,A=e.prototype,I=A[d]||A["@@iterator"]||g&&A[g],P=I||E(g),C=g?w?E("entries"):P:void 0,k="Array"==t&&A.entries||I;if(k&&(b=c(k.call(new e)))!==Object.prototype&&b.next&&(u(b,S,!0),r||"function"==typeof b[d]||a(b,d,p)),w&&I&&"values"!==I.name&&(T=!0,P=function(){return I.call(this)}),r&&!v||!f&&!T&&A[d]||a(A,d,P),s[t]=P,s[S]=p,g)if(y={values:w?P:E("values"),keys:m?P:E("keys"),entries:C},v)for(_ in y)_ in A||o(A,_,y[_]);else i(i.P+i.F*(f||T),t,y);return y}},function(e,t,n){"use strict";var r=n(0),i=n(14),o=n(9),a=n(3),s=[].sort,l=[1,2,3];r(r.P+r.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!n(15)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";n(111)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){var r=n(0),i=n(26),o=n(3),a=n(146),s="["+a+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),c=function(e,t,n){var i={},s=o(function(){return!!a[e]()||"​"!="​"[e]()}),l=i[e]=s?t(d):a[e];n&&(i[n]=l),r(r.P+r.F*s,"String",i)},d=c.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=c},function(e,t,n){var r=n(20),i=n(26);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(7),i=n(8),o=n(88),a=n(56);n(57)("match",1,function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var l=r(e),u=String(this);if(!l.global)return a(l,u);var c=l.unicode;l.lastIndex=0;for(var d,f=[],p=0;null!==(d=a(l,u));){var h=String(d[0]);f[p]=h,""===h&&(l.lastIndex=o(u,i(l.lastIndex),c)),p++}return 0===p?null:f}]})},function(e,t,n){"use strict";var r=n(0),i=n(34)(3);r(r.P+r.F*!n(15)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(34)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(54)("find")},function(e,t,n){"use strict";var r=n(0),i=n(34)(2);r(r.P+r.F*!n(15)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";e.exports=n(19)||!n(3)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(1)[e]})},function(e,t,n){"use strict";var r=n(0),i=n(51)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(54)("includes")},function(e,t,n){"use strict";var r=n(0),i=n(151);r(r.P+r.F*n(152)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(14),a=n(5);n(4)&&r(r.P+n(117),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){(function(r){var i,o,a,s,l;function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!

   Flowplayer Commercial v7.2.7 (Tuesday, 23. January 2018 12:17PM) | flowplayer.com/license

*/n(131),n(132),n(134),n(135),n(49),n(79),n(101),n(21),n(22),n(138),n(108),n(109),n(110),n(55),n(13),n(40),n(85),n(86),n(87),n(43),n(113),n(58),n(59),n(114),n(60),n(35),n(61),n(36),n(44),n(115),n(116),n(45),n(37),
/*!

   Flowplayer Commercial v7.2.7 (Tuesday, 23. January 2018 12:17PM) | flowplayer.com/license

*/
function(e){function t(e,t,n,r){for(var i,o=n.slice(),a=function(e,t){return e.currentTarget=t,e.eventPhase=e.target===e.currentTarget?2:3,e}(t,e),s=0,l=o.length;s<l&&(handler=o[s],"object"==("undefined"==typeof handler?"undefined":u(handler))&&"function"==typeof handler.handleEvent?handler.handleEvent(a):handler.call(e,a),!a.stoppedImmediatePropagation);s++);return i=!a.stoppedPropagation,r&&i&&e.parentNode?e.parentNode.dispatchEvent(a):!a.defaultPrevented}function n(e,t){return{configurable:!0,get:e,set:t}}function r(e,t,r){var i=y(t||e,r);m(e,"textContent",n(function(){return i.get.call(this)},function(e){i.set.call(this,e)}))}function i(e,t){for(var n=e.length;n--&&e[n]!==t;);return n}function o(){if("BR"===this.tagName)return"\n";for(var e=this.firstChild,t=[];e;)8!==e.nodeType&&7!==e.nodeType&&t.push(e.textContent),e=e.nextSibling;return t.join("")}function a(e){!d&&w.test(document.readyState)&&(d=!d,document.detachEvent(f,a),(e=document.createEvent("Event")).initEvent(p,!0,!0),document.dispatchEvent(e))}function s(e){for(var t;t=this.lastChild;)this.removeChild(t);null!=e&&this.appendChild(document.createTextNode(e))}function l(t,n){return n||(n=e.event),n.target||(n.target=n.srcElement||n.fromElement||document),n.timeStamp||(n.timeStamp=(new Date).getTime()),n}if(!document.createEvent){var c=!0,d=!1,f="onreadystatechange",p="DOMContentLoaded",h="__IE8__"+Math.random(),g=e.Object,m=g.defineProperty||function(e,t,n){e[t]=n.value},v=g.defineProperties||function(t,n){for(var r in n)if(_.call(n,r))try{m(t,r,n[r])}catch(n){e.console&&console.log(r+" failed on object:",t,n.message)}},y=g.getOwnPropertyDescriptor,_=g.prototype.hasOwnProperty,b=e.Element.prototype,E=e.Text.prototype,S=/^[a-z]+$/,w=/loaded|complete/,T={},A=document.createElement("div");r(e.HTMLCommentElement.prototype,b,"nodeValue"),r(e.HTMLScriptElement.prototype,null,"text"),r(E,null,"nodeValue"),r(e.HTMLTitleElement.prototype,null,"text"),m(e.HTMLStyleElement.prototype,"textContent",function(e){return n(function(){return e.get.call(this.styleSheet)},function(t){e.set.call(this.styleSheet,t)})}(y(e.CSSStyleSheet.prototype,"cssText"))),v(b,{textContent:{get:o,set:s},firstElementChild:{get:function(){for(var e=this.childNodes||[],t=0,n=e.length;t<n;t++)if(1==e[t].nodeType)return e[t]}},lastElementChild:{get:function(){for(var e=this.childNodes||[],t=e.length;t--;)if(1==e[t].nodeType)return e[t]}},previousElementSibling:{get:function(){for(var e=this.previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;return e}},nextElementSibling:{get:function(){for(var e=this.nextSibling;e&&1!=e.nodeType;)e=e.nextSibling;return e}},childElementCount:{get:function(){for(var e=0,t=this.childNodes||[],n=t.length;n--;e+=1==t[n].nodeType);return e}},addEventListener:{value:function(e,n,r){var o,a=this,s="on"+e,u=a[h]||m(a,h,{value:{}})[h],c=u[s]||(u[s]={}),d=c.h||(c.h=[]);if(!_.call(c,"w")){if(c.w=function(e){return e[h]||t(a,l(0,e),d,!1)},!_.call(T,s))if(S.test(e))try{(o=document.createEventObject())[h]=!0,9!=a.nodeType&&null==a.parentNode&&A.appendChild(a),a.fireEvent(s,o),T[s]=!0}catch(o){for(T[s]=!1;A.hasChildNodes();)A.removeChild(A.firstChild)}else T[s]=!1;(c.n=T[s])&&a.attachEvent(s,c.w)}i(d,n)<0&&d[r?"unshift":"push"](n)}},dispatchEvent:{value:function(e){var n,r=this,i="on"+e.type,o=r[h],a=o&&o[i],s=!!a;return e.target||(e.target=r),s?a.n?r.fireEvent(i,e):t(r,e,a.h,!0):!(n=r.parentNode)||n.dispatchEvent(e),!e.defaultPrevented}},removeEventListener:{value:function(e,t,n){var r="on"+e,o=this[h],a=o&&o[r],s=a&&a.h,l=s?i(s,t):-1;-1<l&&s.splice(l,1)}}}),v(E,{addEventListener:{value:b.addEventListener},dispatchEvent:{value:b.dispatchEvent},removeEventListener:{value:b.removeEventListener}}),v(e.XMLHttpRequest.prototype,{addEventListener:{value:function(e,t,n){var r=this,o="on"+e,a=r[h]||m(r,h,{value:{}})[h],s=a[o]||(a[o]={}),l=s.h||(s.h=[]);i(l,t)<0&&(r[o]||(r[o]=function(){var t=document.createEvent("Event");t.initEvent(e,!0,!0),r.dispatchEvent(t)}),l[n?"unshift":"push"](t))}},dispatchEvent:{value:function(e){var n=this,r="on"+e.type,i=n[h],o=i&&i[r];return!!o&&(o.n?n.fireEvent(r,e):t(n,e,o.h,!0))}},removeEventListener:{value:b.removeEventListener}}),v(e.Event.prototype,{bubbles:{value:!0,writable:!0},cancelable:{value:!0,writable:!0},preventDefault:{value:function(){this.cancelable&&(this.defaultPrevented=!0,this.returnValue=!1)}},stopPropagation:{value:function(){this.stoppedPropagation=!0,this.cancelBubble=!0}},stopImmediatePropagation:{value:function(){this.stoppedImmediatePropagation=!0,this.stopPropagation()}},initEvent:{value:function(e,t,n){this.type=e,this.bubbles=!!t,this.cancelable=!!n,this.bubbles||this.stopPropagation()}}}),v(e.HTMLDocument.prototype,{textContent:{get:function(){return 11===this.nodeType?o.call(this):null},set:function(e){11===this.nodeType&&s.call(this,e)}},addEventListener:{value:function(t,n,r){var i=this;b.addEventListener.call(i,t,n,r),c&&t===p&&!w.test(i.readyState)&&(c=!1,i.attachEvent(f,a),e==top&&function e(t){try{i.documentElement.doScroll("left"),a()}catch(t){setTimeout(e,50)}}())}},dispatchEvent:{value:b.dispatchEvent},removeEventListener:{value:b.removeEventListener},createEvent:{value:function(e){var t;if("Event"!==e)throw new Error("unsupported "+e);return(t=document.createEventObject()).timeStamp=(new Date).getTime(),t}}}),v(e.Window.prototype,{getComputedStyle:{value:function(){function e(e){this._=e}function t(){}var n=/^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,r=/^(top|right|bottom|left)$/,i=/\-([a-z])/g,o=function(e,t){return t.toUpperCase()};return e.prototype.getPropertyValue=function(e){var t,a,s,l=this._,u=l.style,c=l.currentStyle,d=l.runtimeStyle;return e=("float"===e?"style-float":e).replace(i,o),t=c?c[e]:u[e],n.test(t)&&!r.test(e)&&(a=u.left,(s=d&&d.left)&&(d.left=c.left),u.left="fontSize"===e?"1em":t,t=u.pixelLeft+"px",u.left=a,s&&(d.left=s)),null==t?t:t+""||"auto"},t.prototype.getPropertyValue=function(){return null},function(n,r){return r?new t(n):new e(n)}}()},addEventListener:{value:function(n,r,o){var a,s=e,u="on"+n;s[u]||(s[u]=function(e){return t(s,l(0,e),a,!1)}),i(a=s[u][h]||(s[u][h]=[]),r)<0&&a[o?"unshift":"push"](r)}},dispatchEvent:{value:function(t){var n=e["on"+t.type];return!n||!1!==n.call(e,t)&&!t.defaultPrevented}},removeEventListener:{value:function(t,n,r){var o=(e["on"+t]||g)[h],a=o?i(o,n):-1;-1<a&&o.splice(a,1)}}})}}(this),l=function(){return function(){return function e(t,n,r){function i(a,l){if(!n[a]){if(!t[a]){if(!l&&"function"==typeof s&&s)return s(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return i(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof s&&s,a=0;a<r.length;a++)i(r[a]);return i}}()({1:[function(e,t,n){"use strict";var r=t.exports={},i=e("class-list"),o=window.jQuery,a=e("punycode"),s=e("computed-style");r.noop=function(){},r.identity=function(e){return e},r.removeNode=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},r.find=function(e,t){return o?o(e,t).toArray():(t=t||document,Array.prototype.map.call(t.querySelectorAll(e),function(e){return e}))},r.text=function(e,t){e["innerText"in e?"innerText":"textContent"]=t},r.findDirect=function(e,t){return r.find(e,t).filter(function(e){return e.parentNode===t})},r.hasClass=function(e,t){return"string"==typeof e.className&&i(e).contains(t)},r.isSameDomain=function(e){var t=window.location,n=r.createElement("a",{href:e});return t.hostname===n.hostname&&t.protocol===n.protocol&&t.port===n.port},r.css=function(e,t,n){return"object"===u(t)?Object.keys(t).forEach(function(n){r.css(e,n,t[n])}):void 0!==n?""===n?e?e.style.removeProperty(t):void 0:e?e.style.setProperty(t,n):void 0:e?s(e,t):void 0},r.createElement=function(e,t,n){try{var i=document.createElement(e);for(var a in t)t.hasOwnProperty(a)&&("css"===a?r.css(i,t[a]):r.attr(i,a,t[a]));return n&&(i.innerHTML=n),i}catch(r){if(!o)throw r;return o("<"+e+">"+n+"</"+e+">").attr(t)[0]}},r.toggleClass=function(e,t,n){if(e){var r=i(e);void 0===n?r.toggle(t):n?r.add(t):n||r.remove(t)}},r.addClass=function(e,t){return r.toggleClass(e,t,!0)},r.removeClass=function(e,t){return r.toggleClass(e,t,!1)},r.append=function(e,t){return e.appendChild(t),e},r.appendTo=function(e,t){return r.append(t,e),e},r.prepend=function(e,t){e.insertBefore(t,e.firstChild)},r.insertAfter=function(e,t,n){t==r.lastChild(e)&&e.appendChild(n);var i=Array.prototype.indexOf.call(e.children,t);e.insertBefore(n,e.children[i+1])},r.html=function(e,t){(e=e.length?e:[e]).forEach(function(e){e.innerHTML=t})},r.attr=function(e,t,n){if("class"===t&&(t="className"),r.hasOwnOrPrototypeProperty(e,t))try{e[t]=n}catch(r){if(!o)throw r;o(e).attr(t,n)}else!1===n?e.removeAttribute(t):e.setAttribute(t,n);return e},r.prop=function(e,t,n){if(void 0===n)return e&&e[t];e[t]=n},r.offset=function(e){var t=e.getBoundingClientRect();return e.offsetWidth/e.offsetHeight>e.clientWidth/e.clientHeight&&(t={left:100*t.left,right:100*t.right,top:100*t.top,bottom:100*t.bottom,width:100*t.width,height:100*t.height}),t},r.width=function(e,t){if(t)return e.style.width=(""+t).replace(/px$/,"")+"px";var n=r.offset(e).width;return void 0===n?e.offsetWidth:n},r.height=function(e,t){if(t)return e.style.height=(""+t).replace(/px$/,"")+"px";var n=r.offset(e).height;return void 0===n?e.offsetHeight:n},r.lastChild=function(e){return e.children[e.children.length-1]},r.hasParent=function(e,t){for(var n=e.parentElement;n;){if("string"!=typeof t){if(n===t)return!0}else if(r.matches(n,t))return!0;n=n.parentElement}return!1},r.createAbsoluteUrl=function(e){return r.createElement("a",{href:e}).href},r.xhrGet=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===this.readyState)return this.status>=400?n():void t(this.responseText)},r.open("get",e,!0),r.send()},r.pick=function(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n},r.hostname=function(e){return a.toUnicode(e||window.location.hostname)},r.browser={webkit:"WebkitAppearance"in document.documentElement.style},r.getPrototype=function(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__},r.hasOwnOrPrototypeProperty=function(e,t){for(var n=e;n;){if(Object.prototype.hasOwnProperty.call(n,t))return!0;n=r.getPrototype(n)}return!1},r.matches=function(e,t){var n=Element.prototype;return(n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=0;t[n]&&t[n]!==this;)n++;return!!t[n]}).call(e,t)},function(e){function t(e){return e.replace(/-[a-z]/g,function(e){return e[1].toUpperCase()})}void 0!==e.setAttribute&&(e.setProperty=function(e,n){return this.setAttribute(t(e),String(n))},e.getPropertyValue=function(e){return this.getAttribute(t(e))||null},e.removeProperty=function(e){var n=this.getPropertyValue(e);return this.removeAttribute(t(e)),n})}(window.CSSStyleDeclaration.prototype)},{"class-list":36,"computed-style":37,punycode:44}],2:[function(e,t,n){"use strict";var r=e("../common");t.exports=function(e,t,n,i){n=n||"opaque";var o="obj"+(""+Math.random()).slice(2,15),a='<object class="fp-engine" id="'+o+'" name="'+o+'" ',s=navigator.userAgent.indexOf("MSIE")>-1;a+=s?'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">':' data="'+e+'" type="application/x-shockwave-flash">';var l={width:"100%",height:"100%",allowscriptaccess:"always",wmode:n,quality:"high",flashvars:"",movie:e+(s?"?"+o:""),name:o};"transparent"!==n&&(l.bgcolor=i||"#333333"),Object.keys(t).forEach(function(e){l.flashvars+=e+"="+t[e]+"&"}),Object.keys(l).forEach(function(e){a+='<param name="'+e+'" value="'+l[e]+'"/>'}),a+="</object>";var u=r.createElement("div",{},a);return r.find("object",u)},window.attachEvent&&window.attachEvent("onbeforeunload",function(){window.__flash_savedUnloadHandler=window.__flash_unloadHandler=function(){}})},{"../common":1}],3:[function(e,t,n){"use strict";var r,i=e("../flowplayer"),o=e("../common"),a=e("./embed"),s=e("extend-object"),l=e("bean");function u(e){return/^https?:/.test(e)}(r=function(e,t){var n,c,d,f,p=e.conf,h=[],g={engineName:r.engineName,pick:function(t){var n=s({},function(){if(i.support.flashVideo){for(var n,r,o=0;o<t.length;o++)if(r=t[o],/mp4|flv|flash/i.test(r.type)&&(n=r),e.conf.swfHls&&/mpegurl/i.test(r.type)&&(n=r),n&&!/mp4/i.test(n.type))return n;return n}}());if(n)return!n.src||u(n.src)||e.conf.rtmp||n.rtmp||(n.src=o.createAbsoluteUrl(n.src)),n},suspendEngine:function(){f=!0},resumeEngine:function(){f=!1},load:function(r){function v(e){return e.replace(/&amp;/g,"%26").replace(/&/g,"%26").replace(/=/g,"%3D")}n=r,h.forEach(function(e){clearTimeout(e)});var y=o.findDirect("video",t)[0]||o.find(".fp-player > video",t)[0],_=r.src,b=u(_),E=function(){o.removeNode(y)};i.support.video&&o.prop(y,"autoplay")&&r.sources.some(function(e){return!!y.canPlayType(e.type)})?l.one(y,"timeupdate",E):E();var S=r.rtmp||p.rtmp;if(b||S||(_=o.createAbsoluteUrl(_)),d&&m(r)&&d.data!==o.createAbsoluteUrl(p.swfHls)&&g.unload(),d){["live","preload","loop"].forEach(function(e){r.hasOwnProperty(e)&&d.__set(e,r[e])}),Object.keys(r.flashls||{}).forEach(function(e){d.__set("hls_"+e,r.flashls[e])});var w=!1;if(!b&&S)d.__set("rtmp",S.url||S);else w=!!d.__get("rtmp"),d.__set("rtmp",null);d.__play(_,w||r.rtmp&&r.rtmp!==p.rtmp)}else{c="fpCallback"+(""+Math.random()).slice(3,15),_=v(_);var T={hostname:p.embedded?o.hostname(p.hostname):o.hostname(location.hostname),url:_,callback:c};t.getAttribute("data-origin")&&(T.origin=t.getAttribute("data-origin")),["proxy","key","autoplay","preload","subscribe","live","loop","debug","splash","poster","rtmpt"].forEach(function(e){p.hasOwnProperty(e)&&(T[e]=p[e]),r.hasOwnProperty(e)&&(T[e]=r[e]),(p.rtmp||{}).hasOwnProperty(e)&&(T[e]=(p.rtmp||{})[e]),(r.rtmp||{}).hasOwnProperty(e)&&(T[e]=(r.rtmp||{})[e])}),p.splash&&(T.autoplay=!0),p.rtmp&&(T.rtmp=p.rtmp.url||p.rtmp),r.rtmp&&(T.rtmp=r.rtmp.url||r.rtmp),Object.keys(r.flashls||{}).forEach(function(e){var t=r.flashls[e];T["hls_"+e]=t});var A=void 0!==r.hlsQualities?r.hlsQualities:p.hlsQualities;void 0!==A&&(T.hlsQualities=A?encodeURIComponent(JSON.stringify(A)):A),void 0!==p.bufferTime&&(T.bufferTime=p.bufferTime),void 0!==p.bufferTimeMax&&(T.bufferTimeMax=p.bufferTimeMax),b&&delete T.rtmp,T.rtmp&&(T.rtmp=v(T.rtmp));var I,P=p.bgcolor||o.css(t,"background-color")||"";0===P.indexOf("rgb")?I=function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}if(!(e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/)))return;return"#"+t(e[1])+t(e[2])+t(e[3])}(P):0===P.indexOf("#")&&(I=function(e){return 7===e.length?e:"#"+e.split("").slice(1).map(function(e){return e+e}).join("")}(P)),T.initialVolume=e.volumeLevel;var C=m(r)?p.swfHls:p.swf;d=a(C,T,p.wmode,I)[0];var k=o.find(".fp-player",t)[0];o.prepend(k,d),e.off("quality.flashengine").on("quality.flashengine",function(t,n,r){if(void 0!==e.video.hlsQualities?e.video.hlsQualities:e.conf.hlsQualities)try{d.__quality(r)}catch(t){e.debug("Error changing quality in flash engine",t)}}),setTimeout(function(){try{if(!d.PercentLoaded())return e.trigger("error",[e,{code:7,url:p.swf}])}catch(e){}},5e3),h.push(setTimeout(function(){void 0===d.PercentLoaded&&e.trigger("flashdisabled",[e])},15e3)),h.push(setTimeout(function(){void 0===d.PercentLoaded&&e.trigger("flashdisabled",[e,!1])},500)),e.off("resume.flashhack").on("resume.flashhack",function(){var t=setTimeout(function(){var t=d.__status().time,n=setTimeout(function(){e.playing&&!e.loading&&d.__status().time===t&&e.trigger("flashdisabled",[e])},400);h.push(n),e.one("seek.flashhack pause.flashhack load.flashack",function(){clearTimeout(n)})},800);h.push(t),e.one("progress",function(){clearTimeout(t)})}),d.pollInterval=setInterval(function(){if(d&&!f){var t=d.__status?d.__status():null;t&&((e.conf.live||e.live||r.live)&&(r.seekOffset=t.seekOffset,r.duration=t.duration+t.seekOffset),e.playing&&t.time&&t.time!==e.video.time&&e.trigger("progress",[e,t.time]),r.buffer=t.buffer/r.bytes*r.duration,e.trigger("buffer",[e,r.buffer]),!r.buffered&&t.time>0&&(r.buffered=!0,e.trigger("buffered",[e])))}},250),window[c]=function(r,i){var o=n;p.debug&&(0===r.indexOf("debug")&&i&&i.length?console.log.apply(console,["-- "+r].concat(i)):console.log("--",r,i));var a={type:r};switch(r){case"ready":i=s(o,i);break;case"click":a.flash=!0;break;case"keydown":a.which=i;break;case"seek":o.time=i;break;case"status":e.trigger("progress",[e,i.time]),i.buffer<o.bytes&&!o.buffered?(o.buffer=i.buffer/o.bytes*o.duration,e.trigger("buffer",o.buffer)):o.buffered||(o.buffered=!0,e.trigger("buffered"));break;case"metadata":var u=atob(i);i={key:u.substr(10,4),data:u.substr(21)}}"click"===r||"keydown"===r?(a.target=t,l.fire(t,r,[a])):"buffered"!=r&&"unload"!==r?setTimeout(function(){e.trigger(a,[e,i])},1):"unload"===r&&e.trigger(a,[e,i])}}},speed:o.noop,unload:function(){d&&d.__unload&&d.__unload();try{c&&window[c]&&delete window[c]}catch(e){}o.find("object",t).forEach(o.removeNode),d=0,e.off(".flashengine"),e.off(".flashhack"),clearInterval(d.pollInterval),h.forEach(function(e){clearTimeout(e)})}};function m(e){return/application\/x-mpegurl/i.test(e.type)}return["pause","resume","seek","volume"].forEach(function(t){g[t]=function(n){try{e.ready&&(void 0===n?d["__"+t]():d["__"+t](n))}catch(n){if(void 0===d["__"+t])return e.trigger("flashdisabled",[e]);throw n}}}),g}).engineName="flash",r.canPlay=function(e,t){return i.support.flashVideo&&/video\/(mp4|flash|flv)/i.test(e)||i.support.flashVideo&&t.swfHls&&/mpegurl/i.test(e)},i.engines.push(r)},{"../common":1,"../flowplayer":31,"./embed":2,bean:34,"extend-object":39}],4:[function(e,t,n){"use strict";var r,i=e("../flowplayer"),o=i.support,a=i.common,s=i.bean,l=e("./html5-factory");function u(e){return void 0!==window.Hls&&(/mpegurl/.test(e)&&window.Hls.isSupported())}(r=function(e,t){var n,o,c=window.Hls;return l("hlsjs-lite",e,t,u,function(l,u,d){var f=i.extend({recoverMediaError:!0},e.conf.hlsjs,l.hlsjs);e.engine.hls&&e.engine.hls.destroy();var p,h,g=e.engine.hls=new c(f);r.extensions.forEach(function(n){n({hls:g,player:e,root:t,videoTag:u})}),g.loadSource(l.src),d.resume=function(){e.live&&!e.dvr&&(u.currentTime=g.liveSyncPosition||0),u.play()},d.seek=function(t){try{e.live||e.dvr?u.currentTime=Math.min(t,g.liveSyncPosition||u.duration-f.livePositionOffset):u.currentTime=t}catch(n){e.debug("Failed to seek to ",t,n)}},!1===f.bufferWhilePaused&&e.on("pause",function(){g.stopLoad(),e.one("resume",function(){g.startLoad()})}),e.on("quality",function(e,t,r){g.nextLevel=n=r});var m=function(n){if(e.debug("hlsjs - recovery"),a.removeClass(t,"is-paused"),a.addClass(t,"is-seeking"),s.one(u,"seeked",function(){u.paused&&(a.removeClass(t,"is-poster"),e.poster=!1,u.play()),a.removeClass(t,"is-seeking")}),n)return g.startLoad();var r=performance.now();!p||r-p>3e3?(p=performance.now(),g.recoverMediaError()):(!h||r-h>3e3)&&(h=performance.now(),g.swapAudioCodec(),g.recoverMediaError())};return g.on(c.Events.MANIFEST_PARSED,function(t,r){var i,s=l.hlsQualities||e.conf.hlsQualities,c={},d=r.levels;if(!1===s)return g.attachMedia(u);if("drive"===s)switch(d.length){case 4:i=[1,2,3];break;case 5:i=[1,2,3,4];break;case 6:i=[1,3,4,5];break;case 7:i=[1,3,5,6];break;case 8:i=[1,3,6,7];break;default:i=d.length<3||d[0].height&&d[2].height&&d[0].height===d[2].height?[]:[1,2]}if(l.qualities=[{value:-1,label:"Auto"}],Array.isArray(s)){var f=s.find(function(e){return-1===e||e.level&&-1===e.level});f?l.qualities[0].label="number"!=typeof f?f.label:l.qualities[0].label:l.qualities=[],i=s.map(function(e){return void 0!==e.level&&(c[e.level]=e.label),void 0!==e.level?e.level:e})}var p=-2;l.qualities=l.qualities.concat(d.map(function(e,t){if(i&&-1===i.indexOf(t))return!1;var r=c[t]||Math.min(e.width,e.height)+"p";return c[t]||"drive"===s||(r+=" ("+Math.round(e.bitrate/1e3)+"k)"),t===n&&(p=t),{value:t,label:r}})).filter(a.identity);var h=l.quality=-2===p?l.qualities[0].value||-1:p;h!==g.currentLevel&&(g.currentLevel=h),g.attachMedia(u),o&&l.src!==o&&u.play(),o=l.src}),g.on(c.Events.ERROR,function(t,n){if(n.fatal)if(f.recoverNetworkError&&n.type===c.ErrorTypes.NETWORK_ERROR)m(!0);else if(f.recoverMediaError&&n.type===c.ErrorTypes.MEDIA_ERROR)m(!1);else{var r=5;n.type===c.ErrorTypes.NETWORK_ERROR&&(r=2),n.type===c.ErrorTypes.MEDIA_ERROR&&(r=3),g.destroy(),e.trigger("error",[e,{code:r}])}}),e.one("unload",function(){g.destroy()}),{handlers:{error:function(e,t){var n=t.error&&t.error.code;return f.recoverMediaError&&3===n||!n?(e.preventDefault(),m(!1),!0):f.recoverNetworkError&&2===n?(e.preventDefault(),m(!0),!0):void 0}}}})}).canPlay=function(e,t){return!(!1===t.hlsjs||t.clip&&!1===t.clip.hlsjs)&&(!(o.browser.safari&&!(t.clip&&t.clip.hlsjs||t.hlsjs||{}).safari)&&(i.support.video&&u(e)))},r.engineName="hlsjs-lite",r.plugin=function(e){r.extensions.push(e)},r.extensions=[],i.engines.push(r)},{"../flowplayer":31,"./html5-factory":5}],5:[function(e,t,n){var r=e("../flowplayer"),i=r.common,o=r.support,a=r.bean,s=r.extend,l=o.browser.safari&&!o.iOS,u={ended:"finish",pause:"pause",play:"resume",timeupdate:"progress",volumechange:"volume",ratechange:"speed",seeked:"seek",loadedmetadata:l?0:"ready",canplaythrough:l?"ready":0,durationchange:"ready",error:"error",dataunavailable:"error",webkitendfullscreen:!r.support.inlineVideo&&"unload",progress:"buffer"};function c(e,t){return t=t||100,Math.round(e*t)/t}t.exports=function(e,t,n,r,l){var d,f,p,h=i.findDirect("video",n)[0]||i.find(".fp-player > video",n)[0],g=t.conf;return p={engineName:e,pick:function(e){var t=o.video&&e.filter(function(e){return r(e.type)})[0];if(t)return"string"==typeof t.src&&(t.src=i.createAbsoluteUrl(t.src)),t},load:function(e){var d=i.find(".fp-player",n)[0],m=!1;if(h||(h=document.createElement("video"),i.prepend(d,h),h.autoplay=!!g.splash,m=!0),i.addClass(h,"fp-engine"),i.find("track",h).forEach(i.removeNode),h.preload="none",g.nativesubtitles||i.attr(h,"crossorigin",!1),g.disableInline||(h.setAttribute("webkit-playsinline","true"),h.setAttribute("playsinline","true")),o.inlineVideo||i.css(h,{position:"absolute",top:"-9999em"}),o.subtitles&&g.nativesubtitles&&e.subtitles&&e.subtitles.length){i.addClass(h,"native-subtitles");var v=e.subtitles,y=function(e){var t=h.textTracks;t.length&&(t[0].mode=e)};v.some(function(e){return!i.isSameDomain(e.src)})&&i.attr(h,"crossorigin","anonymous"),"function"==typeof h.textTracks.addEventListener&&h.textTracks.addEventListener("addtrack",function(){y("disabled"),y("showing")}),v.forEach(function(e){h.appendChild(i.createElement("track",{kind:"subtitles",srclang:e.srclang||"en",label:e.label||"en",src:e.src,default:e.default}))})}a.off(h,"timeupdate",i.noop),a.on(h,"timeupdate",i.noop),i.prop(h,"loop",!1),t.off(".loophack"),(e.loop||g.loop)&&t.on("finish.loophack",function(){t.resume()}),void 0!==f&&(h.volume=f);var _=l(e,h,p);if(g.autoplay||g.splash||e.autoplay){t.debug("Autoplay / Splash setup, try to start video"),h.load();var b=function(){try{var e=h.play();e&&e.catch&&e.catch(function e(n){if("AbortError"===n.name&&20===n.code)return m?void 0:h.play().catch(e);if(!g.mutedAutoplay)throw new Error("Unable to autoplay");return t.debug("Play errored, trying muted",n),t.mute(!0,!0),h.play()}).catch(function(){g.autoplay=!1,t.mute(!1,!0),t.trigger("stop",[t])})}catch(e){t.debug("play() error thrown",e)}};h.readyState>0?b():a.one(h,"canplay",b)}if(p._listeners=function(e,l,d,f){var p=n.getAttribute("data-flowplayer-instance-id");if(!e.listeners||!e.listeners.hasOwnProperty(p)){(e.listeners||(e.listeners={}))[p]=d,a.on(l,"error",function(n){try{r(n.target.getAttribute("type"))&&t.trigger("error",[t,{code:4,video:s(d,{src:e.src,url:e.src})}])}catch(e){}}),t.on("shutdown",function(){a.off(l),a.off(e,".dvrhack"),t.off(".loophack")});var h={},g=function(e){"metadata"===e.kind&&(e.mode="hidden",e.addEventListener("cuechange",function(){e.activeCues.length&&t.trigger("metadata",[t,e.activeCues[0].value])},!1))};return e&&e.textTracks&&e.textTracks.length&&Array.prototype.forEach.call(e.textTracks,g),e&&e.textTracks&&"function"==typeof e.textTracks.addEventListener&&e.textTracks.addEventListener("addtrack",function(e){g(e.track)},!1),(t.conf.dvr||t.dvr||d.dvr)&&a.on(e,"progress.dvrhack",function(){e.seekable.length&&(t.video.duration=e.seekable.end(null),t.video.seekOffset=e.seekable.start(null),t.trigger("dvrwindow",[t,{start:e.seekable.start(null),end:e.seekable.end(null)}]),e.currentTime>=e.seekable.start(null)||(e.currentTime=e.seekable.start(null)))}),Object.keys(u).forEach(function(r){var a=u[r];if("webkitendfullscreen"===r&&t.conf.disableInline&&(a="unload"),a){var l=function(l){if(d=e.listeners[p],l.target&&i.hasClass(l.target,"fp-engine")){/progress/.test(a)||t.debug(r,"->",a,l);var u,h=function(e){t.trigger(e||a,[t,u])};if((t.ready||/ready|error/.test(a))&&a&&i.find("video",n).length)if("unload"!==a){switch(a){case"ready":if(t.ready)return t.debug("Player already ready, not sending duplicate ready event");if(!(e.duration&&e.duration!==1/0||t.live))return t.debug("No duration and VOD setup, not sending ready event");if((u=s(d,{duration:e.duration<Number.MAX_VALUE?e.duration:0,width:e.videoWidth,height:e.videoHeight,url:e.currentSrc})).seekable=u.duration,t.debug("Ready: ",u),!t.live&&!u.duration&&!o.hlsDuration&&"loadeddata"===r)return e.addEventListener("durationchange",function t(){u.duration=e.duration;try{u.seekable=e.seekable&&e.seekable.end(null)}catch(e){}h(),e.removeEventListener("durationchange",t),i.toggleClass(n,"is-live",!1)}),void e.addEventListener("timeupdate",function r(){t.ready||e.duration||(u.duration=0,i.addClass(n,"is-live"),h()),e.removeEventListener("timeupdate",r)});break;case"progress":case"seek":if(e.currentTime>0||t.live)u=Math.max(e.currentTime,0);else if("seek"===a&&0===e.currentTime)u=0;else if("progress"==a)return;break;case"buffer":u=[];for(var g=0;g<e.buffered.length;g++)u.push({start:e.buffered.start(g),end:e.buffered.end(g)});e.buffered.length&&e.buffered.end(null)===e.duration&&h("buffered");break;case"speed":u=c(e.playbackRate);break;case"volume":u=c(e.muted?0:e.volume);break;case"error":try{if(f&&f.handlers&&f.handlers.error&&f.handlers.error(l,e))return;(u=(l.srcElement||l.originalTarget).error).video=s(d,{src:e.src,url:e.src})}catch(e){return}}h()}else t.unload();else"resume"===a&&t.one("ready",function(){setTimeout(function(){h()})})}};n.addEventListener(r,l,!0),h[r]||(h[r]=[]),h[r].push(l)}}),h}e.listeners[p]=d}(h,i.find("source",h).concat(h),e,_)||p._listeners,!(g.autoplay||g.splash||e.autoplay)){var E=function(){var e;(e=n.getBoundingClientRect()).top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)+e.height&&e.right<=(window.innerWidth||document.documentElement.clientWidth)+e.width&&(t.debug("player is in viewport, preload"),o.preloadMetadata?h.preload="metadata":h.load(),a.off(document,"scroll.preloadviewport"))};a.off(document,"scroll.preloadviewport"),a.on(document,"scroll.preloadviewport",function(){window.requestAnimationFrame(E)}),E()}},mute:function(e){h.muted=!!e,t.trigger("mute",[t,e]),t.trigger("volume",[t,e?0:h.volume])},pause:function(){h.pause()},resume:function(){h.play()},speed:function(e){h.playbackRate=e},seek:function(e){var n=h.paused||t.finished;try{h.currentTime=e,n&&a.one(h,"seeked",function(){h.pause()})}catch(e){}},volume:function(e){f=e,h&&(h.volume=e,e&&p.mute(!1))},unload:function(){a.off(document,"scroll.preloadviewport"),i.find("video.fp-engine",n).forEach(function(e){"MediaSource"in window?e.src=URL.createObjectURL(new MediaSource):e.src="",i.removeNode(e)}),d=clearInterval(d);var e=n.getAttribute("data-flowplayer-instance-id");delete h.listeners[e],h=0,p._listeners&&Object.keys(p._listeners).forEach(function(e){p._listeners[e].forEach(function(t){n.removeEventListener(e,t,!0)})})}}}},{"../flowplayer":31}],6:[function(e,t,n){"use strict";var r,i=e("../flowplayer"),o=i.common,a=e("./html5-factory"),s=document.createElement("video");function l(e){return/^(video|application)/i.test(e)||(e=function(e){return/mpegurl/i.test(e)?"application/x-mpegurl":e}(e)),!!s.canPlayType(e).replace("no","")}(r=function(e,t){return a("html5",e,t,l,function(e,t){t.currentSrc!==e.src?(o.find("source",t).forEach(o.removeNode),t.src=e.src,t.type=e.type):e.autoplay&&t.load()})}).canPlay=function(e){return i.support.video&&l(e)},r.engineName="html5",i.engines.push(r)},{"../flowplayer":31,"./html5-factory":5}],7:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){e.on("ready",function(){var e=i.find("video.fp-engine",t)[0];e&&(e.setAttribute("x-webkit-airplay","allow"),window.WebKitPlaybackTargetAvailabilityEvent&&(e.addEventListener("webkitplaybacktargetavailabilitychanged",function(e){if("available"===e.availability){var n=i.find(".fp-header",t)[0];i.find(".fp-airplay",n).forEach(i.removeNode);var r=i.createElement("a",{class:"fp-airplay fp-icon",title:"Play on AirPlay device"});n.insertBefore(r,i.find(".fp-fullscreen",n)[0])}}),e.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",function(){var n=i.find(".fp-airplay",t)[0];n&&i.toggleClass(n,"fp-active",e.webkitCurrentPlaybackTargetIsWireless)})))}),o.on(t,"click",".fp-airplay",function(e){e.preventDefault(),i.find("video.fp-engine",t)[0].webkitShowPlaybackTargetPicker()})})},{"../common":1,"../flowplayer":31,bean:34}],8:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("./resolve").TYPE_RE,o=e("scriptjs"),a=e("bean");r(function(e,t){var n,r=e.conf.analytics,s=0,l=0;if(r){"undefined"==typeof _gat&&o("//google-analytics.com/ga.js");var u=function(){var e=_gat._getTracker(r);return e._setAllowLinker(!0),e},c=function(r,o,a){(a=a||e.video,s&&"undefined"!=typeof _gat)&&(u()._trackEvent("Video / Seconds played",e.engine.engineName+"/"+a.type,a.title||t.getAttribute("title")||a.src.split("/").slice(-1)[0].replace(i,""),Math.round(s/1e3)),s=0,n&&(clearTimeout(n),n=null))};e.bind("load unload",c).bind("progress",function(){e.seeking||(s+=l?+new Date-l:0,l=+new Date),n||(n=setTimeout(function(){n=null,u()._trackEvent("Flowplayer heartbeat","Heartbeat","",0,!0)},6e5))}).bind("pause",function(){l=0}),e.bind("shutdown",function(){a.off(window,"unload",c)}),a.on(window,"unload",c)}})},{"../flowplayer":31,"./resolve":21,bean:34,scriptjs:45}],9:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean"),a=e("scriptjs");r(function(e,t){if(!1!==e.conf.chromecast){a("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),window.__onGCastApiAvailable=function(e){var t,n,r;e&&(t=l.applicationId||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,n=new chrome.cast.SessionRequest(t),r=new chrome.cast.ApiConfig(n,u,c),chrome.cast.initialize(r,d,f))};var n,r,s,l=e.conf.chromecast||{};o.on(t,"click",".fp-chromecast",function(o){if(o.preventDefault(),n)return e.trigger("pause",[e]),n.stop(),n=null,void p();e.playing&&e.pause(),chrome.cast.requestSession(function(o){var a=(n=o).receiver.friendlyName;i.html(i.find(".fp-chromecast-engine-status")[0],"Playing on device "+a);var l=new chrome.cast.media.MediaInfo(e.video.src),u=new chrome.cast.media.LoadRequest(l);n.loadMedia(u,function(o){o.addUpdateListener(function(a){if(n){r=r||setInterval(function(){e.trigger("progress",[e,o.getEstimatedTime()])},500),a?(i.toggleClass(t,"is-chromecast",!0),i.toggleClass(s,"fp-active",!0),e.hijack({pause:function(){o.pause()},resume:function(){o.play()},seek:function(e){var t=new chrome.cast.media.SeekRequest;t.currentTime=e,o.seek(t)}})):(p(),e.trigger("finish",[e]));var l=o.playerState;e.paused&&l===chrome.cast.media.PlayerState.PLAYING&&e.trigger("resume",[e]),e.playing&&l===chrome.cast.media.PlayerState.PAUSED&&e.trigger("pause",[e]),i.toggleClass(t,"is-loading",l===chrome.cast.media.PlayerState.BUFFERING)}})},function(){})},function(e){console.error("requestSession error",e)})})}function u(){console.log("sessionListener")}function c(e){e===chrome.cast.ReceiverAvailability.AVAILABLE&&function(){var e=i.find(".fp-header",t)[0];if(!e)return;i.find(".fp-chromecast",e).forEach(i.removeNode),i.find(".fp-chromecast-engine",t).forEach(i.removeNode),s=i.createElement("a",{class:"fp-chromecast fp-icon",title:"Play on Cast device"}),e.insertBefore(s,i.find(".fp-fullscreen",e)[0]);var n=i.createElement("div",{class:"fp-chromecast-engine"}),r=i.createElement("p",{class:"fp-chromecast-engine-status"}),o=i.createElement("p",{class:"fp-chromecast-engine-icon"});n.appendChild(o),n.appendChild(r);var a=i.find(".fp-engine",t)[0];a?a.parentNode.insertBefore(n,a):i.prepend(i.find(".fp-player",t)[0]||t,n)}()}function d(){}function f(){console.log("onError")}function p(){clearInterval(r),r=null,e.release(),i.toggleClass(t,"is-chromecast",!1),i.toggleClass(s,"fp-active",!1)}})},{"../common":1,"../flowplayer":31,bean:34,scriptjs:45}],10:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){var n=/ ?cue\d+ ?/,r=!1;function a(e){t.className=t.className.replace(n," "),e>=0&&i.addClass(t,"cue"+e)}var s={},l=-.125,u=function(t){a(t.index),e.trigger("cuepoint",[e,t])};function c(t){var n=t&&!isNaN(t.time)?t.time:t;return n<0&&(n=e.video.duration+n),.125*Math.round(n/.125)}e.on("progress",function(e,t,n){if(!r)for(var i=c(n);l<i;)s[l+=.125]&&s[l].forEach(u)}).on("unload",a).on("beforeseek",function(e){setTimeout(function(){e.defaultPrevented||(r=!0)})}).on("seek",function(e,t,n){a(),l=c(n||0)-.125,r=!1,!n&&s[0]&&s[0].forEach(u)}).on("ready",function(t,n,r){l=-.125;var i=r.cuepoints||e.conf.cuepoints||[];e.setCuepoints(i)}).on("finish",function(){for(var t=c(e.video.duration);l<t;)s[l+=.125]&&s[l].forEach(u);l=-.125}),e.conf.generate_cuepoints&&e.bind("load",function(){i.find(".fp-cuepoint",t).forEach(i.removeNode)}),e.setCuepoints=function(t){return e.cuepoints=[],s={},t.forEach(e.addCuepoint),e},e.addCuepoint=function(n){e.cuepoints||(e.cuepoints=[]),"number"==typeof n&&(n={time:n}),n.index=0;var r=c(n);if(s[r]||(s[r]=[]),s[r].push(n),e.cuepoints.length&&(n.index=Math.max.apply(null,e.cuepoints.map(function(e){return e.index}))+1),e.cuepoints.push(n),e.conf.generate_cuepoints&&!1!==n.visible){var a=e.video.duration,l=i.find(".fp-timeline",t)[0];i.css(l,"overflow","visible");var u=n.time||n;u<0&&(u=a+u);var d=i.createElement("a",{className:"fp-cuepoint fp-cuepoint"+n.index});i.css(d,"left",u/a*100+"%"),l.appendChild(d),o.on(d,"mousedown",function(t){t.preventDefault(),t.stopPropagation(),e.seek(u)})}return e},e.removeCuepoint=function(n){"number"==typeof n&&(n=e.cuepoints.filter(function(e){return e.index===n})[0]);var r=e.cuepoints.indexOf(n),o=c(n);if(-1!==r){e.cuepoints=e.cuepoints.slice(0,r).concat(e.cuepoints.slice(r+1));var a=i.find(".fp-timeline",t)[0];i.find(".fp-cuepoint"+n.index,a).forEach(i.removeNode);var l=s[o].indexOf(n);if(-1!==l)return s[o]=s[o].slice(0,l).concat(s[o].slice(l+1)),e}}})},{"../common":1,"../flowplayer":31,bean:34}],11:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("bean"),o=e("../common"),a=e("./util/clipboard");r(function(e,t){if(!1!==e.conf.embed&&!1!==e.conf.share){var n=o.find(".fp-share-menu",t)[0],r=o.createElement("a",{class:"fp-icon fp-embed",title:"Copy to your site"},"Embed");o.append(n,r),e.embedCode=function(){var n=e.conf.embed||{},r=e.video,i=n.width||r.width||o.width(t),a=n.height||r.height||o.height(t),s=e.conf.ratio,l='<iframe src="'+e.shareUrl(!0)+'" allowfullscreen style="border:none;';return n.width||n.height?(isNaN(i)||(i+="px"),isNaN(a)||(a+="px"),l+"width:"+i+";height:"+a+';"></iframe>'):(s&&!e.conf.adaptiveRatio||(s=a/i),'<div style="position:relative;width:100%;display:inline-block;">'+l+'position:absolute;top:0;left:0;width:100%;height:100%;"></iframe><div style="padding-top:'+100*s+'%;"></div></div>')},i.on(t,"click",".fp-embed",function(){a(e.embedCode(),function(){e.message("The embed code is now on your clipboard",2e3)},function(){e.textarea(e.embedCode(),"Copy the code below to embed your video")})})}})},{"../common":1,"../flowplayer":31,"./util/clipboard":30,bean:34}],12:[function(e,t,n){"use strict";t.exports=function(e,t){t||(t=document.createElement("div"));var n={},r={},i=function(e,i,o){var a=e.split(".")[0],s=function s(l){o&&(t.removeEventListener(a,s),n[e].splice(n[e].indexOf(s),1));var u=[l].concat(r[l.timeStamp+l.type]||[]);i&&i.apply(void 0,u)};t.addEventListener(a,s),n[e]||(n[e]=[]),n[e].push(s)};e.on=e.bind=function(t,n){return t.split(" ").forEach(function(e){i(e,n)}),e},e.one=function(t,n){return t.split(" ").forEach(function(e){i(e,n,!0)}),e};e.off=e.unbind=function(r){return r.split(" ").forEach(function(e){var r=e.split(".").slice(1),i=e.split(".")[0];Object.keys(n).filter(function(e){var t,n=e.split(".").slice(1);return(!i||0===e.indexOf(i))&&(t=n,0===r.filter(function(e){return-1===t.indexOf(e)}).length)}).forEach(function(e){var r=n[e],i=e.split(".")[0];n[e]=r.filter(function(e){return t.removeEventListener(i,e),!1})})}),e},e.trigger=function(n,i,o){if(n){i=(i||[]).length?i||[]:[i];var a,s=document.createEvent("Event");return a=n.type||n,s.initEvent(a,!1,!0),Object.defineProperty&&(s.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}),r[s.timeStamp+s.type]=i,t.dispatchEvent(s),o?s:e}}},t.exports.EVENTS=["beforeseek","disable","error","finish","fullscreen","fullscreen-exit","load","mute","pause","progress","ready","resume","seek","speed","stop","unload","volume","boot","shutdown"]},{}],13:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){var n=e.conf;if(!1!==n.share&&n.facebook){e.facebook=function(){var e,t,r=screen.height,i=screen.width,o="string"==typeof n.facebook?n.facebook:window.location.toString();e=Math.round(i/2-275),t=0,r>420&&(t=Math.round(r/2-210)),window.open("https://www.facebook.com/sharer.php?s=100&p[url]="+encodeURIComponent(o),"sharer","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+e+",top="+t)};var r=i.find(".fp-share-menu",t)[0],a=i.createElement("a",{class:"fp-icon fp-facebook"},"Facebook");i.append(r,a),o.on(t,"click",".fp-facebook",function(){e.facebook()})}})},{"../common":1,"../flowplayer":31,bean:34}],14:[function(e,t,n){"use strict";var r,i=e("../flowplayer"),o=e("bean"),a=e("../common"),s="fullscreen-exit",l=i.support.fullscreen;o.on(document,"fullscreenchange.ffscr webkitfullscreenchange.ffscr mozfullscreenchange.ffscr MSFullscreenChange.ffscr",function(e){var t=document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.fullscreenElement||document.msFullscreenElement;if(r||t.parentNode&&t.parentNode.getAttribute("data-flowplayer-instance-id")){var n=r||i(t.parentNode);t?r=n.trigger("fullscreen",[n]):(r.trigger(s,[r]),r=null)}}),i(function(e,t){var n=a.createElement("div",{className:"fp-player"});if(Array.prototype.map.call(t.children,a.identity).forEach(function(e){a.matches(e,".fp-ratio,script")||n.appendChild(e)}),t.appendChild(n),e.conf.fullscreen){var i,o,u,c=window;e.isFullscreen=!1,e.fullscreen=function(t){if(!e.disabled)return void 0===t&&(t=!e.isFullscreen),t&&(i=c.scrollY,o=c.scrollX),l?t?["requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){"function"==typeof n[e]&&(n[e](Element.ALLOW_KEYBOARD_INPUT),"webkitRequestFullScreen"!==e||document.webkitFullscreenElement||n[e]())}):["exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){"function"==typeof document[e]&&document[e]()}):e.trigger(t?"fullscreen":s,[e]),e},e.on("mousedown.fs",function(){+new Date-u<150&&e.ready&&e.fullscreen(),u=+new Date}),e.on("fullscreen",function(){a.addClass(t,"is-fullscreen"),a.toggleClass(t,"fp-minimal-fullscreen",a.hasClass(t,"fp-minimal")),a.removeClass(t,"fp-minimal"),l||a.css(t,"position","fixed"),e.isFullscreen=!0}).on(s,function(){var n;a.toggleClass(t,"fp-minimal",a.hasClass(t,"fp-minimal-fullscreen")),a.removeClass(t,"fp-minimal-fullscreen"),l||"html5"!==e.engine||(n=t.css("opacity")||"",a.css(t,"opacity",0)),l||a.css(t,"position",""),a.removeClass(t,"is-fullscreen"),l||"html5"!==e.engine||setTimeout(function(){t.css("opacity",n)}),e.isFullscreen=!1,c.scrollTo(o,i)}).on("unload",function(){e.isFullscreen&&e.fullscreen()}),e.on("shutdown",function(){r=null,a.removeNode(n)})}})},{"../common":1,"../flowplayer":31,bean:34}],15:[function(e,t,n){"use strict";var r,i,o=e("../flowplayer"),a=e("bean"),s=e("../common");a.on(document,"keydown.fp",function(e){var t=r,n=e.ctrlKey||e.metaKey||e.altKey,i=e.which,o=t&&t.conf;if(t&&o.keyboard&&!t.disabled&&!n&&t.ready){if(e.shiftKey)return 39==i?t.speed(!0):37==i&&t.speed(!1),e.preventDefault();if(i<58&&i>47)return e.preventDefault(),t.seekTo(i-48);(function(){switch(i){case 38:case 75:return t.volume(t.volumeLevel+.15),!0;case 40:case 74:return t.volume(t.volumeLevel-.15),!0;case 39:case 76:return t.seeking=!0,t.seek(!0),!0;case 37:case 72:return t.seeking=!0,t.seek(!1),!0;case 190:return t.seekTo(),!0;case 32:return t.toggle(),!0;case 70:return o.fullscreen&&t.fullscreen(),!0;case 77:return t.mute(),!0;case 81:return t.unload(),!0}})()&&e.preventDefault()}}),o(function(e,t){e.conf.keyboard&&(a.on(document,"click",function(n){if(s.hasParent(n.target,t))r=e.disabled?0:e;else{if(r!==e)return;r=0}r&&(i=t)}),e.bind("shutdown",function(){i==t&&(i=null)}))})},{"../common":1,"../flowplayer":31,bean:34}],16:[function(e,t,n){var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){e.showMenu=function(n,r){var a=i.find(".fp-ui",t)[0];i.toggleClass(n,"fp-active",!0),setTimeout(function(){o.one(document,"click",function(){e.hideMenu(n)})});var s=r;if(r&&r.tagName&&(s={left:i.offset(r).left,rightFallbackOffset:i.width(r),top:i.offset(r).top+i.height(r)}),!s)return i.css(n,"top","auto");s.rightFallbackOffset=s.rightFallbackOffset||0;var l=s.top-i.offset(a).top,u=s.left-i.offset(a).left;i.width(n)+u>i.width(a)&&(u=u-i.width(n)+s.rightFallbackOffset),i.height(n)+l>i.height(a)&&(l-=i.height(n)),i.css(n,{top:l+"px",left:u+"px",right:"auto"})},e.hideMenu=function(e){i.toggleClass(e,"fp-active",!1),i.css(e,{top:"-9999em"})}})},{"../common":1,"../flowplayer":31,bean:34}],17:[function(e,t,n){var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){var n=i.find(".fp-header",t)[0],r=i.find(".fp-ui",t)[0];e.message=function(e,t){var o=function(e){var t=i.createElement("div",{className:"fp-message"},e);return r.insertBefore(t,n),setTimeout(function(){i.toggleClass(t,"fp-shown")}),t}(e),a=function(){i.toggleClass(o,"fp-shown"),setTimeout(function(){!function(e){i.removeNode(e)}(o)},500)};return t&&setTimeout(a,t),a},e.textarea=function(e){var t=document.createElement("textarea");t.value=e,t.className="fp-textarea",r.appendChild(t),o.on(document,"click.fptextarea",function(e){if(e.target===t)return t.select();e.stopPropagation(),e.preventDefault(),i.removeNode(t),o.off(document,"click.fptextarea")})}})},{"../common":1,"../flowplayer":31,bean:34}],18:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=/IEMobile/.test(window.navigator.userAgent),o=e("../common"),a=e("bean"),s=e("./ui").format,l=r.support,u=window.navigator.userAgent;(l.touch||i)&&r(function(e,t){var n=l.android,r=n&&!n.firefox,c=/Silk/.test(u),d=n.version||0;if(r&&!i){if(!/Chrome/.test(u)&&d<4||n.samsung&&d<5){var f=e.load;e.load=function(){var n=f.apply(e,arguments);return o.find("video.fp-engine",t)[0].load(),e.trigger("ready",[e,e.video]),n}}var p,h=0,g=function(e){p=setInterval(function(){e.video.time=++h,e.trigger("progress",[e,h])},1e3)};e.on("ready pause unload",function(){p&&(clearInterval(p),p=null)}),e.on("ready",function(){h=0}),e.on("resume",function(t,n){if(n.live)return h?g(n):void e.one("progress",function(e,t,n){0===n&&g(t)})})}l.volume||(o.removeClass(t,"fp-mute"),o.addClass(t,"no-volume")),l.iOS&&o.addClass(t,"fp-mute"),o.addClass(t,"is-touch"),e.sliders&&e.sliders.timeline&&e.sliders.timeline.disableAnimation();var m=!1;a.on(t,"touchmove",function(){m=!0});var v=!0;if(a.on(t,"touchend click",function(n){if(m)m=!1;else{var r=o.find("video.fp-engine",t)[0];if(v&&e.conf.clickToUnMute&&r&&r.muted&&e.conf.autoplay&&(r.muted=!1),v=!1,e.playing&&!o.hasClass(t,"is-mouseover"))return o.addClass(t,"is-mouseover"),o.removeClass(t,"is-mouseout"),n.preventDefault(),void n.stopPropagation();e.playing||e.splash||!o.hasClass(t,"is-mouseout")||o.hasClass(t,"is-mouseover")||setTimeout(function(){e.disabled||e.playing||e.splash||o.find("video.fp-engine",t)[0].play()},400)}}),!l.fullscreen&&e.conf.native_fullscreen&&"function"==typeof o.createElement("video").webkitEnterFullScreen){var y=e.fullscreen;e.fullscreen=function(){var n=o.find("video.fp-engine",t)[0];if(!n)return y.apply(e);e.trigger("fullscreen",[e]),a.on(document,"webkitfullscreenchange.nativefullscreen",function(){document.webkitFullscreenElement===n&&(a.off(document,".nativefullscreen"),a.on(document,"webkitfullscreenchange.nativefullscreen",function(){document.webkitFullscreenElement||(a.off(document,".nativefullscreen"),e.trigger("fullscreen-exit",[e]))}))}),n.webkitEnterFullScreen(),a.one(n,"webkitendfullscreen",function(){a.off(document,"fullscreenchange.nativefullscreen"),e.trigger("fullscreen-exit",[e]),o.prop(n,"controls",!0),o.prop(n,"controls",!1)})}}(r||c)&&e.bind("ready",function(){var n=o.find("video.fp-engine",t)[0];e.conf.splash&&n.paused&&"hlsjs-lite"!==e.engine.engineName&&(a.one(n,"canplay",function(){n.play()}),n.load()),e.bind("progress.dur",function(){if(!e.live&&!e.conf.live){var r=n.duration;1!==r&&(e.video.duration=r,o.find(".fp-duration",t)[0].innerHTML=s(r),e.unbind("progress.dur"))}})})})},{"../common":1,"../flowplayer":31,"./ui":27,bean:34}],19:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("extend-object"),o=e("bean"),a=e("../common"),s=e("./resolve"),l=new s,u=window.jQuery,c=/^#/;r(function(e,t){var n=i({active:"is-active",advance:!0,query:".fp-playlist a"},e.conf),r=n.active,d=a.find(".fp-ui",t)[0],f=a.hasClass(t,"fp-custom-playlist")||!!n.customPlaylist;function p(){return a.find(n.query,h())}function h(){if(!c.test(n.query))return t}function g(){return a.find(n.query+"."+r,h())}function m(){var n=a.find(".fp-playlist",t)[0];if(!n){n=a.createElement("div",{className:"fp-playlist"});var i=a.find(".fp-next,.fp-prev",t);i.length?i[0].parentElement.insertBefore(n,i[0]):a.insertAfter(t,a.find("video",t)[0],n)}n.innerHTML="",e.conf.playlist[0].length&&(e.conf.playlist=e.conf.playlist.map(function(e){if("string"==typeof e){var t=e.split(s.TYPE_RE)[1];return{sources:[{type:"m3u8"===t.toLowerCase()?"application/x-mpegurl":"video/"+t,src:e}]}}return{sources:e.map(function(e){var t={};return Object.keys(e).forEach(function(n){t.type=/mpegurl/i.test(n)?"application/x-mpegurl":"video/"+n,t.src=e[n]}),t})}})),e.conf.playlist.forEach(function(t,i){var o=t.sources[0].src;n.appendChild(a.createElement("a",{href:o,className:e.video.index===i?r:void 0,"data-index":i}))})}a.toggleClass(t,"fp-custom-playlist",f),a.toggleClass(t,"fp-default-playlist",!f),e.play=function(t){if(void 0===t)return e.resume();if("number"==typeof t&&!e.conf.playlist[t])return e;if("number"!=typeof t)return e.load.apply(null,arguments);var n=i({index:t},e.conf.playlist[t]);return e.off("beforeresume.fromfirst"),"number"==typeof t&&t===e.video.index?e.seek(0,function(){e.resume()}):(e.load(n,function(){e.video.index=t}),e)},e.next=function(t){t&&t.preventDefault();var n=e.video.index;return-1!=n&&(n=n===e.conf.playlist.length-1?0:n+1,e.play(n)),e},e.prev=function(t){t&&t.preventDefault();var n=e.video.index;return-1!=n&&(n=0===n?e.conf.playlist.length-1:n-1,e.play(n)),e},e.setPlaylist=function(t,n){return e.conf.playlist=t,n||delete e.video.index,m(),e},e.addPlaylistItem=function(t){return delete e.video.is_last,e.setPlaylist(e.conf.playlist.concat([t]),!0)},e.removePlaylistItem=function(t){var n=e.conf.playlist;return e.setPlaylist(n.slice(0,t).concat(n.slice(t+1)))},o.on(t,"click",".fp-next",e.next),o.on(t,"click",".fp-prev",e.prev),e.off("finish.pl").on("finish.pl",function(e,r){if(void 0===r.conf.advance||r.conf.advance){if(r.video.loop)return r.seek(0,function(){r.resume()});var i=r.video.index>=0?r.video.index+1:void 0;i<r.conf.playlist.length||n.loop?(i=i===r.conf.playlist.length?0:i,a.removeClass(t,"is-finished"),setTimeout(function(){r.play(i)})):r.conf.playlist.length>1&&(r.one("beforeresume.fromfirst",function(e){e.preventDefault(),r.play(0)}),r.one("seek",function(){r.off("beforeresume.fromfirst")}))}});var v=!1;e.conf.playlist.length&&(v=!0,m(),e.conf.clip&&e.conf.clip.sources.length||(e.conf.clip=e.conf.playlist[e.conf.startIndex||0])),p().length&&!v&&(e.conf.playlist=[],delete e.conf.startIndex,p().forEach(function(t){var n=t.href;t.setAttribute("data-index",e.conf.playlist.length);var r=l.resolve(n,e.conf.clip.sources);u&&i(r,u(t).data()),e.conf.playlist.push(r)})),a.find(".fp-prev,.fp-next,.fp-playlist",t).forEach(function(e){d.appendChild(e)}),o.on(c.test(n.query)?document:t,"click",n.query,function(t){t.preventDefault();var n=t.currentTarget,r=Number(n.getAttribute("data-index"));-1!=r&&e.play(r)}),e.on("load",function(i,o,s){if(e.conf.playlist.length){var l=g()[0],u=l&&l.getAttribute("data-index"),c=s.index=function(t){return void 0!==t.index?t.index:void 0!==e.video.index?e.video.index:e.conf.startIndex||0}(s),d=a.find(n.query+'[data-index="'+c+'"]',h())[0],f=c==e.conf.playlist.length-1;l&&a.removeClass(l,r),d&&a.addClass(d,r),a.removeClass(t,"video"+u),a.addClass(t,"video"+c),a.toggleClass(t,"last-video",f),s.index=o.video.index=c,s.is_last=o.video.is_last=f}}).on("unload.pl",function(){e.conf.playlist.length&&(g().forEach(function(e){a.toggleClass(e,r)}),e.conf.playlist.forEach(function(e,n){a.removeClass(t,"video"+n)}),delete e.video.index)}),e.conf.playlist.length&&(e.conf.loop=!1)})},{"../common":1,"../flowplayer":31,"./resolve":21,bean:34,"extend-object":39}],20:[function(e,t,n){var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){var n=i.find(".fp-ui",t)[0],r=i.find(".fp-controls",n)[0];function a(e){i.find(".fp-qsel-menu a",t).forEach(function(t){i.toggleClass(t,"fp-selected",t.getAttribute("data-quality")==e),i.toggleClass(t,"fp-color",t.getAttribute("data-quality")==e)})}o.on(t,"click",".fp-qsel",function(){var n=i.find(".fp-qsel-menu",t)[0];i.hasClass(n,"fp-active")?e.hideMenu():e.showMenu(n)}),o.on(t,"click",".fp-qsel-menu a",function(t){var n=t.target.getAttribute("data-quality");e.quality(n)}),e.quality=function(t){t=isNaN(Number(t))?t:Number(t),e.trigger("quality",[e,t])},e.on("quality",function(e,t,n){a(n,t.video.qualities)}),e.on("ready",function(e,o,s){i.find(".fp-qsel-menu",t).forEach(i.removeNode),i.find(".fp-qsel",t).forEach(i.removeNode),!s.qualities||s.qualities.filter(function(e){return void 0===e.value||e.value>-1}).length<2||(!function(e){r.appendChild(i.createElement("strong",{className:"fp-qsel"},"HD"));var t=i.createElement("div",{className:"fp-menu fp-qsel-menu"},"<strong>Quality</strong>");e.forEach(function(e){var n=document.createElement("a"),r=void 0!==e.value?e.value:e;n.setAttribute("data-quality",r),n.innerHTML=e.label||e,t.appendChild(n)}),n.appendChild(t)}(s.qualities,s.quality),a(s.quality,s.qualities))})})},{"../common":1,"../flowplayer":31,bean:34}],21:[function(e,t,n){"use strict";var r=/\.(\w{3,4})(\?.*)?$/i,i=e("extend-object");function o(e){var t=e.attr("src"),n=e.attr("type")||"",o=t.split(r)[1];return n=n.toLowerCase(),i(e.data(),{src:t,suffix:o||n,type:n||o})}function a(e){return/mpegurl/i.test(e)?"application/x-mpegurl":"video/"+e}t.exports=function(){this.sourcesFromVideoTag=function(e,t){var n=[];return t("source",e).each(function(){n.push(o(t(this)))}),!n.length&&e.length&&n.push(o(e)),n},this.resolve=function(e,t){return e?("string"==typeof e&&((e={src:e,sources:[]}).sources=(t||[]).map(function(t){var n=t.src.split(r)[1];return{type:t.type,src:e.src.replace(r,"."+n+"$2")}})),e instanceof Array&&(e={sources:e.map(function(e){return e.type&&e.src?e:Object.keys(e).reduce(function(t,n){return i(t,{type:a(n),src:e[n]})},{})})}),e):{sources:t}}},t.exports.TYPE_RE=r},{"extend-object":39}],22:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("extend-object"),a=e("bean");r(function(e,t){var n=e.conf;if(!1!==n.share){e.shareUrl=function(t){return t&&n.embed&&n.embed.iframe?n.embed.iframe:"string"==typeof e.conf.share?e.conf.share:(t?"https://flowplayer.com/e/":"https://flowplayer.com/s/")+"?t="+encodeURIComponent(e.video.title||(i.find("title")[0]||{}).innerHTML||"Flowplayer Commercial video")+"&c="+encodeURIComponent(btoa(JSON.stringify(o({},e.conf,e.extensions)).replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).substr(-4)})))+"&r="+encodeURIComponent(window.location.toString())};var r=i.createElement("div",{className:"fp-menu fp-share-menu"},"<strong>Share</strong>");i.find(".fp-ui",t)[0].appendChild(r);var s=i.find(".fp-share",t)[0];a.on(t,"click",".fp-share",function(t){t.preventDefault(),i.hasClass(r,"fp-active")?e.hideMenu():e.showMenu(r,s)})}else i.find(".fp-share",t).forEach(i.removeNode)})},{"../common":1,"../flowplayer":31,bean:34,"extend-object":39}],23:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean"),a=e("./subtitles/parser");r.defaults.subtitleParser=a,r(function(e,t){var n,a,s,l,u;(!r.support.inlineVideo||!r.support.fullscreen&&e.conf.native_fullscreen)&&(e.conf.nativesubtitles=!0),e.ui||(e.ui={}),e.ui.createSubtitleControl=function(e,n){return u=n,s=s||i.createElement("strong",{className:"fp-cc"},"CC"),l=l||i.createElement("div",{className:"fp-menu fp-subtitle-menu"},"<strong>Closed Captions</strong>"),i.find("a",l).forEach(i.removeNode),l.appendChild(i.createElement("a",{"data-subtitle-index":-1},"No subtitles")),(e||[]).forEach(function(e,t){var n=e.srclang||"en",r=e.label||"Default ("+n+")",o=i.createElement("a",{"data-subtitle-index":t},r);l.appendChild(o)}),i.find(".fp-ui",t)[0].appendChild(l),i.find(".fp-controls",t)[0].appendChild(s),i.toggleClass(s,"fp-hidden",!e||!e.length),s},e.ui.setActiveSubtitleItem=function(e){c(e)},o.on(t,"click",".fp-cc",function(){i.hasClass(l,"fp-active")?e.hideMenu():e.showMenu(l)}),o.on(t,"click",".fp-subtitle-menu [data-subtitle-index]",function(t){t.preventDefault();var n=t.target.getAttribute("data-subtitle-index");return u?u(n):"-1"===n?e.disableSubtitles():void e.loadSubtitles(n)});e.on("ready",function(n,r,o){if(r.subtitles=[],a=(a=i.find(".fp-captions",t)[0])||i.appendTo(i.createElement("div",{class:"fp-captions"}),i.find(".fp-player",t)[0]),Array.prototype.forEach.call(a.children,i.removeNode),e.ui.createSubtitleControl(e.video.subtitles),i.removeClass(t,"has-menu"),e.disableSubtitles(),o.subtitles&&o.subtitles.length){var s=o.subtitles.filter(function(e){return e.default})[0];s&&r.loadSubtitles(o.subtitles.indexOf(s))}}),e.showSubtitle=function(e){i.html(a,e),i.addClass(a,"fp-shown")},e.hideSubtitle=function(){i.removeClass(a,"fp-shown")},e.bind("cuepoint",function(t,r,i){i.subtitle?(n=i.index,e.showSubtitle(i.subtitle.text)):i.subtitleEnd&&(e.hideSubtitle(),n=i.index)}),e.bind("seek",function(t,r,o){n&&e.cuepoints[n]&&e.cuepoints[n].time>o&&(i.removeClass(a,"fp-shown"),n=null),(e.cuepoints||[]).forEach(function(t,r){var i=t.subtitle;i&&n!=r?o>=t.time&&(!i.endTime||o<=i.endTime)&&e.trigger("cuepoint",[e,t]):t.subtitleEnd&&o>=t.time&&r==n+1&&e.trigger("cuepoint",[e,t])})}),e.on("unload",function(){i.find(".fp-captions",t).forEach(i.removeNode)});var c=function(e){i.toggleClass(i.find("a.fp-selected",l)[0],"fp-selected"),i.toggleClass(i.find('a[data-subtitle-index="'+e+'"]',l)[0],"fp-selected")},d=function(e,n){var r=i.find("video.fp-engine",t)[0].textTracks;r.length&&(null===e?[].forEach.call(r,function(e){e.mode=n}):r[e].mode=n)};e.disableSubtitles=function(){return e.subtitles=[],(e.cuepoints||[]).forEach(function(t){(t.subtitle||t.subtitleEnd)&&e.removeCuepoint(t)}),a&&Array.prototype.forEach.call(a.children,i.removeNode),c(-1),r.support.subtitles&&e.conf.nativesubtitles&&"html5"==e.engine.engineName&&d(null,"disabled"),e},e.loadSubtitles=function(t){e.disableSubtitles();var n=e.video.subtitles[t].src;if(n){if(c(t),!r.support.subtitles||!e.conf.nativesubtitles||"html5"!=e.engine.engineName)return i.xhrGet(n,function(t){e.conf.subtitleParser(t).forEach(function(t,n){t.title||(t.title="subtitle"+n);var i={time:t.startTime,subtitle:t,visible:!1};e.subtitles.push(t),e.addCuepoint(i),e.addCuepoint({time:t.endTime,subtitleEnd:t.title,visible:!1}),0!==t.startTime||e.video.time||e.splash||e.trigger("cuepoint",[e,r.extend({},i,{index:0})]),e.splash&&e.one("ready",function(){e.trigger("cuepoint",[e,i])})})},function(){return e.trigger("error",{code:8,url:n}),!1}),e;d(t,"showing")}}})},{"../common":1,"../flowplayer":31,"./subtitles/parser":24,bean:34}],24:[function(e,t,n){t.exports=function(e){var t=/^(([0-9]+:){1,2}[0-9]{2}[,.][0-9]{3}) --\> (([0-9]+:){1,2}[0-9]{2}[,.][0-9]{3})(.*)/;function n(e){var t=e.split(":");return 2==t.length&&t.unshift(0),60*t[0]*60+60*t[1]+parseFloat(t[2].replace(",","."))}for(var r,i,o,a=[],s=0,l=e.split("\n"),u=l.length,c={};s<u;s++)if(i=t.exec(l[s])){for(r=l[s-1],o="<p>"+l[++s]+"</p><br/>";"string"==typeof l[++s]&&l[s].trim()&&s<l.length;)o+="<p>"+l[s]+"</p><br/>";c={title:r,startTime:n(i[1]),endTime:n(i[3]),text:o},a.push(c)}return a}},{}],25:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("extend-object");!function(){var e={},t=document.documentElement.style,n=navigator.userAgent.toLowerCase(),o=/(chrome)[ \/]([\w.]+)/.exec(n)||/(safari)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||n.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];o[1]&&(e[o[1]]=!0,e.version=o[2]||"0"),e.safari&&(e.version=(/version\/([\w.]+)/.exec(n)||[])[1]);var a,s=((a=document.createElement("video")).loop=!0,a.autoplay=!0,a.preload=!0,a),l=navigator.userAgent,u=e.msie||/Trident\/7/.test(l),c=/iPad|MeeGo/.test(l)&&!/CriOS/.test(l),d=/iPad/.test(l)&&/CriOS/.test(l),f=/iP(hone|od)/i.test(l)&&!/iPad/.test(l)&&!/IEMobile/i.test(l),p=/Android/.test(l),h=p&&/Firefox/.test(l),g=p&&/SAMSUNG/.test(l),m=/Silk/.test(l),v=/IEMobile/.test(l),y=v?parseFloat(/Windows\ Phone\ (\d+\.\d+)/.exec(l)[1],10):0,_=v?parseFloat(/IEMobile\/(\d+\.\d+)/.exec(l)[1],10):0,b=c||f?function(e){var t=/iP(ad|hone)(; CPU)? OS (\d+_\d)/.exec(e);return t&&t.length>1?parseFloat(t[t.length-1].replace("_","."),10):0}(l):0,E=p?parseFloat(/Android\ (\d+(\.\d+)?)/.exec(l)[1],10):0,S=(f||c||d)&&{iPhone:f,iPad:c||d,version:b,chrome:d},w=i(r.support,{browser:e,iOS:S,android:!!p&&{firefox:h,opera:/Opera/.test(l),samsung:g,version:E},subtitles:!!s.addTextTrack,fullscreen:"boolean"==typeof document.webkitFullscreenEnabled?document.webkitFullscreenEnabled:"function"==typeof document.webkitCancelFullScreen&&!/Mac OS X 10_5.+Version\/5\.0\.\d Safari/.test(l)||document.mozFullScreenEnabled||"function"==typeof document.exitFullscreen||"function"==typeof document.msExitFullscreen,inlineBlock:!(u&&e.version<8),touch:"ontouchstart"in window,dataload:!c&&!f&&!v,flex:"flexWrap"in t||"WebkitFlexWrap"in t||"msFlexWrap"in t,svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,zeropreload:!u&&!p,volume:!(c||f||m||d),cachedVideoTag:!(c||f||d||v),firstframe:!(m||v||h||g||b&&b<10||p&&E<4.4),inlineVideo:(!f||b>=10)&&(!v||y>=8.1&&_>=11)&&(!p||E>=3),hlsDuration:!p&&(!e.safari||c||f||d),seekable:!c&&!d,preloadMetadata:!S&&!e.safari});w.autoplay=w.firstframe,v&&(w.browser.safari=!1);try{var T=navigator.plugins["Shockwave Flash"],A=u?new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version"):T.description;u||T[0].enabledPlugin?((A=A.split(/\D+/)).length&&!A[0]&&(A=A.slice(1)),w.flashVideo=A[0]>9||9==A[0]&&A[3]>=115):w.flashVideo=!1}catch(e){}try{w.video=!!s.canPlayType,w.video&&s.canPlayType("video/mp4")}catch(e){w.video=!1}w.animation=function(){for(var e=["","Webkit","Moz","O","ms","Khtml"],t=document.createElement("p"),n=0;n<e.length;n++)if(void 0!==t.style[e[n]+"AnimationName"])return!0}()}()},{"../flowplayer":31,"extend-object":39}],26:[function(e,t,n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean");r(function(e,t){var n=e.conf;if(!1!==n.share&&!1!==n.twitter){e.tweet=function(){var t,r,i=screen.height,o=screen.width,a="string"==typeof n.twitter?n.twitter:e.shareUrl();t=Math.round(o/2-275),r=0,i>420&&(r=Math.round(i/2-210)),window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent(a),"intent","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,left="+t+",top="+r)};var r=i.find(".fp-share-menu",t)[0],a=i.createElement("a",{class:"fp-icon fp-twitter"},"Twitter");i.append(r,a),o.on(t,"click",".fp-twitter",function(){e.tweet()})}})},{"../common":1,"../flowplayer":31,bean:34}],27:[function(e,t,n){(function(n){"use strict";var r=e("../flowplayer"),i=e("../common"),o=e("bean"),a=e("./ui/slider"),s=e("./ui/bar-slider");function l(e){return(e=parseInt(e,10))>=10?e:"0"+e}function u(e,t){e=Math.max(e||0,0),e=t?Math.ceil(e):Math.floor(e);var n=Math.floor(e/3600),r=Math.floor(e/60);return e-=60*r,n>=1?n+":"+l(r-=60*n)+":"+l(e):l(r)+":"+l(e)}var c=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1yb3VuZGVkLW91dGxpbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDk5Ljg0NCA5OS44NDM0Ij48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30uY29udHJvbGJ1dHRvbntmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz4KPHRpdGxlPnBsYXktcm91bmRlZC1vdXRsaW5lPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxwYXRoIGNsYXNzPSJjb250cm9sYnV0dG9uIiBkPSJNNDEuMDM1OSw3MS4xOWE1LjA0OTIsNS4wNDkyLDAsMCwxLTIuNTU3NS0uNjY3M2MtMS44MDMxLTEuMDQxLTIuNzk1OC0zLjEyNDgtMi43OTU4LTUuODY2NFYzNS4xODg3YzAtMi43NDI5Ljk5MzMtNC44MjcyLDIuNzk3LTUuODY3NiwxLjgwMjUtMS4wNDIyLDQuMTAzNC0uODYsNi40OC41MTQzTDcwLjQ3ODIsNDQuNTY3MmMyLjM3NTEsMS4zNzExLDMuNjgyNiwzLjI3MjUsMy42ODMyLDUuMzU0NXMtMS4zMDc2LDMuOTg0NS0zLjY4MzIsNS4zNTYyTDQ0Ljk1OTIsNzAuMDExNEE3LjkzODQsNy45Mzg0LDAsMCwxLDQxLjAzNTksNzEuMTlabS4wMDY1LTQwLjEyM2EyLjY3OTQsMi42Nzk0LDAsMCwwLTEuMzU4Mi4zNDEzYy0xLjAyNjMuNTkyNi0xLjU5MTIsMS45MzQ5LTEuNTkxMiwzLjc4VjY0LjY1NjNjMCwxLjg0NDkuNTY0OSwzLjE4NjYsMS41OTA2LDMuNzc5MSwxLjAyODEuNTkzMiwyLjQ3MzMuNDEwOCw0LjA3LS41MTJMNjkuMjczLDUzLjE5MDZjMS41OTgzLS45MjI3LDIuNDc4LTIuMDgzOCwyLjQ3OC0zLjI2ODlzLS44OC0yLjM0NDUtMi40NzgtMy4yNjY2TDQzLjc1NCwzMS45MjI3QTUuNTY4NSw1LjU2ODUsMCwwLDAsNDEuMDQyMywzMS4wNjcxWiIgZmlsdGVyPSJ1cmwoI2YxKSIvPjwvc3ZnPgo=","base64"),d=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1yb3VuZGVkLWZpbGwiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogIDxkZWZzPjxzdHlsZT4uYXtmaWxsOiMwMDA7b3BhY2l0eTowLjY1O30uYntmaWxsOiNmZmY7b3BhY2l0eToxLjA7fTwvc3R5bGU+CiAgPC9kZWZzPjx0aXRsZT5wbGF5LXJvdW5kZWQtZmlsbDwvdGl0bGU+CiAgPHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjE3LS4wNzhhNTAsNTAsMCwxLDAsNTAsNTBBNTAuMDU2NCw1MC4wNTY0LDAsMCwwLDQ5LjkyMTctLjA3OFoiLz4KICA8cGF0aCBjbGFzcz0iYiIgZD0iTTM1Ljk0MiwzNS4yMzIzYzAtNC43Mjg5LDMuMzUwNi02LjY2MzcsNy40NDYtNC4yOTcxTDY4LjgzLDQ1LjYyMzVjNC4wOTU2LDIuMzY0LDQuMDk1Niw2LjIzMTksMCw4LjU5NzdMNDMuMzg4LDY4LjkxYy00LjA5NTQsMi4zNjQtNy40NDYuNDMtNy40NDYtNC4yOTc5WiIgZmlsdGVyPSJ1cmwoI2YxKSIvPgogIDwvc3ZnPgogIAo=","base64"),f=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1zaGFycC1maWxsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4uZnAtY29sb3ItcGxheXtvcGFjaXR5OjAuNjU7fS5jb250cm9sYnV0dG9ue2ZpbGw6I2ZmZjt9PC9zdHlsZT4KICA8L2RlZnM+CiAgPHRpdGxlPnBsYXktc2hhcnAtZmlsbDwvdGl0bGU+CiAgPHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjE3LS4wNzhhNTAsNTAsMCwxLDAsNTAsNTBBNTAuMDU2NCw1MC4wNTY0LDAsMCwwLDQ5LjkyMTctLjA3OFoiLz4KICA8cG9seWdvbiBjbGFzcz0iY29udHJvbGJ1dHRvbiIgcG9pbnRzPSI3My42MDEgNTAgMzcuOTY4IDcwLjU3MyAzNy45NjggMjkuNDI3IDczLjYwMSA1MCIgZmlsdGVyPSJ1cmwoI2YxKSIvPgo8L3N2Zz4K","base64"),p=n("PHN2ZyBjbGFzcz0iZnAtcGxheS1zaGFycC1vdXRsaW5lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OS44NDQgOTkuODQzNCI+PGRlZnM+PHN0eWxlPi5jb250cm9sYnV0dG9uYmd7b3BhY2l0eTowLjY1O30uY29udHJvbGJ1dHRvbntmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGxheS1zaGFycC1vdXRsaW5lPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxwYXRoIGNsYXNzPSJjb250cm9sYnV0dG9uIiBkPSJNMzYuOTQ0Myw3Mi4yNDczVjI3LjI5MTZMNzUuODc3Niw0OS43N1ptMi4yLTQxLjE0NTVWNjguNDM3MUw3MS40Nzc2LDQ5Ljc3WiIgZmlsdGVyPSJ1cmwoI2YxKSIvPjwvc3ZnPgo=","base64"),h=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utcm91bmRlZC1vdXRsaW5lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA5OS44NDM0IDk5Ljg0MzQiPjxkZWZzPjxzdHlsZT4uZnAtY29sb3ItcGxheXtvcGFjaXR5OjAuNjU7fS5yZWN0e2ZpbGw6I2ZmZjt9PC9zdHlsZT4KPC9kZWZzPjx0aXRsZT5wYXVzZS1yb3VuZGVkLW91dGxpbmU8L3RpdGxlPjxwYXRoIGNsYXNzPSJmcC1jb2xvci1wbGF5IiBkPSJNNDkuOTIxMi0uMDc4M2E1MCw1MCwwLDEsMCw1MC4wMDA2LDUwQTUwLjA1NjIsNTAuMDU2MiwwLDAsMCw0OS45MjEyLS4wNzgzWiIvPjxnIGNsYXNzPSJjb250cm9sYnV0dG9uIj48cGF0aCBjbGFzcz0icmVjdCIgZD0iTTM5LjAwMzYsNzEuOTcyNmE3LjU2NSw3LjU2NSwwLDAsMS03LjU1Ny03LjU1NnYtMjguOTlhNy41NTY1LDcuNTU2NSwwLDAsMSwxNS4xMTMsMHYyOC45OUE3LjU2NDgsNy41NjQ4LDAsMCwxLDM5LjAwMzYsNzEuOTcyNlptMC00MS45MDRhNS4zNjQ3LDUuMzY0NywwLDAsMC01LjM1OTMsNS4zNTgydjI4Ljk5YTUuMzU4Nyw1LjM1ODcsMCwwLDAsMTAuNzE3NCwwdi0yOC45OUE1LjM2NDUsNS4zNjQ1LDAsMCwwLDM5LjAwMzYsMzAuMDY4NloiIGZpbHRlcj0idXJsKCNmMSkiLz48cGF0aCBjbGFzcz0icmVjdCIgZD0iTTYwLjg0LDcxLjk3MjZhNy41NjQ4LDcuNTY0OCwwLDAsMS03LjU1Ni03LjU1NnYtMjguOTlhNy41NTY1LDcuNTU2NSwwLDAsMSwxNS4xMTMsMHYyOC45OUE3LjU2NSw3LjU2NSwwLDAsMSw2MC44NCw3MS45NzI2Wm0wLTQxLjkwNGE1LjM2NDUsNS4zNjQ1LDAsMCwwLTUuMzU4Miw1LjM1ODJ2MjguOTlhNS4zNTg3LDUuMzU4NywwLDAsMCwxMC43MTc0LDB2LTI4Ljk5QTUuMzY0Nyw1LjM2NDcsMCwwLDAsNjAuODQsMzAuMDY4NloiIGZpbHRlcj0idXJsKCNmMSkiLz48L2c+PC9zdmc+Cg==","base64"),g=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utcm91bmRlZC1maWxsIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30ucmVjdHtmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGF1c2Utcm91bmRlZC1maWxsPC90aXRsZT48cGF0aCBjbGFzcz0iZnAtY29sb3ItcGxheSIgZD0iTTQ5LjkyMTctLjA3OGE1MCw1MCwwLDEsMCw1MCw1MEE1MC4wNTY0LDUwLjA1NjQsMCwwLDAsNDkuOTIxNy0uMDc4WiIvPjxnIGNsYXNzPSJjb250cm9sYnV0dG9uIiBmaWx0ZXI9InVybCgjZjEpIj48cmVjdCBjbGFzcz0icmVjdCIgeD0iMzEuODQ0IiB5PSIyOC4xMjMxIiB3aWR0aD0iMTMuNDM2MiIgaGVpZ2h0PSI0My41OTczIiByeD0iNi43MTgxIiByeT0iNi43MTgxIi8+PHJlY3QgY2xhc3M9InJlY3QiIHg9IjU0LjU2MzgiIHk9IjI4LjEyMzEiIHdpZHRoPSIxMy40MzYyIiBoZWlnaHQ9IjQzLjU5NzMiIHJ4PSI2LjcxODEiIHJ5PSI2LjcxODEiLz48L2c+PC9zdmc+Cg==","base64"),m=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utc2hhcnAtZmlsbCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PGRlZnM+PHN0eWxlPi5mcC1jb2xvci1wbGF5e29wYWNpdHk6MC42NTt9LnJlY3R7ZmlsbDojZmZmO308L3N0eWxlPgo8L2RlZnM+PHRpdGxlPnBhdXNlLXNoYXJwLWZpbGw8L3RpdGxlPjxwYXRoIGNsYXNzPSJmcC1jb2xvci1wbGF5IiBkPSJNNDkuOTIxNy0uMDc4YTUwLDUwLDAsMSwwLDUwLDUwQTUwLjA1NjQsNTAuMDU2NCwwLDAsMCw0OS45MjE3LS4wNzhaIi8+PGcgY2xhc3M9ImNvbnRyb2xidXR0b24iIGZpbHRlcj0idXJsKCNmMSkiPjxyZWN0IGNsYXNzPSJyZWN0IiB4PSIzMy41IiB5PSIzMC4xMDQyIiB3aWR0aD0iMTIuMjYzNCIgaGVpZ2h0PSIzOS43OTE3Ii8+PHJlY3QgY2xhc3M9InJlY3QiIHg9IjU0LjIzNjYiIHk9IjMwLjEwNDIiIHdpZHRoPSIxMi4yNjM0IiBoZWlnaHQ9IjM5Ljc5MTciLz48L2c+PC9zdmc+Cg==","base64"),v=n("PHN2ZyBjbGFzcz0iZnAtcGF1c2Utc2hhcnAtb3V0bGluZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgOTkuODQzNCA5OS44NDM0Ij48ZGVmcz48c3R5bGU+LmZwLWNvbG9yLXBsYXl7b3BhY2l0eTowLjY1O30ucmVjdHtmaWxsOiNmZmY7fTwvc3R5bGU+CjwvZGVmcz48dGl0bGU+cGF1c2Utc2hhcnAtb3V0bGluZTwvdGl0bGU+PHBhdGggY2xhc3M9ImZwLWNvbG9yLXBsYXkiIGQ9Ik00OS45MjEyLS4wNzgzYTUwLDUwLDAsMSwwLDUwLjAwMDYsNTBBNTAuMDU2Miw1MC4wNTYyLDAsMCwwLDQ5LjkyMTItLjA3ODNaIi8+PGcgY2xhc3M9ImNvbnRyb2xidXR0b24iIGZpbHRlcj0idXJsKCNmMSkiPjxwYXRoIGNsYXNzPSJyZWN0IiBkPSJNNDYuODcwOSw2OS45NTMxSDMzLjEzODVWMjkuODlINDYuODcwOVpNMzUuMTQxNiw2Ny45NWg5LjcyNjJWMzEuODkzNUgzNS4xNDE2WiIvPjxwYXRoIGNsYXNzPSJyZWN0IiBkPSJNNjYuNzA0Nyw2OS45NTMxSDUyLjk3MjJWMjkuODlINjYuNzA0N1pNNTQuOTc1NCw2Ny45NWg5LjcyNjJWMzEuODkzNUg1NC45NzU0WiIvPjwvZz48L3N2Zz4K","base64"),y=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1yb3VuZGVkLW91dGxpbmUiIHdpZHRoPScxMTJweCcgaGVpZ2h0PScxMTJweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgogICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijc2IiBoZWlnaHQ9Ijc2IiBmaWxsPSJyZ2JhKDAsMCwwLDApIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgMjUpIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuMHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC4wcyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCAyNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0cm9rZSIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjRzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+CiAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDUwKSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLC41KSIgc3Ryb2tlLXdpZHRoPSIzJSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICA8L2NpcmNsZT4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgNTApIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjEuMnMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMS4ycyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgo8L3N2Zz4K","base64"),_=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1yb3VuZGVkLWZpbGwiIHdpZHRoPScxMTJweCcgaGVpZ2h0PScxMTJweCcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgogICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijc2IiBoZWlnaHQ9Ijc2IiBmaWxsPSJyZ2JhKDAsMCwwLDApIiBjbGFzcz0iYmsiPjwvcmVjdD4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgMjUpIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC4wcyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjBzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+CiAgICA8Y2lyY2xlIGN4PSIwIiBjeT0iMCIgcj0iMTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDI1KSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuNHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC40cyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICAgIDwvY2lyY2xlPgogICAgPGNpcmNsZSBjeD0iMCIgY3k9IjAiIHI9IjEwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCA1MCkiIGZpbGw9InJnYmEoMCwwLDAsLjUpIiBjbGFzcz0ic3EiPgogICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgICA8L2NpcmNsZT4KICAgIDxjaXJjbGUgY3g9IjAiIGN5PSIwIiByPSIxMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjUgNTApIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMS4ycyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIxLjJzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogICAgPC9jaXJjbGU+Cjwvc3ZnPgo=","base64"),b=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1zaGFycC1maWxsIiB3aWR0aD0nMTEycHgnIGhlaWdodD0nMTEycHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNzYiIGhlaWdodD0iNzYiIGZpbGw9InJnYmEoMCwwLDAsMCkiIGNsYXNzPSJiayI+PC9yZWN0PgogIDxyZWN0IHg9Ii0xMCIgeT0iLTEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDI1KSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjBzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjBzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KICA8cmVjdCB4PSItMTAiIHk9Ii0xMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCAyNSkiIGZpbGw9InJnYmEoMCwwLDAsLjUpIiBjbGFzcz0ic3EiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iZmlsbCIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC40cyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iLTEwIiB5PSItMTAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAgNTApIiBmaWxsPSJyZ2JhKDAsMCwwLC41KSIgY2xhc3M9InNxIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImZpbGwiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuOHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgPC9yZWN0PgogIDxyZWN0IHg9Ii0xMCIgeT0iLTEwIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI1IDUwKSIgZmlsbD0icmdiYSgwLDAsMCwuNSkiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJmaWxsIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIxLjJzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIxLjJzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KPC9zdmc+Cg==","base64"),E=n("PHN2ZyBjbGFzcz0iZnAtbG9hZGluZy1zaGFycC1vdXRsaW5lIiB3aWR0aD0nMTEycHgnIGhlaWdodD0nMTEycHgnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iNzYiIGhlaWdodD0iNzYiIGZpbGw9InJnYmEoMCwwLDAsMCkiIGNsYXNzPSJiayI+PC9yZWN0PgogIDxyZWN0IHg9Ii05IiB5PSItOSIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNSAyNSkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjAuMHMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMC4wcyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iLTkiIHk9Ii05IiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwIDI1KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDAsMCwwLC41KSIgc3Ryb2tlLXdpZHRoPSIzJSIgY2xhc3M9InNxIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InN0cm9rZSIgZnJvbT0icmdiYSgwLDAsMCwwKSIgdG89InJnYmEoMCwwLDAsLjUpIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgZHVyPSIxLjZzIiBiZWdpbj0iMC40cyIgdmFsdWVzPSJyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwuNSkiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZT4KICAgICAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJzY2FsZSIgYWRkaXRpdmU9InN1bSIgZnJvbT0iMC44IiB0bz0iMSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGJlZ2luPSIwLjRzIiBkdXI9IjEuNnMiIHZhbHVlcz0iMTswLjg7MC44OzE7MSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlVHJhbnNmb3JtPgogIDwvcmVjdD4KICA8cmVjdCB4PSItOSIgeT0iLTkiIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAgNTApIiBmaWxsPSJub25lIiBzdHJva2U9InJnYmEoMCwwLDAsLjUpIiBzdHJva2Utd2lkdGg9IjMlIiBjbGFzcz0ic3EiPgogICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlIiBmcm9tPSJyZ2JhKDAsMCwwLDApIiB0bz0icmdiYSgwLDAsMCwuNSkiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBkdXI9IjEuNnMiIGJlZ2luPSIwLjhzIiB2YWx1ZXM9InJnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsMCk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLC41KTtyZ2JhKDAsMCwwLC41KSIga2V5VGltZXM9IjA7MC4xOzAuMjswLjQ7MSI+PC9hbmltYXRlPgogICAgICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InNjYWxlIiBhZGRpdGl2ZT0ic3VtIiBmcm9tPSIwLjgiIHRvPSIxIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgYmVnaW49IjAuOHMiIGR1cj0iMS42cyIgdmFsdWVzPSIxOzAuODswLjg7MTsxIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGVUcmFuc2Zvcm0+CiAgPC9yZWN0PgogIDxyZWN0IHg9Ii05IiB5PSItOSIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNSA1MCkiIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgwLDAsMCwuNSkiIHN0cm9rZS13aWR0aD0iMyUiIGNsYXNzPSJzcSI+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJzdHJva2UiIGZyb209InJnYmEoMCwwLDAsMCkiIHRvPSJyZ2JhKDAsMCwwLC41KSIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGR1cj0iMS42cyIgYmVnaW49IjEuMnMiIHZhbHVlcz0icmdiYSgwLDAsMCwuNSk7cmdiYSgwLDAsMCwwKTtyZ2JhKDAsMCwwLDApO3JnYmEoMCwwLDAsLjUpO3JnYmEoMCwwLDAsLjUpIiBrZXlUaW1lcz0iMDswLjE7MC4yOzAuNDsxIj48L2FuaW1hdGU+CiAgICAgIDxhbmltYXRlVHJhbnNmb3JtIGF0dHJpYnV0ZU5hbWU9InRyYW5zZm9ybSIgdHlwZT0ic2NhbGUiIGFkZGl0aXZlPSJzdW0iIGZyb209IjAuOCIgdG89IjEiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIiBiZWdpbj0iMS4ycyIgZHVyPSIxLjZzIiB2YWx1ZXM9IjE7MC44OzAuODsxOzEiIGtleVRpbWVzPSIwOzAuMTswLjI7MC40OzEiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KICA8L3JlY3Q+Cjwvc3ZnPgo=","base64");r(function(e,t){i.find(".fp-filters").forEach(i.removeNode);try{var l;document.body.appendChild(l=i.createElement("div",{},n("PHN2ZyBjbGFzcz0iZnAtZmlsdGVycyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMCAwIj4KICA8ZGVmcz4KICAgIDxmaWx0ZXIgaWQ9ImYxIiB4PSItMjAlIiB5PSItMjAlIiB3aWR0aD0iMjAwJSIgaGVpZ2h0PSIyMDAlIj4KICAgICAgPGZlT2Zmc2V0IHJlc3VsdD0ib2ZmT3V0IiBpbj0iU291cmNlQWxwaGEiIGR4PSIwIiBkeT0iMCIgLz4KICAgICAgPGZlQ29sb3JNYXRyaXggcmVzdWx0PSJtYXRyaXhPdXQiIGluPSJvZmZPdXQiIHR5cGU9Im1hdHJpeCIKICAgICAgdmFsdWVzPSIwLjMgMCAwIDAgMCAwIDAuMyAwIDAgMCAwIDAgMC4zIDAgMCAwIDAgMCAwLjQgMCIgLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iYmx1ck91dCIgaW49Im1hdHJpeE91dCIgc3RkRGV2aWF0aW9uPSI0IiAvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJibHVyT3V0IiBtb2RlPSJub3JtYWwiIC8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo=","base64"))),i.css(l,{width:0,height:0,overflow:"hidden",position:"absolute",margin:0,padding:0})}catch(e){}var S,w=e.conf,T=r.support;i.find(".fp-ratio,.fp-ui",t).forEach(i.removeNode),i.addClass(t,"flowplayer"),t.appendChild(i.createElement("div",{className:"fp-ratio"}));var A=i.createElement("div",{className:"fp-ui"},'         <div class="fp-waiting">           {{ LOADING_SHARP_OUTLINE }}           {{ LOADING_SHARP_FILL }}           {{ LOADING_ROUNDED_FILL }}           {{ LOADING_ROUNDED_OUTLINE }}         </div>         <div class="fp-header">           <a class="fp-share fp-icon"></a>           <a class="fp-fullscreen fp-icon"></a>           <a class="fp-unload fp-icon"></a>         </div>         <p class="fp-speed-flash"></p>         <div class="fp-play fp-visible">           <a class="fp-icon fp-playbtn"></a>           {{ PLAY_ROUNDED_FILL }}           {{ PLAY_ROUNDED_OUTLINE }}           {{ PLAY_SHARP_FILL }}           {{ PLAY_SHARP_OUTLINE }}         </div>         <div class="fp-pause">           <a class="fp-icon fp-playbtn"></a>           {{ PAUSE_SHARP_OUTLINE }}           {{ PAUSE_SHARP_FILL }}           {{ PAUSE_ROUNDED_OUTLINE }}           {{ PAUSE_ROUNDED_FILL }}         </div>         <div class="fp-controls">            <a class="fp-icon fp-playbtn"></a>            <span class="fp-elapsed">00:00</span>            <div class="fp-timeline fp-bar">               <span class="fp-timestamp"></span>               <div class="fp-progress fp-color"></div>            </div>            <span class="fp-duration"></span>            <span class="fp-remaining"></span>            <div class="fp-volume">               <a class="fp-icon fp-volumebtn"></a>               <div class="fp-volumebar fp-bar-slider">                 <em></em><em></em><em></em><em></em><em></em><em></em><em></em>               </div>            </div>            <strong class="fp-speed fp-hidden"></strong>         </div>'.replace("{{ PAUSE_ROUNDED_FILL }}",g).replace("{{ PAUSE_ROUNDED_OUTLINE }}",h).replace("{{ PAUSE_SHARP_FILL }}",m).replace("{{ PAUSE_SHARP_OUTLINE }}",v).replace("{{ PLAY_SHARP_OUTLINE }}",p).replace("{{ PLAY_SHARP_FILL }}",f).replace("{{ PLAY_ROUNDED_OUTLINE }}",c).replace("{{ PLAY_ROUNDED_FILL }}",d).replace("{{ LOADING_ROUNDED_OUTLINE }}",y).replace("{{ LOADING_ROUNDED_FILL }}",_).replace("{{ LOADING_SHARP_FILL }}",b).replace("{{ LOADING_SHARP_OUTLINE }}",E).replace(/url\(#/g,"url("+window.location.href.replace(window.location.hash,"").replace(/\#$/g,"")+"#"));function I(e){return i.find(".fp-"+e,t)[0]}t.appendChild(A);var P=I("waiting"),C=I("elapsed"),k=I("ratio"),L=I("speed-flash"),R=I("duration"),D=I("remaining"),O=I("timestamp"),M=i.css(k,"padding-top"),x=I("play"),N=I("pause"),j=I("timeline"),U=a(j,e.rtl),F=I("fullscreen"),B=I("volumebar"),G=s(B,{rtl:e.rtl}),V=i.hasClass(t,"no-toggle");U.disableAnimation(i.hasClass(t,"is-touch")),e.sliders=e.sliders||{},e.sliders.timeline=U,e.sliders.volume=G;var Y=[];function z(e){i.css(k,"padding-top",100*e+"%"),T.inlineBlock||i.height(i.find("object",t)[0],i.height(t))}function W(e){e?(i.addClass(t,"is-mouseover"),i.removeClass(t,"is-mouseout")):(i.addClass(t,"is-mouseout"),i.removeClass(t,"is-mouseover"))}T.svg||i.html(P,"<p>loading &hellip;</p>"),w.ratio&&z(w.ratio);try{w.fullscreen||i.removeNode(F)}catch(e){i.removeNode(F)}e.on("dvrwindow",function(){U.disable(!1)}),e.on("ready",function(e,n,r){var o=n.video.duration;U.disable(n.disabled||!o),w.adaptiveRatio&&!isNaN(r.height/r.width)&&z(r.height/r.width),i.html([R,D],n.live?"Live":u(o)),i.toggleClass(t,"is-long",o>=3600),G.slide(n.volumeLevel),"flash"===n.engine.engineName?U.disableAnimation(!0,!0):U.disableAnimation(!1),i.find(".fp-title",A).forEach(i.removeNode),r.title&&i.prepend(A,i.createElement("div",{className:"fp-message fp-title"},r.title)),i.toggleClass(t,"has-title",!!r.title)}).on("unload",function(){M||w.splash||i.css(k,"paddingTop",""),U.slide(0),i.addClass(x,"fp-visible")}).on("buffer",function(e,t,n){var r=t.video,o=r.buffer/r.duration;!r.seekable&&T.seekable&&U.max(t.conf.live?1/0:o),n&&"number"!=typeof n||(n=[{start:0,end:r.buffer}]);var a=i.find(".fp-buffer",j);a.length!==n.length&&(a.forEach(i.removeNode),a=[]),n.forEach(function(e,t){var n=a[t]||i.createElement("div",{className:"fp-buffer"});i.css(n,{left:100*e.start/r.duration+"%",width:100*(e.end-e.start)/r.duration+"%"}),i.prepend(j,n)})}).on("speed",function(e,t,n){t.video.time&&(i.text(L,n+"x"),i.addClass(L,"fp-shown"),(Y=Y.filter(function(e){return clearTimeout(e),!1})).push(setTimeout(function(){i.addClass(L,"fp-hilite"),Y.push(setTimeout(function(){i.removeClass(L,"fp-hilite"),Y.push(setTimeout(function(){i.removeClass(L,"fp-shown")},300))},1e3))})))}).on("buffered",function(){U.max(1)}).on("progress seek",function(n,r,o){var a=e.video.duration,s=e.video.seekOffset||0,l=((o=o||e.video.time)-s)/(a-s);U.dragging||U.slide(l,e.seeking?0:250),i.toggleClass(t,"is-live-position",a-o<w.livePositionOffset),i.html(C,u(o)),i.html(D,u(a-o,!0))}).on("finish resume seek",function(e){i.toggleClass(t,"is-finished","finish"==e.type)}).on("resume",function(){i.addClass(x,"fp-visible"),setTimeout(function(){i.removeClass(x,"fp-visible")},300)}).on("pause",function(){i.addClass(N,"fp-visible"),setTimeout(function(){i.removeClass(N,"fp-visible")},300)}).on("stop",function(){i.html(C,u(0)),U.slide(0,100)}).on("finish",function(){i.html(C,u(e.video.duration)),U.slide(1,100),i.removeClass(t,"is-seeking")}).on("beforeseek",function(){}).on("volume",function(){G.slide(e.volumeLevel)}).on("disable",function(){var n=e.disabled;U.disable(n),G.disable(n),i.toggleClass(t,"is-disabled",e.disabled)}).on("mute",function(e,n,r){i.toggleClass(t,"is-muted",r)}).on("error",function(e,n,r){if(i.removeClass(t,"is-loading"),i.removeClass(t,"is-seeking"),i.addClass(t,"is-error"),r){n.error=!0;var o=r.code;(r.message||"").match(/DECODER_ERROR_NOT_SUPPORTED/)&&(o=3);var a=n.message((n.engine&&n.engine.engineName||"html5")+": "+w.errors[o]);i.removeClass(t,"is-mouseover"),n.one("load progress",function(){a()})}}).one("resume ready",function(){var e=i.find("video.fp-engine",t)[0];if(e&&(!i.width(e)||!i.height(e))){var n=t.style.overflow;t.style.overflow="visible",setTimeout(function(){n?t.style.overflow=n:t.style.removeProperty("overflow")})}}),o.on(t,"mouseenter mouseleave",function(n){if(!V){var r,i="mouseover"==n.type;if(W(i),i){var a=function(){W(!0),r=new Date};e.on("pause.x volume.x",a),o.on(t,"mousemove.x",a),S=setInterval(function(){new Date-r>w.mouseoutTimeout&&(W(!1),r=new Date)},100)}else o.off(t,"mousemove.x"),e.off("pause.x volume.x"),clearInterval(S)}}),o.on(t,"mouseleave",function(){(U.dragging||G.dragging)&&(i.addClass(t,"is-mouseover"),i.removeClass(t,"is-mouseout"))}),o.on(t,"click.player",function(t){if(!e.disabled)return i.hasClass(t.target,"fp-ui")||i.hasClass(t.target,"fp-engine")||t.flash||i.hasParent(t.target,".fp-play,.fp-pause")?(t.preventDefault&&t.preventDefault(),e.toggle()):void 0}),o.on(t,"mousemove",".fp-timeline",function(t){var n=(t.pageX||t.clientX)-i.offset(j).left,r=n/i.width(j),o=e.video,a=o.duration-(void 0===o.seekOffset?0:o.seekOffset),s=(e.rtl?1-r:r)*a;if(!(r<0)){i.html(O,u(s));var l=n-i.width(O)/2;l<0&&(l=0),l>i.width(j)-i.width(O)&&(l=!1),!1!==l?i.css(O,{left:l+"px",right:"auto"}):i.css(O,{left:"auto",right:"0px"})}}),o.on(t,"contextmenu",function(n){var r=window;if(!i.hasClass(t,"is-flash-disabled")){var a=i.find(".fp-context-menu",t)[0];a&&(n.preventDefault(),e.showMenu(a,{left:n.clientX-r.scrollX,top:n.clientY-r.scrollY}),o.on(t,"click",".fp-context-menu",function(e){e.stopPropagation()}))}}),e.on("flashdisabled",function(n,r,o){var a;i.addClass(t,"is-flash-disabled"),!1!==o&&(a=e.message("Seems something is blocking Adobe Flash from running")),e.one("ready progress",function(){i.removeClass(t,"is-flash-disabled"),a&&a()})}),w.poster&&i.css(t,"background-image","url("+w.poster+")");var H,Z=i.css(t,"background-color"),K="none"!=i.css(t,"background-image")||Z&&"rgba(0, 0, 0, 0)"!=Z&&"transparent"!=Z;if(K&&!w.splash){w.poster||(w.poster=!0);var q=function(){i.addClass(t,"is-poster"),i.addClass(x,"fp-visible"),e.poster=!0,e.on("resume.poster progress.poster beforeseek.poster",function(n){("beforeseek"===n.type||e.playing)&&(i.removeClass(t,"is-poster"),i.removeClass(x,"fp-visible"),e.poster=!1,e.off(".poster"))})};e.on("stop",function(){q()}),e.on("ready",function(e,t,n){n.index||n.autoplay||q()})}if("string"==typeof w.splash&&i.css(t,"background-image","url('"+w.splash+"')"),!K&&e.forcedSplash&&i.css(t,"background-color","#555"),o.on(t,"click",".fp-toggle, .fp-play, .fp-playbtn",function(){e.disabled||e.toggle()}),o.on(t,"click",".fp-volumebtn",function(){e.mute()}),o.on(t,"click",".fp-fullscreen",function(){e.fullscreen()}),o.on(t,"click",".fp-unload",function(){e.unload()}),o.on(j,"slide",function(t){e.seeking=!0,e.seekTo(10*t)}),o.on(B,"slide",function(t){e.volume(t)}),o.on(t,"click",".fp-duration,.fp-remaining",function(){if(e.dvr)return e.seekTo(10);i.toggleClass(t,"is-inverted")}),W(V),e.on("shutdown",function(){o.off(j),o.off(B),H&&window.cancelAnimationFrame(H),i.removeNode(A),i.find(".fp-ratio",t).forEach(i.removeNode)}),"function"==typeof window.requestAnimationFrame){var J=i.find(".fp-player",t)[0]||t;H=window.requestAnimationFrame(function e(){i.toggleClass(t,"is-tiny",J.clientWidth<400),i.toggleClass(t,"is-small",J.clientWidth<600&&J.clientWidth>=400),H=window.requestAnimationFrame(e)})}}),t.exports.format=u}).call(this,e("buffer").Buffer)},{"../common":1,"../flowplayer":31,"./ui/bar-slider":28,"./ui/slider":29,bean:34,buffer:35}],28:[function(e,t,n){var r=e("bean"),i=e("../../common");t.exports=function(e,t){var n=(t=t||{}).activeClass||"fp-color",o=t.inactiveClass||"fp-grey",a=t.childSelector||"em",s=!!t.rtl,l=!1,u=i.find(a,e).length,c={unload:function(){r.off(e,".barslider")},slide:function(t,s){i.find(a,e).forEach(function(e,r){var a=t>r/u;i.toggleClass(e,n,a),i.toggleClass(e,o,!a)}),s&&r.fire(e,"slide",[t])},disable:function(e){l=e}};return r.on(e,"mousedown.sld touchstart.sld",function(t){t.preventDefault(),l||(c.slide(d(t),!0),r.on(e,"mousemove.sld touchmove.sld",function(e){e.preventDefault(),c.slide(d(e),!0)}),r.one(document,"mouseup.sld touchup.sld",function(){r.off(e,"mousemove.sld touchmove.sld")}))}),c;function d(t){var n=t.pageX||t.clientX,r=i.offset(e),o=i.width(e);!n&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length&&(n=t.originalEvent.touches[0].pageX);var a=n-r.left,l=(a=Math.max(0,Math.min(o,a)))/o;return s&&(l=1-l),l}}},{"../../common":1,bean:34}],29:[function(e,t,n){"use strict";var r=e("bean"),i=e("../../common");t.exports=function(e,t){var n,o,a,s,l,u,c=i.lastChild(e),d=!1,f=function(){o=i.offset(e),a=i.width(e),i.height(e),s=a,u=m(l)},p=function(t){n||t==v.value||l&&!(t<l)||(r.fire(e,"slide",[t]),v.value=t)},h=function(e){var n=e.pageX||e.clientX;!n&&e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length&&(n=e.originalEvent.touches[0].pageX);var r=n-o.left,i=(r=Math.max(0,Math.min(u||s,r)))/s;return t&&(i=1-i),g(i,0,!0)},g=function(e,t){void 0===t&&(t=0),e>1&&(e=1);var n=Math.round(1e3*e)/10+"%";return(!l||e<=l)&&(d?i.removeClass(c,"animated"):(i.addClass(c,"animated"),i.css(c,"transition-duration",(t||0)+"ms")),i.css(c,"width",n)),e},m=function(e){return Math.max(0,Math.min(s,e*a))},v={max:function(e){l=e},disable:function(e){n=e},slide:function(e,t,n){f(),n&&p(e),g(e,t)},disableAnimation:function(t,n){d=!1!==t,i.toggleClass(e,"no-animation",!!n)}};return f(),r.on(e,"mousedown.sld touchstart",function(t){if(t.preventDefault(),!n){var o=(a=p,s=100,l=null,u=Date.now(),function(){null!=l&&(clearTimeout(l),l=null);var e=Date.now(),t=s-(e-u),n=this,r=arguments;t<=0?(a.apply(n,r),u=e):l=setTimeout(function(){a.apply(n,r),l=null,u=Date.now()},t)});f(),v.dragging=!0,i.addClass(e,"is-dragging"),p(h(t)),r.on(document,"mousemove.sld touchmove.sld",function(e){e.preventDefault(),o(h(e))}),r.one(document,"mouseup touchend",function(){v.dragging=!1,i.removeClass(e,"is-dragging"),r.off(document,"mousemove.sld touchmove.sld")})}var a,s,l,u}),v}},{"../../common":1,bean:34}],30:[function(e,t,n){t.exports=function(e,t,n){try{!function(e){var t=document.createElement("textarea");t.value=e,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t),t.select();var n=document.execCommand("copy");if(document.body.removeChild(t),!n)throw new Error("Unsuccessfull")}(e),t()}catch(e){n(e)}}},{}],31:[function(e,t,n){"use strict";var r=e("extend-object"),i=e("is-function"),o=e("bean"),a=e("./ext/ui/slider"),s=e("./ext/ui/bar-slider"),l=e("./common"),c=e("./ext/events"),d=[],f=[],p=window.onbeforeunload;window.onbeforeunload=function(e){if(d.forEach(function(e){e.conf.splash?e.unload():e.bind("error",function(){l.find(".flowplayer.is-error .fp-message").forEach(l.removeNode)})}),p)return p(e)};var h=/Safari/.exec(navigator.userAgent)&&!/Chrome/.exec(navigator.userAgent),g=/(\d+\.\d+) Safari/.exec(navigator.userAgent),m=g?Number(g[1]):100,v=t.exports=function(e,t,n){if(i(e))return f.push(e);if("number"==typeof e||void 0===e)return d[e||0];if(e.nodeType){if(null!==e.getAttribute("data-flowplayer-instance-id"))return d[e.getAttribute("data-flowplayer-instance-id")];if(!t)return;return E(e,t,n)}if(e.jquery)return v(e[0],t,n);if("string"==typeof e){var r=l.find(e)[0];return r&&v(r,t,n)}};r(v,{version:"7.2.7",engines:[],engine:function(e){return v.engines.filter(function(t){return t.engineName===e})[0]},extensions:[],conf:{},set:function(e,t){"string"==typeof e?v.conf[e]=t:r(v.conf,e)},registerExtension:function(e,t){v.extensions.push([e,t])},support:{},defaults:{debug:!1,disabled:!1,fullscreen:window==window.top,keyboard:!0,ratio:9/16,adaptiveRatio:!1,rtmp:0,proxy:"best",hlsQualities:!0,seekStep:!1,splash:!1,live:!1,livePositionOffset:120,swf:"//releases.flowplayer.org/7.2.7/commercial/flowplayer.swf",swfHls:"//releases.flowplayer.org/7.2.7/commercial/flowplayerhls.swf",speeds:[.25,.5,1,1.5,2],tooltip:!0,mouseoutTimeout:5e3,mutedAutoplay:!0,clickToUnMute:!0,volume:1,errors:["","Video loading aborted","Network error","Video not properly encoded","Video file not found","Unsupported video","Skin not found","SWF file not found","Subtitles not found","Invalid RTMP URL","Unsupported video format. Try installing Adobe Flash."],errorUrls:["","","","","","","","","","","http://get.adobe.com/flashplayer/"],playlist:[],hlsFix:h&&m<8,disableInline:!1},bean:o,common:l,slider:a,barSlider:s,extend:r});var y=0,_=e("./ext/resolve");if(void 0!==window.jQuery){var b=window.jQuery;b(function(){"function"==typeof b.fn.flowplayer&&b('.flowplayer:has(video:not(.fp-engine),script[type="application/json"])').flowplayer()});b.fn.flowplayer=function(e,t){return this.each(function(){"string"==typeof e&&(e={swf:e}),i(e)&&(t=e,e={});var n=b(this),o=n.find('script[type="application/json"]'),a=o.length?JSON.parse(o.text()):function(e){if(!e.length)return{};var t=e.data()||{},n={};return b.each(["autoplay","loop","preload","poster"],function(r,i){var o=e.attr(i);void 0!==o&&-1!==["autoplay","poster"].indexOf(i)?n[i]=o||!0:void 0!==o&&(t[i]=o||!0)}),e[0].autoplay=e[0].preload=!1,t.subtitles=e.find("track").map(function(){var e=b(this);return{src:e.attr("src"),kind:e.attr("kind"),label:e.attr("label"),srclang:e.attr("srclang"),default:e.prop("default")}}).get(),t.sources=(new _).sourcesFromVideoTag(e,b),r(n,{clip:t})}(n.find("video")),s=E(this,b.extend({},e||{},a,n.data()),t);c.EVENTS.forEach(function(e){s.on(e+".jquery",function(e){n.trigger.call(n,e.type,e.detail&&e.detail.args)})}),n.data("flowplayer",s)})}}function E(e,t,n){t&&t.embed&&(t.embed=r({},v.defaults.embed,t.embed));var a=!1;try{void 0===v.conf.storage&&"object"==u(window.localStorage)&&(window.localStorage.flowplayerTestStorage="test",a=!0)}catch(e){}var s,p,h=e,g=r({},v.defaults,v.conf,t),m={},b=h.className,E=new _;l.addClass(h,"is-loading"),l.toggleClass(h,"no-flex",!v.support.flex),l.toggleClass(h,"no-svg",!v.support.svg);try{m=v.conf.storage||(a?window.localStorage:m)}catch(e){}if(g.volume="true"===m.muted?0:g.volume!==v.defaults.volume?g.volume:isNaN(m.volume)?g.volume:m.volume,g.debug=!!m.flowplayerDebug||g.debug,g.aspectRatio&&"string"==typeof g.aspectRatio){var S=g.aspectRatio.split(/[:\/]/);g.ratio=S[1]/S[0]}var w=h.currentStyle&&"rtl"===h.currentStyle.direction||window.getComputedStyle&&null!==window.getComputedStyle(h,null)&&"rtl"===window.getComputedStyle(h,null).getPropertyValue("direction");w&&l.addClass(h,"is-rtl");var T={conf:g,currentSpeed:1,volumeLevel:g.muted?0:void 0===g.volume?1*m.volume:g.volume,video:{},disabled:!1,finished:!1,loading:!1,muted:"true"==m.muted||g.muted,paused:!1,playing:!1,ready:!1,splash:!1,rtl:w,hijack:function(e){try{T.engine.suspendEngine()}catch(e){}T.hijacked=e},release:function(){try{T.engine.resumeEngine()}catch(e){}T.hijacked=!1},debug:function(){g.debug&&console.log.apply(console,["DEBUG"].concat([].slice.call(arguments)))},load:function(e,t){if(!T.error&&!T.loading){T.video={},T.finished=!1,e=e||g.clip,e=r({},E.resolve(e,g.clip.sources)),(T.playing||T.engine)&&(e.autoplay=!0);var n=A(e);if(!n)return setTimeout(function(){T.trigger("error",[T,{code:v.support.flashVideo?5:10}])})&&T;if(!n.engineName)throw new Error("engineName property of factory should be exposed");if(T.engine&&n.engineName===T.engine.engineName||(T.ready=!1,T.engine&&(T.engine.unload(),T.conf.autoplay=!0),p=T.engine=n(T,h),T.one("ready",function(){setTimeout(function(){T.muted?T.mute(!0,!0):p.volume(T.volumeLevel)})})),r(e,p.pick(e.sources.filter(function(e){return!e.engine||e.engine===p.engineName}))),e.src)T.trigger("load",[T,e,p],!0).defaultPrevented?T.loading=!1:(T.ready=!1,p.load(e),i(e)&&(t=e),t&&T.one("ready",t));return T}},pause:function(e){return T.hijacked?T.hijacked.pause(e)|T:(!T.ready||T.seeking||T.loading||(p.pause(),T.one("pause",e)),T)},resume:function(){if(!T.trigger("beforeresume",[T],!0).defaultPrevented)return T.hijacked?T.hijacked.resume()|T:(T.ready&&T.paused&&(p.resume(),T.finished&&(T.trigger("resume",[T]),T.finished=!1)),T)},toggle:function(){return T.ready?T.paused?T.resume():T.pause():T.load()},seek:function(e,t){if("boolean"==typeof e){var n=T.conf.seekStep||.1*T.video.duration;e=T.video.time+(e?n:-n),e=Math.min(Math.max(e,0),T.video.duration-.1)}if(void 0===e)return T;if(T.hijacked)return T.hijacked.seek(e,t)|T;T.ready&&(s=e,T.trigger("beforeseek",[T,e],!0).defaultPrevented?(T.seeking=!1,l.toggleClass(h,"is-seeking",T.seeking)):(p.seek(e),i(t)&&T.one("seek",t)));return T},seekTo:function(e,t){return void 0===e?T.seek(s,t):void 0!==T.video.seekOffset?T.seek(T.video.seekOffset+.1*(T.video.duration-T.video.seekOffset)*e,t):T.seek(.1*T.video.duration*e,t)},mute:function(e,t){return void 0===e&&(e=!T.muted),T.muted=e,t||(m.muted=e,m.volume=isNaN(m.volume)?g.volume:m.volume),void 0!==p.mute?p.mute(e):(T.volume(e?0:m.volume,!0),T.trigger("mute",[T,e])),T},volume:function(e,t){return T.ready&&(e=Math.min(Math.max(e,0),1),t||(m.volume=e),p.volume(e)),T},speed:function(e,t){return T.ready&&("boolean"==typeof e&&(e=g.speeds[g.speeds.indexOf(T.currentSpeed)+(e?1:-1)]||T.currentSpeed),p.speed(e),t&&h.one("speed",t)),T},stop:function(){return T.ready&&(T.pause(),!T.live||T.dvr?T.seek(0,function(){T.trigger("stop",[T])}):T.trigger("stop",[T])),T},unload:function(){return g.splash?(T.trigger("unload",[T]),p&&(p.unload(),T.engine=p=0)):T.stop(),T},shutdown:function(){T.unload(),T.trigger("shutdown",[T]),o.off(h),delete d[h.getAttribute("data-flowplayer-instance-id")],h.removeAttribute("data-flowplayer-instance-id")},disable:function(e){return void 0===e&&(e=!T.disabled),e!=T.disabled&&(T.disabled=e,T.trigger("disable",e)),T},registerExtension:function(e,t){"string"==typeof(e=e||[])&&(e=[e]),"string"==typeof(t=t||[])&&(t=[t]),e.forEach(function(e){T.extensions.js.push(e)}),t.forEach(function(e){T.extensions.css.push(e)})}};T.conf=r(T.conf,g),T.extensions={js:[],css:[]},v.extensions.forEach(function(e){T.registerExtension(e[0],e[1])}),c(T);var A=function(e){var t,n=v.engines;if(g.engine){var r=n.filter(function(e){return e.engineName===g.engine})[0];if(r&&e.sources.some(function(e){return(!e.engine||e.engine===r.engineName)&&r.canPlay(e.type,T.conf)}))return r}return g.enginePreference&&(n=v.engines.filter(function(e){return g.enginePreference.indexOf(e.engineName)>-1}).sort(function(e,t){return g.enginePreference.indexOf(e.engineName)-g.enginePreference.indexOf(t.engineName)})),e.sources.some(function(e){var r=n.filter(function(t){return(!e.engine||e.engine===t.engineName)&&t.canPlay(e.type,T.conf)}).shift();return r&&(t=r),!!r}),t};return h.getAttribute("data-flowplayer-instance-id")||(h.setAttribute("data-flowplayer-instance-id",y++),T.on("boot",function(){var e=v.support;(g.splash||l.hasClass(h,"is-splash")||!e.firstframe)&&(T.forcedSplash=!g.splash&&!l.hasClass(h,"is-splash"),T.splash=!0,g.splash||(g.splash=!0),l.addClass(h,"is-splash")),g.splash&&l.find("video",h).forEach(l.removeNode),(g.dvr||g.live||l.hasClass(h,"is-live"))&&(T.live=g.live=!0,T.dvr=g.dvr=!!g.dvr||l.hasClass(h,"is-dvr"),l.addClass(h,"is-live"),l.toggleClass(h,"is-dvr",T.dvr)),f.forEach(function(e){e(T,h)}),d.push(T),g.splash?T.unload():T.load(),g.disabled&&T.disable(),T.one("ready",n),T.one("shutdown",function(){h.className=b})}).on("load",function(e,t,n){g.splash&&l.find(".flowplayer.is-ready,.flowplayer.is-loading").forEach(function(e){var t=e.getAttribute("data-flowplayer-instance-id");if(t!==h.getAttribute("data-flowplayer-instance-id")){var n=d[Number(t)];n&&n.conf.splash&&n.unload()}}),l.addClass(h,"is-loading"),t.loading=!0,void 0===n.live&&void 0===n.dvr||(l.toggleClass(h,"is-live",n.dvr||n.live),l.toggleClass(h,"is-dvr",!!n.dvr),t.live=n.dvr||n.live,t.dvr=!!n.dvr)}).on("ready",function(e,t,n){n.time=0,t.video=n,l.removeClass(h,"is-loading"),t.loading=!1,t.muted?t.mute(!0,!0):t.volume(t.volumeLevel);var r=t.conf.hlsFix&&/mpegurl/i.exec(n.type);l.toggleClass(h,"hls-fix",!!r)}).on("unload",function(){l.removeClass(h,"is-loading"),T.loading=!1}).on("ready unload",function(e){var t="ready"==e.type;l.toggleClass(h,"is-splash",!t),l.toggleClass(h,"is-ready",t),T.ready=t,T.splash=!t}).on("progress",function(e,t,n){t.video.time=n}).on("buffer",function(e,t,n){t.video.buffer="number"==typeof n?n:n.length?n[n.length-1].end:0}).on("speed",function(e,t,n){t.currentSpeed=n}).on("volume",function(e,t,n){t.volumeLevel=Math.round(100*n)/100,t.muted&&n&&t.mute(!1)}).on("beforeseek seek",function(e){T.seeking="beforeseek"==e.type,l.toggleClass(h,"is-seeking",T.seeking)}).on("ready pause resume unload finish stop",function(e){T.paused=/pause|finish|unload|stop/.test(e.type),T.paused=T.paused||"ready"===e.type&&!g.autoplay&&!T.playing,T.playing=!T.paused,l.toggleClass(h,"is-paused",T.paused),l.toggleClass(h,"is-playing",T.playing),T.load.ed||T.pause()}).on("finish",function(){T.finished=!0}).on("error",function(){})),T.trigger("boot",[T,h]),T}},{"./common":1,"./ext/events":12,"./ext/resolve":21,"./ext/ui/bar-slider":28,"./ext/ui/slider":29,bean:34,"extend-object":39,"is-function":42}],32:[function(e,t,n){e("es5-shim");var r=t.exports=e("./flowplayer");e("./ext/support"),e("./engine/embed"),e("./engine/hlsjs"),e("./engine/html5"),e("./engine/flash"),e("./ext/ui"),e("./ext/message"),e("./ext/keyboard"),e("./ext/playlist"),e("./ext/cuepoint"),e("./ext/subtitle"),e("./ext/analytics"),e("./ext/share"),e("./ext/facebook"),e("./ext/twitter"),e("./ext/embed"),e("./ext/airplay"),e("./ext/chromecast"),e("./ext/qsel"),e("./ext/menu"),e("./ext/fullscreen"),e("./ext/mobile"),r(function(e,t){function n(e,t){t=function(e){var t="ab.ca,ac.ac,ac.ae,ac.at,ac.be,ac.cn,ac.il,ac.in,ac.jp,ac.kr,ac.sg,ac.th,ac.uk,ad.jp,adm.br,adv.br,ah.cn,am.br,arq.br,art.br,arts.ro,asn.au,asso.fr,asso.mc,bc.ca,bel.tr,bio.br,biz.pl,biz.tr,bj.cn,br.com,cn.com,cng.br,cnt.br,co.ac,co.at,co.de,co.gl,co.hk,co.id,co.il,co.in,co.jp,co.kr,co.mg,co.ms,co.nz,co.th,co.uk,co.ve,co.vi,co.za,com.ag,com.ai,com.ar,com.au,com.br,com.cn,com.co,com.cy,com.de,com.do,com.ec,com.es,com.fj,com.fr,com.gl,com.gt,com.hk,com.hr,com.hu,com.kg,com.ki,com.lc,com.mg,com.mm,com.ms,com.mt,com.mu,com.mx,com.my,com.na,com.nf,com.ng,com.ni,com.pa,com.ph,com.pl,com.pt,com.qa,com.ro,com.ru,com.sb,com.sc,com.sg,com.sv,com.tr,com.tw,com.ua,com.uy,com.ve,com.vn,cp.tz,cq.cn,de.com,de.org,ecn.br,ed.jp,edu.au,edu.cn,edu.hk,edu.mm,edu.my,edu.pl,edu.pt,edu.qa,edu.sg,edu.tr,edu.tw,eng.br,ernet.in,esp.br,etc.br,eti.br,eu.com,eu.int,eu.lv,firm.in,firm.ro,fm.br,fot.br,fst.br,g12.br,gb.com,gb.net,gd.cn,gen.in,go.jp,go.kr,go.th,gov.au,gov.az,gov.br,gov.cn,gov.il,gov.in,gov.mm,gov.my,gov.qa,gov.sg,gov.tr,gov.tw,gov.uk,govt.nz,gr.jp,gs.cn,gv.ac,gv.at,gx.cn,gz.cn,he.cn,hi.cn,hk.cn,hl.cn,hu.com,id.au,idv.tw,in.th,in.ua,ind.br,ind.in,inf.br,info.pl,info.ro,info.tr,info.ve,iwi.nz,jl.cn,jor.br,js.cn,jus.br,k12.il,k12.tr,kr.com,lel.br,lg.jp,ln.cn,ltd.uk,maori.nz,mb.ca,me.uk,med.br,mi.th,mil.br,mil.uk,mo.cn,mod.uk,muni.il,nb.ca,ne.jp,ne.kr,net.ag,net.ai,net.au,net.br,net.cn,net.do,net.gl,net.hk,net.il,net.in,net.kg,net.ki,net.lc,net.mg,net.mm,net.mu,net.ni,net.nz,net.pl,net.ru,net.sb,net.sc,net.sg,net.th,net.tr,net.tw,net.uk,net.ve,nf.ca,nhs.uk,nm.cn,nm.kr,no.com,nom.br,nom.ni,nom.ro,ns.ca,nt.ca,nt.ro,ntr.br,nx.cn,odo.br,off.ai,on.ca,or.ac,or.at,or.jp,or.kr,or.th,org.ag,org.ai,org.au,org.br,org.cn,org.do,org.es,org.gl,org.hk,org.in,org.kg,org.ki,org.lc,org.mg,org.mm,org.ms,org.nf,org.ng,org.ni,org.nz,org.pl,org.ro,org.ru,org.sb,org.sc,org.sg,org.tr,org.tw,org.uk,org.ve,pe.ca,plc.uk,police.uk,ppg.br,presse.fr,pro.br,psc.br,psi.br,qc.ca,qc.com,qh.cn,rec.br,rec.ro,res.in,sa.com,sc.cn,sch.uk,se.com,se.net,sh.cn,sk.ca,slg.br,sn.cn,store.ro,tj.cn,tm.fr,tm.mc,tm.ro,tmp.br,tur.br,tv.br,tv.tr,tw.cn,uk.com,uk.net,us.com,uy.com,vet.br,waw.pl,web.ve,www.ro,xj.cn,xz.cn,yk.ca,yn.cn,zj.cn,zlg.br".split(","),n=(e=e.toLowerCase()).split("."),r=n.length;if(2>r||/^\d+$/.test(n[r-1]))return e;var i=n.slice(-2).join(".");return r>=3&&t.indexOf(i)>=0?n.slice(-3).join("."):i}(t);for(var n=0,r=t.length-1;r>=0;r--)n+=5285928321*t.charCodeAt(r);for(n=(""+n).substring(0,7),r=0;r<e.length;r++)if(n===e[r].substring(1,8))return 1}var i=e.conf,o=r.common,a=o.createElement,s=i.swf.indexOf("flowplayer.org")&&i.e&&t.getAttribute("data-origin"),l=s?function(e){var t=document.createElement("a");return t.href=e,o.hostname(t.hostname)}(s):o.hostname(),u=(document,i.key);if("file:"==location.protocol&&(l="localhost"),e.load.ed=1,i.hostname=l,i.origin=s||location.href,s&&function(e,t){-1===e.className.split(" ").indexOf(t)&&(e.className+=" "+t)}(t,"is-embedded"),"string"==typeof u&&(u=u.split(/,\s*/)),u&&n(u,l)){if(i.logo){var c=o.find(".fp-player",t)[0],d=i.logo.href||"",f=i.logo.src||i.logo,p=a("a",{className:"fp-logo",href:d});s&&(p.href=p.href||s),i.embed&&i.embed.popup&&(p.target="_blank");var h=a("img",{src:f});p.appendChild(h),(c||t).appendChild(p)}}else{p=a("a",{href:"https://flowplayer.com/hello/?from=player"});((c=o.find(".fp-player",t)[0])||t).appendChild(p);var g=a("div",{className:"fp-context-menu fp-menu"},'<strong>&copy; 2018 Flowplayer AB</strong><a href="https://flowplayer.com/hello/?from=player">About Flowplayer</a><a href="https://flowplayer.com/license">GPL based license</a>'),m=window.location.href.indexOf("localhost");7!==m&&(c||t).appendChild(g),e.on("pause resume finish unload ready",function(e,n){var r=-1;if(n.video.src)for(var i=[["org","flowplayer","drive"],["org","flowplayer","my"],["org","flowplayer","cdn"],["com","flowplayer","cdn"]],o=0;o<i.length&&-1===(r=n.video.src.indexOf("://"+i[o].reverse().join(".")));o++);if(/pause|resume/.test(e.type)&&"flash"!=n.engine.engineName&&4!=r&&5!=r){var a={display:"block",position:"absolute",left:"16px",bottom:"70px",zIndex:99999,width:"100px",height:"20px",backgroundImage:"url("+[".png","logo","/",".net",".cloudfront","d32wqyuo10o653","//","https:"].reverse().join("")+")"};for(var s in a)a.hasOwnProperty(s)&&(p.style[s]=a[s]);n.load.ed=function(e){return"none"!==window.getComputedStyle(e).display}(p)&&(7===m||g.parentNode==t||g.parentNode==c),n.load.ed||n.pause()}else p.style.display="none"})}})},{"./engine/embed":2,"./engine/flash":3,"./engine/hlsjs":4,"./engine/html5":6,"./ext/airplay":7,"./ext/analytics":8,"./ext/chromecast":9,"./ext/cuepoint":10,"./ext/embed":11,"./ext/facebook":13,"./ext/fullscreen":14,"./ext/keyboard":15,"./ext/menu":16,"./ext/message":17,"./ext/mobile":18,"./ext/playlist":19,"./ext/qsel":20,"./ext/share":22,"./ext/subtitle":23,"./ext/support":25,"./ext/twitter":26,"./ext/ui":27,"./flowplayer":31,"es5-shim":38}],33:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=u(e),r=n[0],a=n[1],s=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),l=0,c=a>0?r-4:r,d=0;d<c;d+=4)t=i[e.charCodeAt(d)]<<18|i[e.charCodeAt(d+1)]<<12|i[e.charCodeAt(d+2)]<<6|i[e.charCodeAt(d+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===a&&(t=i[e.charCodeAt(d)]<<2|i[e.charCodeAt(d+1)]>>4,s[l++]=255&t);1===a&&(t=i[e.charCodeAt(d)]<<10|i[e.charCodeAt(d+1)]<<4|i[e.charCodeAt(d+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],34:[function(e,t,n){
/*!
        * Bean - copyright (c) Jacob Thornton 2011-2012
        * https://github.com/fat/bean
        * MIT license
        */
var r,i;r=this,i=function(e,t){e=e||"bean",t=t||this;var n,r,i,o,a,s=window,l=t[e],c=/[^\.]*(?=\..*)\.|.*/,d=/\..*/,f="addEventListener",p=document||{},h=p.documentElement||{},g=h[f],m=g?f:"attachEvent",v={},y=Array.prototype.slice,_=function(e,t){return e.split(t||" ")},b=function(e){return"string"==typeof e},E=function(e){return"function"==typeof e},S=function(e,t,n){for(n=0;n<t.length;n++)t[n]&&(e[t[n]]=1);return e}({},_("click dblclick mouseup mousedown contextmenu mousewheel mousemultiwheel DOMMouseScroll mouseover mouseout mousemove selectstart selectend keydown keypress keyup orientationchange focus blur change reset select submit load unload beforeunload resize move DOMContentLoaded readystatechange message error abort scroll "+(g?"show input invalid touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend textinput readystatechange pageshow pagehide popstate hashchange offline online afterprint beforeprint dragstart dragenter dragover dragleave drag drop dragend loadstart progress suspend emptied stalled loadmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate play pause ratechange volumechange cuechange checking noupdate downloading cached updateready obsolete ":""))),w=(o="compareDocumentPosition"in h?function(e,t){return t.compareDocumentPosition&&16==(16&t.compareDocumentPosition(e))}:"contains"in h?function(e,t){return(t=9===t.nodeType||t===window?h:t)!==e&&t.contains(e)}:function(e,t){for(;e=e.parentNode;)if(e===t)return 1;return 0},{mouseenter:{base:"mouseover",condition:a=function(e){var t=e.relatedTarget;return t?t!==this&&"xul"!==t.prefix&&!/document/.test(this.toString())&&!o(t,this):null==t}},mouseleave:{base:"mouseout",condition:a},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}}),T=function(){var e=_("altKey attrChange attrName bubbles cancelable ctrlKey currentTarget detail eventPhase getModifierState isTrusted metaKey relatedNode relatedTarget shiftKey srcElement target timeStamp type view which propertyName"),t=e.concat(_("button buttons clientX clientY dataTransfer fromElement offsetX offsetY pageX pageY screenX screenY toElement")),n=t.concat(_("wheelDelta wheelDeltaX wheelDeltaY wheelDeltaZ axis")),r=e.concat(_("char charCode key keyCode keyIdentifier keyLocation location")),i=e.concat(_("data")),o=e.concat(_("touches targetTouches changedTouches scale rotation")),a=e.concat(_("data origin source")),l=e.concat(_("state")),u=/over|out/,c=[{reg:/key/i,fix:function(e,t){return t.keyCode=e.keyCode||e.which,r}},{reg:/click|mouse(?!(.*wheel|scroll))|menu|drag|drop/i,fix:function(e,n,r){return n.rightClick=3===e.which||2===e.button,n.pos={x:0,y:0},e.pageX||e.pageY?(n.clientX=e.pageX,n.clientY=e.pageY):(e.clientX||e.clientY)&&(n.clientX=e.clientX+p.body.scrollLeft+h.scrollLeft,n.clientY=e.clientY+p.body.scrollTop+h.scrollTop),u.test(r)&&(n.relatedTarget=e.relatedTarget||e[("mouseover"==r?"from":"to")+"Element"]),t}},{reg:/mouse.*(wheel|scroll)/i,fix:function(){return n}},{reg:/^text/i,fix:function(){return i}},{reg:/^touch|^gesture/i,fix:function(){return o}},{reg:/^message$/i,fix:function(){return a}},{reg:/^popstate$/i,fix:function(){return l}},{reg:/.*/,fix:function(){return e}}],d={},f=function(e,t,n){if(arguments.length&&(e=e||((t.ownerDocument||t.document||t).parentWindow||s).event,this.originalEvent=e,this.isNative=n,this.isBean=!0,e)){var r,i,o,a,l,u=e.type,f=e.target||e.srcElement;if(this.target=f&&3===f.nodeType?f.parentNode:f,n){if(!(l=d[u]))for(r=0,i=c.length;r<i;r++)if(c[r].reg.test(u)){d[u]=l=c[r].fix;break}for(r=(a=l(e,this,u)).length;r--;)!((o=a[r])in this)&&o in e&&(this[o]=e[o])}}};return f.prototype.preventDefault=function(){this.originalEvent.preventDefault?this.originalEvent.preventDefault():this.originalEvent.returnValue=!1},f.prototype.stopPropagation=function(){this.originalEvent.stopPropagation?this.originalEvent.stopPropagation():this.originalEvent.cancelBubble=!0},f.prototype.stop=function(){this.preventDefault(),this.stopPropagation(),this.stopped=!0},f.prototype.stopImmediatePropagation=function(){this.originalEvent.stopImmediatePropagation&&this.originalEvent.stopImmediatePropagation(),this.isImmediatePropagationStopped=function(){return!0}},f.prototype.isImmediatePropagationStopped=function(){return this.originalEvent.isImmediatePropagationStopped&&this.originalEvent.isImmediatePropagationStopped()},f.prototype.clone=function(e){var t=new f(this,this.element,this.isNative);return t.currentTarget=e,t},f}(),A=function(e,t){return g||t||e!==p&&e!==s?e:h},I=function(){var e=function(e,t,n,r){var i=function(n,i){return t.apply(e,r?y.call(i,n?0:1).concat(r):i)},o=function(n,r){return t.__beanDel?t.__beanDel.ft(n.target,e):r},a=n?function(e){var t=o(e,this);if(n.apply(t,arguments))return e&&(e.currentTarget=t),i(e,arguments)}:function(e){return t.__beanDel&&(e=e.clone(o(e))),i(e,arguments)};return a.__beanDel=t.__beanDel,a},t=function(t,n,r,i,o,a,s){var l,u=w[n];"unload"==n&&(r=R(D,t,n,r,i)),u&&(u.condition&&(r=e(t,r,u.condition,a)),n=u.base||n),this.isNative=l=S[n]&&!!t[m],this.customType=!g&&!l&&n,this.element=t,this.type=n,this.original=i,this.namespaces=o,this.eventType=g||l?n:"propertychange",this.target=A(t,l),this[m]=!!this.target[m],this.root=s,this.handler=e(t,r,null,a)};return t.prototype.inNamespaces=function(e){var t,n,r=0;if(!e)return!0;if(!this.namespaces)return!1;for(t=e.length;t--;)for(n=this.namespaces.length;n--;)e[t]==this.namespaces[n]&&r++;return e.length===r},t.prototype.matches=function(e,t,n){return!(this.element!==e||t&&this.original!==t||n&&this.handler!==n)},t}(),P=(r={},i=function e(t,n,i,o,a,s){var l=a?"r":"$";if(n&&"*"!=n){var u,c=0,d=r[l+n],f="*"==t;if(!d)return;for(u=d.length;c<u;c++)if((f||d[c].matches(t,i,o))&&!s(d[c],d,c,n))return}else for(var p in r)p.charAt(0)==l&&e(t,p.substr(1),i,o,a,s)},{has:function(e,t,n,i){var o,a=r[(i?"r":"$")+t];if(a)for(o=a.length;o--;)if(!a[o].root&&a[o].matches(e,n,null))return!0;return!1},get:function(e,t,n,r){var o=[];return i(e,t,n,null,r,function(e){return o.push(e)}),o},put:function(e){var t=!e.root&&!this.has(e.element,e.type,null,!1),n=(e.root?"r":"$")+e.type;return(r[n]||(r[n]=[])).push(e),t},del:function(e){i(e.element,e.type,null,e.handler,e.root,function(e,t,n){return t.splice(n,1),e.removed=!0,0===t.length&&delete r[(e.root?"r":"$")+e.type],!1})},entries:function(){var e,t=[];for(e in r)"$"==e.charAt(0)&&(t=t.concat(r[e]));return t}}),C=function(e){n=arguments.length?e:p.querySelectorAll?function(e,t){return t.querySelectorAll(e)}:function(){throw new Error("Bean: No selector engine installed")}},k=function(e,t){if(g||!t||!e||e.propertyName=="_on"+t){var n=P.get(this,t||e.type,null,!1),r=n.length,i=0;for(e=new T(e,this,!0),t&&(e.type=t);i<r&&!e.isImmediatePropagationStopped();i++)n[i].removed||n[i].handler.call(this,e)}},L=g?function(e,t,n){e[n?f:"removeEventListener"](t,k,!1)}:function(e,t,n,r){var i;n?(P.put(i=new I(e,r||t,function(t){k.call(e,t,r)},k,null,null,!0)),r&&null==e["_on"+r]&&(e["_on"+r]=0),i.target.attachEvent("on"+i.eventType,i.handler)):(i=P.get(e,r||t,k,!0)[0])&&(i.target.detachEvent("on"+i.eventType,i.handler),P.del(i))},R=function(e,t,n,r,i){return function(){r.apply(this,arguments),e(t,n,i)}},D=function(e,t,n,r){var i,o,a=t&&t.replace(d,""),s=P.get(e,a,null,!1),l={};for(i=0,o=s.length;i<o;i++)n&&s[i].original!==n||!s[i].inNamespaces(r)||(P.del(s[i]),!l[s[i].eventType]&&s[i][m]&&(l[s[i].eventType]={t:s[i].eventType,c:s[i].type}));for(i in l)P.has(e,l[i].t,null,!1)||L(e,l[i].t,!1,l[i].c)},O=g?function(e,t,n){var r=p.createEvent(e?"HTMLEvents":"UIEvents");r[e?"initEvent":"initUIEvent"](t,!0,!0,s,1),n.dispatchEvent(r)}:function(e,t,n){n=A(n,e),e?n.fireEvent("on"+t,p.createEventObject()):n["_on"+t]++},M=function e(t,n,r){var i,o,a,s,l=b(n);if(l&&n.indexOf(" ")>0){for(s=(n=_(n)).length;s--;)e(t,n[s],r);return t}if((o=l&&n.replace(d,""))&&w[o]&&(o=w[o].base),!n||l)(a=l&&n.replace(c,""))&&(a=_(a,".")),D(t,o,r,a);else if(E(n))D(t,null,n);else for(i in n)n.hasOwnProperty(i)&&e(t,i,n[i]);return t},x=function e(t,r,i,o){var a,s,l,f,p,h,g;if(void 0!==i||"object"!=u(r)){for(E(i)?(p=y.call(arguments,3),o=a=i):(a=o,p=y.call(arguments,4),o=function(e,t){var r=function(t,r){for(var i,o=b(e)?n(e,r):e;t&&t!==r;t=t.parentNode)for(i=o.length;i--;)if(o[i]===t)return t},i=function(e){var n=r(e.target,this);n&&t.apply(n,arguments)};return i.__beanDel={ft:r,selector:e},i}(i,a)),l=_(r),this===v&&(o=R(M,t,r,o,a)),f=l.length;f--;)g=P.put(h=new I(t,l[f].replace(d,""),o,a,_(l[f].replace(c,""),"."),p,!1)),h[m]&&g&&L(t,h.eventType,!0,h.customType);return t}for(s in r)r.hasOwnProperty(s)&&e.call(this,t,s,r[s])},N={on:x,add:function(e,t,n,r){return x.apply(null,b(n)?[e,n,t,r].concat(arguments.length>3?y.call(arguments,5):[]):y.call(arguments))},one:function(){return x.apply(v,arguments)},off:M,remove:M,clone:function(e,t,n){for(var r,i,o=P.get(t,n,null,!1),a=o.length,s=0;s<a;s++)o[s].original&&(r=[e,o[s].type],(i=o[s].handler.__beanDel)&&r.push(i.selector),r.push(o[s].original),x.apply(null,r));return e},fire:function(e,t,n){var r,i,o,a,s,l=_(t);for(r=l.length;r--;)if(t=l[r].replace(d,""),(a=l[r].replace(c,""))&&(a=_(a,".")),a||n||!e[m])for(s=P.get(e,t,null,!1),n=[!1].concat(n),i=0,o=s.length;i<o;i++)s[i].inNamespaces(a)&&s[i].handler.apply(e,n);else O(S[t],t,e);return e},Event:T,setSelectorEngine:C,noConflict:function(){return t[e]=l,this}};if(s.attachEvent){s.attachEvent("onunload",function e(){var t,n=P.entries();for(t in n)n[t].type&&"unload"!==n[t].type&&M(n[t].element,n[t].type);s.detachEvent("onunload",e),s.CollectGarbage&&s.CollectGarbage()})}return C(),N},void 0!==t&&t.exports?t.exports=i():r.bean=i()},{}],35:[function(e,t,n){(function(t){
/*!
         * The buffer module from node.js, for the browser.
         *
         * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
         * @license  MIT
         */
"use strict";var r=e("base64-js"),i=e("ieee754"),o=e("isarray");function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var d=!0,f=0;f<l;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return V(B(t,e.length-n),e,n,r)}function b(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return b(e,t,n,r)}function S(e,t,n,r){return V(G(t),e,n,r)}function w(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}n.Buffer=l,n.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},n.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),n.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=h,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=F(e[o]);return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function x(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,o){return o||x(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,o){return o||x(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:B(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":33,ieee754:40,isarray:43}],36:[function(e,t,n){var r=e("indexof");function i(e){return!!e}t.exports=function(e){var t=e.classList;if(t)return t;var n={add:o,remove:a,contains:s,toggle:function(e){return s(e)?(a(e),!1):(o(e),!0)},toString:function(){return e.className},length:0,item:function(e){return l()[e]||null}};return n;function o(e){var t=l();r(t,e)>-1||(t.push(e),u(t))}function a(e){var t=l(),n=r(t,e);-1!==n&&(t.splice(n,1),u(t))}function s(e){return r(l(),e)>-1}function l(){var t=e.className;return function(e,t){for(var n=[],r=0;r<e.length;r++)t(e[r])&&n.push(e[r]);return n}(t.split(" "),i)}function u(t){var r=t.length;e.className=t.join(" "),n.length=r;for(var i=0;i<t.length;i++)n[i]=t[i];delete t[r]}}},{indexof:41}],37:[function(e,t,n){t.exports=function(e,t,n,r){if(r=(n=window.getComputedStyle)?n(e):e.currentStyle)return r[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]}},{}],38:[function(e,t,n){!function(e,r){"use strict";"object"===u(n)?t.exports=r():e.returnExports=r()}(this,function(){var e,t,n=Array,r=n.prototype,i=Object,o=i.prototype,a=Function,s=a.prototype,l=String,c=l.prototype,d=Number,f=d.prototype,p=r.slice,h=r.splice,g=r.push,m=r.unshift,v=r.concat,y=r.join,_=s.call,b=s.apply,E=Math.max,S=Math.min,w=o.toString,T="function"==typeof Symbol&&"symbol"===u(Symbol.toStringTag),A=Function.prototype.toString,I=/^\s*class /,P=function(e){try{var t=A.call(e).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return I.test(t)}catch(e){return!1}},C=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!==u(e))return!1;if(T)return function(e){try{return!P(e)&&(A.call(e),!0)}catch(e){return!1}}(e);if(P(e))return!1;var t=w.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},k=RegExp.prototype.exec;e=function(e){return"object"===u(e)&&(T?function(e){try{return k.call(e),!0}catch(e){return!1}}(e):"[object RegExp]"===w.call(e))};var L=String.prototype.valueOf;t=function(e){return"string"==typeof e||"object"===u(e)&&(T?function(e){try{return L.call(e),!0}catch(e){return!1}}(e):"[object String]"===w.call(e))};var R,D,O=i.defineProperty&&function(){try{var e={};for(var t in i.defineProperty(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),M=(R=o.hasOwnProperty,D=O?function(e,t,n,r){!r&&t in e||i.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)},function(e,t,n){for(var r in t)R.call(t,r)&&D(e,r,t[r],n)}),x=function(e){var t=u(e);return null===e||"object"!==t&&"function"!==t},N=d.isNaN||function(e){return e!=e},j=function(e){var t=+e;return N(t)?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},U=function(e){var t,n,r;if(x(e))return e;if(n=e.valueOf,C(n)&&(t=n.call(e),x(t)))return t;if(r=e.toString,C(r)&&(t=r.call(e),x(t)))return t;throw new TypeError},F=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return i(e)},B=function(e){return e>>>0},G=function(){};M(s,{bind:function(e){var t=this;if(!C(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n,r=p.call(arguments,1),o=E(0,t.length-r.length),s=[],l=0;l<o;l++)g.call(s,"$"+l);return n=a("binder","return function ("+y.call(s,",")+"){ return binder.apply(this, arguments); }")(function(){if(this instanceof n){var o=b.call(t,this,v.call(r,p.call(arguments)));return i(o)===o?o:this}return b.call(t,e,v.call(r,p.call(arguments)))}),t.prototype&&(G.prototype=t.prototype,n.prototype=new G,G.prototype=null),n}});var V=_.bind(o.hasOwnProperty),Y=_.bind(o.toString),z=_.bind(p),W=b.bind(p);if("object"===("undefined"==typeof document?"undefined":u(document))&&document&&document.documentElement)try{z(document.documentElement.childNodes)}catch(e){var H=z,Z=W;z=function(e){for(var t=[],n=e.length;n-- >0;)t[n]=e[n];return Z(t,H(arguments,1))},W=function(e,t){return Z(z(e),t)}}var K=_.bind(c.slice),q=_.bind(c.split),J=_.bind(c.indexOf),X=_.bind(g),Q=_.bind(o.propertyIsEnumerable),$=_.bind(r.sort),ee=n.isArray||function(e){return"[object Array]"===Y(e)},te=1!==[].unshift(0);M(r,{unshift:function(){return m.apply(this,arguments),this.length}},te),M(n,{isArray:ee});var ne=i("a"),re="a"!==ne[0]||!(0 in ne),ie=function(e){var t=!0,n=!0,r=!1;if(e)try{e.call("foo",function(e,n,r){"object"!==u(r)&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(e){r=!0}return!!e&&!r&&t&&n};M(r,{forEach:function(e){var n,r=F(this),i=re&&t(this)?q(this,""):r,o=-1,a=B(i.length);if(arguments.length>1&&(n=arguments[1]),!C(e))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in i&&(void 0===n?e(i[o],o,r):e.call(n,i[o],o,r))}},!ie(r.forEach)),M(r,{map:function(e){var r,i=F(this),o=re&&t(this)?q(this,""):i,a=B(o.length),s=n(a);if(arguments.length>1&&(r=arguments[1]),!C(e))throw new TypeError("Array.prototype.map callback must be a function");for(var l=0;l<a;l++)l in o&&(s[l]=void 0===r?e(o[l],l,i):e.call(r,o[l],l,i));return s}},!ie(r.map)),M(r,{filter:function(e){var n,r,i=F(this),o=re&&t(this)?q(this,""):i,a=B(o.length),s=[];if(arguments.length>1&&(r=arguments[1]),!C(e))throw new TypeError("Array.prototype.filter callback must be a function");for(var l=0;l<a;l++)l in o&&(n=o[l],(void 0===r?e(n,l,i):e.call(r,n,l,i))&&X(s,n));return s}},!ie(r.filter)),M(r,{every:function(e){var n,r=F(this),i=re&&t(this)?q(this,""):r,o=B(i.length);if(arguments.length>1&&(n=arguments[1]),!C(e))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in i&&!(void 0===n?e(i[a],a,r):e.call(n,i[a],a,r)))return!1;return!0}},!ie(r.every)),M(r,{some:function(e){var n,r=F(this),i=re&&t(this)?q(this,""):r,o=B(i.length);if(arguments.length>1&&(n=arguments[1]),!C(e))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in i&&(void 0===n?e(i[a],a,r):e.call(n,i[a],a,r)))return!0;return!1}},!ie(r.some));var oe=!1;r.reduce&&(oe="object"===u(r.reduce.call("es5",function(e,t,n,r){return r}))),M(r,{reduce:function(e){var n=F(this),r=re&&t(this)?q(this,""):n,i=B(r.length);if(!C(e))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===i&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in r){o=r[a++];break}if(++a>=i)throw new TypeError("reduce of empty array with no initial value")}for(;a<i;a++)a in r&&(o=e(o,r[a],a,n));return o}},!oe);var ae=!1;r.reduceRight&&(ae="object"===u(r.reduceRight.call("es5",function(e,t,n,r){return r}))),M(r,{reduceRight:function(e){var n,r=F(this),i=re&&t(this)?q(this,""):r,o=B(i.length);if(!C(e))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===o&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var a=o-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(a in i){n=i[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return n;do{a in i&&(n=e(n,i[a],a,r))}while(a--);return n}},!ae);var se=r.indexOf&&-1!==[0,1].indexOf(1,2);M(r,{indexOf:function(e){var n=re&&t(this)?q(this,""):F(this),r=B(n.length);if(0===r)return-1;var i=0;for(arguments.length>1&&(i=j(arguments[1])),i=i>=0?i:E(0,r+i);i<r;i++)if(i in n&&n[i]===e)return i;return-1}},se);var le=r.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);M(r,{lastIndexOf:function(e){var n=re&&t(this)?q(this,""):F(this),r=B(n.length);if(0===r)return-1;var i=r-1;for(arguments.length>1&&(i=S(i,j(arguments[1]))),i=i>=0?i:r-Math.abs(i);i>=0;i--)if(i in n&&e===n[i])return i;return-1}},le);var ue,ce,de=(ce=(ue=[1,2]).splice(),2===ue.length&&ee(ce)&&0===ce.length);M(r,{splice:function(e,t){return 0===arguments.length?[]:h.apply(this,arguments)}},!de);var fe,pe=(fe={},r.splice.call(fe,0,0,1),1===fe.length);M(r,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=E(j(this.length),0),arguments.length>0&&"number"!=typeof t&&((n=z(arguments)).length<2?X(n,this.length-e):n[1]=j(t)),h.apply(this,n)}},!pe);var he,ge=((he=new n(1e5))[8]="x",he.splice(1,1),7===he.indexOf("x")),me=function(){var e=[];return e[256]="a",e.splice(257,0,"b"),"a"===e[256]}();M(r,{splice:function(e,t){for(var n,r=F(this),i=[],o=B(r.length),a=j(e),s=a<0?E(o+a,0):S(a,o),u=S(E(j(t),0),o-s),c=0;c<u;)n=l(s+c),V(r,n)&&(i[c]=r[n]),c+=1;var d,f=z(arguments,2),p=f.length;if(p<u){c=s;for(var h=o-u;c<h;)n=l(c+u),d=l(c+p),V(r,n)?r[d]=r[n]:delete r[d],c+=1;c=o;for(var g=o-u+p;c>g;)delete r[c-1],c-=1}else if(p>u)for(c=o-u;c>s;)n=l(c+u-1),d=l(c+p-1),V(r,n)?r[d]=r[n]:delete r[d],c-=1;c=s;for(var m=0;m<f.length;++m)r[c]=f[m],c+=1;return r.length=o-u+p,i}},!ge||!me);var ve,ye=r.join;try{ve="1,2,3"!==Array.prototype.join.call("123",",")}catch(e){ve=!0}ve&&M(r,{join:function(e){var n=void 0===e?",":e;return ye.call(t(this)?q(this,""):this,n)}},ve);var _e="1,2"!==[1,2].join(void 0);_e&&M(r,{join:function(e){var t=void 0===e?",":e;return ye.call(this,t)}},_e);var be=function(e){for(var t=F(this),n=B(t.length),r=0;r<arguments.length;)t[n+r]=arguments[r],r+=1;return t.length=n+r,n+r},Ee=function(){var e={};return 1!==Array.prototype.push.call(e,void 0)||1!==e.length||void 0!==e[0]||!V(e,0)}();M(r,{push:function(e){return ee(this)?g.apply(this,arguments):be.apply(this,arguments)}},Ee);var Se=function(){var e=[];return 1!==e.push(void 0)||1!==e.length||void 0!==e[0]||!V(e,0)}();M(r,{push:be},Se),M(r,{slice:function(e,n){var r=t(this)?q(this,""):this;return W(r,arguments)}},re);var we=function(){try{[1,2].sort(null)}catch(e){try{[1,2].sort({})}catch(e){return!1}}return!0}(),Te=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),Ae=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();M(r,{sort:function(e){if(void 0===e)return $(this);if(!C(e))throw new TypeError("Array.prototype.sort callback must be a function");return $(this,e)}},we||!Ae||!Te);var Ie=!Q({toString:null},"toString"),Pe=Q(function(){},"prototype"),Ce=!V("x","0"),ke=function(e){var t=e.constructor;return t&&t.prototype===e},Le={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0,$width:!0,$height:!0,$top:!0,$localStorage:!0},Re=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!Le["$"+e]&&V(window,e)&&null!==window[e]&&"object"===u(window[e])&&ke(window[e])}catch(e){return!0}return!1}(),De=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Oe=De.length,Me=function(e){return"[object Arguments]"===Y(e)},xe=Me(arguments)?Me:function(e){return null!==e&&"object"===u(e)&&"number"==typeof e.length&&e.length>=0&&!ee(e)&&C(e.callee)};M(i,{keys:function(e){var n=C(e),r=xe(e),i=null!==e&&"object"===u(e),o=i&&t(e);if(!i&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=[],s=Pe&&n;if(o&&Ce||r)for(var c=0;c<e.length;++c)X(a,l(c));if(!r)for(var d in e)s&&"prototype"===d||!V(e,d)||X(a,l(d));if(Ie)for(var f=function(e){if("undefined"==typeof window||!Re)return ke(e);try{return ke(e)}catch(e){return!1}}(e),p=0;p<Oe;p++){var h=De[p];f&&"constructor"===h||!V(e,h)||X(a,h)}return a}});var Ne=i.keys&&function(){return 2===i.keys(arguments).length}(1,2),je=i.keys&&function(){var e=i.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Ue=i.keys;M(i,{keys:function(e){return xe(e)?Ue(z(e)):Ue(e)}},!Ne||je);var Fe,Be,Ge=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Ve=new Date(-0x55d318d56a724),Ye=new Date(14496624e5),ze="Mon, 01 Jan -45875 11:59:59 GMT"!==Ve.toUTCString();Ve.getTimezoneOffset()<-720?(Fe="Tue Jan 02 -45875"!==Ve.toDateString(),Be=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Ye))):(Fe="Mon Jan 01 -45875"!==Ve.toDateString(),Be=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(Ye)));var We=_.bind(Date.prototype.getFullYear),He=_.bind(Date.prototype.getMonth),Ze=_.bind(Date.prototype.getDate),Ke=_.bind(Date.prototype.getUTCFullYear),qe=_.bind(Date.prototype.getUTCMonth),Je=_.bind(Date.prototype.getUTCDate),Xe=_.bind(Date.prototype.getUTCDay),Qe=_.bind(Date.prototype.getUTCHours),$e=_.bind(Date.prototype.getUTCMinutes),et=_.bind(Date.prototype.getUTCSeconds),tt=_.bind(Date.prototype.getUTCMilliseconds),nt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],rt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],it=function(e,t){return Ze(new Date(t,e,0))};M(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this);return e<0&&He(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this),t=He(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=We(this),t=He(this),n=Ze(this);return e<0&&t>11?12===t?n:it(0,e+1)-n+1:n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ke(this);return e<0&&qe(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ke(this),t=qe(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ke(this),t=qe(this),n=Je(this);return e<0&&t>11?12===t?n:it(0,e+1)-n+1:n}},Ge),M(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Xe(this),t=Je(this),n=qe(this),r=Ke(this),i=Qe(this),o=$e(this),a=et(this);return nt[e]+", "+(t<10?"0"+t:t)+" "+rt[n]+" "+r+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},Ge||ze),M(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),r=this.getFullYear();return nt[e]+" "+rt[n]+" "+(t<10?"0"+t:t)+" "+r}},Ge||Fe),(Ge||Be)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),r=this.getFullYear(),i=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),l=Math.floor(Math.abs(s)/60),u=Math.floor(Math.abs(s)%60);return nt[e]+" "+rt[n]+" "+(t<10?"0"+t:t)+" "+r+" "+(i<10?"0"+i:i)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(l<10?"0"+l:l)+(u<10?"0"+u:u)},O&&i.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var ot=Date.prototype.toISOString&&-1===new Date(-621987552e5).toISOString().indexOf("-000001"),at=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),st=_.bind(Date.prototype.getTime);M(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(st(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Ke(this),t=qe(this);e+=Math.floor(t/12);var n=[(t=(t%12+12)%12)+1,Je(this),Qe(this),$e(this),et(this)];e=(e<0?"-":e>9999?"+":"")+K("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var r=0;r<n.length;++r)n[r]=K("00"+n[r],-2);return e+"-"+z(n,0,2).join("-")+"T"+z(n,2).join(":")+"."+K("000"+tt(this),-3)+"Z"}},ot||at),function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(-621987552e5).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}()||(Date.prototype.toJSON=function(e){var t=i(this),n=U(t);if("number"==typeof n&&!isFinite(n))return null;var r=t.toISOString;if(!C(r))throw new TypeError("toISOString property is not callable");return r.call(t)});var lt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ut=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));if(isNaN(Date.parse("2000-01-01T00:00:00.000Z"))||ut||!lt){var ct=Math.pow(2,31)-1,dt=N(new Date(1970,0,1,0,0,0,ct+1).getTime());Date=function(e){var t=function(n,r,i,o,a,s,u){var c,d=arguments.length;if(this instanceof e){var f=s,p=u;if(dt&&d>=7&&u>ct){var h=Math.floor(u/ct)*ct,g=Math.floor(h/1e3);f+=g,p-=1e3*g}c=1===d&&l(n)===n?new e(t.parse(n)):d>=7?new e(n,r,i,o,a,f,p):d>=6?new e(n,r,i,o,a,f):d>=5?new e(n,r,i,o,a):d>=4?new e(n,r,i,o):d>=3?new e(n,r,i):d>=2?new e(n,r):d>=1?new e(n instanceof e?+n:n):new e}else c=e.apply(this,arguments);return x(c)||M(c,{constructor:t},!0),c},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),r=[0,31,59,90,120,151,181,212,243,273,304,334,365],i=function(e,t){var n=t>1?1:0;return r[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)};for(var o in e)V(e,o)&&(t[o]=e[o]);M(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,M(t.prototype,{constructor:t},!0);return M(t,{parse:function(t){var r=n.exec(t);if(r){var o,a=d(r[1]),s=d(r[2]||1)-1,l=d(r[3]||1)-1,u=d(r[4]||0),c=d(r[5]||0),f=d(r[6]||0),p=Math.floor(1e3*d(r[7]||0)),h=Boolean(r[4]&&!r[8]),g="-"===r[9]?1:-1,m=d(r[10]||0),v=d(r[11]||0);return u<(c>0||f>0||p>0?24:25)&&c<60&&f<60&&p<1e3&&s>-1&&s<12&&m<24&&v<60&&l>-1&&l<i(a,s+1)-i(a,s)&&(o=1e3*(60*((o=60*(24*(i(a,s)+l)+u+m*g))+c+v*g)+f)+p,h&&(o=function(t){var n=0,r=t;if(dt&&r>ct){var i=Math.floor(r/ct)*ct,o=Math.floor(i/1e3);n+=o,r-=1e3*o}return d(new e(1970,0,1,0,0,n,r))}(o)),-864e13<=o&&o<=864e13)?o:NaN}return e.parse.apply(this,arguments)}}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var ft=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),pt={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,r=t;++n<pt.size;)r+=e*pt.data[n],pt.data[n]=r%pt.base,r=Math.floor(r/pt.base)},divide:function(e){for(var t=pt.size,n=0;--t>=0;)n+=pt.data[t],pt.data[t]=Math.floor(n/e),n=n%e*pt.base},numToString:function(){for(var e=pt.size,t="";--e>=0;)if(""!==t||0===e||0!==pt.data[e]){var n=l(pt.data[e]);""===t?t=n:t+=K("0000000",0,7-n.length)+n}return t},pow:function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}};M(f,{toFixed:function(e){var t,n,r,i,o,a,s,u;if(t=d(e),(t=N(t)?0:Math.floor(t))<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=d(this),N(n))return"NaN";if(n<=-1e21||n>=1e21)return l(n);if(r="",n<0&&(r="-",n=-n),i="0",n>1e-21)if(a=(o=pt.log(n*pt.pow(2,69,1))-69)<0?n*pt.pow(2,-o,1):n/pt.pow(2,o,1),a*=4503599627370496,(o=52-o)>0){for(pt.multiply(0,a),s=t;s>=7;)pt.multiply(1e7,0),s-=7;for(pt.multiply(pt.pow(10,s,1),0),s=o-1;s>=23;)pt.divide(1<<23),s-=23;pt.divide(1<<s),pt.multiply(1,1),pt.divide(2),i=pt.numToString()}else pt.multiply(0,a),pt.multiply(1<<-o,0),i=pt.numToString()+K("0.00000000000000000000",2,2+t);return i=t>0?(u=i.length)<=t?r+K("0.0000000000000000000",0,t-u+2)+i:r+K(i,0,u-t)+"."+K(i,u-t):r+i}},ft);var ht,gt,mt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),vt=f.toPrecision;M(f,{toPrecision:function(e){return void 0===e?vt.call(this):vt.call(this,e)}},mt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(ht=void 0===/()??/.exec("")[1],gt=Math.pow(2,32)-1,c.split=function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!e(t))return q(this,t,n);var i,o,a,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,d=new RegExp(t.source,u+"g");ht||(i=new RegExp("^"+d.source+"$(?!\\s)",u));var f=void 0===n?gt:B(n);for(o=d.exec(r);o&&!((a=o.index+o[0].length)>c&&(X(l,K(r,c,o.index)),!ht&&o.length>1&&o[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(o[e]=void 0)}),o.length>1&&o.index<r.length&&g.apply(l,z(o,1)),s=o[0].length,c=a,l.length>=f));)d.lastIndex===o.index&&d.lastIndex++,o=d.exec(r);return c===r.length?!s&&d.test("")||X(l,""):X(l,K(r,c)),l.length>f?z(l,0,f):l}):"0".split(void 0,0).length&&(c.split=function(e,t){return void 0===e&&0===t?[]:q(this,e,t)});var yt,_t=c.replace;(yt=[],"x".replace(/x(.)?/g,function(e,t){X(yt,t)}),1===yt.length&&void 0===yt[0])||(c.replace=function(t,n){var r=C(n),i=e(t)&&/\)[*?]/.test(t.source);if(r&&i){return _t.call(this,t,function(e){var r=arguments.length,i=t.lastIndex;t.lastIndex=0;var o=t.exec(e)||[];return t.lastIndex=i,X(o,arguments[r-2],arguments[r-1]),n.apply(this,o)})}return _t.call(this,t,n)});var bt=c.substr,Et="".substr&&"b"!=="0b".substr(-1);M(c,{substr:function(e,t){var n=e;return e<0&&(n=E(this.length+e,0)),bt.call(this,n,t)}},Et);var St="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",wt="["+St+"]",Tt=new RegExp("^"+wt+wt+"*"),At=new RegExp(wt+wt+"*$"),It=c.trim&&(St.trim()||!"​".trim());M(c,{trim:function(){if(null==this)throw new TypeError("can't convert "+this+" to object");return l(this).replace(Tt,"").replace(At,"")}},It);var Pt=_.bind(String.prototype.trim),Ct=c.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);M(c,{lastIndexOf:function(e){if(null==this)throw new TypeError("can't convert "+this+" to object");for(var t=l(this),n=l(e),r=arguments.length>1?d(arguments[1]):NaN,i=N(r)?1/0:j(r),o=S(E(i,0),t.length),a=n.length,s=o+a;s>0;){s=E(0,s-a);var u=J(K(t,s,o+a),n);if(-1!==u)return s+u}return-1}},Ct);var kt,Lt,Rt,Dt=c.lastIndexOf;if(M(c,{lastIndexOf:function(e){return Dt.apply(this,arguments)}},1!==c.lastIndexOf.length),8===parseInt(St+"08")&&22===parseInt(St+"0x16")||(parseInt=(kt=parseInt,Lt=/^[-+]?0[xX]/,function(e,t){u(e);var n=Pt(String(e)),r=d(t)||(Lt.test(n)?16:10);return kt(n,r)})),1/parseFloat("-0")!=-1/0&&(parseFloat=(Rt=parseFloat,function(e){var t=Pt(String(e)),n=Rt(t);return 0===n&&"-"===K(t,0,1)?-0:n})),"RangeError: test"!==String(new RangeError("test"))){Error.prototype.toString=function(){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=this.name;void 0===e?e="Error":"string"!=typeof e&&(e=l(e));var t=this.message;return void 0===t?t="":"string"!=typeof t&&(t=l(t)),e?t?e+": "+t:e:t}}if(O){var Ot=function(e,t){if(Q(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};Ot(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ot(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){RegExp.prototype.toString=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e}}})},{}],39:[function(e,t,n){var r=[],i=r.forEach,o=r.slice;t.exports=function(e){return i.call(o.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e}},{}],40:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?f/l:f*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},{}],41:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],42:[function(e,t,n){t.exports=function(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var r=Object.prototype.toString},{}],43:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],44:[function(e,t,n){(function(e){!function(r){var i="object"==u(n)&&n&&!n.nodeType&&n,o="object"==u(t)&&t&&!t.nodeType&&t,a="object"==u(e)&&e;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,l,c=2147483647,d=36,f=1,p=26,h=38,g=700,m=72,v=128,y="-",_=/^xn--/,b=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=d-f,T=Math.floor,A=String.fromCharCode;function I(e){throw new RangeError(S[e])}function P(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function C(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+P((e=e.replace(E,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function L(e){return P(e,function(e){var t="";return e>65535&&(t+=A((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=A(e)}).join("")}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function D(e,t,n){var r=0;for(e=n?T(e/g):e>>1,e+=T(e/t);e>w*p>>1;r+=d)e=T(e/w);return T(r+(w+1)*e/(e+h))}function O(e){var t,n,r,i,o,a,s,l,u,h,g,_=[],b=e.length,E=0,S=v,w=m;for((n=e.lastIndexOf(y))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&I("not-basic"),_.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=E,a=1,s=d;i>=b&&I("invalid-input"),((l=(g=e.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:d)>=d||l>T((c-E)/a))&&I("overflow"),E+=l*a,!(l<(u=s<=w?f:s>=w+p?p:s-w));s+=d)a>T(c/(h=d-u))&&I("overflow"),a*=h;w=D(E-o,t=_.length+1,0==o),T(E/t)>c-S&&I("overflow"),S+=T(E/t),E%=t,_.splice(E++,0,S)}return L(_)}function M(e){var t,n,r,i,o,a,s,l,u,h,g,_,b,E,S,w=[];for(_=(e=k(e)).length,t=v,n=0,o=m,a=0;a<_;++a)(g=e[a])<128&&w.push(A(g));for(r=i=w.length,i&&w.push(y);r<_;){for(s=c,a=0;a<_;++a)(g=e[a])>=t&&g<s&&(s=g);for(s-t>T((c-n)/(b=r+1))&&I("overflow"),n+=(s-t)*b,t=s,a=0;a<_;++a)if((g=e[a])<t&&++n>c&&I("overflow"),g==t){for(l=n,u=d;!(l<(h=u<=o?f:u>=o+p?p:u-o));u+=d)S=l-h,E=d-h,w.push(A(R(h+S%E,0))),l=T(S/E);w.push(A(R(l,0))),o=D(n,b,r==i),n=0,++r}++n,++t}return w.join("")}if(s={version:"1.4.1",ucs2:{decode:k,encode:L},decode:O,encode:M,toASCII:function(e){return C(e,function(e){return b.test(e)?"xn--"+M(e):e})},toUnicode:function(e){return C(e,function(e){return _.test(e)?O(e.slice(4).toLowerCase()):e})}},i&&o)if(t.exports==i)o.exports=s;else for(l in s)s.hasOwnProperty(l)&&(i[l]=s[l]);else r.punycode=s}(this)}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(e,t,n){
/*!
        * $script.js JS loader & dependency manager
        * https://github.com/ded/script.js
        * (c) Dustin Diaz 2014 | License MIT
        */
!function(e,n){void 0!==t&&t.exports?t.exports=n():this.$script=n()}(0,function(){var e,t,n=document,r=n.getElementsByTagName("head")[0],i=!1,o="push",a="readyState",s="onreadystatechange",l={},u={},c={},d={};function f(e,t){for(var n=0,r=e.length;n<r;++n)if(!t(e[n]))return i;return 1}function p(e,t){f(e,function(e){return!t(e)})}function h(t,n,r){t=t[o]?t:[t];var i=n&&n.call,a=i?n:r,s=i?t.join(""):n,m=t.length;function v(e){return e.call?e():l[e]}function y(){if(!--m)for(var e in l[s]=1,a&&a(),c)f(e.split("|"),v)&&!p(c[e],v)&&(c[e]=[])}return setTimeout(function(){p(t,function t(n,r){return null===n?y():(r||/^https?:\/\//.test(n)||!e||(n=-1===n.indexOf(".js")?e+n+".js":e+n),d[n]?(s&&(u[s]=1),2==d[n]?y():setTimeout(function(){t(n,!0)},0)):(d[n]=1,s&&(u[s]=1),void g(n,y)))})},0),h}function g(e,i){var o,l=n.createElement("script");l.onload=l.onerror=l[s]=function(){l[a]&&!/^c|loade/.test(l[a])||o||(l.onload=l[s]=null,o=1,d[e]=2,i())},l.async=1,l.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,r.insertBefore(l,r.lastChild)}return h.get=g,h.order=function(e,t,n){!function r(i){i=e.shift(),e.length?h(i,r):h(i,t,n)}()},h.path=function(t){e=t},h.urlArgs=function(e){t=e},h.ready=function(e,t,n){e=e[o]?e:[e];var r,i=[];return!p(e,function(e){l[e]||i[o](e)})&&f(e,function(e){return l[e]})?t():(r=e.join("|"),c[r]=c[r]||[],c[r][o](t),n&&n(i)),h},h.done=function(e){h([null],e)},h})},{}]},{},[32])(32)},"object"===u(t)&&void 0!==e?e.exports=l():(o=[],void 0===(a="function"==typeof(i=l)?i.apply(t,o):i)||(e.exports=a))}).call(this,n(96))},function(e,t,n){var r;"undefined"!=typeof window&&(r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||e,o),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function u(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},u.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,o,a){var s=i?i+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,r),!0;case 5:return c.fn.call(c.context,t,n,r,o),!0;case 6:return c.fn.call(c.context,t,n,r,o,a),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,r);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return l(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||n&&a.context!==n||l(this,o);else{for(var s=0,u=[],c=a.length;s<c;s++)(a[s].fn!==t||r&&!a[s].once||n&&a[s].context!==n)&&u.push(a[s]);u.length?this._events[o]=1===u.length?u[0]:u:l(this,o)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(o(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(u=n.slice()).length,l=0;l<a;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,o,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){o=s;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,n){var r,i,o,a,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,o=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=s.normalizePath(o.path),s.buildURLFromParts(o)):t;var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var l=i.exec(a.path);a.netLoc=l[1],a.path=l[2]}a.netLoc&&!a.path&&(a.path="/");var u={scheme:a.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=a.netLoc,"/"!==o.path[0]))if(o.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=s.normalizePath(d)}else u.path=a.path,o.params||(u.params=a.params,o.query||(u.query=a.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(o.path):o.path),s.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(o,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},"./node_modules/webworkify-webpack/index.js":function(e,t,n){function r(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){throw console.error(e),e};var r=n(n.s=ENTRY_MODULE);return r.default||r}var i="[\\.|\\-|\\+|\\w|/|@]+",o="\\((/\\*.*?\\*/)?s?.*?("+i+").*?\\)";function a(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,r){var s={};s[r]=[];var l=t.toString(),u=l.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,d=u[1],f=new RegExp("(\\\\n|\\W)"+a(d)+o,"g");c=f.exec(l);)"dll-reference"!==c[3]&&s[r].push(c[3]);for(f=new RegExp("\\("+a(d)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+o,"g");c=f.exec(l);)e[c[2]]||(s[r].push(c[1]),e[c[2]]=n(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var p,h=Object.keys(s),g=0;g<h.length;g++)for(var m=0;m<s[h[g]].length;m++)p=s[h[g]][m],isNaN(1*p)||(s[h[g]][m]=1*s[h[g]][m]);return s}function l(e){return Object.keys(e).reduce(function(t,n){return t||e[n].length>0},!1)}e.exports=function(e,t){t=t||{};var i={main:n.m},o=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};l(n);)for(var o=Object.keys(n),a=0;a<o.length;a++){var u=o[a],c=n[u].pop();if(i[u]=i[u]||{},!i[u][c]&&e[u][c]){i[u][c]=!0,r[u]=r[u]||[],r[u].push(c);for(var d=s(e,e[u][c],u),f=Object.keys(d),p=0;p<f.length;p++)n[f[p]]=n[f[p]]||[],n[f[p]]=n[f[p]].concat(d[f[p]])}}return r}(i,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+r.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+r.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var u=new window.Blob([a],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/config.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/controller/abr-controller.js"),i=n("./src/controller/buffer-controller.js"),o=n("./src/controller/cap-level-controller.js"),a=n("./src/controller/fps-controller.js"),s=n("./src/utils/xhr-loader.js"),l=n("./src/controller/audio-track-controller.js"),u=n("./src/controller/audio-stream-controller.js"),c=n("./src/utils/cues.js"),d=n("./src/controller/timeline-controller.js"),f=n("./src/controller/subtitle-track-controller.js"),p=n("./src/controller/subtitle-stream-controller.js"),h=n("./src/controller/eme-controller.js"),g=n("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:r.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=p.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=f.default,t.hlsDefaultConfig.timelineController=d.default,t.hlsDefaultConfig.cueHandler=c,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=u.default,t.hlsDefaultConfig.audioTrackController=l.default,t.hlsDefaultConfig.emeController=h.default},"./src/controller/abr-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/buffer-helper.js"),l=n("./src/errors.js"),u=n("./src/utils/logger.js"),c=n("./src/utils/ewma-bandwidth-estimator.js"),d=window.performance,f=function(t){function n(e){var n=t.call(this,e,o.default.FRAG_LOADING,o.default.FRAG_LOADED,o.default.FRAG_BUFFERED,o.default.ERROR)||this;return n.lastLoadedFragLevel=0,n._nextAutoLevel=-1,n.hls=e,n.timer=null,n._bwEstimator=null,n.onCheck=n._abandonRulesCheck.bind(n),n}return i(n,t),n.prototype.destroy=function(){this.clearTimer(),a.default.prototype.destroy.call(this)},n.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var n=this.hls,r=n.config,i=t.level,o=void 0,a=void 0;n.levels[i].details.live?(o=r.abrEwmaFastLive,a=r.abrEwmaSlowLive):(o=r.abrEwmaFastVoD,a=r.abrEwmaSlowVoD),this._bwEstimator=new c.default(n,a,o,r.abrEwmaDefaultEstimate)}},n.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent;if(n){var r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var l=d.now()-a.trequest,c=Math.abs(t.playbackRate);if(l>500*n.duration/c){var f=e.levels,p=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/l),h=f[n.level],g=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,m=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*g/8)),v=t.currentTime,y=(m-a.loaded)/p,_=(s.BufferHelper.bufferInfo(t,v,e.config.maxBufferHole).end-v)/c;if(_<2*n.duration/c&&y>_){var b=void 0,E=void 0;for(E=n.level-1;E>i;E--){var S=f[E].realBitrate?Math.max(f[E].realBitrate,f[E].bitrate):f[E].bitrate;if((b=n.duration*S/(6.4*p))<_)break}b<y&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+E+":fragLoadedDelay["+E+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+_.toFixed(1)),e.nextLoadLevel=E,this._bwEstimator.sample(l,a.loaded),r.abort(),this.clearTimer(),e.trigger(o.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}}},n.prototype.onFragLoaded=function(t){var n=t.frag;if("main"===n.type&&e.isFinite(n.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[n.level],i=(r.loaded?r.loaded.bytes:0)+t.stats.loaded,o=(r.loaded?r.loaded.duration:0)+t.frag.duration;r.loaded={bytes:i,duration:o},r.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},n.prototype.onFragBuffered=function(t){var n=t.stats,r=t.frag;if(!0!==n.aborted&&"main"===r.type&&e.isFinite(r.sn)&&(!r.bitrateTest||n.tload===n.tbuffered)){var i=n.tparsed-n.trequest;u.logger.log("latency/loading/parsing/append/kbps:"+Math.round(n.tfirst-n.trequest)+"/"+Math.round(n.tload-n.tfirst)+"/"+Math.round(n.tparsed-n.tload)+"/"+Math.round(n.tbuffered-n.tparsed)+"/"+Math.round(8*n.loaded/(n.tbuffered-n.trequest))),this._bwEstimator.sample(i,n.loaded),n.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},n.prototype.onError=function(e){switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},n.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(n.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,l=this.fragCurrent?this.fragCurrent.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,p=(s.BufferHelper.bufferInfo(o,c,r.maxBufferHole).end-c)/d,h=this._findBestLevel(a,l,f,i,t,p,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(h>=0)return h;u.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var g=l?Math.min(l,r.maxStarvationDelay):r.maxStarvationDelay,m=r.abrBandWidthFactor,v=r.abrBandWidthUpFactor;if(0===p){var y=this.bitrateTestDelay;if(y)g=(l?Math.min(l,r.maxLoadingDelay):r.maxLoadingDelay)-y,u.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*g)+" ms"),m=v=1}return h=this._findBestLevel(a,l,f,i,t,p+g,m,v,n),Math.max(h,0)},enumerable:!0,configurable:!0}),n.prototype._findBestLevel=function(e,t,n,r,i,o,a,s,l){for(var c=i;c>=r;c--){var d=l[c];if(d){var f=d.details,p=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,g=void 0;g=c<=e?a*n:s*n;var m=l[c].realBitrate?Math.max(l[c].realBitrate,l[c].bitrate):l[c].bitrate,v=m*p/g;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+c+"/"+Math.round(g)+"/"+m+"/"+p+"/"+o+"/"+v),g>m&&(!v||h&&!this.bitrateTestDelay||v<o))return c}}return-1},n}(a.default);t.default=f}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utils/binary-search.js"),a=n("./src/utils/buffer-helper.js"),s=n("./src/demux/demuxer.js"),l=n("./src/events.js"),u=n("./src/controller/level-helper.js"),c=n("./src/utils/time-ranges.js"),d=n("./src/errors.js"),f=n("./src/utils/logger.js"),p=n("./src/utils/discontinuities.js"),h=n("./src/controller/fragment-tracker.js"),g=n("./src/loader/fragment.js"),m=n("./src/controller/base-stream-controller.js"),v=window.performance,y=function(t){function n(e,n){var r=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.AUDIO_TRACKS_UPDATED,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.BUFFER_RESET,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED,l.default.INIT_PTS_FOUND)||this;return r.fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=m.State.STOPPED,r.initPTS=[],r.waitingFragment=null,r.videoTrackCC=null,r}return i(n,t),n.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.prototype.onHandlerDestroyed=function(){this.state=m.State.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},n.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,f.logger.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===m.State.WAITING_INIT_PTS&&this.tick())},n.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(f.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=m.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=m.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=m.State.STOPPED},n.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=m.State.STOPPED},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,f.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),n.prototype.doTick=function(){var t,n,r,i=this.hls,s=i.config;switch(this.state){case m.State.ERROR:case m.State.PAUSED:case m.State.BUFFER_FLUSHING:break;case m.State.STARTING:this.state=m.State.WAITING_TRACK,this.loadedmetadata=!1;break;case m.State.IDLE:var u=this.tracks;if(!u)break;if(!this.media&&(this.startFragRequested||!s.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var c=this.mediaBuffer?this.mediaBuffer:this.media,d=this.videoBuffer?this.videoBuffer:this.media,g=a.BufferHelper.bufferInfo(c,t,s.maxBufferHole),y=a.BufferHelper.bufferInfo(d,t,s.maxBufferHole),_=g.len,b=g.end,E=this.fragPrevious,S=Math.min(s.maxBufferLength,s.maxMaxBufferLength),w=Math.max(S,y.len),T=this.audioSwitch,A=this.trackId;if((_<w||T)&&A<u.length){if(void 0===(r=u[A].details)){this.state=m.State.WAITING_TRACK;break}if(!T&&this._streamEnded(g,r))return this.hls.trigger(l.default.BUFFER_EOS,{type:"audio"}),void(this.state=m.State.ENDED);var I=r.fragments,P=I.length,C=I[0].start,k=I[P-1].start+I[P-1].duration,L=void 0;if(T)if(r.live&&!r.PTSKnown)f.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),b=0;else if(b=t,r.PTSKnown&&t<C){if(!(g.end>C||g.nextStart))return;f.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=C+.05}if(r.initSegment&&!r.initSegment.data)L=r.initSegment;else if(b<=C){if(L=I[0],null!==this.videoTrackCC&&L.cc!==this.videoTrackCC&&(L=p.findFragWithCC(I,this.videoTrackCC)),r.live&&L.loadIdx&&L.loadIdx===this.fragLoadIdx){var R=g.nextStart?g.nextStart:C;return f.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(R+.05)),void(this.media.currentTime=R+.05)}}else{var D=void 0,O=s.maxFragLookUpTolerance,M=E?I[E.sn-I[0].sn+1]:void 0,x=function(e){var t=Math.min(O,e.duration);return e.start+e.duration-t<=b?1:e.start-t>b&&e.start?-1:0};b<k?(b>k-O&&(O=0),D=M&&!x(M)?M:o.default.search(I,x)):D=I[P-1],D&&(L=D,C=D.start,E&&L.level===E.level&&L.sn===E.sn&&(L.sn<r.endSN?(L=I[L.sn+1-r.startSN],f.logger.log("SN just loaded, load next one: "+L.sn)):L=null))}L&&(L.encrypted?(f.logger.log("Loading key for "+L.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+A),this.state=m.State.KEY_LOADING,i.trigger(l.default.KEY_LOADING,{frag:L})):(f.logger.log("Loading "+L.sn+", cc: "+L.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+A+", currentTime:"+t+",bufferEnd:"+b.toFixed(3)),this.fragCurrent=L,(T||this.fragmentTracker.getState(L)===h.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(L.sn)&&(this.nextLoadPosition=L.start+L.duration),i.trigger(l.default.FRAG_LOADING,{frag:L}),this.state=m.State.FRAG_LOADING)))}break;case m.State.WAITING_TRACK:(n=this.tracks[this.trackId])&&n.details&&(this.state=m.State.IDLE);break;case m.State.FRAG_LOADING_WAITING_RETRY:var N=v.now(),j=this.retryDate,U=(c=this.media)&&c.seeking;(!j||N>=j||U)&&(f.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=m.State.IDLE);break;case m.State.WAITING_INIT_PTS:var F=this.videoTrackCC;if(void 0===this.initPTS[F])break;var B=this.waitingFragment;if(B){var G=B.frag.cc;F!==G?(n=this.tracks[this.trackId]).details&&n.details.live&&(f.logger.warn("Waiting fragment CC ("+G+") does not match video track CC ("+F+")"),this.waitingFragment=null,this.state=m.State.IDLE):(this.state=m.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=m.State.IDLE;break;case m.State.STOPPED:case m.State.FRAG_LOADING:case m.State.PARSING:case m.State.PARSED:case m.State.ENDED:}},n.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},n.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(f.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.prototype.onAudioTracksUpdated=function(e){f.logger.log("audio tracks updated"),this.tracks=e.audioTracks},n.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=m.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=m.State.IDLE),this.tick()},n.prototype.onAudioTrackLoaded=function(t){var n=t.details,r=t.id,i=this.tracks[r],o=n.totalduration,a=0;if(f.logger.log("track "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+o),n.live){var s=i.details;s&&n.fragments.length>0?(u.mergeDetails(s,n),a=n.fragments[0].start,n.PTSKnown?f.logger.log("live audio playlist sliding:"+a.toFixed(3)):f.logger.log("live audio playlist - outdated PTS, unknown sliding")):(n.PTSKnown=!1,f.logger.log("live audio playlist - first load, unknown sliding"))}else n.PTSKnown=!1;if(i.details=n,!this.startFragRequested){if(-1===this.startPosition){var l=n.startTimeOffset;e.isFinite(l)?(f.logger.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===m.State.WAITING_TRACK&&(this.state=m.State.IDLE),this.tick()},n.prototype.onKeyLoaded=function(){this.state===m.State.KEY_LOADING&&(this.state=m.State.IDLE,this.tick())},n.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===m.State.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,o=i.totalduration,a=t.level,u=t.sn,c=t.cc,d=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",p=this.stats=e.stats;if("initSegment"===u)this.state=m.State.IDLE,p.tparsed=p.tbuffered=v.now(),i.initSegment.data=e.payload,this.hls.trigger(l.default.FRAG_BUFFERED,{stats:p,frag:t,id:"audio"}),this.tick();else{this.state=m.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new s.default(this.hls,"audio"));var h=this.initPTS[c],g=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,f.logger.log("Demuxing "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+a);this.demuxer.push(e.payload,g,d,null,t,o,!1,h)}else f.logger.log("unknown video PTS for continuity counter "+c+", waiting for video PTS before demuxing audio frag "+u+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=m.State.WAITING_INIT_PTS}}this.fragLoadError=0},n.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===m.State.PARSING){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(l.default.BUFFER_CODECS,r),f.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,a))}this.tick()}}},n.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&"audio"===t.id&&"audio"===t.type&&i.sn===r.sn&&i.level===r.level&&this.state===m.State.PARSING){var o=this.trackId,a=this.tracks[o],s=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),r.addElementaryStream(g.default.ElementaryStreamTypes.AUDIO),f.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),u.updateFragPTSDTS(a.details,r,t.startPTS,t.endPTS);var c=this.audioSwitch,p=this.media,h=!1;if(c&&p)if(p.readyState){var v=p.currentTime;f.logger.log("switching audio track : currentTime:"+v),v>=t.startPTS&&(f.logger.log("switching audio track : flushing all audio"),this.state=m.State.BUFFER_FLUSHING,s.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,s.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,s.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:o});var y=this.pendingData;if(!y)return f.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void s.trigger(l.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&y.push({type:t.type,data:e,parent:"audio",content:"data"})}),!h&&y.length&&(y.forEach(function(e){n.state===m.State.PARSING&&(n.pendingBuffering=!0,n.hls.trigger(l.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},n.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===m.State.PARSING&&(this.stats.tparsed=v.now(),this.state=m.State.PARSED,this._checkAppendedParsed())},n.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},n.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},n.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==m.State.PARSING&&t!==m.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n.prototype._checkAppendedParsed=function(){if(!(this.state!==m.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=v.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;f.logger.log("audio buffered : "+c.default.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=m.State.IDLE}this.tick()}},n.prototype.onError=function(t){var n=t.frag;if(!n||"audio"===n.type)switch(t.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=t.frag;if(r&&"audio"!==r.type)break;if(!t.fatal){var i=this.fragLoadError;if(i?i++:i=1,i<=(s=this.config).fragLoadingMaxRetry){this.fragLoadError=i;var o=Math.min(Math.pow(2,i-1)*s.fragLoadingRetryDelay,s.fragLoadingMaxRetryTimeout);f.logger.warn("AudioStreamController: frag loading failed, retry in "+o+" ms"),this.retryDate=v.now()+o,this.state=m.State.FRAG_LOADING_WAITING_RETRY}else f.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=m.State.ERROR}break;case d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case d.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==m.State.ERROR&&(this.state=t.fatal?m.State.ERROR:m.State.IDLE,f.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case d.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===m.State.PARSING||this.state===m.State.PARSED)){var s,u=this.mediaBuffer,c=this.media.currentTime;if(u&&a.BufferHelper.isBuffered(u,c)&&a.BufferHelper.isBuffered(u,c+.5))(s=this.config).maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,f.logger.warn("AudioStreamController: reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=m.State.IDLE;else f.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=m.State.BUFFER_FLUSHING,this.hls.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"})}}},n.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(f.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(l.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=m.State.PARSED):(this.state=m.State.IDLE,this.fragPrevious=null,this.tick())},n}(m.default);t.default=y}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/task-loop.js"),s=n("./src/utils/logger.js"),l=n("./src/errors.js"),u=function(e){function t(t){var n=e.call(this,t,o.default.MANIFEST_LOADING,o.default.MANIFEST_PARSED,o.default.AUDIO_TRACK_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.LEVEL_LOADED,o.default.ERROR)||this;return n._trackId=-1,n._selectDefaultTrack=!0,n.tracks=[],n.trackIdBlacklist=Object.create(null),n.audioGroupId=null,n}return i(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(o.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)s.logger.warn("Invalid audio track id:",e.id);else{if(s.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var n=t.audioGroupIds[t.urlId];this.audioGroupId!==n&&(this.audioGroupId=n,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===l.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(s.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)s.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)s.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];s.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var n=t.url,r=t.type,i=t.id;this.hls.trigger(o.default.AUDIO_TRACK_SWITCHING,{id:i,type:r,url:n}),this._loadTrackDetailsIfNeeded(t)}},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var n=this.tracks[this._trackId],r=null;if(n&&(r=n.name),this._selectDefaultTrack){var i=t.filter(function(e){return e.default});i.length?t=i:s.logger.warn("No default audio tracks defined")}var a=!1,u=function(){t.forEach(function(t){a||e.audioGroupId&&t.groupId!==e.audioGroupId||r&&r!==t.name||(e._setAudioTrack(t.id),a=!0)})};u(),a||(r=null,u()),a||(s.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,n=e.url;return!(t&&!t.live)&&!!n},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,n=e.id;s.logger.log("loading audio-track playlist for id: "+n),this.hls.trigger(o.default.AUDIO_TRACK_LOADING,{url:t,id:n})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,s.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],n=t.name,r=t.language,i=t.groupId;s.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+n+'" / "'+r+'"');for(var o=e,a=0;a<this.tracks.length;a++){if(!this.trackIdBlacklist[a])if(this.tracks[a].name===n){o=a;break}}o!==e?(s.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)):s.logger.warn('No fallback audio-track found for name/language: "'+n+'" / "'+r+'"')},t}(a.default);t.default=u},"./src/controller/base-stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/task-loop.js"),a=n("./src/controller/fragment-tracker.js"),s=n("./src/utils/buffer-helper.js"),l=n("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var u=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return i(r,n),r.prototype.doTick=function(){},r.prototype._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var i=r.getState(n);return i===a.FragmentState.PARTIAL||i===a.FragmentState.OK}return!1},r.prototype.onMediaSeeking=function(){var n=this.config,r=this.media,i=this.mediaBuffer,o=this.state,a=r?r.currentTime:null,u=s.BufferHelper.bufferInfo(i||r,a,this.config.maxBufferHole);if(e.isFinite(a)&&l.logger.log("media seeking to "+a.toFixed(3)),o===t.State.FRAG_LOADING){var c=this.fragCurrent;if(0===u.len&&c){var d=n.maxFragLookUpTolerance,f=c.start-d,p=c.start+c.duration+d;a<f||a>p?(c.loader&&(l.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),c.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):l.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else o===t.State.ENDED&&(0===u.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);r&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},r.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r}(o.default);t.default=u}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),l=n("./src/errors.js"),u=n("./src/utils/mediasource-helper.js").getMediaSource(),c=function(t){function n(e){var n=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_RESET,o.default.BUFFER_APPENDING,o.default.BUFFER_CODECS,o.default.BUFFER_EOS,o.default.BUFFER_FLUSHING,o.default.LEVEL_PTS_UPDATED,o.default.LEVEL_UPDATED)||this;return n._msDuration=null,n._levelDuration=null,n._levelTargetDuration=10,n._live=null,n._objectUrl=null,n.bufferCodecEventsExpected=0,n.onsbue=n.onSBUpdateEnd.bind(n),n.onsbe=n.onSBUpdateError.bind(n),n.pendingTracks={},n.tracks={},n}return i(n,t),n.prototype.destroy=function(){a.default.prototype.destroy.call(this)},n.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(Math.abs(r.timestampOffset-e.start)>.1){var i=r.updating;try{r.abort()}catch(e){s.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(s.logger.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},n.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,s.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},n.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new u;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(n),this._objectUrl=t.src}},n.prototype.onMediaDetaching=function(){s.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){s.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):s.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(o.default.MEDIA_DETACHED)},n.prototype.onMediaSourceOpen=function(){s.logger.log("media source opened"),this.hls.trigger(o.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},n.prototype.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,n=Object.keys(t).length;(n&&!e||2===n)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},n.prototype.onMediaSourceClose=function(){s.logger.log("media source closed")},n.prototype.onMediaSourceEnded=function(){s.logger.log("media source ended")},n.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;s.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0),r={},i=this.sourceBuffer;for(var a in i)r[a]=i[a].buffered;this.hls.trigger(o.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===n&&this.flushLiveBackBuffer()},n.prototype.onSBUpdateError=function(e){s.logger.error("sourceBuffer error:",e),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},n.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach(function(n){t.pendingTracks[n]=e[n]});var n=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),n&&"open"===n.readyState&&this.checkPendingTracks()}},n.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,u=i.container+";codecs="+a;s.logger.log("creating sourceBuffer("+u+")");try{var c=t[r]=n.addSourceBuffer(u);c.addEventListener("updateend",this.onsbue),c.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=c}catch(e){s.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:u})}}this.hls.trigger(o.default.BUFFER_CREATED,{tracks:e})},n.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},n.prototype.onBufferAppendFail=function(e){s.logger.error("sourceBuffer error:",e.event),this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},n.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,s.logger.log(r+" sourceBuffer now EOS"));this.checkEos()},n.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}s.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){s.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},n.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},n.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,n=this.sourceBuffer,r=Object.keys(n),i=t-Math.max(e,this._levelTargetDuration),o=r.length-1;o>=0;o--){var a=r[o],s=n[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,n[a],0,i)}}},n.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},n.prototype.updateMediaElementDuration=function(){var t,n=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer)if(!0===this.sourceBuffer[r].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===n.liveDurationInfinity?(s.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(s.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},n.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){s.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(o.default.BUFFER_FLUSHED)}},n.prototype.doAppending=function(){var e=this.hls,t=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(this.media.error)return this.segments=[],void s.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(t&&t.length){var r=t.shift();try{var i=n[r.type];i?i.updating?t.unshift(r):(i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(n){s.logger.error("error while trying to append buffer:"+n.message),t.unshift(r);var a={type:l.ErrorTypes.MEDIA_ERROR,parent:r.parent};22!==n.code?(this.appendError?this.appendError++:this.appendError=1,a.details=l.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry?(s.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],a.fatal=!0,e.trigger(o.default.ERROR,a)):(a.fatal=!1,e.trigger(o.default.ERROR,a))):(this.segments=[],a.details=l.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,e.trigger(o.default.ERROR,a))}}}},n.prototype.flushBuffer=function(e,t,n){var r,i=this.sourceBuffer;if(Object.keys(i).length){if(s.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!n||o===n){if((r=i[o]).ended=!1,r.updating)return s.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,r,e,t))return this.flushBufferCounter++,!1}}else s.logger.warn("abort flushing too many retries");s.logger.log("buffer flushed")}return!0},n.prototype.removeBufferRange=function(e,t,n,r){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),a=t.buffered.end(i),l=Math.max(o,n),u=Math.min(a,r);if(Math.min(u,a)-l>.5)return s.logger.log("sb remove "+e+" ["+l+","+u+"], of ["+o+","+a+"], pos:"+this.media.currentTime),t.remove(l,u),!0}}catch(e){s.logger.warn("removeBufferRange failed",e)}return!1},n}(a.default);t.default=c}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=function(t){function n(n){var r=t.call(this,n,o.default.FPS_DROP_LEVEL_CAPPING,o.default.MEDIA_ATTACHING,o.default.MANIFEST_PARSED,o.default.BUFFER_CODECS,o.default.MEDIA_DETACHING)||this;return r.autoLevelCapping=e.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}return i(n,t),n.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},n.prototype.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},n.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},n.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},n.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},n.prototype.onLevelsUpdated=function(e){this.levels=e.levels},n.prototype.onMediaDetaching=function(){this._stopCapping()},n.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},n.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,i){return n.isLevelAllowed(i,t.restrictedLevels)&&i<=e});return n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},n.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},n.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(n.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=n.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=n.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(n,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),n.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,o=e.length-1,a=0;a<e.length;a+=1){var s=e[a];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[a+1])||r.width!==i.width||r.height!==i.height)){o=a;break}}return o},n}(n("./src/event-handler.js").default);t.default=a}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/event-handler.js"),a=n("./src/events.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),u=window.XMLHttpRequest,c="com.widevine.alpha",d="com.microsoft.playready",f=function(e){function t(t){var n=e.call(this,t,a.default.MEDIA_ATTACHED,a.default.MANIFEST_PARSED)||this;return n._widevineLicenseUrl=t.config.widevineLicenseUrl,n._licenseXhrSetup=t.config.licenseXhrSetup,n._emeEnabled=t.config.emeEnabled,n._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,n._mediaKeysList=[],n._media=null,n._hasSetMediaKeys=!1,n._isMediaEncrypted=!1,n._requestLicenseFailureCount=0,n}return i(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case c:t=this._widevineLicenseUrl;break;default:t=null}return t||(l.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n){switch(e){case c:return function(e,t,n){var r={videoCapabilities:[]};return t.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[r]}(0,n);default:throw Error("Unknown key-system: "+e)}}(e,0,n);i?(l.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then(function(t){r._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){l.logger.error('Failed to obtain key-system "'+e+'" access:',t)})):l.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e)},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var n=this;l.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r),t.createMediaKeys().then(function(t){r.mediaKeys=t,l.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated()}).catch(function(e){l.logger.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;l.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(n){t._onKeySessionMessage(e,n.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){l.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){l.logger.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){l.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return l.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});l.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return l.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)l.logger.warn("Key-Session already initialized but requested again");else{var n=t.mediaKeysSession;n||(l.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var r=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;l.logger.log('Generating key-session request for "'+r+'" init data type'),t.mediaKeysSessionInitialized=!0,n.generateRequest(r,i).then(function(){l.logger.debug("Key-session generation succeeded")}).catch(function(t){l.logger.error("Error generating key-session request:",t),e.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},t.prototype._createLicenseXhr=function(e,t,n){var r=new u,i=this._licenseXhrSetup;try{if(i)try{i(r,e)}catch(t){r.open("POST",e,!0),i(r,e)}r.readyState||r.open("POST",e,!0)}catch(e){return l.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n),r},t.prototype._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,l.logger.log("License request succeeded"),r(e.response);else{if(l.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return l.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(n,r)}this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var n;return e.mediaKeySystemDomain===d?l.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===c?n=t:l.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),n},t.prototype._requestLicense=function(e,t){l.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return l.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(a.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);l.logger.log("Sending license request to URL: "+r),i.send(this._generateLicenseRequestChallenge(n,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var n=e.media;this._media=n,n.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),n=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(c,t,n)}},t}(o.default);t.default=f},"./src/controller/fps-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js"),l=window.performance,u=function(e){function t(t){return e.call(this,t,o.default.MEDIA_ATTACHING)||this}return i(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},t.prototype.checkFPS=function(e,t,n){var r=l.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,u=t-this.lastDecodedFrames,c=1e3*a/i,d=this.hls;if(d.trigger(o.default.FPS_DROP,{currentDropped:a,currentDecoded:u,totalDroppedFrames:n}),c>0&&a>d.config.fpsDroppedMonitoringThreshold*u){var f=d.currentLevel;s.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===d.autoLevelCapping||d.autoLevelCapping>=f)&&(f-=1,d.trigger(o.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:d.currentLevel}),d.autoLevelCapping=f,d.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(a.default);t.default=u},"./src/controller/fragment-finders.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/binary-search.js");function i(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function o(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.endProgramDateTime-r>e}t.findFragmentByPDT=function(t,n,r){if(!Array.isArray(t)||!t.length||!e.isFinite(n))return null;if(n<t[0].programDateTime)return null;if(n>=t[t.length-1].endProgramDateTime)return null;r=r||0;for(var i=0;i<t.length;++i){var a=t[i];if(o(n,r,a))return a}return null},t.findFragmentByPTS=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!i(n,o,a)?a:r.default.search(t,i.bind(null,n,o))},t.fragmentWithinToleranceTest=i,t.pdtWithinToleranceTest=o}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/event-handler.js"),a=n("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var s=function(n){function r(e){var t=n.call(this,e,a.default.BUFFER_APPENDED,a.default.FRAG_BUFFERED,a.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return i(r,n),r.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,o.default.prototype.destroy.call(this),n.prototype.destroy.call(this)},r.prototype.getBufferedFrag=function(e,t){var n=this.fragments,r=Object.keys(n).filter(function(r){var i=n[r];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS});if(0===r.length)return null;var i=r.pop();return n[i].body},r.prototype.detectEvictedFragments=function(e,t){var n,r,i=this;Object.keys(this.fragments).forEach(function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){n=s.time;for(var l=0;l<n.length;l++)if(r=n[l],!1===i.isTimeBuffered(r.startPTS,r.endPTS,t)){i.removeFragment(a.body);break}}}})},r.prototype.detectPartialFragments=function(e){var t=this,n=this.getFragmentKey(e),r=this.fragments[n];r&&(r.buffered=!0,Object.keys(this.timeRanges).forEach(function(n){if(e.hasElementaryStream(n)){var i=t.timeRanges[n];r.range[n]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},r.prototype.getBufferedTimes=function(e,t,n){for(var r,i,o=[],a=!1,s=0;s<n.length;s++){if(r=n.start(s)-this.bufferPadding,i=n.end(s)+this.bufferPadding,e>=r&&t<=i){o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<i&&t>r)o.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),a=!0;else if(t<=r)break}return{time:o,partial:a}},r.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},r.prototype.getPartialFragment=function(e){var t,n,r,i=this,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var l=i.fragments[s];i.isPartial(l)&&(n=l.body.startPTS-i.bufferPadding,r=l.body.endPTS+i.bufferPadding,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(o=l.body,a=t)))}),o},r.prototype.getState=function(e){var n=this.getFragmentKey(e),r=this.fragments[n],i=t.FragmentState.NOT_LOADED;return void 0!==r&&(i=r.buffered?!0===this.isPartial(r)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},r.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},r.prototype.isTimeBuffered=function(e,t,n){for(var r,i,o=0;o<n.length;o++){if(r=n.start(o)-this.bufferPadding,i=n.end(o)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},r.prototype.onFragLoaded=function(t){var n=t.frag;e.isFinite(n.sn)&&!n.bitrateTest&&(this.fragments[this.getFragmentKey(n)]={body:n,range:Object.create(null),buffered:!1})},r.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var n=t.timeRanges[e];t.detectEvictedFragments(e,n)})},r.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},r.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},r.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},r.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},r}(o.default);t.FragmentTracker=s}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/buffer-helper.js"),i=n("./src/errors.js"),o=n("./src/events.js"),a=n("./src/utils/logger.js"),s=function(){function e(e,t,n,r){this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r,this.stallReported=!1}return e.prototype.poll=function(e,t){var n=this.config,i=this.media,o=i.currentTime,s=window.performance.now();if(o!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+o+", after "+Math.round(s-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(i.ended||!i.buffered.length||i.readyState>2||i.seeking&&r.BufferHelper.isBuffered(i,o))){var l=s-this.stalled,u=r.BufferHelper.bufferInfo(i,o,n.maxBufferHole);this.stalled?(l>=1e3&&this._reportStall(u.len),this._tryFixBufferStall(u,l)):this.stalled=s}},e.prototype._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media.currentTime,o=r.getPartialFragment(i);o&&this._trySkipBufferHole(o),e.len>.5&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this.hls,n=this.media;this.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this.hls,n=this.media,r=n.currentTime,s=0,l=0;l<n.buffered.length;l++){var u=n.buffered.start(l);if(r>=s&&r<u)return n.currentTime=Math.max(u,n.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+r+" to "+n.currentTime),this.stalled=null,void t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+r+" to "+n.currentTime,frag:e});s=n.buffered.end(l)}},e.prototype._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=n.currentTime,s=(this.nudgeRetry||0)+1;if(this.nudgeRetry=s,s<e.nudgeMaxRetry){var l=r+s*e.nudgeOffset;a.logger.log("adjust currentTime from "+r+" to "+l),n.currentTime=l,t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+r+" after "+e.nudgeMaxRetry+", raise fatal error"),t.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/demux/id3.js"),l=n("./src/utils/texttrack-utils.js"),u=function(e){function t(t){var n=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_METADATA)||this;return n.id3Track=void 0,n.media=void 0,n}return i(t,e),t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){l.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return l.sendAddTrackEvent(n,this.media),n}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var o=s.default.getID3Frames(n[i].data);if(o){var a=n[i].pts,l=i<n.length-1?n[i+1].pts:t.endPTS;a===l&&(l+=1e-4);for(var u=0;u<o.length;u++){var c=o[u];if(!s.default.isTimeStampFrame(c)){var d=new r(a,l,"");d.value=c,this.id3Track.addCue(d)}}}}},t}(a.default);t.default=u},"./src/controller/level-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o,a=n("./src/events.js"),s=n("./src/event-handler.js"),l=n("./src/utils/logger.js"),u=n("./src/errors.js"),c=n("./src/utils/codecs.js"),d=n("./src/controller/level-helper.js"),f=window.performance,p=function(e){function t(t){var n=e.call(this,t,a.default.MANIFEST_LOADED,a.default.LEVEL_LOADED,a.default.AUDIO_TRACK_SWITCHED,a.default.FRAG_LOADED,a.default.ERROR)||this;return n.canload=!1,n.currentLevelIndex=null,n.manualLevelIndex=-1,n.timer=null,o=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),n}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,n=[],r=[],i={},s=null,f=!1,p=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,p=p||!!e.audioCodec,o&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(s=i[e.bitrate])?s.url.push(e.url):(e.url=[e.url],e.urlId=0,i[e.bitrate]=e,n.push(e)),t&&(t.AUDIO&&(p=!0,d.addGroupId(s||e,"audio",t.AUDIO)),t.SUBTITLES&&d.addGroupId(s||e,"text",t.SUBTITLES))}),f&&p&&(n=n.filter(function(e){return!!e.videoCodec})),n=n.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||c.isCodecSupportedInMp4(t))&&(!n||c.isCodecSupportedInMp4(n))}),e.audioTracks&&(r=e.audioTracks.filter(function(e){return!e.audioCodec||c.isCodecSupportedInMp4(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),n.length>0){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var h=0;h<n.length;h++)if(n[h].bitrate===t){this._firstLevel=h,l.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(a.default.MANIFEST_PARSED,{levels:n,audioTracks:r,firstLevel:this._firstLevel,stats:e.stats,audio:p,video:f,altAudio:r.some(function(e){return!!e.url})})}else this.hls.trigger(a.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){l.logger.log("switching to level "+e),this.currentLevelIndex=e;var r=t[e];r.level=e,n.trigger(a.default.LEVEL_SWITCHING,r)}var i=t[e],o=i.details;if(!o||o.live){var s=i.urlId;n.trigger(a.default.LEVEL_LOADING,{url:i.url[s],level:e,id:s})}}else n.trigger(a.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)e.type===u.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,n=!1,r=!1;switch(e.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,r=!0;break;case u.ErrorDetails.LEVEL_LOAD_ERROR:case u.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,n=!0;break;case u.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,n=!0}void 0!==t&&this.recoverLevel(e,t,n,r)}},t.prototype.recoverLevel=function(e,t,n,r){var i,o,a,s=this,u=this.hls.config,c=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=r,n){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return l.logger.error("level controller, cannot recover from "+c+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},o),e.levelRetry=!0,this.levelRetryCount++,l.logger.warn("level controller, "+c+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(n||r)&&((i=d.url.length)>1&&d.loadError<i?(d.urlId=(d.urlId+1)%i,d.details=void 0,l.logger.warn("level controller, "+c+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,l.logger.warn("level controller, "+c+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):r&&(l.logger.warn("level controller, "+c+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this.currentLevelIndex){var r=this._levels[n];r.fragmentError||(r.loadError=0,this.levelRetryCount=0);var i=e.details;if(i.live){var o=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),a=o,s=r.details;s&&i.endSN===s.endSN&&(a/=2,l.logger.log("same live playlist, reload twice faster")),a-=f.now()-e.stats.trequest,a=Math.max(o/2,Math.round(a)),l.logger.log("live playlist, reload in "+Math.round(a)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},a)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){var r=n.audioGroupIds.findIndex(function(e){return e===t});r!==n.urlId&&(n.urlId=r,this.startLoad())}},t.prototype.loadLevel=function(){if(l.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,n=e.urlId,r=e.url[n];l.logger.log("Attempt loading level index "+t+" with URL-id "+n),this.hls.trigger(a.default.LEVEL_LOADING,{url:r,level:t,id:n})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(s.default);t.default=p},"./src/controller/level-helper.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js");function i(t,n,i){var o=t[n],a=t[i],s=a.startPTS;e.isFinite(s)?i>n?(o.duration=s-o.start,o.duration<0&&r.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):(a.duration=o.start-s,a.duration<0&&r.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=i>n?o.start+o.duration:Math.max(o.start-a.duration,0)}function o(t,n,r,o,a,s){var l=r;if(e.isFinite(n.startPTS)){var u=Math.abs(n.startPTS-r);e.isFinite(n.deltaPTS)?n.deltaPTS=Math.max(u,n.deltaPTS):n.deltaPTS=u,l=Math.max(r,n.startPTS),r=Math.min(r,n.startPTS),o=Math.max(o,n.endPTS),a=Math.min(a,n.startDTS),s=Math.max(s,n.endDTS)}var c=r-n.start;n.start=n.startPTS=r,n.maxStartPTS=l,n.endPTS=o,n.startDTS=a,n.endDTS=s,n.duration=o-r;var d,f,p,h=n.sn;if(!t||h<t.startSN||h>t.endSN)return 0;for(d=h-t.startSN,(f=t.fragments)[d]=n,p=d;p>0;p--)i(f,p,p-1);for(p=d;p<f.length-1;p++)i(f,p,p+1);return t.PTSKnown=!0,c}t.addGroupId=function(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}},t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=function(t,n){var i,a=Math.max(t.startSN,n.startSN)-n.startSN,s=Math.min(t.endSN,n.endSN)-n.startSN,l=n.startSN-t.startSN,u=t.fragments,c=n.fragments,d=0;if(n.initSegment&&t.initSegment&&(n.initSegment=t.initSegment),s<a)n.PTSKnown=!1;else{for(var f=a;f<=s;f++){var p=u[l+f],h=c[f];h&&p&&(d=p.cc-h.cc,e.isFinite(p.startPTS)&&(h.start=h.startPTS=p.startPTS,h.endPTS=p.endPTS,h.duration=p.duration,h.backtracked=p.backtracked,h.dropped=p.dropped,i=h))}if(d)for(r.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<c.length;f++)c[f].cc+=d;if(i)o(n,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(l>=0&&l<u.length){var g=u[l].start;for(f=0;f<c.length;f++)c[f].start+=g}n.PTSKnown=t.PTSKnown}}}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/utils/binary-search.js"),a=n("./src/utils/buffer-helper.js"),s=n("./src/demux/demuxer.js"),l=n("./src/events.js"),u=n("./src/controller/fragment-tracker.js"),c=n("./src/loader/fragment.js"),d=n("./src/loader/playlist-loader.js"),f=n("./src/controller/level-helper.js"),p=n("./src/utils/time-ranges.js"),h=n("./src/errors.js"),g=n("./src/utils/logger.js"),m=n("./src/utils/discontinuities.js"),v=n("./src/controller/fragment-finders.js"),y=n("./src/controller/gap-controller.js"),_=n("./src/controller/base-stream-controller.js"),b=function(t){function n(e,n){var r=t.call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.MANIFEST_LOADING,l.default.MANIFEST_PARSED,l.default.LEVEL_LOADED,l.default.KEY_LOADED,l.default.FRAG_LOADED,l.default.FRAG_LOAD_EMERGENCY_ABORTED,l.default.FRAG_PARSING_INIT_SEGMENT,l.default.FRAG_PARSING_DATA,l.default.FRAG_PARSED,l.default.ERROR,l.default.AUDIO_TRACK_SWITCHING,l.default.AUDIO_TRACK_SWITCHED,l.default.BUFFER_CREATED,l.default.BUFFER_APPENDED,l.default.BUFFER_FLUSHED)||this;return r.fragmentTracker=n,r.config=e.config,r.audioCodecSwap=!1,r._state=_.State.STOPPED,r.stallReported=!1,r.gapController=null,r}return i(n,t),n.prototype.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},n.prototype.onHandlerDestroyed=function(){this.state=_.State.STOPPED,this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},n.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(g.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=_.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=_.State.STOPPED},n.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=_.State.STOPPED,this.forceStartLoad=!1},n.prototype.doTick=function(){switch(this.state){case _.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case _.State.IDLE:this._doTickIdle();break;case _.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=_.State.IDLE);break;case _.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(g.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=_.State.IDLE);break;case _.State.ERROR:case _.State.STOPPED:case _.State.FRAG_LOADING:case _.State.PARSING:case _.State.PARSED:case _.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},n.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var s,u=o.bitrate;s=u?Math.max(8*t.maxBufferSize/u,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var c=a.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),d=c.len;if(!(d>=s)){g.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=o.details;if(!f||f.live&&this.levelLastLoaded!==i)this.state=_.State.WAITING_LEVEL;else{if(this._streamEnded(c,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(l.default.BUFFER_EOS,p),void(this.state=_.State.ENDED)}this._fetchPayloadOrEos(r,c,f)}}}}},n.prototype._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,o=n.fragments,a=o.length;if(0!==a){var s,l=o[0].start,u=o[a-1].start+o[a-1].duration,c=t.end;if(n.initSegment&&!n.initSegment.data)s=n.initSegment;else if(n.live){var d=this.config.initialLiveManifestSize;if(a<d)return void g.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(null===(s=this._ensureFragmentAtLivePoint(n,c,l,u,r,o,a)))return}else c<l&&(s=o[0]);s||(s=this._findFragment(l,r,a,o,c,u,n)),s&&(s.encrypted?(g.logger.log("Loading key for "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i),this._loadKey(s)):(g.logger.log("Loading "+s.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+c.toFixed(3)),this._loadFragment(s)))}},n.prototype._ensureFragmentAtLivePoint=function(e,t,n,r,i,a,s){var l,u=this.hls.config,c=this.media,d=void 0!==u.liveMaxLatencyDuration?u.liveMaxLatencyDuration:u.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-u.maxFragLookUpTolerance,r-d)){var f=this.liveSyncPosition=this.computeLivePosition(n,e);g.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,c&&c.readyState&&c.duration>f&&(c.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>r&&c&&c.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.hasProgramDateTime)g.logger.log("live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),l=v.findFragmentByPDT(a,i.endProgramDateTime,u.maxFragLookUpTolerance);else{var p=i.sn+1;if(p>=e.startSN&&p<=e.endSN){var h=a[p-e.startSN];i.cc===h.cc&&(l=h,g.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=o.default.search(a,function(e){return i.cc-e.cc}))&&g.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],g.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},n.prototype._findFragment=function(e,t,n,r,i,o,a){var s,l=this.hls.config;if(i<o){var u=i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=v.findFragmentByPTS(t,r,i,u)}else s=r[n-1];if(s){var c=s.sn-a.startSN,d=t&&s.level===t.level,f=r[c-1],p=r[c+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<a.endSN){var h=t.deltaPTS;h&&h>l.maxBufferHole&&t.dropped&&c?(s=f,g.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=p,g.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(p&&p.backtracked?(g.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(g.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:c&&(s=null)))}return s},n.prototype._loadKey=function(e){this.state=_.State.KEY_LOADING,this.hls.trigger(l.default.KEY_LOADING,{frag:e})},n.prototype._loadFragment=function(t){var n=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||n===u.FragmentState.NOT_LOADED||n===u.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(l.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new s.default(this.hls,"main")),this.state=_.State.FRAG_LOADING):n===u.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,g.logger.log("main stream:"+t+"->"+e),this.hls.trigger(l.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),n.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,d.default.LevelType.MAIN)},Object.defineProperty(n.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),n.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(n.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),n.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),a.BufferHelper.isBuffered(n,t)?e=this.getBufferedFrag(t):a.BufferHelper.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(l.default.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(l.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},n.prototype.immediateLevelSwitch=function(){if(g.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,n=void 0;t?(n=t.paused,t.pause()):n=!0,this.previouslyPaused=n}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},n.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,a.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},n.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var n,r=void 0,i=void 0;if((n=this.getBufferedFrag(t.currentTime))&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)r=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+r))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},n.prototype.flushMainBuffer=function(e,t){this.state=_.State.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(l.default.BUFFER_FLUSHING,n)},n.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition),this.gapController=new y.default(n,t,this.fragmentTracker,this.hls)},n.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(g.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},n.prototype.onMediaSeeked=function(){var t=this.media,n=t?t.currentTime:void 0;e.isFinite(n)&&g.logger.log("media seeked to "+n.toFixed(3)),this.tick()},n.prototype.onManifestLoading=function(){g.logger.log("trigger BUFFER_RESET"),this.hls.trigger(l.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},n.prototype.onManifestParsed=function(e){var t,n=!1,r=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(r=!0))}),this.audioCodecSwitch=n&&r,this.audioCodecSwitch&&g.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},n.prototype.onLevelLoaded=function(t){var n=t.details,r=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[r],a=n.totalduration,s=0;if(g.logger.log("level "+r+" loaded ["+n.startSN+","+n.endSN+"],duration:"+a),n.live){var u=o.details;u&&n.fragments.length>0?(f.mergeDetails(u,n),s=n.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(s,u),n.PTSKnown&&e.isFinite(s)?g.logger.log("live playlist sliding:"+s.toFixed(3)):(g.logger.log("live playlist - outdated PTS, unknown sliding"),m.alignStream(this.fragPrevious,i,n))):(g.logger.log("live playlist - first load, unknown sliding"),n.PTSKnown=!1,m.alignStream(this.fragPrevious,i,n))}else n.PTSKnown=!1;if(o.details=n,this.levelLastLoaded=r,this.hls.trigger(l.default.LEVEL_UPDATED,{details:n,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var c=n.startTimeOffset;e.isFinite(c)?(c<0&&(g.logger.log("negative start time offset "+c+", count from end of last fragment"),c=s+a+c),g.logger.log("start time offset found in playlist, adjust startPosition to "+c),this.startPosition=c):n.live?(this.startPosition=this.computeLivePosition(s,n),g.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===_.State.WAITING_LEVEL&&(this.state=_.State.IDLE),this.tick()},n.prototype.onKeyLoaded=function(){this.state===_.State.KEY_LOADING&&(this.state=_.State.IDLE,this.tick())},n.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=this.hls,r=this.levels,i=this.media,o=e.frag;if(this.state===_.State.FRAG_LOADING&&t&&"main"===o.type&&o.level===t.level&&o.sn===t.sn){var a=e.stats,u=r[t.level],c=u.details;if(this.bitrateTest=!1,this.stats=a,g.logger.log("Loaded "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level),o.bitrateTest&&n.nextLoadLevel)this.state=_.State.IDLE,this.startFragRequested=!1,a.tparsed=a.tbuffered=window.performance.now(),n.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else if("initSegment"===o.sn)this.state=_.State.IDLE,a.tparsed=a.tbuffered=window.performance.now(),c.initSegment.data=e.payload,n.trigger(l.default.FRAG_BUFFERED,{stats:a,frag:t,id:"main"}),this.tick();else{g.logger.log("Parsing "+t.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+t.level+", cc "+t.cc),this.state=_.State.PARSING,this.pendingBuffering=!0,this.appended=!1,o.bitrateTest&&(o.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:o}));var d=!(i&&i.seeking)&&(c.PTSKnown||!c.live),f=c.initSegment?c.initSegment.data:[],p=this._getAudioCodec(u);(this.demuxer=this.demuxer||new s.default(this.hls,"main")).push(e.payload,f,p,u.videoCodec,t,c.totalduration,d)}}this.fragLoadError=0},n.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_.State.PARSING){var r=e.tracks,i=void 0,o=void 0;if(r.audio&&this.altAudio&&delete r.audio,o=r.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===s.indexOf("firefox")&&(a="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",g.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}for(i in(o=r.video)&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(l.default.BUFFER_CODECS,r),r){o=r[i],g.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var u=o.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(l.default.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},n.prototype.onFragParsingData=function(t){var n=this,r=this.fragCurrent,i=t.frag;if(r&&"main"===t.id&&i.sn===r.sn&&i.level===r.level&&("audio"!==t.type||!this.altAudio)&&this.state===_.State.PARSING){var o=this.levels[this.level],a=r;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+r.duration,t.endDTS=t.startDTS+r.duration),!0===t.hasAudio&&a.addElementaryStream(c.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(c.default.ElementaryStreamTypes.VIDEO),g.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)g.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var s=o.details;if(!s||a.sn!==s.startSN)return g.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=_.State.IDLE,this.fragPrevious=a,void this.tick();g.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var u=f.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),d=this.hls;d.trigger(l.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&n.state===_.State.PARSING&&(n.appended=!0,n.pendingBuffering=!0,d.trigger(l.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},n.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===_.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=_.State.PARSED,this._checkAppendedParsed())},n.prototype.onAudioTrackSwitching=function(t){var n=!!t.url,r=t.id;if(!n){if(this.mediaBuffer!==this.media){g.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(g.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=_.State.IDLE}var o=this.hls;o.trigger(l.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(l.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},n.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(g.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},n.prototype.onBufferCreated=function(e){var t,n,r=e.tracks,i=!1;for(var o in r){var a=r[o];"main"===a.id?(n=o,t=a,"video"===o&&(this.videoBuffer=r[o].buffer)):i=!0}i&&t?(g.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},n.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==_.State.PARSING&&t!==_.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},n.prototype._checkAppendedParsed=function(){if(!(this.state!==_.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;g.logger.log("main buffered : "+p.default.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(l.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=_.State.IDLE}this.tick()}},n.prototype.onError=function(t){var n=t.frag||this.fragCurrent;if(!n||"main"===n.type){var r=!!this.media&&a.BufferHelper.isBuffered(this.media,this.media.currentTime)&&a.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);g.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=_.State.FRAG_LOADING_WAITING_RETRY}else g.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=_.State.ERROR;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==_.State.ERROR&&(t.fatal?(this.state=_.State.ERROR,g.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==_.State.WAITING_LEVEL||(this.state=_.State.IDLE));break;case h.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==_.State.PARSING&&this.state!==_.State.PARSED||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=_.State.IDLE):(g.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},n.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,g.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},n.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},n.prototype.onFragLoadEmergencyAborted=function(){this.state=_.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},n.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(c.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=_.State.IDLE,this.fragPrevious=null},n.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},n.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},n.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,n=e.seeking?t:this.startPosition;t!==n&&(g.logger.log("target start position not buffered, seek to buffered.start(0) "+n+" from current time "+t+" "),e.currentTime=n)},n.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(g.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(n.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),n}(_.default);t.default=b}).call(this,n("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/utils/logger.js"),s=n("./src/crypt/decrypter.js"),l=n("./src/task-loop.js"),u=n("./src/utils/buffer-helper.js"),c=n("./src/controller/fragment-finders.js"),d=n("./src/controller/fragment-tracker.js"),f=window.performance;t.SubtitleStreamControllerState={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"};var p=t.SubtitleStreamControllerState,h=function(e){function t(t,n){var r=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.ERROR,o.default.KEY_LOADED,o.default.FRAG_LOADED,o.default.SUBTITLE_TRACKS_UPDATED,o.default.SUBTITLE_TRACK_SWITCH,o.default.SUBTITLE_TRACK_LOADED,o.default.SUBTITLE_FRAG_PROCESSED)||this;return r.fragmentTracker=n,r.config=t.config,r.state=p.STOPPED,r.tracks=[],r.tracksBuffered=[],r.currentTrackId=-1,r.decrypter=new s.default(t,t.config),r}return i(t,e),t.prototype.onHandlerDestroyed=function(){this.fragmentTracker=null,this.state=p.STOPPED,e.prototype.onHandlerDestroyed.call(this)},t.prototype.onSubtitleFragProcessed=function(e){if(this.state=p.IDLE,e.success){var t=this.tracksBuffered[this.currentTrackId],n=e.frag;if(this.fragPrevious=n,t){for(var r,i=0;i<t.length;i++)if(n.start>=t[i].start&&n.start<=t[i].end){r=t[i];break}r?r.end=n.start+n.duration:t.push({start:n.start,end:n.start+n.duration})}}},t.prototype.onMediaAttached=function(e){this.media=e.media,this.state=p.IDLE},t.prototype.onMediaDetaching=function(){this.media=null,this.state=p.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=p.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;a.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,n=e.details;this.tracks?(this.tracks[t]&&(a.logger.log("Updating subtitle track details"),this.tracks[t].details=n),this.setInterval(500)):a.logger.warn("Can not update subtitle details, no tracks found")},t.prototype.onKeyLoaded=function(){this.state===p.KEY_LOADING&&(this.state=p.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===p.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&n&&n.key&&"AES-128"===n.method){var a=f.now();this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t=f.now();i.trigger(o.default.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t.prototype.doTick=function(){if(this.media)switch(this.state){case p.IDLE:var e=this.tracks,t=this.currentTrackId;if(!e||!e[t]||!e[t].details)break;var n=e[t].details,r=this.config,i=r.maxBufferHole,s=Math.min(r.maxBufferLength,r.maxMaxBufferLength),l=r.maxFragLookUpTolerance,f=u.BufferHelper.bufferedInfo(this._getBuffered(),this.media.currentTime,i),h=f.end,g=f.len,m=n.fragments,v=m.length,y=m[v-1].start+m[v-1].duration,_=void 0;g<s&&h<y?_=c.findFragmentByPTS(this.fragPrevious,m,h,l):n.hasProgramDateTime&&this.fragPrevious&&(_=c.findFragmentByPDT(m,this.fragPrevious.endProgramDateTime,l)),_&&_.encrypted?(a.logger.log("Loading key for "+_.sn),this.state=p.KEY_LOADING,this.hls.trigger(o.default.KEY_LOADING,{frag:_})):_&&this.fragmentTracker.getState(_)===d.FragmentState.NOT_LOADED&&(_.trackId=t,this.fragCurrent=_,this.state=p.FRAG_LOADING,this.hls.trigger(o.default.FRAG_LOADING,{frag:_}))}else this.state=p.IDLE},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId].buffered||[]},t}(l.default);t.SubtitleStreamController=h},"./src/controller/subtitle-track-controller.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/logger.js");function l(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}var u=function(e){function t(t){var n=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.SUBTITLE_TRACK_LOADED)||this;return n.tracks=[],n.trackId=-1,n.media=null,n.subtitleDisplay=!0,n}return i(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=l(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},t.prototype.destroy=function(){a.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(o.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;n&&!n.live||(s.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(s.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&this._stopTimer())},Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this.setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setSubtitleTrackInternal=function(e){var t=this.hls,n=this.tracks;if(!("number"!=typeof e||e<-1||e>=n.length)&&(this._stopTimer(),this.trackId=e,s.logger.log("switching to subtitle track "+e),t.trigger(o.default.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e)){var r=n[e],i=r.details;i&&!i.live||(s.logger.log("(re)loading playlist for subtitle track "+e),t.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:r.url,id:e}))}},t.prototype._stopTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.prototype._toggleTrackModes=function(e){var t=this.media,n=this.subtitleDisplay,r=this.trackId;if(t){var i=l(t.textTracks);if(-1===e)[].slice.call(i).forEach(function(e){e.mode="disabled"});else{var o=i[r];o&&(o.mode="disabled")}var a=i[e];a&&(a.mode=n?"showing":"hidden")}},t}(a.default);t.default=u},"./src/controller/timeline-controller.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/utils/cea-608-parser.js"),l=n("./src/utils/output-filter.js"),u=n("./src/utils/webvtt-parser.js"),c=n("./src/utils/logger.js"),d=n("./src/utils/texttrack-utils.js");var f=function(t){function n(e){var n=t.call(this,e,o.default.MEDIA_ATTACHING,o.default.MEDIA_DETACHING,o.default.FRAG_PARSING_USERDATA,o.default.FRAG_DECRYPTED,o.default.MANIFEST_LOADING,o.default.MANIFEST_LOADED,o.default.FRAG_LOADED,o.default.LEVEL_SWITCHING,o.default.INIT_PTS_FOUND)||this;if(n.hls=e,n.config=e.config,n.enabled=!0,n.Cues=e.config.cueHandler,n.textTracks=[],n.tracks=[],n.unparsedVttFrags=[],n.initPTS=[],n.cueRanges=[],n.captionsTracks={},n.captionsProperties={textTrack1:{label:n.config.captionsTextTrack1Label,languageCode:n.config.captionsTextTrack1LanguageCode},textTrack2:{label:n.config.captionsTextTrack2Label,languageCode:n.config.captionsTextTrack2LanguageCode}},n.config.enableCEA708Captions){var r=new l.default(n,"textTrack1"),i=new l.default(n,"textTrack2");n.cea608Parser=new s.default(0,r,i)}return n}return i(n,t),n.prototype.addCues=function(e,t,n,r){for(var i,o,a,s,l=this.cueRanges,u=!1,c=l.length;c--;){var d=l[c],f=(i=d[0],o=d[1],a=t,s=n,Math.min(o,s)-Math.max(i,a));if(f>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],n),u=!0,f/(n-t)>.5))return}u||l.push([t,n]),this.Cues.newCue(this.captionsTracks[e],t,n,r)},n.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var n=this.unparsedVttFrags;this.unparsedVttFrags=[],n.forEach(function(e){t.onFragLoaded(e)})}},n.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},n.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],n=t.label,r=t.languageCode,i=this.captionsTracks;if(!i[e]){var o=this.getExistingTrack(e);if(o)i[e]=o,d.clearCurrentCues(i[e]),d.sendAddTrackEvent(i[e],this.media);else{var a=this.createTextTrack("captions",n,r);a&&(a[e]=!0,i[e]=a)}}},n.prototype.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},n.prototype.destroy=function(){a.default.prototype.destroy.call(this)},n.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},n.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){d.clearCurrentCues(e[t]),delete e[t]})},n.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},n.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)d.clearCurrentCues(t[n])}},n.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,r){var i;if(r<n.length){var o=[].slice.call(n).find(function(t){return function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}(t,e)});o&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),e.default?i.mode=t.hls.subtitleDisplay?"showing":"hidden":i.mode="disabled",t.textTracks.push(i)})}},n.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},n.prototype.onFragLoaded=function(t){var n=t.frag,r=t.payload;if("main"===n.type){var i=n.sn;if(i!==this.lastSn+1){var a=this.cea608Parser;a&&a.reset()}this.lastSn=i}else if("subtitle"===n.type)if(r.byteLength){if(!e.isFinite(this.initPTS[n.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n}));var s=n.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(n,r)}else this.hls.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n})},n.prototype._parseVTTs=function(e,t){var n=this.vttCCs;n[e.cc]||(n[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var r=this.textTracks,i=this.hls;u.default.parse(t,this.initPTS[e.cc],n,e.cc,function(t){var n=r[e.trackId];"disabled"!==n.mode?(t.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(r){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){c.logger.log("Failed to parse VTT cue: "+t),i.trigger(o.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},n.prototype.onFragDecrypted=function(t){var n=t.payload,r=t.frag;if("subtitle"===r.type){if(!e.isFinite(this.initPTS[r.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(r,n)}},n.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},n.prototype.extractCea608Data=function(e){for(var t,n,r,i=31&e[0],o=2,a=[],s=0;s<i;s++)t=e[o++],n=127&e[o++],r=127&e[o++],0===n&&0===r||0!=(4&t)&&0===(3&t)&&(a.push(n),a.push(r));return a},n}(a.default);t.default=f}).call(this,n("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=r},"./src/crypt/aes-decryptor.js":function(e,t,n){"use strict";function r(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=r;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],o=n[2],a=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),p=0,h=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=h^h<<1^h<<2^h<<3^h<<4;m=m>>>8^255&m^99,e[p]=m,t[m]=p;var v=f[p],y=f[v],_=f[y],b=257*f[m]^16843008*m;r[p]=b<<24|b>>>8,i[p]=b<<16|b>>>16,o[p]=b<<8|b>>>24,a[p]=b,b=16843009*_^65537*y^257*v^16843008*p,l[m]=b<<24|b>>>8,u[m]=b<<16|b>>>16,c[m]=b<<8|b>>>24,d[m]=b,p?(p=v^f[f[f[_^v]]],h^=f[f[h]]):p=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,l,u=this.ksRows=4*(i+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,p=this.rcon,h=this.invSubMix,g=h[0],m=h[1],v=h[2],y=h[3];for(o=0;o<u;o++)o<i?s=c[o]=t[o]:(l=s,o%i==0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=p[o/i|0]<<24):i>6&&o%i==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[o]=s=(c[o-i]^l)>>>0);for(a=0;a<u;a++)o=u-a,l=3&a?c[o]:c[o-4],d[a]=a<4||o<=4?l:g[f[l>>>24]]^m[f[l>>>16&255]]^v[f[l>>>8&255]]^y[f[255&l]],d[a]=d[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n,i){for(var o,a,s,l,u,c,d,f,p,h,g,m,v,y,_=this.keySize+6,b=this.invKeySchedule,E=this.invSBox,S=this.invSubMix,w=S[0],T=S[1],A=S[2],I=S[3],P=this.uint8ArrayToUint32Array_(n),C=P[0],k=P[1],L=P[2],R=P[3],D=new Int32Array(e),O=new Int32Array(D.length),M=this.networkToHostOrderSwap;t<D.length;){for(p=M(D[t]),h=M(D[t+1]),g=M(D[t+2]),m=M(D[t+3]),u=p^b[0],c=m^b[1],d=g^b[2],f=h^b[3],v=4,y=1;y<_;y++)o=w[u>>>24]^T[c>>16&255]^A[d>>8&255]^I[255&f]^b[v],a=w[c>>>24]^T[d>>16&255]^A[f>>8&255]^I[255&u]^b[v+1],s=w[d>>>24]^T[f>>16&255]^A[u>>8&255]^I[255&c]^b[v+2],l=w[f>>>24]^T[u>>16&255]^A[c>>8&255]^I[255&d]^b[v+3],u=o,c=a,d=s,f=l,v+=4;o=E[u>>>24]<<24^E[c>>16&255]<<16^E[d>>8&255]<<8^E[255&f]^b[v],a=E[c>>>24]<<24^E[d>>16&255]<<16^E[f>>8&255]<<8^E[255&u]^b[v+1],s=E[d>>>24]<<24^E[f>>16&255]<<16^E[u>>8&255]<<8^E[255&c]^b[v+2],l=E[f>>>24]<<24^E[u>>16&255]<<16^E[c>>8&255]<<8^E[255&d]^b[v+3],v+=3,O[t]=M(o^C),O[t+1]=M(l^k),O[t+2]=M(s^L),O[t+3]=M(a^R),C=p,k=h,L=g,R=m,t+=4}return i?r(O.buffer):O.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/crypt/aes-crypto.js"),i=n("./src/crypt/fast-aes-key.js"),o=n("./src/crypt/aes-decryptor.js"),a=n("./src/errors.js"),s=n("./src/utils/logger.js"),l=n("./src/events.js"),u=n("./src/utils/get-self-scope.js").getSelfScope(),c=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=u.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new o.default),u.expandKey(t),a(u.decrypt(e,0,n,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(c,t)),this.fastAesKey.expandKey().then(function(i){new r.default(c,n).decrypt(e,i).catch(function(r){l.onWebCryptoError(r,e,t,n,a)}).then(function(e){a(e)})}).catch(function(r){l.onWebCryptoError(r,e,t,n,a)})}},e.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/crypt/fast-aes-key.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=r},"./src/demux/aacdemuxer.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/adts.js"),i=n("./src/utils/logger.js"),o=n("./src/demux/id3.js"),a=function(){function t(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=(o.default.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(r.probe(e,t))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,n,a,s){for(var l=this._audioTrack,u=o.default.getID3Data(t,0)||[],c=o.default.getTimeStamp(u),d=e.isFinite(c)?90*c:9e4*n,f=0,p=d,h=t.length,g=u.length,m=[{pts:p,dts:p,data:u}];g<h-1;)if(r.isHeader(t,g)&&g+5<h){r.initTrackConfig(l,this.observer,t,g,l.manifestCodec);var v=r.appendFrame(l,t,g,d,f);if(!v){i.logger.log("Unable to parse AAC frame");break}g+=v.length,p=v.sample.pts,f++}else o.default.isHeader(t,g)?(u=o.default.getID3Data(t,g),m.push({pts:p,dts:p,data:u}),g+=u.length):g++;this.remuxer.remux(l,{samples:[]},{samples:m,inputTimeScale:9e4},{samples:[]},n,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,n("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/errors.js"),o=n("./src/events.js");function a(e,t,n,a){var s,l,u,c,d,f=navigator.userAgent.toLowerCase(),p=a,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(s=1+((192&t[n+2])>>>6),!((l=(60&t[n+2])>>>2)>h.length-1))return c=(1&t[n+2])<<2,c|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+a+",ADTS data:type:"+s+",sampleingIndex:"+l+"["+h[l]+"Hz],channelConfig:"+c),/firefox/i.test(f)?l>=6?(s=5,d=new Array(4),u=l-3):(s=2,d=new Array(2),u=l):-1!==f.indexOf("android")?(s=2,d=new Array(2),u=l):(s=5,d=new Array(4),a&&(-1!==a.indexOf("mp4a.40.29")||-1!==a.indexOf("mp4a.40.5"))||!a&&l>=6?u=l-3:((a&&-1!==a.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(f))||!a&&1===c)&&(s=2,d=new Array(2)),u=l)),d[0]=s<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===s&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:h[l],channelCount:c,codec:"mp4a.40."+s,manifestCodec:p};e.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e){return 9216e4/e}function d(e,t,n,r,i){var o,a,s=e.length;if(o=l(e,t),a=u(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:n+r*i}}t.getAudioConfig=a,t.isHeaderPattern=s,t.getHeaderLength=l,t.getFullFrameLength=u,t.isHeader=function(e,t){return!!(t+1<e.length&&s(e,t))},t.probe=function(e,t){if(t+1<e.length&&s(e,t)){var n=l(e,t);t+5<e.length&&(n=u(e,t));var r=t+n;if(r===e.length||r+1<e.length&&s(e,r))return!0}return!1},t.initTrackConfig=function(e,t,n,i,o){if(!e.samplerate){var s=a(t,n,i,o);e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,r.logger.log("parsed codec:"+e.codec+",rate:"+s.samplerate+",nb channel:"+s.channelCount)}},t.getFrameDuration=c,t.parseFrameHeader=d,t.appendFrame=function(e,t,n,r,i){var o=d(t,n,r,i,c(e.samplerate));if(o){var a=o.stamp,s=o.headerLength,l=o.frameLength,u={unit:t.subarray(n+s,n+s+l),pts:a,dts:a};return e.samples.push(u),e.len+=l,{sample:u,length:l+s}}}},"./src/demux/demuxer-inline.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("./src/events.js"),o=n("./src/errors.js"),a=n("./src/crypt/decrypter.js"),s=n("./src/demux/aacdemuxer.js"),l=n("./src/demux/mp4demuxer.js"),u=n("./src/demux/tsdemuxer.js"),c=n("./src/demux/mp3demuxer.js"),d=n("./src/remux/mp4-remuxer.js"),f=n("./src/remux/passthrough-remuxer.js"),p=n("./src/utils/get-self-scope.js"),h=n("./src/utils/logger.js"),g=p.getSelfScope();try{r=g.performance.now.bind(g.performance)}catch(e){h.logger.debug("Unable to use Performance API on this environment"),r=g.Date.now}var m=function(){function e(e,t,n,r){this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,o,s,l,u,c,d,f,p,h){var g=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var m=this.decrypter;null==m&&(m=this.decrypter=new a.default(this.observer,this.config));var v=r();m.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a=r();g.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:v,tdecrypt:a}}),g.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),o,s,l,u,c,d,f,p,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),o,s,l,u,c,d,f,p,h)},e.prototype.pushDecrypted=function(e,t,n,r,a,p,h,g,m,v,y,_){var b=this.demuxer;if(!b||(h||g)&&!this.probe(e)){for(var E=this.observer,S=this.typeSupported,w=this.config,T=[{demux:u.default,remux:d.default},{demux:l.default,remux:f.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],A=0,I=T.length;A<I;A++){var P=T[A],C=P.demux.probe;if(C(e)){var k=this.remuxer=new P.remux(E,w,S,this.vendor);b=new P.demux(E,k,w,S),this.probe=C;break}}if(!b)return void E.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var L=this.remuxer;(h||g)&&(b.resetInitSegment(n,r,a,v),L.resetInitSegment()),h&&(b.resetTimeStamp(_),L.resetTimeStamp(_)),"function"==typeof b.setDecryptData&&b.setDecryptData(t),b.append(e,p,m,y)},e}();t.default=m},"./src/demux/demuxer-worker.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/demuxer-inline.js"),i=n("./src/events.js"),o=n("./src/utils/logger.js"),a=n("./node_modules/node-libs-browser/node_modules/events/events.js");t.default=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(n))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new r.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),n("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,n),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,n),t.on(i.default.FRAG_PARSED,n),t.on(i.default.ERROR,n),t.on(i.default.FRAG_PARSING_METADATA,n),t.on(i.default.FRAG_PARSING_USERDATA,n),t.on(i.default.INIT_PTS_FOUND,n),t.on(i.default.FRAG_PARSING_DATA,function(t,n){var r=[],i={event:t,data:n};n.data1&&(i.data1=n.data1.buffer,r.push(n.data1.buffer),delete n.data1),n.data2&&(i.data2=n.data2.buffer,r.push(n.data2.buffer),delete n.data2),e.postMessage(i,r)})}},"./src/demux/demuxer.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/webworkify-webpack/index.js"),i=n("./src/events.js"),o=n("./src/demux/demuxer-inline.js"),a=n("./src/utils/logger.js"),s=n("./src/errors.js"),l=n("./src/utils/mediasource-helper.js"),u=n("./src/utils/get-self-scope.js"),c=n("./src/observer.js"),d=u.getSelfScope(),f=l.getMediaSource(),p=function(){function t(e,t){var n=this;this.hls=e,this.id=t;var l=this.observer=new c.Observer,u=e.config,p=function(t,r){(r=r||{}).frag=n.frag,r.id=n.id,e.trigger(t,r)};l.on(i.default.FRAG_DECRYPTED,p),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,p),l.on(i.default.FRAG_PARSING_DATA,p),l.on(i.default.FRAG_PARSED,p),l.on(i.default.ERROR,p),l.on(i.default.FRAG_PARSING_METADATA,p),l.on(i.default.FRAG_PARSING_USERDATA,p),l.on(i.default.INIT_PTS_FOUND,p);var h={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(u.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var m=void 0;try{m=this.w=r("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},m.postMessage({cmd:"init",typeSupported:h,vendor:g,id:t,config:JSON.stringify(u)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),m&&d.URL.revokeObjectURL(m.objectURL),this.demuxer=new o.default(l,h,u,g),this.w=void 0}}else this.demuxer=new o.default(l,h,u,g)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,n,r,i,o,s,l,u){var c=this.w,d=e.isFinite(o.startPTS)?o.startPTS:o.start,f=o.decryptdata,p=this.frag,h=!(p&&o.cc===p.cc),g=!(p&&o.level===p.level),m=p&&o.sn===p.sn+1,v=!g&&m;if(h&&a.logger.log(this.id+":discontinuity detected"),g&&a.logger.log(this.id+":switch detected"),this.frag=o,c)c.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:n,audioCodec:r,videoCodec:i,timeOffset:d,discontinuity:h,trackSwitch:g,contiguous:v,duration:s,accurateTimeOffset:l,defaultInitPTS:u},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,f,n,r,i,d,h,g,v,s,l,u)}},t.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":d.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t}();t.default=p}).call(this,n("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n=8,r=8;for(t=0;t<e;t++)0!==r&&(r=(n+this.readEG()+256)%256),n=0===r?n:r},e.prototype.readSPS=function(){var e,t,n,r,i,o,a,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),p=this.readUEG.bind(this),h=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),v=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),g(3),d(),v(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=p();if(3===_&&g(1),v(),v(),g(1),h())for(o=3!==_?8:12,a=0;a<o;a++)h()&&y(a<6?16:64)}v();var b=p();if(0===b)p();else if(1===b)for(g(1),m(),m(),t=p(),a=0;a<t;a++)m();v(),g(1),n=p(),r=p(),0===(i=f(1))&&g(1),g(1),h()&&(s=p(),l=p(),u=p(),c=p());var E=[1,1];if(h()&&h())switch(d()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(n+1)-2*s-2*l),height:(2-i)*(r+1)*16-(i?2:4)*(u+c),pixelRatio:E}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,n){for(var r=n,i=0;e.isHeader(t,n);){i+=10,i+=e._readSize(t,n+6),e.isFooter(t,n+10)&&(i+=10),n+=i}if(i>0)return t.subarray(r,r+i)},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),r=0;r<n.length;r++){var i=n[r];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),r=e._readSize(t,4);return{type:n,size:r,data:t.subarray(10,10+r)}},e.getID3Frames=function(t){for(var n=0,r=[];e.isHeader(t,n);){for(var i=e._readSize(t,n+6),o=(n+=10)+i;n+8<o;){var a=e._getFrameData(t.subarray(n)),s=e._decodeFrame(a);s&&r.push(s),n+=a.size+10}e.isFooter(t,n)&&(n+=10)}return r},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data,!0),r=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:r.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,r=e._utf8ArrayToStr(t.data.subarray(n));n+=r.length+1;var i=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:r,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var n,r,i,o=e.length,a="",s=0;s<o;){if(0===(n=e[s++])&&t)return a;if(0!==n&&3!==n)switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:r=e[s++],a+=String.fromCharCode((31&n)<<6|63&r);break;case 14:r=e[s++],i=e[s++],a+=String.fromCharCode((15&n)<<12|(63&r)<<6|(63&i)<<0)}}return a},e}(),i=r._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=r},"./src/demux/mp3demuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/id3.js"),i=n("./src/utils/logger.js"),o=n("./src/demux/mpegaudio.js"),a=function(){function e(e,t,n){this.observer=e,this.config=n,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,a=r.default.getID3Data(e,0);if(a&&void 0!==r.default.getTimeStamp(a))for(t=a.length,n=Math.min(e.length-1,t+100);t<n;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var a=r.default.getID3Data(e,0),s=r.default.getTimeStamp(a),l=s?90*s:9e4*t,u=a.length,c=e.length,d=0,f=0,p=this._audioTrack,h=[{pts:l,dts:l,data:a}];u<c;)if(o.default.isHeader(e,u)){var g=o.default.appendFrame(p,e,u,l,d);if(!g)break;u+=g.length,f=g.sample.pts,d++}else r.default.isHeader(e,u)?(a=r.default.getID3Data(e,u),h.push({pts:f,dts:f,data:a}),u+=a.length):u++;this.remuxer.remux(p,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mp4demuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,r,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==n&&(n="mp4a.40.5"),null==r&&(r="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:n,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:r,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else n&&(this.audioCodec=n),r&&(this.videoCodec=r)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var r,i,o,a,s,l,u=[];if(t.data?(s=t.start,o=t.end,t=t.data):(s=0,o=t.byteLength),!n.length)return null;for(r=s;r<o;)l=(i=e.readUint32(t,r))>1?r+i:o,e.bin2str(t.subarray(r+4,r+8))===n[0]&&(1===n.length?u.push({data:t,start:r+8,end:l}):(a=e.findBox({data:t,start:r+8,end:l},n.slice(1))).length&&(u=u.concat(a))),r=l;return u},e.parseSegmentIndex=function(t){var n,r=e.findBox(t,["moov"])[0],i=r?r.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;n=[];var s=(a=a[0]).data[0];o=0===s?8:16;var l=e.readUint32(a,o);o+=4;o+=0===s?8:16,o+=2;var u=a.end+0,c=e.readUint16(a,o);o+=2;for(var d=0;d<c;d++){var f=o,p=e.readUint32(a,f);f+=4;var h=2147483647&p;if(1===(2147483648&p)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var g=e.readUint32(a,f);f+=4,n.push({referenceSize:h,subsegmentDuration:g,info:{duration:g/l,start:u,end:u+h-1}}),u+=h,o=f+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:n,moovEndOffset:i}},e.parseInitSegment=function(t){var n=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){a=0===(o=l.data[l.start])?12:20;var u=e.readUint32(l,a),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var p=e.bin2str(f.data.subarray(f.start+12,f.start+16));r.logger.log("MP4Demuxer:"+d+":"+p+" found")}n[s]={timescale:u,type:d},n[d]={timescale:u,id:s}}}}}}),n},e.getStartDTS=function(t,n){var r,i,o;return r=e.findBox(n,["moof","traf"]),i=[].concat.apply([],r.map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var i,o;return i=e.readUint32(r,4),o=t[i].timescale||9e4,e.findBox(n,["tfdt"]).map(function(t){var n,r;return n=t.data[t.start],r=e.readUint32(t,4),1===n&&(r*=Math.pow(2,32),r+=e.readUint32(t,8)),r})[0]/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,n,r){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],i=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,i-r*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=r*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),l=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,l)}})})})},e.prototype.append=function(t,n,r,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(a,t);this.initPTS=l=u-n,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(a,t,l),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,r,o,t)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mpegaudio.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var o=this.parseHeader(t,n);if(o&&n+o.frameLength<=t.length){var a=r+i*(9e4*o.samplesPerFrame/o.sampleRate),s={unit:t.subarray(n,n+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==n&&0!==o&&15!==o&&3!==a){var l=3===n?3-i:3===i?3:4,u=1e3*r.BitratesMap[14*l+o-1],c=3===n?0:2===n?1:2,d=r.SamplingRateMap[3*c+a],f=e[t+3]>>6==3?1:2,p=r.SamplesCoefficients[n][i],h=r.BytesInSlot[i],g=8*p*h;return{sampleRate:d,channelCount:f,frameLength:parseInt(p*u/d+s,10)*h,samplesPerFrame:g}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=r},"./src/demux/sample-aes.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/crypt/decrypter.js"),i=function(){function e(e,t,n,i){this.decryptdata=n,this.discardEPB=i,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,r){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),r||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},e.prototype.decryptAvcSample=function(e,t,n,r,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,n+1,r)})},e.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var o=i[n];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,o,a),!a)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/demux/adts.js"),i=n("./src/demux/mpegaudio.js"),o=n("./src/events.js"),a=n("./src/demux/exp-golomb.js"),s=n("./src/demux/sample-aes.js"),l=n("./src/utils/logger.js"),u=n("./src/errors.js"),c={video:1,audio:2,id3:3,text:4},d=function(){function e(e,t,n,r){this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var n=e._syncOffset(t);return!(n<0)&&(n&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,n,r,i){var a,s,c,d,f,p=t.length,h=!1;this.contiguous=r;var g=this.pmtParsed,m=this._avcTrack,v=this._audioTrack,y=this._id3Track,_=m.pid,b=v.pid,E=y.pid,S=this._pmtId,w=m.pesData,T=v.pesData,A=y.pesData,I=this._parsePAT,P=this._parsePMT,C=this._parsePES,k=this._parseAVCPES.bind(this),L=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),O=e._syncOffset(t);for(p-=(p+O)%188,a=O;a<p;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),c=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((d=a+5+t[a+4])===a+188)continue}else d=a+4;switch(c){case _:s&&(w&&(f=C(w))&&void 0!==f.pts&&k(f,!1),w={data:[],size:0}),w&&(w.data.push(t.subarray(d,a+188)),w.size+=a+188-d);break;case b:s&&(T&&(f=C(T))&&void 0!==f.pts&&(v.isAAC?L(f):R(f)),T={data:[],size:0}),T&&(T.data.push(t.subarray(d,a+188)),T.size+=a+188-d);break;case E:s&&(A&&(f=C(A))&&void 0!==f.pts&&D(f),A={data:[],size:0}),A&&(A.data.push(t.subarray(d,a+188)),A.size+=a+188-d);break;case 0:s&&(d+=t[d]+1),S=this._pmtId=I(t,d);break;case S:s&&(d+=t[d]+1);var M=P(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(_=M.avc)>0&&(m.pid=_),(b=M.audio)>0&&(v.pid=b,v.isAAC=M.isAAC),(E=M.id3)>0&&(y.pid=E),h&&!g&&(l.logger.log("reparse from beginning"),h=!1,a=O-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(f=C(w))&&void 0!==f.pts?(k(f,!0),m.pesData=null):m.pesData=w,T&&(f=C(T))&&void 0!==f.pts?(v.isAAC?L(f):R(f),v.pesData=null):(T&&T.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),v.pesData=T),A&&(f=C(A))&&void 0!==f.pts?(D(f),y.pesData=null):y.pesData=A,null==this.sampleAes?this.remuxer.remux(v,m,y,this._txtTrack,n,r,i):this.decryptAndRemux(v,m,y,this._txtTrack,n,r,i)},e.prototype.decryptAndRemux=function(e,t,n,r,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,o,a)})}else this.decryptAndRemuxAvc(e,t,n,r,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,o,a)})}else this.remuxer.remux(e,t,n,r,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,r){var i,o,a={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(o=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===a.audio&&(a.audio=o);break;case 21:-1===a.id3&&(a.id3=o);break;case 219:if(!r){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===a.avc&&(a.avc=o);break;case 3:case 4:n?-1===a.audio&&(a.audio=o,a.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return a},e.prototype._parsePES=function(e){var t,n,r,i,o,a,s,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;192&(n=t[7])&&((a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(a-=8589934592),64&n?((s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(s-=8589934592),a-s>54e5&&(l.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),u=(i=t[8])+9,e.size-=u,o=new Uint8Array(e.size);for(var p=0,h=d.length;p<h;p++){var g=(t=d[p]).byteLength;if(u){if(u>g){u-=g;continue}t=t.subarray(u),g-=u,u=0}o.set(t,c),c+=g}return r&&(r-=i+3),{data:o,pts:a,dts:s,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,r,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),u=this.avcSample,c=!1,d=this.pushAccesUnit.bind(this),f=function(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}};e.data=null,u&&l.length&&!s.audFound&&(d(u,s),u=this.avcSample=f(!1,e.pts,e.dts,"")),l.forEach(function(t){switch(t.type){case 1:r=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.frame=!0;var l=t.data;if(c&&l.length>4){var p=new a.default(l).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(u.key=!0)}break;case 5:r=!0,u||(u=o.avcSample=f(!0,e.pts,e.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(n=new a.default(o.discardEPB(t.data))).readUByte();for(var h=0,g=0,m=!1,v=0;!m&&n.bytesAvailable>1;){h=0;do{h+=v=n.readUByte()}while(255===v);g=0;do{g+=v=n.readUByte()}while(255===v);if(4===h&&0!==n.bytesAvailable){if(m=!0,181===n.readUByte())if(49===n.readUShort())if(1195456820===n.readUInt())if(3===n.readUByte()){var y=n.readUByte(),_=31&y,b=[y,n.readUByte()];for(i=0;i<_;i++)b.push(n.readUByte()),b.push(n.readUByte()),b.push(n.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:b})}}else if(g<n.bytesAvailable)for(i=0;i<g;i++)n.readUByte()}break;case 7:if(r=!0,c=!0,!s.sps){var E=(n=new a.default(t.data)).readSPS();s.width=E.width,s.height=E.height,s.pixelRatio=E.pixelRatio,s.sps=[t.data],s.duration=o._duration;var S=t.data.subarray(1,4),w="avc1.";for(i=0;i<3;i++){var T=S[i].toString(16);T.length<2&&(T="0"+T),w+=T}s.codec=w}break;case 8:r=!0,s.pps||(s.pps=[t.data]);break;case 9:r=!1,s.audFound=!0,u&&d(u,s),u=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,u&&(u.debug+="unknown NAL "+t.type+" ")}u&&r&&u.units.push(t)}),t&&u&&(d(u,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;r>=0;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var n=this._avcTrack.samples;t=n[n.length-1]}if(t){var r=t.units;e=r[r.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,n,r,i,o=0,a=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,i=31&e[0],l=0,o=1);o<a;)if(t=e[o++],l)if(1!==l)if(t)if(1===t){var f,p;if(d>=0)r={data:e.subarray(d,o-l-1),type:i},c.push(r);else if(f=this._getLastNalUnit())if(u&&o<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(n=o-l-1)>0)(p=new Uint8Array(f.data.byteLength+n)).set(f.data,0),p.set(e.subarray(0,n),f.data.byteLength),f.data=p;o<a?(d=o,i=31&e[o],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;(d>=0&&l>=0&&(r={data:e.subarray(d,a),type:i,state:l},c.push(r)),0===c.length)&&((f=this._getLastNalUnit())&&((p=new Uint8Array(f.data.byteLength+e.byteLength)).set(f.data,0),p.set(e,f.data.byteLength),f.data=p));return s.naluState=l,c},e.prototype.discardEPB=function(e){for(var t,n,r=e.byteLength,i=[],o=1;o<r-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),n[o]=e[a];return n},e.prototype._parseAACPES=function(e){var t,n,i,a,s,c=this._audioTrack,d=e.data,f=e.pts,p=this.aacOverFlow,h=this.aacLastPTS;if(p){var g=new Uint8Array(p.byteLength+d.byteLength);g.set(p,0),g.set(d,p.byteLength),d=g}for(i=0,s=d.length;i<s-1&&!r.isHeader(d,i);i++);if(i){var m=void 0,v=void 0;if(i<s-1?(m="AAC PES did not start with ADTS header,offset:"+i,v=!1):(m="no ADTS header found in AAC PES",v=!0),l.logger.warn("parsing error:"+m),this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:v,reason:m}),v)return}if(r.initTrackConfig(c,this.observer,d,i,this.audioCodec),n=0,t=r.getFrameDuration(c.samplerate),p&&h){var y=h+t;Math.abs(y-f)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-f)/90)),f=y)}for(;i<s;)if(r.isHeader(d,i)&&i+5<s){var _=r.appendFrame(c,d,i,f,n);if(!_)break;i+=_.length,a=_.sample.pts,n++}else i++;p=i<s?d.subarray(i,s):null,this.aacOverFlow=p,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,o=0,a=e.pts;o<n;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,r);if(!s)break;o+=s.length,r++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=d},"./src/errors.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=n("./src/errors.js"),o=n("./src/events.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,e,t).call()}catch(t){r.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},"./src/hls.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/errors.js"),s=n("./src/loader/playlist-loader.js"),l=n("./src/loader/fragment-loader.js"),u=n("./src/loader/key-loader.js"),c=n("./src/controller/fragment-tracker.js"),d=n("./src/controller/stream-controller.js"),f=n("./src/controller/level-controller.js"),p=n("./src/controller/id3-track-controller.js"),h=n("./src/is-supported.js"),g=n("./src/utils/logger.js"),m=n("./src/config.js"),v=n("./src/events.js"),y=function(e){function t(n){void 0===n&&(n={});var r=e.call(this)||this,i=t.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in n||(n[o]=i[o]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');g.enableLogs(n.debug),r.config=n,r._autoLevelCapping=-1;var a=r.abrController=new n.abrController(r),h=new n.bufferController(r),m=new n.capLevelController(r),v=new n.fpsController(r),y=new s.default(r),_=new l.default(r),b=new u.default(r),E=new p.default(r),S=r.levelController=new f.default(r),w=new c.FragmentTracker(r),T=[S,r.streamController=new d.default(r,w)],A=n.audioStreamController;A&&T.push(new A(r,w)),r.networkControllers=T;var I=[y,_,b,a,h,m,v,E,w];if(A=n.audioTrackController){var P=new A(r);r.audioTrackController=P,I.push(P)}if(A=n.subtitleTrackController){var C=new A(r);r.subtitleTrackController=C,I.push(C)}if(A=n.emeController){var k=new A(r);r.emeController=k,I.push(k)}return(A=n.subtitleStreamController)&&I.push(new A(r,w)),(A=n.timelineController)&&I.push(new A(r)),r.coreComponents=I,r}return i(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.1"},enumerable:!0,configurable:!0}),t.isSupported=function(){return h.isSupported()},Object.defineProperty(t,"Events",{get:function(){return v.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return a.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return a.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:m.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){g.logger.log("destroy"),this.trigger(v.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){g.logger.log("attachMedia"),this.media=e,this.trigger(v.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){g.logger.log("detachMedia"),this.trigger(v.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),g.logger.log("loadSource:"+e),this.url=e,this.trigger(v.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),g.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.prototype.stopLoad=function(){g.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.prototype.swapAudioCodec=function(){g.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){g.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){g.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){g.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){g.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){g.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){g.logger.log("set startLevel:"+e);-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){g.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++){if((e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate)>t)return r}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(n("./src/observer.js").Observer);t.default=y},"./src/is-supported.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/mediasource-helper.js");t.isSupported=function(){var e=r.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i}},"./src/loader/fragment-loader.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),u=function(t){function n(e){var n=t.call(this,e,o.default.FRAG_LOADING)||this;return n.loaders={},n}return i(n,t),n.prototype.destroy=function(){var e=this.loaders;for(var n in e){var r=e[n];r&&r.destroy()}this.loaders={},t.prototype.destroy.call(this)},n.prototype.onFragLoading=function(t){var n=t.frag,r=n.type,i=this.loaders,o=this.hls.config,a=o.fLoader,s=o.loader;n.loaded=0;var u,c,d,f=i[r];f&&(l.logger.warn("abort previous fragment loader for type: "+r),f.abort()),f=i[r]=n.loader=o.fLoader?new a(o):new s(o),u={url:n.url,frag:n,responseType:"arraybuffer",progressData:!1};var p=n.byteRangeStartOffset,h=n.byteRangeEndOffset;e.isFinite(p)&&e.isFinite(h)&&(u.rangeStart=p,u.rangeEnd=h),c={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(u,c,d)},n.prototype.loadsuccess=function(e,t,n,r){void 0===r&&(r=null);var i=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(o.default.FRAG_LOADED,{payload:i,frag:a,stats:t,networkDetails:r})},n.prototype.loaderror=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},n.prototype.loadtimeout=function(e,t,n){void 0===n&&(n=null);var r=t.frag,i=r.loader;i&&i.abort(),this.loaders[r.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},n.prototype.loadprogress=function(e,t,n,r){void 0===r&&(r=null);var i=t.frag;i.loaded=e.loaded,this.hls.trigger(o.default.FRAG_LOAD_PROGRESS,{frag:i,stats:e,networkDetails:r})},n}(a.default);t.default=u}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/level-key.js"),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=((e={})[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=r.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new i.default).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},t}();t.default=o}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),u=function(e){function t(t){var n=e.call(this,t,o.default.KEY_LOADING)||this;return n.loaders={},n.decryptkey=null,n.decrypturl=null,n}return i(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},a.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var s=this.hls.config;r&&(l.logger.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new s.loader(s),this.decrypturl=a,this.decryptkey=null;var u,c,d;u={url:a,frag:t,responseType:"arraybuffer"},c={timeout:s.fragLoadingTimeOut,maxRetry:0,retryDelay:s.fragLoadingRetryDelay,maxRetryDelay:s.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(u,c,d)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(o.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(o.default.KEY_LOADED,{frag:r})},t.prototype.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(a.default);t.default=u},"./src/loader/level-key.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=r.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=n}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/fragment.js"),o=n("./src/loader/level.js"),a=n("./src/loader/level-key.js"),s=n("./src/utils/attr-list.js"),l=n("./src/utils/logger.js"),u=n("./src/utils/codecs.js"),c=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,f=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),p=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,h=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n},t.convertAVC1ToAVCOTI=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return r.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,n){var r,i=[];function o(e,t){["video","audio"].forEach(function(n){var r=e.filter(function(e){return u.isCodecType(e,n)});if(r.length){var i=r.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter(function(e){return-1===r.indexOf(e)})}}),t.unknownCodecs=e}for(c.lastIndex=0;null!=(r=c.exec(e));){var a={},l=a.attrs=new s.default(r[1]);a.url=t.resolve(r[2],n);var d=l.decimalResolution("RESOLUTION");d&&(a.width=d.width,a.height=d.height),a.bitrate=l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),a.name=l.NAME,o([].concat((l.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=t.convertAVC1ToAVCOTI(a.videoCodec)),i.push(a)}return i},t.parseMasterPlaylistMedia=function(e,n,r,i){var o;void 0===i&&(i=[]);var a=[],l=0;for(d.lastIndex=0;null!==(o=d.exec(e));){var u={},c=new s.default(o[1]);if(c.TYPE===r){if(u.groupId=c["GROUP-ID"],u.name=c.NAME,u.type=r,u.default="YES"===c.DEFAULT,u.autoselect="YES"===c.AUTOSELECT,u.forced="YES"===c.FORCED,c.URI&&(u.url=t.resolve(c.URI,n)),u.lang=c.LANGUAGE,u.name||(u.name=u.lang),i.length){var f=t.findGroup(i,u.groupId);u.audioCodec=f?f.codec:i[0].codec}u.id=l++,a.push(u)}}return a},t.parseLevelPlaylist=function(t,n,r,u,c){var d,g,v=0,y=0,_=new o.default(n),b=new a.default,E=0,S=null,w=new i.default,T=null;for(f.lastIndex=0;null!==(d=f.exec(t));){var A=d[1];if(A){w.duration=parseFloat(A);var I=(" "+d[2]).slice(1);w.title=I||null,w.tagList.push(I?["INF",A,I]:["INF",A])}else if(d[3]){if(e.isFinite(w.duration)){var P=v++;w.type=u,w.start=y,w.levelkey=b,w.sn=P,w.level=r,w.cc=E,w.urlId=c,w.baseurl=n,w.relurl=(" "+d[3]).slice(1),m(w,S),_.fragments.push(w),S=w,y+=w.duration,w=new i.default}}else if(d[4]){if(w.rawByteRange=(" "+d[4]).slice(1),S){var C=S.byteRangeEndOffset;C&&(w.lastByteRangeEndOffset=C)}}else if(d[5])w.rawProgramDateTime=(" "+d[5]).slice(1),w.tagList.push(["PROGRAM-DATE-TIME",w.rawProgramDateTime]),null===T&&(T=_.fragments.length);else{for(d=d[0].match(p),g=1;g<d.length&&void 0===d[g];g++);var k=(" "+d[g+1]).slice(1),L=(" "+d[g+2]).slice(1);switch(d[g]){case"#":w.tagList.push(L?[k,L]:[k]);break;case"PLAYLIST-TYPE":_.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":v=_.startSN=parseInt(k);break;case"TARGETDURATION":_.targetduration=parseFloat(k);break;case"VERSION":_.version=parseInt(k);break;case"EXTM3U":break;case"ENDLIST":_.live=!1;break;case"DIS":E++,w.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":E=parseInt(k);break;case"KEY":var R=k,D=new s.default(R),O=D.enumeratedString("METHOD"),M=D.URI,x=D.hexadecimalInteger("IV");O&&(b=new a.default,M&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(O)>=0&&(b.method=O,b.baseuri=n,b.reluri=M,b.key=null,b.iv=x));break;case"START":var N=k,j=new s.default(N).decimalFloatingPoint("TIME-OFFSET");e.isFinite(j)&&(_.startTimeOffset=j);break;case"MAP":var U=new s.default(k);w.relurl=U.URI,w.rawByteRange=U.BYTERANGE,w.baseurl=n,w.level=r,w.type=u,w.sn="initSegment",_.initSegment=w,(w=new i.default).rawProgramDateTime=_.initSegment.rawProgramDateTime;break;default:l.logger.warn("line parsed but not handled: "+d)}}}return(w=S)&&!w.relurl&&(_.fragments.pop(),y-=w.duration),_.totalduration=y,_.averagetargetduration=y/_.fragments.length,_.endSN=v-1,_.startCC=_.fragments[0]?_.fragments[0].cc:0,_.endCC=E,!_.initSegment&&_.fragments.length&&_.fragments.every(function(e){return h.test(e.relurl)})&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(w=new i.default).relurl=_.fragments[0].relurl,w.baseurl=n,w.level=r,w.type=u,w.sn="initSegment",_.initSegment=w,_.needSidxRanges=!0),T&&function(e,t){for(var n=e[t],r=t-1;r>=0;r--){var i=e[r];i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(_.fragments,T),_},t}();function m(t,n){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):n&&n.programDateTime&&(t.programDateTime=n.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}t.default=g}).call(this,n("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,n){"use strict";(function(e){var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n("./src/events.js"),a=n("./src/event-handler.js"),s=n("./src/errors.js"),l=n("./src/utils/logger.js"),u=n("./src/demux/mp4demuxer.js"),c=n("./src/loader/m3u8-parser.js"),d=window.performance,f={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},p={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},h=function(t){function n(e){var n=t.call(this,e,o.default.MANIFEST_LOADING,o.default.LEVEL_LOADING,o.default.AUDIO_TRACK_LOADING,o.default.SUBTITLE_TRACK_LOADING)||this;return n.loaders={},n}return i(n,t),Object.defineProperty(n,"ContextType",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(n,"LevelType",{get:function(){return p},enumerable:!0,configurable:!0}),n.canHaveQualityLevels=function(e){return e!==f.AUDIO_TRACK&&e!==f.SUBTITLE_TRACK},n.mapContextToLevelType=function(e){switch(e.type){case f.AUDIO_TRACK:return p.AUDIO;case f.SUBTITLE_TRACK:return p.SUBTITLE;default:return p.MAIN}},n.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n},n.prototype.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},n.prototype.getInternalLoader=function(e){return this.loaders[e.type]},n.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},n.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},n.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},n.prototype.onManifestLoading=function(e){this.load(e.url,{type:f.MANIFEST,level:0,id:null})},n.prototype.onLevelLoading=function(e){this.load(e.url,{type:f.LEVEL,level:e.level,id:e.id})},n.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:f.AUDIO_TRACK,level:null,id:e.id})},n.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:f.SUBTITLE_TRACK,level:null,id:e.id})},n.prototype.load=function(e,t){var n=this.hls.config;l.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var r,i,o,a,s=this.getInternalLoader(t);if(s){var u=s.context;if(u&&u.url===e)return l.logger.trace("playlist request ongoing"),!1;l.logger.warn("aborting previous loader for type: "+t.type),s.abort()}switch(t.type){case f.MANIFEST:r=n.manifestLoadingMaxRetry,i=n.manifestLoadingTimeOut,o=n.manifestLoadingRetryDelay,a=n.manifestLoadingMaxRetryTimeout;break;case f.LEVEL:r=0,i=n.levelLoadingTimeOut;break;default:r=n.levelLoadingMaxRetry,i=n.levelLoadingTimeOut,o=n.levelLoadingRetryDelay,a=n.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var c={timeout:i,maxRetry:r,retryDelay:o,maxRetryDelay:a},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return l.logger.debug("Calling internal loader delegate for URL: "+e),s.load(t,c,d),!0},n.prototype.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;t.tload=d.now(),0===i.indexOf("#EXTM3U")?i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,n,r):this._handleMasterPlaylist(e,t,n,r):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},n.prototype.loaderror=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!1,e)},n.prototype.loadtimeout=function(e,t,n){void 0===n&&(n=null),this._handleNetworkError(t,n,!0)},n.prototype._handleMasterPlaylist=function(e,t,r,i){var a=this.hls,s=e.data,u=n.getResponseUrl(e,r),d=c.default.parseMasterPlaylist(s,u);if(d.length){var f=d.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),p=c.default.parseMasterPlaylistMedia(s,u,"AUDIO",f),h=c.default.parseMasterPlaylistMedia(s,u,"SUBTITLES");if(p.length){var g=!1;p.forEach(function(e){e.url||(g=!0)}),!1===g&&d[0].audioCodec&&!d[0].attrs.AUDIO&&(l.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}a.trigger(o.default.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:h,url:u,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"no level found in manifest",i)},n.prototype._handleTrackOrLevelPlaylist=function(t,r,i,a){var s=this.hls,l=i.id,u=i.level,p=i.type,h=n.getResponseUrl(t,i),g=e.isFinite(l)?l:0,m=e.isFinite(u)?u:g,v=n.mapContextToLevelType(i),y=c.default.parseLevelPlaylist(t.data,h,m,v,g);if(y.tload=r.tload,p===f.MANIFEST){var _={url:h,details:y};s.trigger(o.default.MANIFEST_LOADED,{levels:[_],audioTracks:[],url:h,stats:r,networkDetails:a})}if(r.tparsed=d.now(),y.needSidxRanges){var b=y.initSegment.url;this.load(b,{isSidxRequest:!0,type:p,level:u,levelDetails:y,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else i.levelDetails=y,this._handlePlaylistLoaded(t,r,i,a)},n.prototype._handleSidxRequest=function(e,t){var n=u.default.parseSegmentIndex(new Uint8Array(e.data));if(n){var r=n.references,i=t.levelDetails;r.forEach(function(e,t){var n=e.info,r=i.fragments[t];0===r.byteRange.length&&(r.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),i.initSegment.rawByteRange=String(n.moovEndOffset)+"@0"}},n.prototype._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(o.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},n.prototype._handleNetworkError=function(e,t,n,r){var i,a;void 0===n&&(n=!1),void 0===r&&(r=null),l.logger.info("A network error occured while loading a "+e.type+"-type playlist");var u=this.getInternalLoader(e);switch(e.type){case f.MANIFEST:i=n?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,a=!0;break;case f.LEVEL:i=n?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,a=!1;break;case f.AUDIO_TRACK:i=n?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}u&&(u.abort(),this.resetInternalLoader(e.type));var c={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:a,url:u.url,loader:u,context:e,networkDetails:t};r&&(c.response=r),this.hls.trigger(o.default.ERROR,c)},n.prototype._handlePlaylistLoaded=function(e,t,r,i){var a=r.type,s=r.level,l=r.id,u=r.levelDetails;if(u.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(o.default.LEVEL_LOADED,{details:u,level:s||0,id:l||0,stats:t,networkDetails:i});else switch(a){case f.AUDIO_TRACK:this.hls.trigger(o.default.AUDIO_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:i});break;case f.SUBTITLE_TRACK:this.hls.trigger(o.default.SUBTITLE_TRACK_LOADED,{details:u,id:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},n}(a.default);t.default=h}).call(this,n("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(t))},t}(n("./node_modules/eventemitter3/index.js").EventEmitter);t.Observer=o},"./src/polyfills/number.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/get-self-scope.js").getSelfScope().Number;t.Number=r,r.isFinite=r.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=r},"./src/remux/mp4-generator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),r=8,i=n.length,o=i;i--;)r+=n[i].byteLength;for((t=new Uint8Array(r))[0]=r>>24&255,t[1]=r>>16&255,t[2]=r>>8&255,t[3]=255&r,t.set(e,4),i=0,r=8;i<o;i++)t.set(n[i],r),r+=n[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),o=Math.floor(n%(r+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,r,i=t.samples||[],o=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,o[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,o=[],a=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(r+1)),l=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),o=t.id,a=Math.floor(n/(r+1)),s=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,o,a,s,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(n+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)o=(i=u[r]).duration,a=i.size,s=i.flags,l=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var n,r=e.moov(t);return(n=new Uint8Array(e.FTYP.byteLength+r.byteLength)).set(e.FTYP),n.set(r,e.FTYP.byteLength),n},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/remux/aac-helper.js"),i=n("./src/remux/mp4-generator.js"),o=n("./src/events.js"),a=n("./src/errors.js"),s=n("./src/utils/logger.js"),l=function(){function e(e,t,n,r){this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,r,i,a,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=i,f=i;if(u&&c){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,p),f+=Math.max(0,-p)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var h=this.remuxAudio(e,d,a,l);if(c){var g=void 0;h&&(g=h.endPTS-h.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,a,g,l)}}else if(c){var m=this.remuxVideo(t,f,a,0,l);m&&e.codec&&this.remuxEmptyAudio(e,d,a,m)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var r,l,u=this.observer,c=e.samples,d=t.samples,f=this.typeSupported,p="audio/mp4",h={},g={tracks:h},m=void 0===this._initPTS;if(m&&(r=l=1/0),e.config&&c.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(p="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},m&&(r=l=c[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&d.length){var v=t.inputTimeScale;t.timescale=v,h.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},m&&(r=Math.min(r,d[0].pts-v*n),l=Math.min(l,d[0].dts-v*n),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:r}))}Object.keys(h).length?(u.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,m&&(this._initPTS=r,this._initDTS=l)):u.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,r,l){var u,c,d,f,p,h,g,m=8,v=e.timescale,y=e.samples,_=[],b=y.length,E=this._PTSNormalize,S=this._initPTS,w=this.nextAvcDts,T=this.isSafari;if(0!==b){T&&(n|=y.length&&w&&(l&&Math.abs(t-w/v)<.1||Math.abs(y[0].pts-w-S)<v/5)),n||(w=t*v),y.forEach(function(e){e.pts=E(e.pts-S,w),e.dts=E(e.dts-S,w)}),y.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var A=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(A<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(A/90)+" ms to overcome this issue");for(var I=0;I<y.length;I++)y[I].dts+=A}var P=y[0];p=Math.max(P.dts,0),f=Math.max(P.pts,0);var C=Math.round((p-w)/90);n&&C&&(C>1?s.logger.log("AVC:"+C+" ms hole between fragments detected,filling it"):C<-1&&s.logger.log("AVC:"+-C+" ms overlapping between fragments detected"),p=w,y[0].dts=p,f=Math.max(f-C,w),y[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(p/90)+",delta:"+C+" ms")),P=y[y.length-1],g=Math.max(P.dts,0),h=Math.max(P.pts,0,g),T&&(u=Math.round((g-p)/(y.length-1)));var k=0,L=0;for(I=0;I<b;I++){for(var R=y[I],D=R.units,O=D.length,M=0,x=0;x<O;x++)M+=D[x].data.length;L+=M,k+=O,R.length=M,R.dts=T?p+I*u:Math.max(R.dts,p),R.pts=Math.max(R.pts,R.dts)}var N=L+4*k+8;try{c=new Uint8Array(N)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var j=new DataView(c.buffer);j.setUint32(0,N),c.set(i.default.types.mdat,4);for(I=0;I<b;I++){var U=y[I],F=U.units,B=0,G=void 0;for(x=0,O=F.length;x<O;x++){var V=F[x],Y=V.data,z=V.data.byteLength;j.setUint32(m,z),m+=4,c.set(Y,m),m+=z,B+=4+z}if(T)G=Math.max(0,u*Math.round((U.pts-U.dts)/u));else{if(I<b-1)u=y[I+1].dts-U.dts;else{var W=this.config,H=U.dts-y[I>0?I-1:I].dts;if(W.stretchShortVideoTrack){var Z=W.maxBufferHole,K=Math.floor(Z*v),q=(r?f+r*v:this.nextAudioPts)-U.pts;q>K?((u=q-H)<0&&(u=H),s.logger.log("It is approximately "+q/90+" ms to the next segment; using duration "+u/90+" ms for the last video frame.")):u=H}else u=H}G=Math.round(U.pts-U.dts)}_.push({size:B,duration:u,cts:G,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:U.key?2:1,isNonSync:U.key?0:1}})}this.nextAvcDts=g+u;var J=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,_.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var X=_[0].flags;X.dependsOn=2,X.isNonSync=0}e.samples=_,d=i.default.moof(e.sequenceNumber++,p,e),e.samples=[];var Q={data1:d,data2:c,startPTS:f/v,endPTS:(h+u)/v,startDTS:p/v,endDTS:this.nextAvcDts/v,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:J};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Q),Q}},e.prototype.remuxAudio=function(e,t,n,l){var u,c,d,f,p,h,g,m=e.inputTimeScale,v=e.timescale,y=m/v,_=(e.isAAC?1024:1152)*y,b=this._PTSNormalize,E=this._initPTS,S=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,T=[],A=this.nextAudioPts;if(n|=w.length&&A&&(l&&Math.abs(t-A/m)<.1||Math.abs(w[0].pts-A-E)<20*_),w.forEach(function(e){e.pts=e.dts=b(e.pts-E,t*m)}),0!==(w=w.filter(function(e){return e.pts>=0})).length){if(n||(A=l?t*m:w[0].pts),e.isAAC)for(var I=this.config.maxAudioFramesDrift,P=0,C=A;P<w.length;){var k,L=w[P];k=(U=L.pts)-C;var R=Math.abs(1e3*k/m);if(k<=-I*_)s.logger.warn("Dropping 1 audio frame @ "+(C/m).toFixed(3)+"s due to "+Math.round(R)+" ms overlap."),w.splice(P,1),e.len-=L.unit.length;else if(k>=I*_&&R<1e4&&C){var D=Math.round(k/_);s.logger.warn("Injecting "+D+" audio frame @ "+(C/m).toFixed(3)+"s due to "+Math.round(1e3*k/m)+" ms gap.");for(var O=0;O<D;O++){var M=Math.max(C,0);(d=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),d=L.unit.subarray()),w.splice(P,0,{unit:d,pts:M,dts:M}),e.len+=d.length,C+=_,P++}L.pts=L.dts=C,C+=_,P++}else Math.abs(k),L.pts=L.dts=C,C+=_,P++}O=0;for(var x=w.length;O<x;O++){var N=w[O],j=N.unit,U=N.pts;if(void 0!==g)c.duration=Math.round((U-g)/y);else{var F=Math.round(1e3*(U-A)/m),B=0;if(n&&e.isAAC&&F){if(F>0&&F<1e4)B=Math.round((U-A)/_),s.logger.log(F+" ms hole between AAC samples detected,filling it"),B>0&&((d=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(d=j.subarray()),e.len+=B*d.length);else if(F<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(A/m).toFixed(3)+"s/"+(U/m).toFixed(3)+"s/"+-F+"ms"),e.len-=j.byteLength;continue}U=A}if(h=U,!(e.len>0))return;var G=S?e.len:e.len+8;u=S?0:8;try{f=new Uint8Array(G)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}S||(new DataView(f.buffer).setUint32(0,G),f.set(i.default.types.mdat,4));for(P=0;P<B;P++)(d=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),d=j.subarray()),f.set(d,u),u+=d.byteLength,c={size:d.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c)}f.set(j,u);var V=j.byteLength;u+=V,c={size:V,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},T.push(c),g=U}var Y=0,z=T.length;if(z>=2&&(Y=T[z-2].duration,c.duration=Y),z){this.nextAudioPts=A=g+y*Y,e.len=0,e.samples=T,p=S?new Uint8Array:i.default.moof(e.sequenceNumber++,h/y,e),e.samples=[];var W=h/m,H=A/m,Z={data1:p,data2:f,startPTS:W,endPTS:H,startDTS:W,endDTS:H,type:"audio",hasAudio:!0,hasVideo:!1,nb:z};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Z),Z}return null}},e.prototype.remuxEmptyAudio=function(e,t,n,i){var o=e.inputTimeScale,a=o/(e.samplerate?e.samplerate:o),l=this.nextAudioPts,u=(void 0!==l?l:i.startDTS*o)+this._initDTS,c=i.endDTS*o+this._initDTS,d=1024*a,f=Math.ceil((c-u)/d),p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),p){for(var h=[],g=0;g<f;g++){var m=u+g*d;h.push({unit:p,pts:m,dts:m}),e.len+=p.length}e.samples=h,this.remuxAudio(e,t,n)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},e.prototype.remuxID3=function(e){var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)(t=e.samples[s]).pts=(t.pts-i)/r,t.dts=(t.dts-a)/r;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,n=e.samples.length,r=e.inputTimeScale,i=this._initPTS;if(n){for(var a=0;a<n;a++)(t=e.samples[a]).pts=(t.pts-i)/r;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}();t.default=l},"./src/remux/passthrough-remuxer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,o,a,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(r.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(r.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=e.apply(this,[t].concat(n))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return i(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(n("./src/event-handler.js").default);t.default=o},"./src/utils/attr-list.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){for(var n in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(n)&&(this[n]=e[n])}return t.prototype.decimalInteger=function(t){var n=parseInt(this[t],10);return n>e.MAX_SAFE_INTEGER?1/0:n},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var n=parseInt(this[t],16);return n>e.MAX_SAFE_INTEGER?1/0:n},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=n.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,n={};for(r.lastIndex=0;null!==(t=r.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},t}();t.default=i}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={search:function(e,t){for(var n=0,r=e.length-1,i=null,o=null;n<=r;){var a=t(o=e[i=(n+r)/2|0]);if(a>0)n=i+1;else{if(!(a<0))return o;r=i-1}}return null}}},"./src/utils/buffer-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,n){try{if(e){var r=e.buffered,i=[],o=void 0;for(o=0;o<r.length;o++)i.push({start:r.start(o),end:r.end(o)});return this.bufferedInfo(i,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,n){var r,i,o,a,s,l=[];for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),s=0;s<e.length;s++){var u=l.length;if(u){var c=l[u-1].end;e[s].start-c<n?e[s].end>c&&(l[u-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,r=0,i=o=t;s<l.length;s++){var d=l[s].start,f=l[s].end;if(t+n>=d&&t<f)i=d,r=(o=f)-t;else if(t+n<d){a=d;break}}return{len:r,start:i,end:o,nextStart:a}},e}();t.BufferHelper=r},"./src/utils/cea-608-parser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return r.hasOwnProperty(e)&&(t=r[e]),String.fromCharCode(t)},o=15,a=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},u={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},d=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},p=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},h=function(){function e(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),g=function(){function e(e,t,n,r,i,o){this.uchar=e||" ",this.penState=new h(t,n,r,i,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),m=function(){function e(){this.chars=[];for(var e=0;e<a;e++)this.chars.push(new g);this.pos=0,this.currPenState=new h}return e.prototype.equals=function(e){for(var t=!0,n=0;n<a;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);this.pos>=a?f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;t<a;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<a;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),v=function(){function e(){this.rows=[];for(var e=0;e<o;e++)this.rows.push(new m);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=o-1},e.prototype.equals=function(e){for(var t=!0,n=0;n<o;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<o;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<f.time)for(n=0;n<this.nrRollUpRows;n++)this.rows[t-this.nrRollUpRows+n+1].copy(i.rows[r+n])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},e.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null!==this.nrRollUpRows){f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")}else f.log("DEBUG","roll_up but nrRollUpRows not set yet")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),y=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new v,this.nonDisplayedMemory=new v,this.lastOutputScreen=new v,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),_=function(){function e(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new y(1,t),new y(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n,r,i,o=!1;this.lastTime=e,f.setTime(e);for(var a=0;a<t.length;a+=2)if(r=127&t[a],i=127&t[a+1],0!==r||0!==i){if(f.log("DATA","["+p([t[a],t[a+1]])+"] -> ("+p([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n)if(o=this.parseChars(r,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(o);else f.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+p([r,i])+" orig: "+p([t[a],t[a+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+p([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&t>=32&&t<=47&&((n=17===e?1:2)!==this.currChNr?(f.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+p([e,t])+")"),!0))},e.prototype.parsePAC=function(e,t){var n,r=null;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=e<=23?1:2,r=t>=64&&t<=95?1===n?s[e]:u[e]:1===n?l[e]:c[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},e.prototype.parseChars=function(e,t){var n=null,r=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19){var a=t;a=17===o?t+80:18===o?t+112:t+144,f.log("INFO","Special char '"+i(a)+"' in channel "+n),r=[a]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var s=p(r);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},e.prototype.parseBackgroundAttributes=function(e,t){var n,r,i;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=d[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=_},"./src/utils/codecs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=function(e,t){var n=r[t];return!!n&&!0===n[e.slice(0,4)]},t.isCodecSupportedInMp4=function(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/vttparser.js");t.newCue=function(e,t,n,i){for(var o,a,s,l,u,c=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,l=0,u="",!(o=i.rows[d]).isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?l++:(u+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===n&&(n+=1e-4),a=new c(t,n,r.fixLineBreaks(u.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}},"./src/utils/discontinuities.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/binary-search.js"),i=n("./src/utils/logger.js");function o(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}function a(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}function s(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var a=o(n,r[0].cc);if(a&&(!a||a.startPTS))return a;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function l(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function u(e,t,n){if(a(e,n,t)){var r=s(n.details,t);r&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level"),l(r.start,t))}}function c(t,n){if(n&&n.fragments.length){if(!t.hasProgramDateTime||!n.hasProgramDateTime)return;var r=n.fragments[0].programDateTime,o=(t.fragments[0].programDateTime-r)/1e3+n.fragments[0].start;e.isFinite(o)&&(i.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),l(o,t))}}t.findFirstFragWithCC=o,t.findFragWithCC=function(e,t){return r.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})},t.shouldAlignOnDiscontinuities=a,t.findDiscontinuousReferenceFrag=s,t.adjustPts=l,t.alignStream=function(e,t,n){u(e,n,t),!n.PTSKnown&&t&&c(n,t.details)},t.alignDiscontinuities=u,t.alignPDT=c}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/ewma.js"),i=function(){function e(e,t,n,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(t),this.fast_=new r.default(n)}return e.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=r},"./src/utils/get-self-scope.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=function(){return"undefined"==typeof window?self:window}},"./src/utils/logger.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/get-self-scope.js");function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=o;var s=r.getSelfScope();function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach(function(t){a[t]=e[t]?e[t].bind(e):function(e){var t=s.console[e];return t?function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n[0]&&(n[0]=function(e,t){return t="["+e+"] > "+t}(e,n[0])),t.apply(s.console,n)}:i}(t)})}t.enableLogs=function(e){if(!0===e||"object"==typeof e){l(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},t.logger=a},"./src/utils/mediakeys-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;t.requestMediaKeySystemAccess=r},"./src/utils/mediasource-helper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=function(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}},"./src/utils/output-filter.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=r},"./src/utils/texttrack-utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},t.clearCurrentCues=function(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}},"./src/utils/time-ranges.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}},"./src/utils/vttcue.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e="auto",t={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function o(n,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),u={};l?s=document.createElement("custom"):u.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=n,p=o,h=a,g=null,m="",v=!0,y="auto",_="start",b=50,E="middle",S=50,w="middle";if(Object.defineProperty(s,"id",i({},u,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",i({},u,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",i({},u,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",i({},u,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",i({},u,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",i({},u,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",i({},u,{get:function(){return m},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",i({},u,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",i({},u,{get:function(){return y},set:function(t){if("number"!=typeof t&&t!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",i({},u,{get:function(){return _},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",i({},u,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",i({},u,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",i({},u,{get:function(){return S},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");S=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",i({},u,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}return o.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},o}()},"./src/utils/vttparser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/vttcue.js"),i=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function o(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function a(){this.values=Object.create(null)}function s(e,t,n,r){var i=r?e.split(r):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(n);if(2===a.length)t(a[0],a[1])}}a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var l=new r.default(0,0,0),u="middle"===l.align?"middle":"center";function c(e,t,n){var r=e;function i(){var t=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function o(){e=e.replace(/^\s+/,"")}if(o(),t.startTime=i(),o(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),o(),t.endTime=i(),o(),function(e,t){var r=new a;s(e,function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];r.integer(e,a),r.percent(e,a)&&r.set("snapToLines",!1),r.alt(e,a,["auto"]),2===o.length&&r.alt("lineAlign",o[1],["start",u,"end"]);break;case"position":o=t.split(","),r.percent(e,o[0]),2===o.length&&r.alt("positionAlign",o[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",u,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===l.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",u);var o=r.get("position","auto");"auto"===o&&50===l.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}t.fixLineBreaks=d,o.prototype={parse:function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=d(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i=void 0;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var o=(i=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var a=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:i=n(),t.state){case"HEADER":/:/.test(i)?s(i,function(e,t){},/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new r.default(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":try{c(i,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==i.indexOf("--\x3e");if(!i||l&&(a=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.default=o},"./src/utils/webvtt-parser.js":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/vttparser.js"),i=n("./src/demux/id3.js"),o=function(e,t,n){return e.substr(n||0,t.length)===t},a=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()},s={parse:function(t,n,s,l,u,c){var d,f=i.utf8ArrayToStr(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),p="00:00.000",h=0,g=0,m=0,v=[],y=!0,_=new r.default;_.oncue=function(e){var t=s[l],n=s.ccOffset;t&&t.new&&(void 0!==g?n=s.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(s,l,m)),m&&(n=m-s.presentationOffset),e.startTime+=n-g,e.endTime+=n-g,e.id=a(e.startTime.toString())+a(e.endTime.toString())+a(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&v.push(e)},_.onparsingerror=function(e){d=e},_.onflush=function(){d&&c?c(d):u(v)},f.forEach(function(t){if(y){if(o(t,"X-TIMESTAMP-MAP=")){y=!1,t.substr(16).split(",").forEach(function(e){o(e,"LOCAL:")?p=e.substr(6):o(e,"MPEGTS:")&&(h=parseInt(e.substr(7)))});try{h-=n=n<0?n+8589934592:n,r=p,i=parseInt(r.substr(-3)),a=parseInt(r.substr(-6,2)),s=parseInt(r.substr(-9,2)),l=r.length>9?parseInt(r.substr(0,r.indexOf(":"))):0,g=(e.isFinite(i)&&e.isFinite(a)&&e.isFinite(s)&&e.isFinite(l)?(i+=1e3*a,i+=6e4*s,i+=36e5*l):-1)/1e3,m=h/9e4,-1===g&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){d=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(y=!1)}var r,i,a,s,l;_.parse(t+"\n")}),_.flush()}};t.default=s}).call(this,n("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var n=this.stats;n.tfirst=0,n.loaded=0;var r=this.xhrSetup;try{if(r)try{r(e,t.url)}catch(n){e.open("GET",t.url,!0),r(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===n){var l=t.status;if(l>=200&&l<300){o.tload=Math.max(o.tfirst,i.now());var u=void 0,c=void 0;c="arraybuffer"===a.responseType?(u=t.response).byteLength:(u=t.responseText).length,o.loaded=o.total=c;var d={url:t.responseURL,data:u};this.callbacks.onSuccess(d,o,a,t)}else o.retry>=s.maxRetry||l>=400&&l<499?(r.logger.error(l+" while loading "+a.url),this.callbacks.onError({code:l,text:t.statusText},a,t)):(r.logger.warn(l+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},e}();t.default=a}}).default},e.exports=r())},function(e,t,n){e.exports=n(164)},function(e,t,n){var r=n(18),i=n(91),o=n(70),a=n(7),s=n(8),l=n(71),u={},c={};(t=e.exports=function(e,t,n,d,f){var p,h,g,m,v=f?function(){return e}:l(e),y=r(n,d,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=s(e.length);p>_;_++)if((m=t?y(a(h=e[_])[0],h[1]):y(e[_]))===u||m===c)return m}else for(g=v.call(e);!(h=g.next()).done;)if((m=i(g,y,h.value,t))===u||m===c)return m}).BREAK=u,t.RETURN=c},function(e,t,n){var r=n(1),i=n(92).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==n(25)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(l&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(l)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(u)}}else n=function(){i.call(r,u)};else{var d=!0,f=document.createTextNode("");new o(u).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(1).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){var r=n(7),i=n(6),o=n(95);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(14),i=n(6),o=n(93),a=[].slice,s={};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),l=function(){var r=n.concat(a.call(arguments));return this instanceof l?function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)}(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(l.prototype=t.prototype),l}},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(28);r(r.P+r.F*n(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),i=n(133);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){"use strict";var r=n(0),i=n(97);r(r.P+r.F*!n(15)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(33),i=n(82),o=n(50);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(27),i=n(32).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){n(139)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){"use strict";if(n(4)){var r=n(19),i=n(1),o=n(3),a=n(0),s=n(105),l=n(140),u=n(18),c=n(69),d=n(29),f=n(10),p=n(73),h=n(20),g=n(8),m=n(106),v=n(52),y=n(28),_=n(12),b=n(47),E=n(6),S=n(9),w=n(70),T=n(42),A=n(84),I=n(32).f,P=n(71),C=n(24),k=n(2),L=n(34),R=n(51),D=n(72),O=n(35),M=n(31),x=n(75),N=n(74),j=n(80),U=n(145),F=n(5),B=n(41),G=F.f,V=B.f,Y=i.RangeError,z=i.TypeError,W=i.Uint8Array,H=Array.prototype,Z=l.ArrayBuffer,K=l.DataView,q=L(0),J=L(2),X=L(3),Q=L(4),$=L(5),ee=L(6),te=R(!0),ne=R(!1),re=O.values,ie=O.keys,oe=O.entries,ae=H.lastIndexOf,se=H.reduce,le=H.reduceRight,ue=H.join,ce=H.sort,de=H.slice,fe=H.toString,pe=H.toLocaleString,he=k("iterator"),ge=k("toStringTag"),me=C("typed_constructor"),ve=C("def_constructor"),ye=s.CONSTR,_e=s.TYPED,be=s.VIEW,Ee=L(1,function(e,t){return Ie(D(e,e[ve]),t)}),Se=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),we=!!W&&!!W.prototype.set&&o(function(){new W(1).set({})}),Te=function(e,t){var n=h(e);if(n<0||n%t)throw Y("Wrong offset!");return n},Ae=function(e){if(E(e)&&_e in e)return e;throw z(e+" is not a typed array!")},Ie=function(e,t){if(!(E(e)&&me in e))throw z("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Ce(D(e,e[ve]),t)},Ce=function(e,t){for(var n=0,r=t.length,i=Ie(e,r);r>n;)i[n]=t[n++];return i},ke=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},Le=function(e){var t,n,r,i,o,a,s=S(e),l=arguments.length,c=l>1?arguments[1]:void 0,d=void 0!==c,f=P(s);if(null!=f&&!w(f)){for(a=f.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(d&&l>2&&(c=u(c,arguments[2],2)),t=0,n=g(s.length),i=Ie(this,n);n>t;t++)i[t]=d?c(s[t],t):s[t];return i},Re=function(){for(var e=0,t=arguments.length,n=Ie(this,t);t>e;)n[e]=arguments[e++];return n},De=!!W&&o(function(){pe.call(new W(1))}),Oe=function(){return pe.apply(De?de.call(Ae(this)):Ae(this),arguments)},Me={copyWithin:function(e,t){return U.call(Ae(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Ae(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return j.apply(Ae(this),arguments)},filter:function(e){return Pe(this,J(Ae(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return $(Ae(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ae(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){q(Ae(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ae(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ae(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Ae(this),arguments)},lastIndexOf:function(e){return ae.apply(Ae(this),arguments)},map:function(e){return Ee(Ae(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ae(this),arguments)},reduceRight:function(e){return le.apply(Ae(this),arguments)},reverse:function(){for(var e,t=Ae(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return X(Ae(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(Ae(this),e)},subarray:function(e,t){var n=Ae(this),r=n.length,i=v(e,r);return new(D(n,n[ve]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,g((void 0===t?r:v(t,r))-i))}},xe=function(e,t){return Pe(this,de.call(Ae(this),e,t))},Ne=function(e){Ae(this);var t=Te(arguments[1],1),n=this.length,r=S(e),i=g(r.length),o=0;if(i+t>n)throw Y("Wrong length!");for(;o<i;)this[t+o]=r[o++]},je={entries:function(){return oe.call(Ae(this))},keys:function(){return ie.call(Ae(this))},values:function(){return re.call(Ae(this))}},Ue=function(e,t){return E(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return Ue(e,t=y(t,!0))?d(2,e[t]):V(e,t)},Be=function(e,t,n){return!(Ue(e,t=y(t,!0))&&E(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};ye||(B.f=Fe,F.f=Be),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Be}),o(function(){fe.call({})})&&(fe=pe=function(){return ue.call(this)});var Ge=p({},Me);p(Ge,je),f(Ge,he,je.values),p(Ge,{slice:xe,set:Ne,constructor:function(){},toString:fe,toLocaleString:Oe}),ke(Ge,"buffer","b"),ke(Ge,"byteOffset","o"),ke(Ge,"byteLength","l"),ke(Ge,"length","e"),G(Ge,ge,{get:function(){return this[_e]}}),e.exports=function(e,t,n,l){var u=e+((l=!!l)?"Clamped":"")+"Array",d="get"+e,p="set"+e,h=i[u],v=h||{},y=h&&A(h),_=!h||!s.ABV,S={},w=h&&h.prototype,P=function(e,n){G(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[d](n*t+r.o,Se)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;l&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*t+i.o,r,Se)}(this,n,e)},enumerable:!0})};_?(h=n(function(e,n,r,i){c(e,h,u,"_d");var o,a,s,l,d=0,p=0;if(E(n)){if(!(n instanceof Z||"ArrayBuffer"==(l=b(n))||"SharedArrayBuffer"==l))return _e in n?Ce(h,n):Le.call(h,n);o=n,p=Te(r,t);var v=n.byteLength;if(void 0===i){if(v%t)throw Y("Wrong length!");if((a=v-p)<0)throw Y("Wrong length!")}else if((a=g(i)*t)+p>v)throw Y("Wrong length!");s=a/t}else s=m(n),o=new Z(a=s*t);for(f(e,"_d",{b:o,o:p,l:a,e:s,v:new K(o)});d<s;)P(e,d++)}),w=h.prototype=T(Ge),f(w,"constructor",h)):o(function(){h(1)})&&o(function(){new h(-1)})&&x(function(e){new h,new h(null),new h(1.5),new h(e)},!0)||(h=n(function(e,n,r,i){var o;return c(e,h,u),E(n)?n instanceof Z||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new v(n,Te(r,t),i):void 0!==r?new v(n,Te(r,t)):new v(n):_e in n?Ce(h,n):Le.call(h,n):new v(m(n))}),q(y!==Function.prototype?I(v).concat(I(y)):I(v),function(e){e in h||f(h,e,v[e])}),h.prototype=w,r||(w.constructor=h));var C=w[he],k=!!C&&("values"==C.name||null==C.name),L=je.values;f(h,me,!0),f(w,_e,u),f(w,be,!0),f(w,ve,h),(l?new h(1)[ge]==u:ge in w)||G(w,ge,{get:function(){return u}}),S[u]=h,a(a.G+a.W+a.F*(h!=v),S),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o(function(){v.of.call(h,1)}),u,{from:Le,of:Re}),"BYTES_PER_ELEMENT"in w||f(w,"BYTES_PER_ELEMENT",t),a(a.P,u,Me),N(u),a(a.P+a.F*we,u,{set:Ne}),a(a.P+a.F*!k,u,je),r||w.toString==fe||(w.toString=fe),a(a.P+a.F*o(function(){new h(1).slice()}),u,{slice:xe}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()})||!o(function(){w.toLocaleString.call([1,2])})),u,{toLocaleString:Oe}),M[u]=k?C:L,r||k||f(w,he,L)}}else e.exports=function(){}},function(e,t,n){"use strict";var r=n(1),i=n(4),o=n(19),a=n(105),s=n(10),l=n(73),u=n(3),c=n(69),d=n(20),f=n(8),p=n(106),h=n(32).f,g=n(5).f,m=n(80),v=n(39),y="prototype",_="Wrong index!",b=r.ArrayBuffer,E=r.DataView,S=r.Math,w=r.RangeError,T=r.Infinity,A=b,I=S.abs,P=S.pow,C=S.floor,k=S.log,L=S.LN2,R=i?"_b":"buffer",D=i?"_l":"byteLength",O=i?"_o":"byteOffset";function M(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,l=(1<<s)-1,u=l>>1,c=23===t?P(2,-24)-P(2,-77):0,d=0,f=e<0||0===e&&1/e<0?1:0;for((e=I(e))!=e||e===T?(i=e!=e?1:0,r=l):(r=C(k(e)/L),e*(o=P(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?c/o:c*P(2,1-u))*o>=2&&(r++,o/=2),r+u>=l?(i=0,r=l):r+u>=1?(i=(e*o-1)*P(2,t),r+=u):(i=e*P(2,u-1)*P(2,t),r=0));t>=8;a[d++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[d++]=255&r,r/=256,s-=8);return a[--d]|=128*f,a}function x(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,l=n-1,u=e[l--],c=127&u;for(u>>=7;s>0;c=256*c+e[l],l--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=t;s>0;r=256*r+e[l],l--,s-=8);if(0===c)c=1-a;else{if(c===o)return r?NaN:u?-T:T;r+=P(2,t),c-=a}return(u?-1:1)*r*P(2,c-t)}function N(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function j(e){return[255&e]}function U(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function B(e){return M(e,52,8)}function G(e){return M(e,23,4)}function V(e,t,n){g(e[y],t,{get:function(){return this[n]}})}function Y(e,t,n,r){var i=p(+n);if(i+t>e[D])throw w(_);var o=e[R]._b,a=i+e[O],s=o.slice(a,a+t);return r?s:s.reverse()}function z(e,t,n,r,i,o){var a=p(+n);if(a+t>e[D])throw w(_);for(var s=e[R]._b,l=a+e[O],u=r(+i),c=0;c<t;c++)s[l+c]=u[o?c:t-c-1]}if(a.ABV){if(!u(function(){b(1)})||!u(function(){new b(-1)})||u(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var W,H=(b=function(e){return c(this,b),new A(p(e))})[y]=A[y],Z=h(A),K=0;Z.length>K;)(W=Z[K++])in b||s(b,W,A[W]);o||(H.constructor=b)}var q=new E(new b(2)),J=E[y].setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||l(E[y],{setInt8:function(e,t){J.call(this,e,t<<24>>24)},setUint8:function(e,t){J.call(this,e,t<<24>>24)}},!0)}else b=function(e){c(this,b,"ArrayBuffer");var t=p(e);this._b=m.call(new Array(t),0),this[D]=t},E=function(e,t,n){c(this,E,"DataView"),c(e,b,"DataView");var r=e[D],i=d(t);if(i<0||i>r)throw w("Wrong offset!");if(i+(n=void 0===n?r-i:f(n))>r)throw w("Wrong length!");this[R]=e,this[O]=i,this[D]=n},i&&(V(b,"byteLength","_l"),V(E,"buffer","_b"),V(E,"byteLength","_l"),V(E,"byteOffset","_o")),l(E[y],{getInt8:function(e){return Y(this,1,e)[0]<<24>>24},getUint8:function(e){return Y(this,1,e)[0]},getInt16:function(e){var t=Y(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Y(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return N(Y(this,4,e,arguments[1]))},getUint32:function(e){return N(Y(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return x(Y(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return x(Y(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){z(this,1,e,j,t)},setUint8:function(e,t){z(this,1,e,j,t)},setInt16:function(e,t){z(this,2,e,U,t,arguments[2])},setUint16:function(e,t){z(this,2,e,U,t,arguments[2])},setInt32:function(e,t){z(this,4,e,F,t,arguments[2])},setUint32:function(e,t){z(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){z(this,4,e,G,t,arguments[2])},setFloat64:function(e,t){z(this,8,e,B,t,arguments[2])}});v(b,"ArrayBuffer"),v(E,"DataView"),s(E[y],a.VIEW,!0),t.ArrayBuffer=b,t.DataView=E},function(e,t,n){var r=n(142);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(6),i=n(83),o=n(2)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(42),i=n(29),o=n(39),a={};n(10)(a,n(2)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(9),i=n(52),o=n(8);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),l=i(t,a),u=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===u?a:i(u,a))-l,a-s),d=1;for(l<s&&s<l+c&&(d=-1,l+=c-1,s+=c-1);c-- >0;)l in n?n[s]=n[l]:delete n[s],s+=d,l+=d;return n}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(89);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(4)&&"g"!=/./g.flags&&n(5).f(RegExp.prototype,"flags",{configurable:!0,get:n(53)})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(14),a=n(5);n(4)&&r(r.P+n(117),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(0),i=n(3),o=n(26),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},function(e,t,n){var r=n(78),i=n(26);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){"use strict";var r=n(33),i=n(82),o=n(50),a=n(9),s=n(48),l=Object.assign;e.exports=!l||n(3)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=i.f,d=o.f;l>u;)for(var f,p=s(arguments[u++]),h=c?r(p).concat(c(p)):r(p),g=h.length,m=0;g>m;)d.call(p,f=h[m++])&&(n[f]=p[f]);return n}:l},function(e,t,n){var r=n(6),i=n(81).onFreeze;n(62)("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(6);n(62)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(4),"Object",{defineProperties:n(104)})},function(e,t,n){var r=n(6),i=n(81).onFreeze;n(62)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){"use strict";var r=n(7),i=n(159),o=n(56);n(57)("search",1,function(e,t,n,a){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),l=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var c=o(s,l);return i(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(112)(!0);n(107)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";var r=n(18),i=n(0),o=n(9),a=n(91),s=n(70),l=n(8),u=n(162),c=n(71);i(i.S+i.F*!n(75)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(f);if(m&&(g=r(g,h>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=l(f.length));t>v;v++)u(n,v,m?g(f[v],v):f[v]);else for(d=y.call(f),n=new p;!(i=d.next()).done;v++)u(n,v,m?a(d,g,[i.value,v],!0):i.value);return n.length=v,n}})},function(e,t,n){"use strict";var r=n(5),i=n(29);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(41),i=n(84),o=n(12),a=n(0),s=n(6),l=n(7);a(a.S,"Reflect",{get:function e(t,n){var a,u,c=arguments.length<3?t:arguments[2];return l(t)===c?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:s(u=i(t))?e(u,n,c):void 0}})},function(e,t,n){"use strict";n.r(t);n(13),n(38),n(30),n(40),n(130);var r=n(121),i=n.n(r),o=n(16),a=(n(60),n(35),n(61),n(21),n(22),n(36),n(87),n(65),n(37),n(43),n(158),n(118),n(119),function(e,t){return t=t||{},new Promise(function(n,r){var i=new XMLHttpRequest;for(var o in i.open(t.method||"get",e,!0),t.headers)i.setRequestHeader(o,t.headers[o]);function a(){var e,t=[],n=[],r={};return i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(i,o,a){t.push(o=o.toLowerCase()),n.push([o,a]),r[o]=(e=r[o])?e+","+a:a}),{ok:2==(i.status/100|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:a,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},headers:{keys:function(){return t},entries:function(){return n},get:function(e){return r[e.toLowerCase()]},has:function(e){return e.toLowerCase()in r}}}}i.withCredentials="include"==t.credentials,i.onload=function(){n(a())},i.onerror=r,i.send(t.body||null)})});function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function u(e){var t={};return e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r}),t}function c(e,t,n){return n||(n=document.body),function e(r){return null!=r&&r!=n&&(!!t.includes(r)||e(r.offsetParent))}(e)}function d(e){return f.apply(this,arguments)}function f(){var e;return e=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:if((n=e.sent).ok){e.next=7;break}throw(r=new Error("".concat(n.statusText,": ").concat(t))).code="HTTP ".concat(n.status),r;case 7:return e.abrupt("return",n.json());case 8:case"end":return e.stop()}},e,this)}),(f=function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)})}).apply(this,arguments)}var p,h=(p=window.location.href,{current:""!=window.location.port||/(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/.test(p)?"development":/\/staging-/.test(p)?"staging":"production",DEVELOPMENT:"development",STAGING:"staging",PRODUCTION:"production"}),g=function(){function e(t,n,r){var i;"function"==typeof t?e(t(),n,r):!(i=t)||"object"!==s(i)&&"function"!=typeof i||"function"!=typeof i.then?n(t):t.then(n).catch(r)}return function(t){return new Promise(function(n,r){e(t,n,r)})}}();function m(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}var v,y,_,b=(v=navigator.userAgent,y=/iPad|iPhone|iPod/.test(v)&&!window.MSStream,_=function(){try{return window.self!==window.top}catch(e){return!0}}(),y&&_),E=(n(86),n(45),n(44),n(49),{e:[{name:"type",type:"Enum",map:["vod","vc"]}],a:[{name:"start_play",type:"Enum",map:["click","auto","rate"]}],b:[{name:"bottom",type:"Boolean"},{name:"bottom_link_type",type:"Enum",map:["diversion","content","none"]}],l:[{name:"logo_link_type",type:"Enum",map:["home","diversion","none"]},{name:"logo_display",type:"Boolean"}],i:[{name:"inside_title",type:"Boolean"},{name:"inside_title_link_type",type:"Enum",map:["diversion","content","none"]}],r:[{name:"recommend_display",type:"Enum",map:["hide","show","only_fullscreen"]},{name:"recommend_style",type:"Enum",map:["default"]}],f:[{name:"font_size",type:"Enum",map:["normal","big","tiny"]}]});var S=function(e){return function(e,t){var n={},r=Object.keys(t),i=new RegExp("(".concat(r.join("|"),")(\\d+)"),"gi");return e.replace(i,function(e,r,i){var o=t[r];i.split("").forEach(function(e,t){var r,i=o[t];switch(i.type){case"Boolean":r="0"!==e;break;case"Enum":r=parseInt(e),i.map&&(r=i.map[r]);break;case"Number":r=parseInt(e);break;default:r=e}n[i.name]=r})}),n}(e,E)},w=n(17);function T(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function I(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C="diversion",k="content",L="none",R={1:"ENABLE",2:"INSECURE"},D="https://www.litv.tv",O={vod:"vod",vc:"vod-channel"},M={vod:"vod",vc:"simulation_live"},x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,c,f,p,g,v,y,_,b,E;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u(window.location.search),r=n.s||"",i=r.split("|"),o=A(i,2),a=o[0],s=(s=o[1])||a,l=window.atob(a),c=window.atob(s),(f={}).project_no=n.p,f.sponsor_name=a,f.parten_name=l,f.ref_sponsor_name=s,f.ref_parten_name=c,f.link_extra=n.x&&decodeURIComponent(n.x),f.preset_content_id=n.i||"",f.count_limit=parseInt(n.o||25),p=D+w.diversion_page.replace("${ref_parten_name}",f.ref_parten_name).replace("${ref_sponsor_name}",f.ref_sponsor_name),g=D+w.content_page.replace("${ref_sponsor_name}",f.ref_sponsor_name),f.diversion_link=p+(f.link_extra?"&"+f.link_extra:""),f.content_page_link=g+(f.link_extra?"&"+f.link_extra:""),f.env=h.current,f.cdi_urls=w.cdi_urls,f.cdn_urls=w.cdn_urls,f.staging_cdi_urls=w.staging_cdi_urls,f.staging_cdn_urls=w.staging_cdn_urls,f.cdi_api_urls=w.cdi_api_urls,f.staging_cdi_api_urls=w.staging_cdi_api_urls,f.dynamic_build="true"==n.dy,e.prev=27,e.next=30,d("/meta/config/".concat(l,"-config.json"));case 30:v=e.sent,f=Object.assign(f,S(v.parameter)),void 0!==v.auto_play_rate?(y=100*Math.random(),f.auto_play=v.auto_play_rate>y):f.auto_play="auto"==f.start_play,void 0!==v.visible_threshold?(1==m()?f.visible_threshold=v.visible_threshold.mobile:f.visible_threshold=v.visible_threshold.desktop,.5==f.visible_threshold&&(f.visible_threshold=.45)):f.visible_threshold=.2,f.ga_account=v.ga_account,f.device_type=v.device_type,f.clip_count=v.clip_count,f.error_button=v.error_button,f.bottom_link_type=f.bottom_link_type||C,f.inside_title_link_type=f.inside_title_link_type||C,_=f.logo_link_type==C?f.diversion_link:f.logo_link_type==L?"":D,f.logo_link=_,f.media_type=O[f.type],f.player_media_mode=M[f.type],f.vpaid_mode=R[v.vpaid_mode],e.next=51;break;case 47:e.prev=47,e.t0=e.catch(27),f.hasFail=!0,f.error=e.t0;case 51:return this.config=f,b=this.config,b.cdi_urls,b.cdn_urls,b.content_page_link,b.staging_cdi_urls,b.staging_cdn_urls,b.cdi_api_urls,b.staging_cdi_api_urls,b.media_type,b.player_media_mode,E=T(b,["cdi_urls","cdn_urls","content_page_link","staging_cdi_urls","staging_cdn_urls","cdi_api_urls","staging_cdi_api_urls","media_type","player_media_mode"]),t=Object.assign(t,E),e.abrupt("return",this);case 55:case"end":return e.stop()}},e,this,[[27,47]])}),function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,s,"next",e)}function s(e){I(o,r,i,a,s,"throw",e)}a(void 0)})});return function(e){return t.apply(this,arguments)}}()},{key:"getDiversionLink",value:function(e,t,n){var r=this.config.diversion_link;return r+=e?"&content_type="+e:"",r+=t?"&content_id="+t:"",r+=n?"&"+n:""}},{key:"getContentPageLink",value:function(e,t,n){var r=this.config.content_page_link;return r=r.replace("${content_type}",e),r+=t?"&content_id="+t:"",r+=n?"&"+n:""}},{key:"getInsideTitleLink",value:function(e,t,n){var r;return this.config.inside_title_link_type==C?r=this.getDiversionLink(e,t,n):this.config.inside_title_link_type==k&&(r=this.getContentPageLink(e,t,n)),r}},{key:"getBottomLink",value:function(e,t,n){var r;return this.config.bottom_link_type==C?r=this.getDiversionLink(e,t,n):this.config.bottom_link_type==k&&(r=this.getContentPageLink(e,t,n)),r}},{key:"projectNo",get:function(){return this.config.project_no}},{key:"sponsorName",get:function(){return this.config.sponsor_name}},{key:"partenName",get:function(){return this.config.parten_name}},{key:"refSponsorName",get:function(){return this.config.ref_sponsor_name}},{key:"refPartenName",get:function(){return this.config.ref_parten_name}},{key:"type",get:function(){return this.config.type}},{key:"mediaType",get:function(){return this.config.media_type}},{key:"playerMediaMode",get:function(){return this.config.player_media_mode}},{key:"autoPlay",get:function(){return this.config.auto_play}},{key:"bottom",get:function(){return this.config.bottom}},{key:"bottomLinkType",get:function(){return this.config.bottom_link_type}},{key:"insideTitle",get:function(){return this.config.inside_title}},{key:"insideTitleLinkType",get:function(){return this.config.inside_title_link_type}},{key:"recommendDisplay",get:function(){return this.config.recommend_display}},{key:"recommendStyle",get:function(){return this.config.recommend_style}},{key:"env",get:function(){return this.config.env}},{key:"presetContentId",get:function(){return this.config.preset_content_id}},{key:"cdiUrls",get:function(){return this.config.cdi_urls}},{key:"cdnUrls",get:function(){return this.config.cdn_urls}},{key:"stagingCdiUrls",get:function(){return this.config.staging_cdi_urls}},{key:"stagingCdnUrls",get:function(){return this.config.staging_cdn_urls}},{key:"cdiApiUrls",get:function(){return this.config.cdi_api_urls}},{key:"stagingCdiApiUrls",get:function(){return this.config.staging_cdi_api_urls}},{key:"logoLink",get:function(){return this.config.logo_link}},{key:"fontSize",get:function(){return this.config.font_size}},{key:"countLimit",get:function(){return this.config.count_limit}},{key:"deviceType",get:function(){return this.config.device_type}},{key:"clipCount",get:function(){return this.config.clip_count}},{key:"vpaidMode",get:function(){return this.config.vpaid_mode}},{key:"gaAccount",get:function(){return this.config.ga_account}},{key:"logoDisplay",get:function(){return this.config.logo_display}},{key:"errorButton",get:function(){return this.config.error_button}},{key:"visibleThreshold",get:function(){return this.config.visible_threshold}},{key:"dynamicBuild",get:function(){return this.config.dynamic_build}}])&&P(t.prototype,n),r&&P(t,r),e}();n(63),n(55);function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}function F(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function B(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){F(o,r,i,a,s,"next",e)}function s(e){F(o,r,i,a,s,"throw",e)}a(void 0)})}}var G={vod:function(e){var t=e.partenName,n=e.presetContentId;return"/meta/vod/".concat(t,"/").concat(n&&n+"-","content.json")},schedule:function(e){var t=e.partenName;return"/meta/vc/".concat(t,"-schedule.json")}};function V(e,t){return{insideTitleLink:e.getInsideTitleLink(t.contentType,t.contentId),bottomLink:e.getBottomLink(t.contentType,t.contentId)}}var Y,z,W=(z=[H],Y=B(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.reduce(function(){var e=B(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return r=e.sent,i=r.meta,o=r.config,e.abrupt("return",n(i,o));case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve({meta:t,config:n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e,t){return Y.apply(this,arguments)});function H(e,t){return Z.apply(this,arguments)}function Z(){return(Z=B(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=n.logoDisplay){e.next=2;break}return e.abrupt("return",t);case 2:if(!(r=t.liad).logo_br){e.next=7;break}if(r.logo_br.element_id=r.logo_br.element_id||[],!(r.logo_br.element_id.length>0)){e.next=7;break}return e.abrupt("return",t);case 7:return r.logo_br={element_id:[["*litv_logo"]],partobj_ratio:10,min_interval:0,element_sampling:1,req_timeshift:0,rewind:0,adobj_sampling:[0],filling:-1},r.elements=r.elements||{},r.elements["*litv_logo"]={id:"*litv_logo",unit_id:-1,users:"All",media_type:"image",schema:"litv",space_id:"".concat(n.sponsorName,"_litvlogo"),data:"/images/litv_logo_watermark.svg",duration:0,position:"BR",click_through:"".concat(n.logoLink),purchase_url:"",title:"litv_logo"},t.liad=r,e.abrupt("return",t);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var K=function(){function e(t){var n;N(this,e),this.config=t,this._meta={},n="vod"==(this._type=t.type)?new q(t):new J(t),this._metaConstructor=n,this.getRecommend=this.getRecommend.bind(this)}return U(e,[{key:"getRecommend",value:function(){return this._metaConstructor.getRecommend()}},{key:"next",value:function(){var e=B(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._metaConstructor.next();case 3:t=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0;case 9:if(1!=t.done){e.next=11;break}return e.abrupt("return",{done:!0});case 11:return e.next=13,W(t.value||{},this.config);case 13:return this._meta=e.sent,e.abrupt("return",{value:this,done:t.done});case 15:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"assetsId",get:function(){return this._meta.assetsId}},{key:"contentId",get:function(){return this._meta.contentId}},{key:"contentType",get:function(){return this._meta.contentType}},{key:"title",get:function(){return this._meta.title}},{key:"secondaryTitle",get:function(){return this._meta.secondaryTitle}},{key:"image",get:function(){if(/\:\/\/|^\//.test(this._meta.image))return this._meta.image;var e=this.config.cdnUrls;return e[Math.random()*e.length>>0]+"/"+this._meta.image}},{key:"videoType",get:function(){return this._meta.videoType}},{key:"season",get:function(){return this._meta.season}},{key:"episode",get:function(){return this._meta.episode}},{key:"midrollTimeCodes",get:function(){return this._meta.midrollTimeCodes}},{key:"liad",get:function(){return this._meta.liad||{}}},{key:"startTime",get:function(){return this._meta.startTime}},{key:"bottomLink",get:function(){return this._meta.bottomLink}},{key:"insideTitleLink",get:function(){return this._meta.insideTitleLink}},{key:"filmLength",get:function(){return this._meta.filmLength}}]),e}(),q=function(){function e(t){N(this,e),this.getVodPromise=d(G.vod(t)),this.config=t,this.loaded=!1,this.startTime=0,this.resolve=function(){},this.getRecommend=this.getRecommend.bind(this)}return U(e,[{key:"next",value:function(){var e=B(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.loaded){e.next=2;break}return e.abrupt("return",{done:!0});case 2:return e.prev=2,e.next=5,this.getVodPromise;case 5:t=e.sent,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0;case 11:return this.loaded=!0,n=this.trans(t),Object.assign(this,n,V(this.config,n)),e.abrupt("return",{value:this,done:!1});case 15:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"trans",value:function(e){var t={},n=e;return t.assetsId=n.assets_id,t.contentId=n.content_id,t.title=n.title,t.secondaryTitle=n.title+" "+(n.subtitle||""),t.image=n.video_image,t.contentType=n.content_type,t.videoType=n.video_type,t.season=n.season,t.episode=n.episode,t.liad=n.liad,t.midrollTimeCodes=(n.midroll_time_codes||[]).map(function(e){return 1e3*e}),t.filmLength=n.film_length+"000",this.resolve(new X(this.config,n.title,n.content_id,n.recommend)),t}},{key:"getRecommend",value:function(){var e=this;return new Promise(function(t,n){e.resolve=t})}}]),e}(),J=function(){function e(t){N(this,e),this.getSchedulePromise=d(G.schedule(t)),this.config=t,this.loaded=!1,this.videoType="F",this.season="0",this.episode="0"}return U(e,[{key:"next",value:function(){var e=B(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.loaded){e.next=8;break}return(t=this.currentIndex+1)>=this.programsLength&&(t=0),this.currentProgram=this.programs[t],this.currentIndex=t,this.startTime=0,Object.assign(this,V(this.config,this)),e.abrupt("return",{value:this,done:!1});case 8:return e.prev=8,e.next=11,this.getSchedulePromise;case 11:n=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),e.t0;case 17:return r=this.trans(n),Object.assign(this,r),Object.assign(this,V(this.config,this)),this.loaded=!0,e.abrupt("return",{value:this,done:!1});case 22:case"end":return e.stop()}},e,this,[[8,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"trans",value:function(e){for(var t=e.programs,n=t.length,r=(Math.round(+new Date/1e3)-e.start_time)%e.total_length,i=0;i<n;i++){var o=r-t[i].length;if(o<0)break;r=o}var a={};return a.title=e.title,a.cdnCode=e.cdn_code,a.currentProgram=e.programs[i],a.programs=t,a.programsLength=n,a.startTime=1e3*r,a.currentIndex=i,a.liad=e.liad,a}},{key:"getRecommend",value:function(){return new Promise(function(e,t){e(null)})}},{key:"assetsId",get:function(){return this.cdnCode+"#"+this.currentProgram.asset_id}},{key:"contentId",get:function(){return this.currentProgram.content_id}},{key:"contentType",get:function(){return this.currentProgram.content_type}},{key:"secondaryTitle",get:function(){return this.currentProgram.title+" "+(this.currentProgram.subtitle||"")}},{key:"image",get:function(){return this.currentProgram.thumbnail}},{key:"midrollTimeCodes",get:function(){return(this.currentProgram.time_codes||[]).map(function(e){return 1e3*e})}},{key:"filmLength",get:function(){return this.currentProgram.length+"000"}}]),e}(),X=function(){function e(t,n,r,i){N(this,e),this._meta={title:n,titleLink:t.getDiversionLink("",r),list:i.map(function(e){return new Q(t,e)}),moreDramaLink:t.getDiversionLink("drama","","to=.featured_content%3Anth-child(1)"),moreShowLink:t.getDiversionLink("show","","to=.featured_content%3Anth-child(2)"),moreMovieLink:t.getDiversionLink("movie","","to=.featured_content%3Anth-child(3)")}}return U(e,[{key:"title",get:function(){return this._meta.title}},{key:"titleLink",get:function(){return this._meta.titleLink}},{key:"list",get:function(){return this._meta.list}},{key:"moreDramaLink",get:function(){return this._meta.moreDramaLink}},{key:"moreShowLink",get:function(){return this._meta.moreShowLink}},{key:"moreMovieLink",get:function(){return this._meta.moreMovieLink}}]),e}(),Q=function(){function e(t,n){N(this,e),this.config=t,this._meta={title:n.title,displayCount:n.display_count,image:n.video_image,link:t.getDiversionLink(n.content_type,n.content_id)}}return U(e,[{key:"link",get:function(){return this._meta.link}},{key:"image",get:function(){if(/\:\/\/|^\//.test(this._meta.image))return this._meta.image;var e=this.config.cdnUrls;return e[Math.random()*e.length>>0]+"/"+this._meta.image}},{key:"title",get:function(){return this._meta.title}},{key:"displayCount",get:function(){return this._meta.displayCount}}]),e}(),$=K;n(66),n(64),n(120);function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var te=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events={}}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t,n,r){void 0===this.events[e]&&(this.events[e]=[]),1==n?this.events[e].unshift(t):this.events[e].push({fn:t,once:r||!1})}},{key:"one",value:function(e,t,n){this.on(e,t,n,!0)}},{key:"off",value:function(e,t){if(this.events.hasOwnProperty(e)){for(var n=this.events[e],r=n.length;r--;)n[r].fn===t&&n.splice(r,1);0===this.events[e].length&&(this.events[e]=null,delete this.events[e])}}},{key:"trigger",value:function(e,t){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=this.events[e],s={};return a instanceof Array&&a.length>0&&(s=this.createEvent(e,t),a.concat().reduce(function(t,r){if(!1===t)return!1;try{var o,a=(o=r.fn).call.apply(o,[null,s].concat(i));return 1==r.once&&n.off(e,r.fn),a}catch(e){return console.error(e),!0}},!0)),s}},{key:"createEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n instanceof Event)return this.setUpGatter(n,"type",e),"function"!=typeof n.getCarryInfo&&(n.getCarryInfo=function(){return null}),n;var r=document.createEvent("Event");for(var i in r.initEvent(e,!1,!0),r.preventDefault=function(){t.setUpGatter(r,"defaultPrevented",!0)},r.getCarryInfo=function(){return n},n)if(n.hasOwnProperty(i)){if("type"===i)throw'Cannot be converted to "Event" because the "type" field cannot be replaced.';r[i]=n[i]}return r}},{key:"setUpGatter",value:function(e,t,n){Object.defineProperty?Object.defineProperty(e,t,{get:function(){return n},configurable:!0}):e.__defineGetter__(t,function(){return n})}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?ae(e):t}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var se={OPENED:"opened",CLOSED:"closed"};var le=function(e){function t(e,n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=re(this,ie(t).call(this));var o={toggle:function(){},open:function(){},close:function(){}};return i.toggle=function(){return o.toggle()},i.open=function(){return o.open()},i.close=function(){return o.close()},i.view=null,i.isOpened=!1,"hide"==e?re(i):(g(r).then(function(t){if(t&&0!=t.list.length){o.toggle=function(e){1==this.isOpened?this.close(e):this.open(e)}.bind(ae(ae(i))),o.open=function(e){1!=this.isOpened&&(this.view.classList.add("open"),this.isOpened=!0,this.trigger(se.OPENED,{conscious:e||!1}))}.bind(ae(ae(i))),o.close=function(e){0!=this.isOpened&&(this.view.classList.remove("open"),this.isOpened=!1,this.trigger(se.CLOSED,{conscious:e||!1}))}.bind(ae(ae(i))),n.on(n.EVENT.PAUSE,i.open),n.on(n.EVENT.RESUME,i.close);var r=function(e,t,n){var r,i,o=document.createElement("DIV");return o.classList.add("recommend"),o.classList.add(n),o.innerHTML=(i=(r=t).list.map(function(e){return function(e){return'\n    <li class="recommend_item">\n        <a href="'.concat(e.link,'" target="_blank">\n            <img src="').concat(e.image,'">\n            <div class="text">\n                <h2 class="title">').concat(e.title,'</h2>\n                <span class="display_count">').concat(e.displayCount,"</span>\n            </div>\n        </a>\n    </i>")}(e)}).join(""),'\n    <div class="recommend_tab"></div>\n    <div class="list_container">\n        <div class="header">\n            <a class="top_btn button" href="'.concat(r.titleLink,'" target="_blank">').concat(r.title,'</a>\n            <div class="tab_btns">\n                <a href="').concat(r.moreDramaLink,'" target="_blank">更多戲劇</a>\n                <a href="').concat(r.moreShowLink,'" target="_blank">更多綜藝</a>\n                <a href="').concat(r.moreMovieLink,'" target="_blank">更多電影</a>\n            </div>\n        </div>\n        <ul>\n            ').concat(i,"\n        </ul>\n    </div>")),e.appendChild(o),this.view=o,o}.apply(ae(ae(i)),[n,t,e]);(function(e,t){var n=this,r=t.querySelector(".recommend_tab"),i=e.container,o=i.querySelector(".fp-controls");e.on(e.EVENT.CLICK,function(a){if(a.target==r)return n.toggle(!0),void a.preventDefault();if(0!=n.isOpened&&!c(a.target,[t],i)){var s=c(a.target,[o],i);e.paused||s||a.preventDefault(),setTimeout(function(){return n.close(!0)})}})}).apply(ae(ae(i)),[n,r])}}),i)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,te),t}();function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}le.prototype.EVENT=le.EVENT=se;var he={OCCURRED_ERROR:"occurred error"},ge={CONFIG:"config",META:"meta",PLAYER:"player",GET_URL:"get_url"},me={network_error:{title:"Oops! 網路異常",message:"請確認網路連線正常或重新整理網頁"},video_format_error:{title:"Oops! 影片格式不支援或編碼錯誤",message:"請嘗試升級瀏覽器以支援播放之影片格式"},video_general_error:{title:"Oops! 影片載入錯誤",message:"請重新整理網頁重新載入"},geo_error:{title:"本服務僅限台澎金馬地區觀看",message:"目前沒有授權您的地區使用，請見諒！"},assets_error:{title:"Oops! 資料或網路異常",message:"請確認網路連線正常或重新整理網頁"},getGeneralError:function(e,t){return{title:"發生錯誤".concat(e?" 錯誤碼: ".concat(e):""),message:"".concat(t)}}};function ve(e,t){switch(e){case ge.CONFIG:case ge.META:return me.assets_error;case ge.PLAYER:return function(e){switch(e.code){case 2:return me.network_error;case 3:case 5:return me.video_format_error;default:return me.getGeneralError(e.code,e.message)}}(t);case ge.GET_URL:return function(e){switch(e.code){case 42000087:case 87:return me.geo_error;default:return me.getGeneralError(e.code,e.message)}}(t);default:return me.getGeneralError(t.code,t.message)}}var ye=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=de(this,fe(t).call(this))).container=e,n.isShow=!1,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(t,te),n=t,(r=[{key:"setInfo",value:function(e,t){this.config=e,this.meta=t}},{key:"resolve",value:function(e,t){if(console.log(e,t),1!=this.isShow){var n=ve(t,e);n.link=function(){var e,t=this.config,n=this.meta;return!0!==t.errorButton?"":void 0===t?"https://www.litv.tv":(e=void 0===n?t.presetContentId:n.contentId||t.presetContentId)?t.getDiversionLink("",e):"https://www.litv.tv"}.apply(this),function(e,t){var n=document.createElement("DIV");n.className="error bg-000 ratio-16-9 w-100p absolute top-0",n.innerHTML=function(e){return'\n    <div class="center font-s-13px c-ddd">\n        <h2 class="subtitle text-center">'.concat(e.title,'</h2>\n        <p class="text font-w-400 pd-tb-1em">').concat(e.message,"</p>\n        ").concat(e.link?'<a href="'.concat(e.link,'" target="_blank" class="button w-150px mg-auto">立即前往 LiTV線上影視</a>'):"","\n    </div>\n    ")}(e),t.appendChild(n)}(n,this.container),this.isShow=!0,this.trigger(he.OCCURRED_ERROR,{error:e,source:t})}}}])&&ce(n.prototype,r),i&&ce(n,i),t}();function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ee(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){be(o,r,i,a,s,"next",e)}function s(e){be(o,r,i,a,s,"throw",e)}a(void 0)})}}ye.prototype.ERROR_SOURCE=ye.ERROR_SOURCE=ge,ye.prototype.EVENT=ye.EVENT=he;var Se=function(e){return new Promise(function(t){setTimeout(t,e)})},we=function(){var e=Ee(regeneratorRuntime.mark(function e(t,n,r,i){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,Se(i);case 3:return e.prev=3,e.next=6,a(t(),n);case 6:if((o=e.sent).ok){e.next=12;break}if(!(r-- >0)){e.next=12;break}return e.next=11,we(t,n,r,100);case 11:return e.abrupt("return",e.sent);case 12:return e.abrupt("return",o);case 15:if(e.prev=15,e.t0=e.catch(3),!(r-- >0)){e.next=23;break}return e.next=20,we(t,n,r,100);case 20:return e.abrupt("return",e.sent);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[3,15]])}));return function(t,n,r,i){return e.apply(this,arguments)}}(),Te=function(){function e(t){var n,r=t.env,i=t.cdiUrls,o=t.stagingCdiUrls,a=t.mediaType,s=t.deviceType,l=t.refPartenName;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=h.PRODUCTION==r?i:o,this.cdiUrls=n,this.mediaType=a,this.deviceType=s,this.projectId=l}var t,n,r;return t=e,(n=[{key:"getContentUrl",value:function(){var e=Ee(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.cdiUrls,r=function(){return n[Math.random()*n.length>>0]},o={method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({id:1e3*Math.random()>>0,jsonrpc:"2.0",method:"LoadService.GetURLsNoAuth",params:{AssetId:t,DeviceType:this.deviceType,MediaType:this.mediaType,ProjectID:this.projectId,Site:"pc"}})},e.prev=3,e.next=6,we(r,o,1);case 6:i=e.sent,e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),new Error("Failed to fetch Content url");case 13:if(i.ok){e.next=17;break}throw(a=new Error("".concat(i.statusText,": ").concat(i.url))).code="HTTP ".concat(i.status),a;case 17:return e.next=19,i.json();case 19:if(!(s=e.sent).error){e.next=24;break}throw(l=new Error(s.error.message)).code=s.error.code,l;case 24:return u=s.result,e.abrupt("return",u.AssetURLs[0]);case 26:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()}])&&_e(t.prototype,n),r&&_e(t,r),e}(),Ae=n(122),Ie=n.n(Ae),Pe=(n(160),n(161),{VOD_IMPRESSION:"vod-impression",FIRST_IMPRESSION:"first-impression",FULLSCREEN:"em-fullscreen",MORE_CLICK:"em-more-click",LOGO_CLICK:"em-logo-click",SERIES_CLICK:"em-series-click",UNMUTE:"em-unmute",FOOTER:"em-footer",ERROR:"em-error",CLICK_PLAY:"em-click-play"});function Ce(e,t,n,r,i){gtag("config",e.gaAccount,{send_page_view:!1});var o=function(e){return function(t,n){var r="".concat(e.contentType,"|").concat(e.secondaryTitle,"|").concat(e.season,"|").concat(e.episode,"|").concat(e.videoType)+(n?"|"+n:"");gtag("event","em",{event_label:t,event_category:r})}}(t);Array.from(document.querySelectorAll("[data-ga-tracing]")).forEach(function(e){e.addEventListener(e.dataset.gaAction,function(t){return o(e.dataset.gaLabel)})}),n.one(n.EVENT.IMPRESSION,function(e){return o(Pe.FIRST_IMPRESSION)}).one(n.EVENT.FULLSCREEN,function(e){return o(Pe.FULLSCREEN)}).on(n.EVENT.IMPRESSION,function(e){return o(Pe.VOD_IMPRESSION)}).on(n.EVENT.CLICK_LOGO,function(e){return"*litv_logo"==e.id&&o(Pe.LOGO_CLICK)}).on(n.EVENT.CLICK_CAPTION,function(e){return o(Pe.SERIES_CLICK)}).on(n.EVENT.ERROR,function(e){return o(Pe.ERROR,e.error.code)}).on(n.EVENT.MUTE,function e(t){if(1==t.muted)return;o(Pe.UNMUTE);n.off(n.EVENT.MUTE,e)}),0!=e.autoPlay&&1!=n.platformInfo.isIOSAndInIFrame||n.one(n.EVENT.CLICK,function(e){return o(Pe.CLICK_PLAY)}),r.one(r.EVENT.OPENED,function(e){return e.conscious&&o(Pe.MORE_CLICK)})}n(58),n(59);var ke=n(46),Le=n.n(ke);window.ns_=Le.a;var Re,De,Oe="18986219";window._comscore=window._comscore||[],_comscore.push({c1:"7",c2:Oe,c3:"100001"}),Re=document.createElement("script"),De=document.getElementsByTagName("script")[0],Re.async=!0,Re.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",De.parentNode.insertBefore(Re,De);var Me={prerolls:"LinearOnDemandPreRoll",jingle:"LinearOnDemandPreRoll",midrolls:"LinearOnDemandMidRoll",postrolls:"LinearOnDemandPostRoll",live:"LinearLive",other:"Other"},xe="*null",Ne={ns_st_st:"LiTV",ns_st_pu:"LiTV",ns_st_ge:xe,ns_st_ddt:xe,ns_st_tdt:xe,ns_st_ia:xe,ns_st_ce:xe,c4:xe,c6:xe};function je(e,t){var n;function r(r){var i=t.duration,o=i>6e5?"LongFormOnDemand":"ShortFormOnDemand";n.playVideoContentPart(function(e,t){var n={ns_st_pr:e.title,ns_st_ep:e.secondaryTitle,ns_st_sn:e.season,ns_st_en:e.episode,ns_st_ti:e.assetsId,ns_st_ci:e.assetsId,ns_st_cl:t.toString(),c3:e.contentType};return Object.assign(n,Ne)}(e,i),Le.a.StreamingTag.ContentType[o])}function i(){n&&n.stop()}t.on(t.EVENT.LOAD,function(){n=new Le.a.StreamingTag({customerC2:Oe})}).on(t.EVENT.LINEAR_AD_MEDIA_START,function(e){var t,r=e.trunkType;t=r in Me?Me[r]:Me.other;n.playVideoAdvertisement({ns_st_cl:e.duration},Le.a.StreamingTag.AdType[t])}).on(t.EVENT.LINEAR_AD_MEDIA_COMPLETE,i).on(t.EVENT.IMPRESSION,r).on(t.EVENT.RESUM_FOR_AD,r).on(t.EVENT.PAUSE_FOR_AD,i)}var Ue=function e(t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ce(t,n,r,i),je(n,r)};n(163);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e,t,n){return(Ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ye(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We={STOP:"stop",RESTART:"restart",USER_ACTION:"user_action"},He=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ge(this,Ye(t).call(this))).$player=e,r.config=n,r.stoped=!1,r.clipCount=0;return e.addEventListener("mouseup",function t(n){e.removeEventListener("mouseup",t),r.calcAutoPlay=function(){return!0},r.trigger(We.USER_ACTION),1==r.stoped&&r.trigger(We.RESTART)}),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,te),n=t,(r=[{key:"calcAutoPlay",value:function(){if(0==this.config.autoPlay)return!1;var e=this.config.clipCount;return e<1||(++this.clipCount<=e||(this.stoped=!0,this.trigger(We.STOP),!1))}},{key:"on",value:function(){return Ve(Ye(t.prototype),"on",this).apply(this,arguments),this}},{key:"one",value:function(){return Ve(Ye(t.prototype),"one",this).apply(this,arguments),this}},{key:"off",value:function(){return Ve(Ye(t.prototype),"off",this).apply(this,arguments),this}}])&&Be(n.prototype,r),i&&Be(n,i),t}();function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function qe(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){Ke(o,r,i,a,s,"next",e)}function s(e){Ke(o,r,i,a,s,"throw",e)}a(void 0)})}}He.prototype.EVENT=He.EVENT=We,window.Hls=Ie.a,window.flowplayer=i.a,window.lepInfo={version:"1.2.4",sw_update_date:"1/3/2020, 3:31:04 PM"};var Je,Xe,Qe,$e,et,tt,nt,rt,it,ot,at,st,lt=!0,ut=!1,ct=0;function dt(){return(dt=qe(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return tt=document.getElementById("em_player"),nt=document.getElementById("player"),rt=document.getElementById("title"),it=document.getElementById("logo"),et=new ye(tt),e.next=7,(new x).init(lepInfo);case 7:1==(Je=e.sent).hasFail&&et.resolve(Je.error,ye.ERROR_SOURCE.CONFIG),Xe=new $(Je),Qe=new Te(Je),ht(Je),ut=1==b&&1==Je.dynamicBuild,at=new He(nt,Je),st=new pt,$e=o.a.create(nt,{decideVisible:!0,interObsHosting:ut,visibleThreshold:Je.visibleThreshold||.2,vpaidMode:Je.vpaidMode,displayClickToUnMute:!0,customApiUrlConfig:{cdiApi:{development:[],staging:Je.stagingCdiUrls,production:Je.cdiUrls}}}),ot=new le(Je.recommendDisplay,$e,Xe.getRecommend),new Ue(Je,Xe,$e,ot,at),$e.on(o.a.EVENT.FILM_FINISH,st.refresh),$e.on(o.a.EVENT.ENDED,st.playNext),$e.on(o.a.EVENT.ERROR,function(e){return et.resolve(e.error,ye.ERROR_SOURCE.PLAYER)}),$e.on(o.a.EVENT.MUTE,function(e){lt=e.muted}),$e.on(o.a.EVENT.LINEAR_AD_MEDIA_START,function(e){return tt.classList.add("cut-out")}),$e.on(o.a.EVENT.LINEAR_AD_MEDIA_COMPLETE,function(e){return tt.classList.remove("cut-out")}),$e.on(o.a.EVENT.AD_ERROR,function(e){return tt.classList.remove("cut-out")}),et.on(et.EVENT.OCCURRED_ERROR,function(e){nt.classList.add("display-none"),$e&&$e.stop()}),et.setInfo(Je,Xe),st.refresh(),st.playNext(),1==ut&&window.addEventListener("message",ft);case 30:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ft(e){var t=e.data;if("string"==typeof t){var n=/^ppnplayer\:\/\/(.*)/g.exec(t);if(null!=n)switch(n[1]){case"in_viewport":$e.viewportIn();break;case"out_viewport":$e.viewportOut()}}}var pt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refreshP,this.refresh=this.refresh.bind(this),this.playNext=this.playNext.bind(this)}var t,n,r;return t=e,(n=[{key:"refresh",value:function(){return this.refreshP=new Promise(function(){var e=qe(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe.next();case 3:n=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),et.resolve(e.t0,ye.ERROR_SOURCE.META),e.abrupt("return");case 10:0==n.done&&(rt.innerText=Xe.secondaryTitle,rt.href=Xe.bottomLink||""),$e.countdownComponent.setThumbnail(Xe.image),t(n);case 13:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}()),this.refreshP}},{key:"playNext",value:function(){this.refreshP.then(function(e){if(++ct>Je.countLimit)location.reload();else if(lepInfo.count=ct,1!=e.done){var t,n=(t=Xe.assetsId,Qe.getContentUrl(t).catch(function(e){return et.resolve(e,ye.ERROR_SOURCE.GET_URL),e})),r=at.calcAutoPlay();$e.setSrc({src:n,startTime:Xe.startTime,mediaMode:Je.playerMediaMode,assetId:Xe.assetsId,caption:{text:Xe.secondaryTitle,link:Xe.insideTitleLink},cover:Xe.image,enableCountdown:!0,midrollTimeCodes:Xe.midrollTimeCodes,muted:lt,playAds:!0,autoPlay:r,liadMeta:Xe.liad,hiddenCheck:!0}),m()&&$e.countdownComponent.setThumbnail(""),1==ut&&window.top.postMessage("ppnplayer://check_visible","*")}else ot.open()})}}])&&Ze(t.prototype,n),r&&Ze(t,r),e}();function ht(e){0==e.logoDisplay?(tt.classList.add("disable-logo"),it.href=""):it.href=e.logoLink||"",1==e.bottom&&tt.classList.add("has-bottom"),e.fontSize&&tt.classList.add("font-"+e.fontSize);var t=document.createElement("LINK");t.rel="canonical",t.href=e.getDiversionLink(),document.querySelector("head").appendChild(t)}!function(){dt.apply(this,arguments)}()}]);
//# sourceMappingURL=all.91df4b90.js.map