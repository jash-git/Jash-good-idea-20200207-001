(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{12:function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"j",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"d",(function(){return v}));var i="loading",o="idle",a="ready",r="error",s="finished",c="fetching",u="invalid",l="unchecked",d="opened",f="open-loading",v="hidden";e.l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,r=e,c=null,u=n,l=void 0!==a?a:t.className;function d(){return{id:l,prevState:c,state:r}}return t.dataset.state=r,console.log("log---id",l),{dispatchAction:function(e){c=r,t.dataset.state=e,r=e,u&&console.log(d())},get getState(){return r},get getPrevState(){return c},get isLoading(){return r==i},get isEnd(){return r===s},debugging:function(t){u=t}}}},419:function(t,e,n){"use strict";n.r(e);var i=n(0),o=n(2),a=n(11),r=n(1),s=n(3),c=n(5),u=n(12);function l(t,e,n,i,o,a,r){try{var s=t[a](r),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function r(t){l(a,i,o,r,s,"next",t)}function s(t){l(a,i,o,r,s,"throw",t)}r(void 0)}))}}var f=document.querySelector(".navigation-submenu"),v=document.querySelector(".navigation-submenu .container"),g=document.querySelector(".navigation-submenu__footer .container"),m=document.querySelector(".navigation-submenu__wrapper"),h=document.querySelector(".navigation"),p=document.querySelector(".navigation-submenu__selector"),b=document.querySelector(".left-arrow"),L=document.querySelector(".right-arrow"),y=document.querySelector(".navigation"),w=null,S={},q=Object(u.l)(f,u.e),x=!1;function X(t){console.log("initSubMenu call");var e=420,n=220;S={isDrag:!1,isTouch:"undefined"!=typeof window&&"ontouchstart"in window,startX:null,direction:null,dragOffsetX:0,translateX:0,tempX:0,thresholdWidth:e*t-v.clientWidth+n+80,position:[]},E(0),b.classList.add("disabled"),L.classList.remove("disabled"),S.position=new Array(t).fill(t).map((function(t,n){return n*e}))}function k(){console.log("reset call");var t=document.querySelector(".navigation-submenu__iframe");t&&t.remove(),m.setAttribute("style","")}function E(t){console.log("position",t),m.setAttribute("style","transform: translate3d(".concat(t,"px, 0, 0);"))}function A(){if(S.translateX>=0)return console.log("goToFirst"),E(0),O(0),S.translateX=0,void b.classList.add("disabled");if(-S.translateX>=S.thresholdWidth)return console.log("goToLast"),E(-S.thresholdWidth),O(S.position.length-1),S.translateX=-S.thresholdWidth,void L.classList.add("disabled");for(var t=0;t<S.position.length;t++){var e=S.position;if(-S.translateX>=e[t]&&-S.translateX<e[t+1]){O(t);break}}b.classList.remove("disabled"),L.classList.remove("disabled")}function O(t){m.querySelector(".context-box")&&(m.querySelector(".context-box.active").classList.remove("active"),m.querySelector('.context-box[data-index="'.concat(t,'"]')).classList.add("active")),p.querySelector(".list-ellipsis.active").classList.remove("active"),p.querySelectorAll(".list-ellipsis")[t].classList.add("active")}function _(t,e){console.log("goToPosition",t),E(-t),S.translateX=-t,A()}function j(t){if(!x){q.dispatchAction(u.e);var e=document.querySelector(".navigation-list.on");e&&e.classList.remove("on"),h.dataset.state=u.e}}function T(){return(T=d(regeneratorRuntime.mark((function t(e){var n,i,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.target.dataset.id,n,(i=document.querySelector(".navigation-list.on"))&&i.classList.remove("on"),e.target.classList.add("on"),h.dataset.state=u.h,k(),q.dispatchAction(u.i),t.prev=8,t.next=11,Object(s.a)(o.a.subMenu,{id:n});case 11:if((r=t.sent).state){t.next=14;break}return t.abrupt("return");case 14:if(l=r.hasOwnProperty("footer")?r.footer:{},!r.frame){t.next=22;break}return P(r.frameHref),C(),Object(a.f)([],m),Object(a.g)(l,g),q.dispatchAction(u.h),t.abrupt("return");case 22:Object(a.f)(r.dataset,m),N(r.dataset),Object(a.g)(l,g),X(r.dataset.length),q.dispatchAction(u.h),O(0),t.next=36;break;case 30:t.prev=30,t.t0=t.catch(8),q.dispatchAction(u.a),e.target.classList.remove("on"),h.dataset.state=u.e,c.a.showNotification({message:t.t0,title:"錯誤"});case 36:case"end":return t.stop()}}),t,null,[[8,30]])})))).apply(this,arguments)}function C(){for(;p.firstChild;)p.firstChild.parentNode.removeChild(p.firstChild)}function N(t){C(),t.forEach((function(t,e){var n=document.createElement("span");n.className="list-ellipsis",0===e&&n.classList.add("active"),n.textContent=t.title,n.dataset.index=e,n.dataset.id=t.id,n.addEventListener("click",(function(t){t.preventDefault(),_(S.position[e]),O(e)})),p.appendChild(n)}))}function P(t){var e=document.createElement("iframe");e.className="navigation-submenu__iframe",e.src=t,e.scrolling="no",document.querySelector(".navigation-submenu .container").prepend(e)}b.addEventListener("click",(function(t){if(!b.classList.contains("disabled")){var e=Math.abs(S.translateX);console.log("toPrev, currentX:",e),_(Object.assign([],S.position).reverse().find((function(t){return t<e})))}})),L.addEventListener("click",(function(t){if(!L.classList.contains("disabled")){var e=Math.abs(S.translateX);console.log("toNext, currentX:",e),_(S.position.find((function(t){return t>e})))}})),y.addEventListener("mouseover",(function(t){if(!(window.innerWidth<i.b.tablet)){var e=t.target;e.classList.contains("navigation--sales")||e.classList.contains(".home")||e.classList.contains("navigation-list")&&(w&&clearTimeout(w),w=setTimeout((function(){!function(t){T.apply(this,arguments)}(t)}),500))}})),y.addEventListener("mouseleave",(function(t){w&&clearTimeout(w),w=setTimeout((function(){j()}),500)})),f.addEventListener("mouseover",(function(){x=!0})),f.addEventListener("mouseleave",(function(){x=!1})),f.addEventListener("mouseleave",Object(r.b)(j,500))}}]);